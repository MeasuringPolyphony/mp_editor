var SX=Object.defineProperty,xX=Object.defineProperties,MX=Object.getOwnPropertyDescriptors,tL=Object.getOwnPropertySymbols,TX=Object.prototype.hasOwnProperty,IX=Object.prototype.propertyIsEnumerable,nL=(lt,Fe,Se)=>Fe in lt?SX(lt,Fe,{enumerable:!0,configurable:!0,writable:!0,value:Se}):lt[Fe]=Se,Pe=(lt,Fe)=>{for(var Se in Fe||(Fe={}))TX.call(Fe,Se)&&nL(lt,Se,Fe[Se]);if(tL)for(var Se of tL(Fe))IX.call(Fe,Se)&&nL(lt,Se,Fe[Se]);return lt},Ui=(lt,Fe)=>xX(lt,MX(Fe));(self.webpackChunkeditor=self.webpackChunkeditor||[]).push([[179],{933:(lt,Fe,Se)=>{Fe.log=function(...K){return"object"==typeof console&&console.log&&console.log(...K)},Fe.formatArgs=function(K){if(K[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+K[0]+(this.useColors?"%c ":" ")+"+"+lt.exports.humanize(this.diff),!this.useColors)return;const B="color: "+this.color;K.splice(1,0,B,"color: inherit");let W=0,ce=0;K[0].replace(/%[a-zA-Z%]/g,ue=>{"%%"!==ue&&(W++,"%c"===ue&&(ce=W))}),K.splice(ce,0,B)},Fe.save=function(K){try{K?Fe.storage.setItem("debug",K):Fe.storage.removeItem("debug")}catch(B){}},Fe.load=function(){let K;try{K=Fe.storage.getItem("debug")}catch(B){}return!K&&"undefined"!=typeof process&&"env"in process&&(K=process.env.DEBUG),K},Fe.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},Fe.storage=function(){try{return localStorage}catch(K){}}(),Fe.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],lt.exports=Se(417)(Fe);const{formatters:J}=lt.exports;J.j=function(K){try{return JSON.stringify(K)}catch(B){return"[UnexpectedJSONParseError]: "+B.message}}},417:(lt,Fe,Se)=>{lt.exports=function(E){function N(ue){let be=0;for(let te=0;te<ue.length;te++)be=(be<<5)-be+ue.charCodeAt(te),be|=0;return O.colors[Math.abs(be)%O.colors.length]}function O(ue){let be;function te(...Ae){if(!te.enabled)return;const q=te,T=Number(new Date);q.diff=T-(be||T),q.prev=be,q.curr=T,be=T,Ae[0]=O.coerce(Ae[0]),"string"!=typeof Ae[0]&&Ae.unshift("%O");let H=0;Ae[0]=Ae[0].replace(/%([a-zA-Z%])/g,(me,Ue)=>{if("%%"===me)return me;H++;const G=O.formatters[Ue];return"function"==typeof G&&(me=G.call(q,Ae[H]),Ae.splice(H,1),H--),me}),O.formatArgs.call(q,Ae),(q.log||O.log).apply(q,Ae)}return te.namespace=ue,te.enabled=O.enabled(ue),te.useColors=O.useColors(),te.color=N(ue),te.destroy=se,te.extend=Ce,"function"==typeof O.init&&O.init(te),O.instances.push(te),te}function se(){const ue=O.instances.indexOf(this);return-1!==ue&&(O.instances.splice(ue,1),!0)}function Ce(ue,be){const te=O(this.namespace+(void 0===be?":":be)+ue);return te.log=this.log,te}function W(ue){return ue.toString().substring(2,ue.toString().length-2).replace(/\.\*\?$/,"*")}return O.debug=O,O.default=O,O.coerce=function(ue){return ue instanceof Error?ue.stack||ue.message:ue},O.disable=function(){const ue=[...O.names.map(W),...O.skips.map(W).map(be=>"-"+be)].join(",");return O.enable(""),ue},O.enable=function(ue){let be;O.save(ue),O.names=[],O.skips=[];const te=("string"==typeof ue?ue:"").split(/[\s,]+/),Ae=te.length;for(be=0;be<Ae;be++)!te[be]||("-"===(ue=te[be].replace(/\*/g,".*?"))[0]?O.skips.push(new RegExp("^"+ue.substr(1)+"$")):O.names.push(new RegExp("^"+ue+"$")));for(be=0;be<O.instances.length;be++){const q=O.instances[be];q.enabled=O.enabled(q.namespace)}},O.enabled=function(ue){if("*"===ue[ue.length-1])return!0;let be,te;for(be=0,te=O.skips.length;be<te;be++)if(O.skips[be].test(ue))return!1;for(be=0,te=O.names.length;be<te;be++)if(O.names[be].test(ue))return!0;return!1},O.humanize=Se(977),Object.keys(E).forEach(ue=>{O[ue]=E[ue]}),O.instances=[],O.names=[],O.skips=[],O.formatters={},O.selectColor=N,O.enable(O.load()),O}},447:function(lt,Fe){var E;void 0!==(E=function(N){var ue,be,O=window,se=document,Ce="mousemove",J="mouseup",K="mousedown",B="EventListener",W="add"+B,ce="remove"+B,te=[],Ae=function(q,T){for(q=0;q<te.length;)(T=(T=te[q++]).container||T)[ce](K,T.md,0),O[ce](J,T.mu,0),O[ce](Ce,T.mm,0);for(te=[].slice.call(se.getElementsByClassName("dragscroll")),q=0;q<te.length;)!function(j,H,Q,me,Ue,G){(G=j.container||j)[W](K,G.md=function($){(!j.hasAttribute("nochilddrag")||se.elementFromPoint($.pageX,$.pageY)===G)&&(me=1,H=$.clientX,Q=$.clientY,$.preventDefault())},0),O[W](J,G.mu=function(){me=0},0),O[W](Ce,G.mm=function($){me&&((Ue=j.scroller||j).scrollLeft-=ue=-H+(H=$.clientX),Ue.scrollTop-=be=-Q+(Q=$.clientY),j===se.body&&((Ue=se.documentElement).scrollLeft-=ue,Ue.scrollTop-=be))},0)}(te[q++])};"complete"===se.readyState?Ae():O[W]("load",Ae,0),N.reset=Ae,window.resetDragscroll=Ae}.apply(Fe,[Fe]))&&(lt.exports=E)},733:()=>{var lt,Fe,Se,Oe;lt=window.requestAnimationFrame,Fe="ontouchend"in document,Se=function(){for(var E=1;E<arguments.length;E++)for(var N in arguments[E])arguments[E].hasOwnProperty(N)&&(arguments[0][N]=arguments[E][N]);return arguments[0]},(Oe=function(E,N){return this.settings=Se({},Oe.DEFAULTS,N),this.el=E,this.ACTIVE_CLASS="kinetic-active",this._initElements(),this.el._VanillaKinetic=this,this}).DEFAULTS={cursor:"move",decelerate:!0,triggerHardware:!1,threshold:0,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,invert:!1,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},Oe.prototype.start=function(E){this.settings=Se(this.settings,E),this.velocity=E.velocity||this.velocity,this.velocityY=E.velocityY||this.velocityY,this.settings.decelerate=!1,this._move()},Oe.prototype.end=function(){this.settings.decelerate=!0},Oe.prototype.stop=function(){this.velocity=0,this.velocityY=0,this.settings.decelerate=!0,"function"==typeof this.settings.stopped&&this.settings.stopped.call(this)},Oe.prototype.detach=function(){this._detachListeners(),this.el.classList.remove(this.ACTIVE_CLASS),this.el.style.cursor=""},Oe.prototype.attach=function(){this.el.classList.contains(this.ACTIVE_CLASS)||(this._attachListeners(),this.el.classList.add(this.ACTIVE_CLASS),this.el.style.cursor=this.settings.cursor)},Oe.prototype._initElements=function(){this.el.classList.add(this.ACTIVE_CLASS),Se(this,{xpos:null,prevXPos:!1,ypos:null,prevYPos:!1,mouseDown:!1,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null}),this.velocity=0,this.velocityY=0;var E=this;this.documentResetHandler=function(){E._resetMouse.apply(E)};var N=document.documentElement;if(N.addEventListener("mouseup",this.documentResetHandler,!1),N.addEventListener("click",this.documentResetHandler,!1),this._initEvents(),this.el.style.cursor=this.settings.cursor,this.settings.triggerHardware)for(var O=["","-ms-","-webkit-","-moz-"],se={transform:"translate3d(0,0,0)",perspective:"1000","backface-visibility":"hidden"},Ce=0;Ce<O.length;Ce++){var J=O[Ce];for(var K in se)se.hasOwnProperty(K)&&(this.el.style[J+K]=se[K])}},Oe.prototype._initEvents=function(){var E=this;this.settings.events={touchStart:function(N){var O;E._useTarget(N.target,N)&&(O=N.originalEvent.touches[0],E.threshold=E._threshold(N.target,N),E._start(O.clientX,O.clientY),N.stopPropagation())},touchMove:function(N){var O;E.mouseDown&&(E._inputmove((O=N.originalEvent.touches[0]).clientX,O.clientY),N.preventDefault&&N.preventDefault())},inputDown:function(N){E._useTarget(N.target,N)&&(E.threshold=E._threshold(N.target,N),E._start(N.clientX,N.clientY),E.elementFocused=N.target,"IMG"===N.target.nodeName&&N.preventDefault(),N.stopPropagation())},inputEnd:function(N){E._useTarget(N.target,N)&&(E._end(),E.elementFocused=null,N.preventDefault&&N.preventDefault())},inputMove:function(N){E.mouseDown&&(E._inputmove(N.clientX,N.clientY),N.preventDefault&&N.preventDefault())},scroll:function(N){"function"==typeof E.settings.moved&&E.settings.moved.call(E,E.settings),N.preventDefault&&N.preventDefault()},inputClick:function(N){if(Math.abs(E.velocity)>0||Math.abs(E.velocityY)>0)return N.preventDefault(),N.stopPropagation&&N.stopPropagation(),!1},dragStart:function(N){if(E._useTarget(N.target,N)&&E.elementFocused)return N.preventDefault&&N.preventDefault(),N.stopPropagation&&N.stopPropagation(),!1},selectStart:function(N){return"function"==typeof E.settings.selectStart?E.settings.selectStart.apply(E,arguments):E._useTarget(N.target,N)?(N.preventDefault&&N.preventDefault(),N.stopPropagation&&N.stopPropagation(),!1):void 0}},this._attachListeners()},Oe.prototype._inputmove=function(E,N){if((!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout))&&(this.lastMove=new Date,this.mouseDown&&(this.xpos||this.ypos))){var O=E-this.xpos,se=N-this.ypos;if(this.settings.invert&&(O*=-1,se*=-1),this.threshold>0){var Ce=Math.sqrt(O*O+se*se);if(this.threshold>Ce)return;this.threshold=0}this.elementFocused&&(this.elementFocused.blur(),this.elementFocused=null,this.el.focus()),this.settings.decelerate=!1,this.velocity=this.velocityY=0;var J=this.scrollLeft(),K=this.scrollTop();this.scrollLeft(this.settings.x?J-O:J),this.scrollTop(this.settings.y?K-se:K),this.prevXPos=this.xpos,this.prevYPos=this.ypos,this.xpos=E,this.ypos=N,this._calculateVelocities(),this._setMoveClasses(this.settings.movingClass),"function"==typeof this.settings.moved&&this.settings.moved.call(this,this.settings)}},Oe.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity),this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity),this.settings.invert&&(this.velocity*=-1,this.velocityY*=-1)},Oe.prototype._end=function(){this.xpos&&this.prevXPos&&!1===this.settings.decelerate&&(this.settings.decelerate=!0,this._calculateVelocities(),this.xpos=this.prevXPos=this.mouseDown=!1,this._move())},Oe.prototype._useTarget=function(E,N){return"function"!=typeof this.settings.filterTarget||!1!==this.settings.filterTarget.call(this,E,N)},Oe.prototype._threshold=function(E,N){return"function"==typeof this.settings.threshold?this.settings.threshold.call(this,E,N):this.settings.threshold},Oe.prototype._start=function(E,N){this.mouseDown=!0,this.velocity=this.prevXPos=0,this.velocityY=this.prevYPos=0,this.xpos=E,this.ypos=N},Oe.prototype._resetMouse=function(){this.xpos=!1,this.ypos=!1,this.mouseDown=!1},Oe.prototype._decelerateVelocity=function(E,N){return 0===Math.floor(Math.abs(E))?0:E*N},Oe.prototype._capVelocity=function(E,N){var O=E;return E>0?E>N&&(O=N):E<0-N&&(O=0-N),O},Oe.prototype._setMoveClasses=function(E){var N=this.settings,O=this.el;O.classList.remove(N.movingClass.up),O.classList.remove(N.movingClass.down),O.classList.remove(N.movingClass.left),O.classList.remove(N.movingClass.right),O.classList.remove(N.deceleratingClass.up),O.classList.remove(N.deceleratingClass.down),O.classList.remove(N.deceleratingClass.left),O.classList.remove(N.deceleratingClass.right),this.velocity>0&&O.classList.add(E.right),this.velocity<0&&O.classList.add(E.left),this.velocityY>0&&O.classList.add(E.down),this.velocityY<0&&O.classList.add(E.up)},Oe.prototype._move=function(){var E=this._getScroller(),N=this,O=this.settings;O.x&&E.scrollWidth>0?(this.scrollLeft(this.scrollLeft()+this.velocity),Math.abs(this.velocity)>0&&(this.velocity=O.decelerate?N._decelerateVelocity(this.velocity,O.slowdown):this.velocity)):this.velocity=0,O.y&&E.scrollHeight>0?(this.scrollTop(this.scrollTop()+this.velocityY),Math.abs(this.velocityY)>0&&(this.velocityY=O.decelerate?N._decelerateVelocity(this.velocityY,O.slowdown):this.velocityY)):this.velocityY=0,N._setMoveClasses(O.deceleratingClass),"function"==typeof O.moved&&O.moved.call(this,O),Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0?this.moving||(this.moving=!0,lt(function(){N.moving=!1,N._move()})):N.stop()},Oe.prototype._getScroller=function(){return this.el},Oe.prototype.scrollLeft=function(E){var N=this._getScroller();if("number"!=typeof E)return N.scrollLeft;N.scrollLeft=E,this.settings.scrollLeft=E},Oe.prototype.scrollTop=function(E){var N=this._getScroller();if("number"!=typeof E)return N.scrollTop;N.scrollTop=E,this.settings.scrollTop=E},Oe.prototype._attachListeners=function(){var E=this.el,N=this.settings;Fe&&(E.addEventListener("touchstart",N.events.touchStart,!1),E.addEventListener("touchend",N.events.inputEnd,!1),E.addEventListener("touchmove",N.events.touchMove,!1)),E.addEventListener("mousedown",N.events.inputDown,!1),E.addEventListener("mouseup",N.events.inputEnd,!1),E.addEventListener("mousemove",N.events.inputMove,!1),E.addEventListener("click",N.events.inputClick,!1),E.addEventListener("scroll",N.events.scroll,!1),E.addEventListener("selectstart",N.events.selectStart,!1),E.addEventListener("dragstart",N.events.dragStart,!1)},Oe.prototype._detachListeners=function(){var E=this.el,N=this.settings;Fe&&(E.removeEventListener("touchstart",N.events.touchStart,!1),E.removeEventListener("touchend",N.events.inputEnd,!1),E.removeEventListener("touchmove",N.events.touchMove,!1)),E.removeEventListener("mousedown",N.events.inputDown,!1),E.removeEventListener("mouseup",N.events.inputEnd,!1),E.removeEventListener("mousemove",N.events.inputMove,!1),E.removeEventListener("click",N.events.inputClick,!1),E.removeEventListener("scroll",N.events.scroll,!1),E.removeEventListener("selectstart",N.events.selectStart,!1),E.removeEventListener("dragstart",N.events.dragStart,!1)},window.VanillaKinetic=Oe},557:function(lt,Fe){var Oe;!function(E){"use strict";var O={s:1,n:0,d:1};function se(T){function j(){var Q=Error.apply(this,arguments);Q.name=this.name=T,this.stack=Q.stack,this.message=Q.message}function H(){}return H.prototype=Error.prototype,j.prototype=new H,j}var Ce=q.DivisionByZero=se("DivisionByZero"),J=q.InvalidParameter=se("InvalidParameter");function K(T,j){return isNaN(T=parseInt(T,10))&&B(),T*j}function B(){throw new J}function W(T){for(var j={},H=T,Q=2,me=4;me<=H;){for(;H%Q==0;)H/=Q,j[Q]=(j[Q]||0)+1;me+=1+2*Q++}return H!==T?H>1&&(j[H]=(j[H]||0)+1):j[T]=(j[T]||0)+1,j}var ce=function(T,j){var ee,H=0,Q=1,me=1,Ue=0,G=0,$=0,De=1,he=1,k=0,ne=1,ye=1,ve=1,_e=1e7;if(null!=T)if(void 0!==j)me=(H=T)*(Q=j);else switch(typeof T){case"object":"d"in T&&"n"in T?(H=T.n,Q=T.d,"s"in T&&(H*=T.s)):0 in T?(H=T[0],1 in T&&(Q=T[1])):B(),me=H*Q;break;case"number":if(T<0&&(me=T,T=-T),T%1==0)H=T;else if(T>0){for(T>=1&&(T/=he=Math.pow(10,Math.floor(1+Math.log(T)/Math.LN10)));ne<=_e&&ve<=_e;){if(T===(ee=(k+ye)/(ne+ve))){ne+ve<=_e?(H=k+ye,Q=ne+ve):ve>ne?(H=ye,Q=ve):(H=k,Q=ne);break}T>ee?(k+=ye,ne+=ve):(ye+=k,ve+=ne),ne>_e?(H=ye,Q=ve):(H=k,Q=ne)}H*=he}else(isNaN(T)||isNaN(j))&&(Q=H=NaN);break;case"string":if(null===(ne=T.match(/\d+|./g))&&B(),"-"===ne[k]?(me=-1,k++):"+"===ne[k]&&k++,ne.length===k+1?G=K(ne[k++],me):"."===ne[k+1]||"."===ne[k]?("."!==ne[k]&&(Ue=K(ne[k++],me)),(1+ ++k===ne.length||"("===ne[k+1]&&")"===ne[k+3]||"'"===ne[k+1]&&"'"===ne[k+3])&&(G=K(ne[k],me),De=Math.pow(10,ne[k].length),k++),("("===ne[k]&&")"===ne[k+2]||"'"===ne[k]&&"'"===ne[k+2])&&($=K(ne[k+1],me),he=Math.pow(10,ne[k+1].length)-1,k+=3)):"/"===ne[k+1]||":"===ne[k+1]?(G=K(ne[k],me),De=K(ne[k+2],1),k+=3):"/"===ne[k+3]&&" "===ne[k+1]&&(Ue=K(ne[k],me),G=K(ne[k+2],me),De=K(ne[k+4],1),k+=5),ne.length<=k){me=H=$+(Q=De*he)*Ue+he*G;break}default:B()}if(0===Q)throw new Ce;O.s=me<0?-1:1,O.n=Math.abs(H),O.d=Math.abs(Q)};function Ae(T,j){if(!T)return j;if(!j)return T;for(;;){if(!(T%=j))return j;if(!(j%=T))return T}}function q(T,j){if(!(this instanceof q))return new q(T,j);ce(T,j),T=Ae(O.d,O.n),this.s=O.s,this.n=O.n/T,this.d=O.d/T}q.prototype={s:1,n:0,d:1,abs:function(){return new q(this.n,this.d)},neg:function(){return new q(-this.s*this.n,this.d)},add:function(T,j){return ce(T,j),new q(this.s*this.n*O.d+O.s*this.d*O.n,this.d*O.d)},sub:function(T,j){return ce(T,j),new q(this.s*this.n*O.d-O.s*this.d*O.n,this.d*O.d)},mul:function(T,j){return ce(T,j),new q(this.s*O.s*this.n*O.n,this.d*O.d)},div:function(T,j){return ce(T,j),new q(this.s*O.s*this.n*O.d,this.d*O.n)},clone:function(){return new q(this)},mod:function(T,j){return isNaN(this.n)||isNaN(this.d)?new q(NaN):void 0===T?new q(this.s*this.n%this.d,1):(ce(T,j),0===O.n&&0===this.d&&q(0,0),new q(this.s*(O.d*this.n)%(O.n*this.d),O.d*this.d))},gcd:function(T,j){return ce(T,j),new q(Ae(O.n,this.n)*Ae(O.d,this.d),O.d*this.d)},lcm:function(T,j){return ce(T,j),0===O.n&&0===this.n?new q:new q(O.n*this.n,Ae(O.n,this.n)*Ae(O.d,this.d))},ceil:function(T){return T=Math.pow(10,T||0),isNaN(this.n)||isNaN(this.d)?new q(NaN):new q(Math.ceil(T*this.s*this.n/this.d),T)},floor:function(T){return T=Math.pow(10,T||0),isNaN(this.n)||isNaN(this.d)?new q(NaN):new q(Math.floor(T*this.s*this.n/this.d),T)},round:function(T){return T=Math.pow(10,T||0),isNaN(this.n)||isNaN(this.d)?new q(NaN):new q(Math.round(T*this.s*this.n/this.d),T)},inverse:function(){return new q(this.s*this.d,this.n)},pow:function(T,j){if(ce(T,j),1===O.d)return O.s<0?new q(Math.pow(this.s*this.d,O.n),Math.pow(this.n,O.n)):new q(Math.pow(this.s*this.n,O.n),Math.pow(this.d,O.n));if(this.s<0)return null;var H=W(this.n),Q=W(this.d),me=1,Ue=1;for(var G in H)if("1"!==G){if("0"===G){me=0;break}if(H[G]*=O.n,H[G]%O.d!=0)return null;H[G]/=O.d,me*=Math.pow(G,H[G])}for(var G in Q)if("1"!==G){if(Q[G]*=O.n,Q[G]%O.d!=0)return null;Q[G]/=O.d,Ue*=Math.pow(G,Q[G])}return O.s<0?new q(Ue,me):new q(me,Ue)},equals:function(T,j){return ce(T,j),this.s*this.n*O.d==O.s*O.n*this.d},compare:function(T,j){ce(T,j);var H=this.s*this.n*O.d-O.s*O.n*this.d;return(0<H)-(H<0)},simplify:function(T){if(isNaN(this.n)||isNaN(this.d))return this;var j=this.abs().toContinued();function H(Ue){return 1===Ue.length?new q(Ue[0]):H(Ue.slice(1)).inverse().add(Ue[0])}T=T||.001;for(var Q=0;Q<j.length;Q++){var me=H(j.slice(0,Q+1));if(me.sub(this.abs()).abs().valueOf()<T)return me.mul(this.s)}return this},divisible:function(T,j){return ce(T,j),!(!(O.n*this.d)||this.n*O.d%(O.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(T){var j,H="",Q=this.n,me=this.d;return this.s<0&&(H+="-"),1===me?H+=Q:(T&&(j=Math.floor(Q/me))>0&&(H+=j,H+=" ",Q%=me),H+=Q,H+="/",H+=me),H},toLatex:function(T){var j,H="",Q=this.n,me=this.d;return this.s<0&&(H+="-"),1===me?H+=Q:(T&&(j=Math.floor(Q/me))>0&&(H+=j,Q%=me),H+="\\frac{",H+=Q,H+="}{",H+=me,H+="}"),H},toContinued:function(){var T,j=this.n,H=this.d,Q=[];if(isNaN(j)||isNaN(H))return Q;do{Q.push(Math.floor(j/H)),T=j%H,j=H,H=T}while(1!==j);return Q},toString:function(T){var H=this.n,Q=this.d;if(isNaN(H)||isNaN(Q))return"NaN";T=T||15;var me=function(T,j){for(;j%2==0;j/=2);for(;j%5==0;j/=5);if(1===j)return 0;for(var H=10%j,Q=1;1!==H;Q++)if(H=10*H%j,Q>2e3)return 0;return Q}(0,Q),Ue=function(T,j,H){for(var Q=1,me=function(T,j,H){for(var Q=1;j>0;T=T*T%H,j>>=1)1&j&&(Q=Q*T%H);return Q}(10,H,j),Ue=0;Ue<300;Ue++){if(Q===me)return Ue;Q=10*Q%j,me=10*me%j}return 0}(0,Q,me),G=-1===this.s?"-":"";if(G+=H/Q|0,H%=Q,(H*=10)&&(G+="."),me){for(var $=Ue;$--;)G+=H/Q|0,H%=Q,H*=10;for(G+="(",$=me;$--;)G+=H/Q|0,H%=Q,H*=10;G+=")"}else for($=T;H&&$--;)G+=H/Q|0,H%=Q,H*=10;return G}},void 0!==(Oe=function(){return q}.apply(Fe,[]))&&(lt.exports=Oe)}()},127:function(lt,Fe,Se){var Oe;lt=Se.nmd(lt),function(){var E,Ce="Expected a function",K="__lodash_hash_undefined__",W="__lodash_placeholder__",G=128,ze=1/0,He=9007199254740991,Ze=4294967295,je=[["ary",G],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],en="[object Arguments]",jt="[object Array]",Dt="[object Boolean]",Ke="[object Date]",ct="[object Error]",et="[object Function]",Un="[object GeneratorFunction]",Nn="[object Map]",Ln="[object Number]",ut="[object Object]",Je="[object Promise]",Ir="[object RegExp]",Bt="[object Set]",ic="[object String]",Zu="[object Symbol]",da="[object WeakMap]",Ro="[object ArrayBuffer]",sc="[object DataView]",Bh="[object Float32Array]",Hh="[object Float64Array]",Ku="[object Int8Array]",Yu="[object Int16Array]",oc="[object Int32Array]",jh="[object Uint8Array]",Uh="[object Uint8ClampedArray]",ac="[object Uint16Array]",zh="[object Uint32Array]",Sb=/\b__p \+= '';/g,xb=/\b(__p \+=) '' \+/g,Mb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ni=/&(?:amp|lt|gt|quot|#39);/g,Xa=/[&<>"']/g,qS=RegExp(Ni.source),lc=RegExp(Xa.source),ZS=/<%-([\s\S]+?)%>/g,cc=/<%([\s\S]+?)%>/g,Mi=/<%=([\s\S]+?)%>/g,Tb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ib=/^\w*$/,KS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ha=/[\\^$.*+?()[\]{}|]/g,$h=RegExp(ha.source),fa=/^\s+/,Gh=/\s/,Ob=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pb=/\{\n\/\* \[wrapped with (.+)\] \*/,Wg=/,? & /,kb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rb=/[()=,{}\[\]\/\s]/,YS=/\\(\\)?/g,Fb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qg=/\w*$/,Nb=/^[-+]0x[0-9a-f]+$/i,Lb=/^0b[01]+$/i,Vb=/^\[object .+?Constructor\]$/,xn=/^0o[0-7]+$/i,Wh=/^(?:0|[1-9]\d*)$/,Ut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ja=/($^)/,Bb=/['\n\r\u2028\u2029\\]/g,fn="\\ud800-\\udfff",Fo="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Hb="\\u2700-\\u27bf",Qu="a-z\\xdf-\\xf6\\xf8-\\xff",Ub="A-Z\\xc0-\\xd6\\xd8-\\xde",uc="\\ufe0e\\ufe0f",mr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zb="["+fn+"]",$b="["+mr+"]",Kr="["+Fo+"]",Gb="\\d+",JS="["+Hb+"]",Wb="["+Qu+"]",qb="[^"+fn+mr+Gb+Hb+Qu+Ub+"]",qh="\\ud83c[\\udffb-\\udfff]",Yg="[^"+fn+"]",Qg="(?:\\ud83c[\\udde6-\\uddff]){2}",nr="[\\ud800-\\udbff][\\udc00-\\udfff]",Cn="["+Ub+"]",Kb="(?:"+Wb+"|"+qb+")",tx="(?:"+Cn+"|"+qb+")",Ne="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Yb="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Qt="(?:"+Kr+"|"+qh+")?",ks="["+uc+"]?",Zh=ks+Qt+"(?:\\u200d(?:"+[Yg,Qg,nr].join("|")+")"+ks+Qt+")*",Xu="(?:"+[JS,Qg,nr].join("|")+")"+Zh,Kh="(?:"+[Yg+Kr+"?",Kr,Qg,nr,zb].join("|")+")",Jg=RegExp("['\u2019]","g"),Jb=RegExp(Kr,"g"),it=RegExp(qh+"(?="+qh+")|"+Kh+Zh,"g"),Yh=RegExp([Cn+"?"+Wb+"+"+Ne+"(?="+[$b,Cn,"$"].join("|")+")",tx+"+"+Yb+"(?="+[$b,Cn+Kb,"$"].join("|")+")",Cn+"?"+Kb+"+"+Ne,Cn+"+"+Yb,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gb,Xu].join("|"),"g"),e0=RegExp("[\\u200d"+fn+Fo+uc+"]"),No=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,em=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nx=-1,vn={};vn[Bh]=vn[Hh]=vn[Ku]=vn[Yu]=vn[oc]=vn[jh]=vn[Uh]=vn[ac]=vn[zh]=!0,vn[en]=vn[jt]=vn[Ro]=vn[Dt]=vn[sc]=vn[Ke]=vn[ct]=vn[et]=vn[Nn]=vn[Ln]=vn[ut]=vn[Ir]=vn[Bt]=vn[ic]=vn[da]=!1;var Kt={};Kt[en]=Kt[jt]=Kt[Ro]=Kt[sc]=Kt[Dt]=Kt[Ke]=Kt[Bh]=Kt[Hh]=Kt[Ku]=Kt[Yu]=Kt[oc]=Kt[Nn]=Kt[Ln]=Kt[ut]=Kt[Ir]=Kt[Bt]=Kt[ic]=Kt[Zu]=Kt[jh]=Kt[Uh]=Kt[ac]=Kt[zh]=!0,Kt[ct]=Kt[et]=Kt[da]=!1;var t0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},n0=parseFloat,r0=parseInt,s0="object"==typeof global&&global&&global.Object===Object&&global,wn="object"==typeof self&&self&&self.Object===Object&&self,zi=s0||wn||Function("return this")(),o0=Fe&&!Fe.nodeType&&Fe,Rs=o0&&lt&&!lt.nodeType&&lt,Mn=Rs&&Rs.exports===o0,el=Mn&&s0.process,yr=function(){try{return Rs&&Rs.require&&Rs.require("util").types||el&&el.binding&&el.binding("util")}catch(ie){}}(),Ju=yr&&yr.isArrayBuffer,Qh=yr&&yr.isDate,Fs=yr&&yr.isMap,tl=yr&&yr.isRegExp,tm=yr&&yr.isSet,Wn=yr&&yr.isTypedArray;function Or(U,ie,Z){switch(Z.length){case 0:return U.call(ie);case 1:return U.call(ie,Z[0]);case 2:return U.call(ie,Z[0],Z[1]);case 3:return U.call(ie,Z[0],Z[1],Z[2])}return U.apply(ie,Z)}function nm(U,ie,Z,$e){for(var kt=-1,En=null==U?0:U.length;++kt<En;){var Ii=U[kt];ie($e,Ii,Z(Ii),U)}return $e}function Pr(U,ie){for(var Z=-1,$e=null==U?0:U.length;++Z<$e&&!1!==ie(U[Z],Z,U););return U}function im(U,ie){for(var Z=null==U?0:U.length;Z--&&!1!==ie(U[Z],Z,U););return U}function pn(U,ie){for(var Z=-1,$e=null==U?0:U.length;++Z<$e;)if(!ie(U[Z],Z,U))return!1;return!0}function Lo(U,ie){for(var Z=-1,$e=null==U?0:U.length,kt=0,En=[];++Z<$e;){var Ii=U[Z];ie(Ii,Z,U)&&(En[kt++]=Ii)}return En}function dc(U,ie){return!(null==U||!U.length)&&Qr(U,ie,0)>-1}function ke(U,ie,Z){for(var $e=-1,kt=null==U?0:U.length;++$e<kt;)if(Z(ie,U[$e]))return!0;return!1}function Yt(U,ie){for(var Z=-1,$e=null==U?0:U.length,kt=Array($e);++Z<$e;)kt[Z]=ie(U[Z],Z,U);return kt}function Jn(U,ie){for(var Z=-1,$e=ie.length,kt=U.length;++Z<$e;)U[kt+Z]=ie[Z];return U}function Ns(U,ie,Z,$e){var kt=-1,En=null==U?0:U.length;for($e&&En&&(Z=U[++kt]);++kt<En;)Z=ie(Z,U[kt],kt,U);return Z}function pa(U,ie,Z,$e){var kt=null==U?0:U.length;for($e&&kt&&(Z=U[--kt]);kt--;)Z=ie(Z,U[kt],kt,U);return Z}function vr(U,ie){for(var Z=-1,$e=null==U?0:U.length;++Z<$e;)if(ie(U[Z],Z,U))return!0;return!1}var Yr=ga("length");function zn(U,ie,Z){var $e;return Z(U,function(kt,En,Ii){if(ie(kt,En,Ii))return $e=En,!1}),$e}function $i(U,ie,Z,$e){for(var kt=U.length,En=Z+($e?1:-1);$e?En--:++En<kt;)if(ie(U[En],En,U))return En;return-1}function Qr(U,ie,Z){return ie==ie?function(U,ie,Z){for(var $e=Z-1,kt=U.length;++$e<kt;)if(U[$e]===ie)return $e;return-1}(U,ie,Z):$i(U,Vo,Z)}function Ti(U,ie,Z,$e){for(var kt=Z-1,En=U.length;++kt<En;)if($e(U[kt],ie))return kt;return-1}function Vo(U){return U!=U}function oi(U,ie){var Z=null==U?0:U.length;return Z?Ho(U,ie)/Z:NaN}function ga(U){return function(ie){return null==ie?E:ie[U]}}function Bo(U){return function(ie){return null==U?E:U[ie]}}function Vt(U,ie,Z,$e,kt){return kt(U,function(En,Ii,Vn){Z=$e?($e=!1,En):ie(Z,En,Ii,Vn)}),Z}function Ho(U,ie){for(var Z,$e=-1,kt=U.length;++$e<kt;){var En=ie(U[$e]);En!==E&&(Z=Z===E?En:Z+En)}return Z}function hc(U,ie){for(var Z=-1,$e=Array(U);++Z<U;)$e[Z]=ie(Z);return $e}function ir(U){return U&&U.slice(0,sm(U)+1).replace(fa,"")}function Li(U){return function(ie){return U(ie)}}function jo(U,ie){return Yt(ie,function(Z){return U[Z]})}function rr(U,ie){return U.has(ie)}function Rn(U,ie){for(var Z=-1,$e=U.length;++Z<$e&&Qr(ie,U[Z],0)>-1;);return Z}function rm(U,ie){for(var Z=U.length;Z--&&Qr(ie,U[Z],0)>-1;);return Z}function a0(U,ie){for(var Z=U.length,$e=0;Z--;)U[Z]===ie&&++$e;return $e}var td=Bo({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Xh=Bo({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function fc(U){return"\\"+t0[U]}function Xr(U){return e0.test(U)}function Jr(U){var ie=-1,Z=Array(U.size);return U.forEach(function($e,kt){Z[++ie]=[kt,$e]}),Z}function es(U,ie){return function(Z){return U(ie(Z))}}function Ls(U,ie){for(var Z=-1,$e=U.length,kt=0,En=[];++Z<$e;){var Ii=U[Z];(Ii===ie||Ii===W)&&(U[Z]=W,En[kt++]=Z)}return En}function ma(U){var ie=-1,Z=Array(U.size);return U.forEach(function($e){Z[++ie]=$e}),Z}function pc(U){return Xr(U)?function(U){for(var ie=it.lastIndex=0;it.test(U);)++ie;return ie}(U):Yr(U)}function ds(U){return Xr(U)?function(U){return U.match(it)||[]}(U):function(U){return U.split("")}(U)}function sm(U){for(var ie=U.length;ie--&&Gh.test(U.charAt(ie)););return ie}var sx=Bo({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Jh=function U(ie){var l,Z=(ie=null==ie?zi:Jh.defaults(zi.Object(),ie,Jh.pick(zi,em))).Array,$e=ie.Date,kt=ie.Error,En=ie.Function,Ii=ie.Math,Vn=ie.Object,rd=ie.RegExp,ef=ie.String,hs=ie.TypeError,tf=Z.prototype,ts=Vn.prototype,gc=ie["__core-js_shared__"],mi=En.prototype.toString,Dn=ts.hasOwnProperty,u0=0,om=(l=/[^.]+$/.exec(gc&&gc.keys&&gc.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",mc=ts.toString,am=mi.call(Vn),d0=zi._,nf=rd("^"+mi.call(Dn).replace(ha,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sd=Mn?ie.Buffer:E,bi=ie.Symbol,_c=ie.Uint8Array,rf=sd?sd.allocUnsafe:E,il=es(Vn.getPrototypeOf,Vn),lm=Vn.create,od=ts.propertyIsEnumerable,sf=tf.splice,ei=bi?bi.isConcatSpreadable:E,rl=bi?bi.iterator:E,_a=bi?bi.toStringTag:E,ti=function(){try{var l=Gs(Vn,"defineProperty");return l({},"",{}),l}catch(u){}}(),h0=ie.clearTimeout!==zi.clearTimeout&&ie.clearTimeout,dx=$e&&$e.now!==zi.Date.now&&$e.now,ad=ie.setTimeout!==zi.setTimeout&&ie.setTimeout,sr=Ii.ceil,ld=Ii.floor,yc=Vn.getOwnPropertySymbols,sl=sd?sd.isBuffer:E,br=ie.isFinite,cm=tf.join,af=es(Vn.keys,Vn),Ci=Ii.max,ni=Ii.min,um=$e.now,lf=ie.parseInt,wt=Ii.random,hx=tf.reverse,cf=Gs(ie,"DataView"),vc=Gs(ie,"Map"),uf=Gs(ie,"Promise"),ya=Gs(ie,"Set"),bc=Gs(ie,"WeakMap"),Cc=Gs(Vn,"create"),de=bc&&new bc,zt={},tn=wl(cf),wi=wl(vc),dm=wl(uf),wc=wl(ya),Vs=wl(bc),ol=bi?bi.prototype:E,va=ol?ol.valueOf:E,f0=ol?ol.toString:E;function S(l){if(qn(l)&&!Rt(l)&&!(l instanceof Mt)){if(l instanceof Bn)return l;if(Dn.call(l,"__wrapped__"))return Bf(l)}return new Bn(l)}var po=function(){function l(){}return function(u){if(!bn(u))return{};if(lm)return lm(u);l.prototype=u;var h=new l;return l.prototype=E,h}}();function ba(){}function Bn(l,u){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=E}function Mt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ze,this.__views__=[]}function Ca(l){var u=-1,h=null==l?0:l.length;for(this.clear();++u<h;){var g=l[u];this.set(g[0],g[1])}}function Bs(l){var u=-1,h=null==l?0:l.length;for(this.clear();++u<h;){var g=l[u];this.set(g[0],g[1])}}function Hs(l){var u=-1,h=null==l?0:l.length;for(this.clear();++u<h;){var g=l[u];this.set(g[0],g[1])}}function hi(l){var u=-1,h=null==l?0:l.length;for(this.__data__=new Hs;++u<h;)this.add(l[u])}function fs(l){var u=this.__data__=new Bs(l);this.size=u.size}function Ec(l,u){var h=Rt(l),g=!h&&Fa(l),v=!h&&!g&&qo(l),x=!h&&!g&&!v&&Tl(l),P=h||g||v||x,R=P?hc(l.length,ef):[],z=R.length;for(var oe in l)(u||Dn.call(l,oe))&&(!P||!("length"==oe||v&&("offset"==oe||"parent"==oe)||x&&("buffer"==oe||"byteLength"==oe||"byteOffset"==oe)||qs(oe,z)))&&R.push(oe);return R}function Dc(l){var u=l.length;return u?l[xm(0,u-1)]:E}function dd(l,u){return Cl(wr(l),wa(u,0,l.length))}function pf(l){return Cl(wr(l))}function hd(l,u,h){(h!==E&&!fi(l[u],h)||h===E&&!(u in l))&&kr(l,u,h)}function Ac(l,u,h){var g=l[u];(!Dn.call(l,u)||!fi(g,h)||h===E&&!(u in l))&&kr(l,u,h)}function ps(l,u){for(var h=l.length;h--;)if(fi(l[h][0],u))return h;return-1}function Sc(l,u,h,g){return js(l,function(v,x,P){u(g,v,h(v),P)}),g}function ym(l,u){return l&&zs(u,ii(u),l)}function kr(l,u,h){"__proto__"==u&&ti?ti(l,u,{configurable:!0,enumerable:!0,value:h,writable:!0}):l[u]=h}function xc(l,u){for(var h=-1,g=u.length,v=Z(g),x=null==l;++h<g;)v[h]=x?E:iu(l,u[h]);return v}function wa(l,u,h){return l==l&&(h!==E&&(l=l<=h?l:h),u!==E&&(l=l>=u?l:u)),l}function ns(l,u,h,g,v,x){var P,R=1&u,z=2&u,oe=4&u;if(h&&(P=v?h(l,g,v,x):h(l)),P!==E)return P;if(!bn(l))return l;var le=Rt(l);if(le){if(P=function(l){var u=l.length,h=new l.constructor(u);return u&&"string"==typeof l[0]&&Dn.call(l,"index")&&(h.index=l.index,h.input=l.input),h}(l),!R)return wr(l,P)}else{var pe=Bi(l),Te=pe==et||pe==Un;if(qo(l))return Pm(l,R);if(pe==ut||pe==en||Te&&!v){if(P=z||Te?{}:Bm(l),!R)return z?function(l,u){return zs(l,Rf(l),u)}(l,function(l,u){return l&&zs(u,Zi(u),l)}(P,l)):function(l,u){return zs(l,Dd(l),u)}(l,ym(P,l))}else{if(!Kt[pe])return v?l:{};P=function(l,u,h){var g=l.constructor;switch(u){case Ro:return Df(l);case Dt:case Ke:return new g(+l);case sc:return function(l,u){var h=u?Df(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.byteLength)}(l,h);case Bh:case Hh:case Ku:case Yu:case oc:case jh:case Uh:case ac:case zh:return Uc(l,h);case Nn:case Bt:return new g;case Ln:case ic:return new g(l);case Ir:return function(l){var u=new l.constructor(l.source,qg.exec(l));return u.lastIndex=l.lastIndex,u}(l);case Zu:return function(l){return va?Vn(va.call(l)):{}}(l)}}(l,pe,R)}}x||(x=new fs);var Xe=x.get(l);if(Xe)return Xe;x.set(l,P),x_(l)?l.forEach(function(ft){P.add(ns(ft,u,h,ft,l,x))}):cp(l)&&l.forEach(function(ft,Zt){P.set(Zt,ns(ft,u,h,Zt,l,x))});var Ht=le?E:(oe?z?Pf:Of:z?Zi:ii)(l);return Pr(Ht||l,function(ft,Zt){Ht&&(ft=l[Zt=ft]),Ac(P,Zt,ns(ft,u,h,Zt,l,x))}),P}function A0(l,u,h){var g=h.length;if(null==l)return!g;for(l=Vn(l);g--;){var v=h[g],P=l[v];if(P===E&&!(v in l)||!(0,u[v])(P))return!1}return!0}function Mc(l,u,h){if("function"!=typeof l)throw new hs(Ce);return bl(function(){l.apply(E,h)},u)}function ll(l,u,h,g){var v=-1,x=dc,P=!0,R=l.length,z=[],oe=u.length;if(!R)return z;h&&(u=Yt(u,Li(h))),g?(x=ke,P=!1):u.length>=200&&(x=rr,P=!1,u=new hi(u));e:for(;++v<R;){var le=l[v],pe=null==h?le:h(le);if(le=g||0!==le?le:0,P&&pe==pe){for(var Te=oe;Te--;)if(u[Te]===pe)continue e;z.push(le)}else x(u,pe,g)||z.push(le)}return z}S.templateSettings={escape:ZS,evaluate:cc,interpolate:Mi,variable:"",imports:{_:S}},(S.prototype=ba.prototype).constructor=S,(Bn.prototype=po(ba.prototype)).constructor=Bn,(Mt.prototype=po(ba.prototype)).constructor=Mt,Ca.prototype.clear=function(){this.__data__=Cc?Cc(null):{},this.size=0},Ca.prototype.delete=function(l){var u=this.has(l)&&delete this.__data__[l];return this.size-=u?1:0,u},Ca.prototype.get=function(l){var u=this.__data__;if(Cc){var h=u[l];return h===K?E:h}return Dn.call(u,l)?u[l]:E},Ca.prototype.has=function(l){var u=this.__data__;return Cc?u[l]!==E:Dn.call(u,l)},Ca.prototype.set=function(l,u){var h=this.__data__;return this.size+=this.has(l)?0:1,h[l]=Cc&&u===E?K:u,this},Bs.prototype.clear=function(){this.__data__=[],this.size=0},Bs.prototype.delete=function(l){var u=this.__data__,h=ps(u,l);return!(h<0||(h==u.length-1?u.pop():sf.call(u,h,1),--this.size,0))},Bs.prototype.get=function(l){var u=this.__data__,h=ps(u,l);return h<0?E:u[h][1]},Bs.prototype.has=function(l){return ps(this.__data__,l)>-1},Bs.prototype.set=function(l,u){var h=this.__data__,g=ps(h,l);return g<0?(++this.size,h.push([l,u])):h[g][1]=u,this},Hs.prototype.clear=function(){this.size=0,this.__data__={hash:new Ca,map:new(vc||Bs),string:new Ca}},Hs.prototype.delete=function(l){var u=Ed(this,l).delete(l);return this.size-=u?1:0,u},Hs.prototype.get=function(l){return Ed(this,l).get(l)},Hs.prototype.has=function(l){return Ed(this,l).has(l)},Hs.prototype.set=function(l,u){var h=Ed(this,l),g=h.size;return h.set(l,u),this.size+=h.size==g?0:1,this},hi.prototype.add=hi.prototype.push=function(l){return this.__data__.set(l,K),this},hi.prototype.has=function(l){return this.__data__.has(l)},fs.prototype.clear=function(){this.__data__=new Bs,this.size=0},fs.prototype.delete=function(l){var u=this.__data__,h=u.delete(l);return this.size=u.size,h},fs.prototype.get=function(l){return this.__data__.get(l)},fs.prototype.has=function(l){return this.__data__.has(l)},fs.prototype.set=function(l,u){var h=this.__data__;if(h instanceof Bs){var g=h.__data__;if(!vc||g.length<199)return g.push([l,u]),this.size=++h.size,this;h=this.__data__=new Hs(g)}return h.set(l,u),this.size=h.size,this};var js=Ma(mo),Tc=Ma(fd,!0);function vm(l,u){var h=!0;return js(l,function(g,v,x){return h=!!u(g,v,x)}),h}function Ic(l,u,h){for(var g=-1,v=l.length;++g<v;){var x=l[g],P=u(x);if(null!=P&&(R===E?P==P&&!Lr(P):h(P,R)))var R=P,z=x}return z}function bm(l,u){var h=[];return js(l,function(g,v,x){u(g,v,x)&&h.push(g)}),h}function li(l,u,h,g,v){var x=-1,P=l.length;for(h||(h=Ws),v||(v=[]);++x<P;){var R=l[x];u>0&&h(R)?u>1?li(R,u-1,h,g,v):Jn(v,R):g||(v[v.length]=R)}return v}var Oc=km(),Pc=km(!0);function mo(l,u){return l&&Oc(l,u,ii)}function fd(l,u){return l&&Pc(l,u,ii)}function kc(l,u){return Lo(u,function(h){return Zs(l[h])})}function Ea(l,u){for(var h=0,g=(u=Sa(u,l)).length;null!=l&&h<g;)l=l[rs(u[h++])];return h&&h==g?l:E}function Cm(l,u,h){var g=u(l);return Rt(l)?g:Jn(g,h(l))}function Ei(l){return null==l?l===E?"[object Undefined]":"[object Null]":_a&&_a in Vn(l)?function(l){var u=Dn.call(l,_a),h=l[_a];try{l[_a]=E;var g=!0}catch(x){}var v=mc.call(l);return g&&(u?l[_a]=h:delete l[_a]),v}(l):function(l){return mc.call(l)}(l)}function Rc(l,u){return l>u}function gf(l,u){return null!=l&&Dn.call(l,u)}function pd(l,u){return null!=l&&u in Vn(l)}function mf(l,u,h){for(var g=h?ke:dc,v=l[0].length,x=l.length,P=x,R=Z(x),z=1/0,oe=[];P--;){var le=l[P];P&&u&&(le=Yt(le,Li(u))),z=ni(le.length,z),R[P]=!h&&(u||v>=120&&le.length>=120)?new hi(P&&le):E}le=l[0];var pe=-1,Te=R[0];e:for(;++pe<v&&oe.length<z;){var Xe=le[pe],ht=u?u(Xe):Xe;if(Xe=h||0!==Xe?Xe:0,!(Te?rr(Te,ht):g(oe,ht,h))){for(P=x;--P;){var Ht=R[P];if(!(Ht?rr(Ht,ht):g(l[P],ht,h)))continue e}Te&&Te.push(ht),oe.push(Xe)}}return oe}function ul(l,u,h){var g=null==(l=vs(l,u=Sa(u,l)))?l:l[rs(Fr(u))];return null==g?E:Or(g,l,h)}function _f(l){return qn(l)&&Ei(l)==en}function Fc(l,u,h,g,v){return l===u||(null==l||null==u||!qn(l)&&!qn(u)?l!=l&&u!=u:function(l,u,h,g,v,x){var P=Rt(l),R=Rt(u),z=P?jt:Bi(l),oe=R?jt:Bi(u),le=(z=z==en?ut:z)==ut,pe=(oe=oe==en?ut:oe)==ut,Te=z==oe;if(Te&&qo(l)){if(!qo(u))return!1;P=!0,le=!1}if(Te&&!le)return x||(x=new fs),P||Tl(l)?If(l,u,h,g,v,x):function(l,u,h,g,v,x,P){switch(h){case sc:if(l.byteLength!=u.byteLength||l.byteOffset!=u.byteOffset)return!1;l=l.buffer,u=u.buffer;case Ro:return!(l.byteLength!=u.byteLength||!x(new _c(l),new _c(u)));case Dt:case Ke:case Ln:return fi(+l,+u);case ct:return l.name==u.name&&l.message==u.message;case Ir:case ic:return l==u+"";case Nn:var R=Jr;case Bt:if(R||(R=ma),l.size!=u.size&&!(1&g))return!1;var oe=P.get(l);if(oe)return oe==u;g|=2,P.set(l,u);var le=If(R(l),R(u),g,v,x,P);return P.delete(l),le;case Zu:if(va)return va.call(l)==va.call(u)}return!1}(l,u,z,h,g,v,x);if(!(1&h)){var Xe=le&&Dn.call(l,"__wrapped__"),ht=pe&&Dn.call(u,"__wrapped__");if(Xe||ht){var Ht=Xe?l.value():l,ft=ht?u.value():u;return x||(x=new fs),v(Ht,ft,h,g,x)}}return!!Te&&(x||(x=new fs),function(l,u,h,g,v,x){var P=1&h,R=Of(l),z=R.length;if(z!=Of(u).length&&!P)return!1;for(var pe=z;pe--;){var Te=R[pe];if(!(P?Te in u:Dn.call(u,Te)))return!1}var Xe=x.get(l),ht=x.get(u);if(Xe&&ht)return Xe==u&&ht==l;var Ht=!0;x.set(l,u),x.set(u,l);for(var ft=P;++pe<z;){var Zt=l[Te=R[pe]],nn=u[Te];if(g)var Br=P?g(nn,Zt,Te,u,l,x):g(Zt,nn,Te,l,u,x);if(!(Br===E?Zt===nn||v(Zt,nn,h,g,x):Br)){Ht=!1;break}ft||(ft="constructor"==Te)}if(Ht&&!ft){var cr=l.constructor,Hr=u.constructor;cr!=Hr&&"constructor"in l&&"constructor"in u&&!("function"==typeof cr&&cr instanceof cr&&"function"==typeof Hr&&Hr instanceof Hr)&&(Ht=!1)}return x.delete(l),x.delete(u),Ht}(l,u,h,g,v,x))}(l,u,h,g,Fc,v))}function yf(l,u,h,g){var v=h.length,x=v,P=!g;if(null==l)return!x;for(l=Vn(l);v--;){var R=h[v];if(P&&R[2]?R[1]!==l[R[0]]:!(R[0]in l))return!1}for(;++v<x;){var z=(R=h[v])[0],oe=l[z],le=R[1];if(P&&R[2]){if(oe===E&&!(z in l))return!1}else{var pe=new fs;if(g)var Te=g(oe,le,z,l,u,pe);if(!(Te===E?Fc(le,oe,3,g,pe):Te))return!1}}return!0}function vf(l){return!(!bn(l)||function(l){return!!om&&om in l}(l))&&(Zs(l)?nf:Vb).test(wl(l))}function _d(l){return"function"==typeof l?l:null==l?Ki:"object"==typeof l?Rt(l)?yd(l[0],l[1]):fl(l):kl(l)}function Da(l){if(!qc(l))return af(l);var u=[];for(var h in Vn(l))Dn.call(l,h)&&"constructor"!=h&&u.push(h);return u}function zo(l,u){return l<u}function Aa(l,u){var h=-1,g=Dr(l)?Z(l.length):[];return js(l,function(v,x,P){g[++h]=u(v,x,P)}),g}function fl(l){var u=Lm(l);return 1==u.length&&u[0][2]?Um(u[0][0],u[0][1]):function(h){return h===l||yf(h,l,u)}}function yd(l,u){return Ff(l)&&jm(u)?Um(rs(l),u):function(h){var g=iu(h,l);return g===E&&g===u?Hd(h,l):Fc(u,g,3)}}function Us(l,u,h,g,v){l!==u&&Oc(u,function(x,P){if(v||(v=new fs),bn(x))!function(l,u,h,g,v,x,P){var R=Ad(l,h),z=Ad(u,h),oe=P.get(z);if(oe)hd(l,h,oe);else{var le=x?x(R,z,h+"",l,u,P):E,pe=le===E;if(pe){var Te=Rt(z),Xe=!Te&&qo(z),ht=!Te&&!Xe&&Tl(z);le=z,Te||Xe||ht?Rt(R)?le=R:ci(R)?le=wr(R):Xe?(pe=!1,le=Pm(z,!0)):ht?(pe=!1,le=Uc(z,!0)):le=[]:Na(z)||Fa(z)?(le=R,Fa(R)?le=BC(R):(!bn(R)||Zs(R))&&(le=Bm(z))):pe=!1}pe&&(P.set(z,le),v(le,z,g,x,P),P.delete(z)),hd(l,h,le)}}(l,u,P,h,Us,g,v);else{var R=g?g(Ad(l,P),x,P+"",l,u,v):E;R===E&&(R=x),hd(l,P,R)}},Zi)}function x0(l,u){var h=l.length;if(h)return qs(u+=u<0?h:0,h)?l[u]:E}function Am(l,u,h){u=u.length?Yt(u,function(x){return Rt(x)?function(P){return Ea(P,1===x.length?x[0]:x)}:x}):[Ki];var g=-1;return u=Yt(u,Li(dt())),function(U,ie){var Z=U.length;for(U.sort(function(x,P){return function(l,u,h){for(var g=-1,v=l.criteria,x=u.criteria,P=v.length,R=h.length;++g<P;){var z=P0(v[g],x[g]);if(z)return g>=R?z:z*("desc"==h[g]?-1:1)}return l.index-u.index}(x,P,h)});Z--;)U[Z]=U[Z].value;return U}(Aa(l,function(x,P,R){return{criteria:Yt(u,function(oe){return oe(x)}),index:++g,value:x}}))}function Sm(l,u,h){for(var g=-1,v=u.length,x={};++g<v;){var P=u[g],R=Ea(l,P);h(R,P)&&vd(x,Sa(P,l),R)}return x}function bf(l,u,h,g){var v=g?Ti:Qr,x=-1,P=u.length,R=l;for(l===u&&(u=wr(u)),h&&(R=Yt(l,Li(h)));++x<P;)for(var z=0,oe=u[x],le=h?h(oe):oe;(z=v(R,le,z,g))>-1;)R!==l&&sf.call(R,z,1),sf.call(l,z,1);return l}function M0(l,u){for(var h=l?u.length:0,g=h-1;h--;){var v=u[h];if(h==g||v!==x){var x=v;qs(v)?sf.call(l,v,1):wf(l,v)}}return l}function xm(l,u){return l+ld(wt()*(u-l+1))}function Mm(l,u){var h="";if(!l||u<1||u>He)return h;do{u%2&&(h+=l),(u=ld(u/2))&&(l+=l)}while(u);return h}function qt(l,u){return zm(Lf(l,u,Ki),l+"")}function _x(l){return Dc(Pl(l))}function Lc(l,u){var h=Pl(l);return Cl(h,wa(u,0,h.length))}function vd(l,u,h,g){if(!bn(l))return l;for(var v=-1,x=(u=Sa(u,l)).length,P=x-1,R=l;null!=R&&++v<x;){var z=rs(u[v]),oe=h;if("__proto__"===z||"constructor"===z||"prototype"===z)return l;if(v!=P){var le=R[z];(oe=g?g(le,z,R):E)===E&&(oe=bn(le)?le:qs(u[v+1])?[]:{})}Ac(R,z,oe),R=R[z]}return l}var _i=de?function(l,u){return de.set(l,u),l}:Ki,Cf=ti?function(l,u){return ti(l,"toString",{configurable:!0,enumerable:!1,value:au(u),writable:!0})}:Ki;function Vc(l){return Cl(Pl(l))}function gs(l,u,h){var g=-1,v=l.length;u<0&&(u=-u>v?0:v+u),(h=h>v?v:h)<0&&(h+=v),v=u>h?0:h-u>>>0,u>>>=0;for(var x=Z(v);++g<v;)x[g]=l[g+u];return x}function T0(l,u){var h;return js(l,function(g,v,x){return!(h=u(g,v,x))}),!!h}function or(l,u,h){var g=0,v=null==l?g:l.length;if("number"==typeof u&&u==u&&v<=2147483647){for(;g<v;){var x=g+v>>>1,P=l[x];null!==P&&!Lr(P)&&(h?P<=u:P<u)?g=x+1:v=x}return v}return is(l,u,Ki,h)}function is(l,u,h,g){var v=0,x=null==l?0:l.length;if(0===x)return 0;for(var P=(u=h(u))!=u,R=null===u,z=Lr(u),oe=u===E;v<x;){var le=ld((v+x)/2),pe=h(l[le]),Te=pe!==E,Xe=null===pe,ht=pe==pe,Ht=Lr(pe);if(P)var ft=g||ht;else ft=oe?ht&&(g||Te):R?ht&&Te&&(g||!Xe):z?ht&&Te&&!Xe&&(g||!Ht):!Xe&&!Ht&&(g?pe<=u:pe<u);ft?v=le+1:x=le}return ni(x,4294967294)}function Bc(l,u){for(var h=-1,g=l.length,v=0,x=[];++h<g;){var P=l[h],R=u?u(P):P;if(!h||!fi(R,z)){var z=R;x[v++]=0===P?0:P}}return x}function $o(l){return"number"==typeof l?l:Lr(l)?NaN:+l}function yi(l){if("string"==typeof l)return l;if(Rt(l))return Yt(l,yi)+"";if(Lr(l))return f0?f0.call(l):"";var u=l+"";return"0"==u&&1/l==-ze?"-0":u}function _o(l,u,h){var g=-1,v=dc,x=l.length,P=!0,R=[],z=R;if(h)P=!1,v=ke;else if(x>=200){var oe=u?null:F0(l);if(oe)return ma(oe);P=!1,v=rr,z=new hi}else z=u?[]:R;e:for(;++g<x;){var le=l[g],pe=u?u(le):le;if(le=h||0!==le?le:0,P&&pe==pe){for(var Te=z.length;Te--;)if(z[Te]===pe)continue e;u&&z.push(pe),R.push(le)}else v(z,pe,h)||(z!==R&&z.push(pe),R.push(le))}return R}function wf(l,u){return null==(l=vs(l,u=Sa(u,l)))||delete l[rs(Fr(u))]}function Tm(l,u,h,g){return vd(l,u,h(Ea(l,u)),g)}function Ef(l,u,h,g){for(var v=l.length,x=g?v:-1;(g?x--:++x<v)&&u(l[x],x,l););return h?gs(l,g?0:x,g?x+1:v):gs(l,g?x+1:0,g?v:x)}function I0(l,u){var h=l;return h instanceof Mt&&(h=h.value()),Ns(u,function(g,v){return v.func.apply(v.thisArg,Jn([g],v.args))},h)}function bd(l,u,h){var g=l.length;if(g<2)return g?_o(l[0]):[];for(var v=-1,x=Z(g);++v<g;)for(var P=l[v],R=-1;++R<g;)R!=v&&(x[v]=ll(x[v]||P,l[R],u,h));return _o(li(x,1),u,h)}function Cr(l,u,h){for(var g=-1,v=l.length,x=u.length,P={};++g<v;)h(P,l[g],g<x?u[g]:E);return P}function Hc(l){return ci(l)?l:[]}function Go(l){return"function"==typeof l?l:Ki}function Sa(l,u){return Rt(l)?l:Ff(l,u)?[l]:Sd(Tn(l))}var Im=qt;function Wo(l,u,h){var g=l.length;return h=h===E?g:h,!u&&h>=g?l:gs(l,u,h)}var Om=h0||function(l){return zi.clearTimeout(l)};function Pm(l,u){if(u)return l.slice();var h=l.length,g=rf?rf(h):new l.constructor(h);return l.copy(g),g}function Df(l){var u=new l.constructor(l.byteLength);return new _c(u).set(new _c(l)),u}function Uc(l,u){var h=u?Df(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.length)}function P0(l,u){if(l!==u){var h=l!==E,g=null===l,v=l==l,x=Lr(l),P=u!==E,R=null===u,z=u==u,oe=Lr(u);if(!R&&!oe&&!x&&l>u||x&&P&&z&&!R&&!oe||g&&P&&z||!h&&z||!v)return 1;if(!g&&!x&&!oe&&l<u||oe&&h&&v&&!g&&!x||R&&h&&v||!P&&v||!z)return-1}return 0}function Cd(l,u,h,g){for(var v=-1,x=l.length,P=h.length,R=-1,z=u.length,oe=Ci(x-P,0),le=Z(z+oe),pe=!g;++R<z;)le[R]=u[R];for(;++v<P;)(pe||v<x)&&(le[h[v]]=l[v]);for(;oe--;)le[R++]=l[v++];return le}function xa(l,u,h,g){for(var v=-1,x=l.length,P=-1,R=h.length,z=-1,oe=u.length,le=Ci(x-R,0),pe=Z(le+oe),Te=!g;++v<le;)pe[v]=l[v];for(var Xe=v;++z<oe;)pe[Xe+z]=u[z];for(;++P<R;)(Te||v<x)&&(pe[Xe+h[P]]=l[v++]);return pe}function wr(l,u){var h=-1,g=l.length;for(u||(u=Z(g));++h<g;)u[h]=l[h];return u}function zs(l,u,h,g){var v=!h;h||(h={});for(var x=-1,P=u.length;++x<P;){var R=u[x],z=g?g(h[R],l[R],R,h,l):E;z===E&&(z=l[R]),v?kr(h,R,z):Ac(h,R,z)}return h}function pl(l,u){return function(h,g){var v=Rt(h)?nm:Sc,x=u?u():{};return v(h,l,dt(g,2),x)}}function $s(l){return qt(function(u,h){var g=-1,v=h.length,x=v>1?h[v-1]:E,P=v>2?h[2]:E;for(x=l.length>3&&"function"==typeof x?(v--,x):E,P&&ar(h[0],h[1],P)&&(x=v<3?E:x,v=1),u=Vn(u);++g<v;){var R=h[g];R&&l(u,R,g,x)}return u})}function Ma(l,u){return function(h,g){if(null==h)return h;if(!Dr(h))return l(h,g);for(var v=h.length,x=u?v:-1,P=Vn(h);(u?x--:++x<v)&&!1!==g(P[x],x,P););return h}}function km(l){return function(u,h,g){for(var v=-1,x=Vn(u),P=g(u),R=P.length;R--;){var z=P[l?R:++v];if(!1===h(x[z],z,x))break}return u}}function xf(l){return function(u){var h=Xr(u=Tn(u))?ds(u):E,g=h?h[0]:u.charAt(0),v=h?Wo(h,1).join(""):u.slice(1);return g[l]()+v}}function Ta(l){return function(u){return Ns(W_(yp(u).replace(Jg,"")),l,"")}}function ms(l){return function(){var u=arguments;switch(u.length){case 0:return new l;case 1:return new l(u[0]);case 2:return new l(u[0],u[1]);case 3:return new l(u[0],u[1],u[2]);case 4:return new l(u[0],u[1],u[2],u[3]);case 5:return new l(u[0],u[1],u[2],u[3],u[4]);case 6:return new l(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new l(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var h=po(l.prototype),g=l.apply(h,u);return bn(g)?g:h}}function Rm(l){return function(u,h,g){var v=Vn(u);if(!Dr(u)){var x=dt(h,3);u=ii(u),h=function(R){return x(v[R],R,v)}}var P=l(u,h,g);return P>-1?v[x?u[P]:P]:E}}function Mf(l){return yo(function(u){var h=u.length,g=h,v=Bn.prototype.thru;for(l&&u.reverse();g--;){var x=u[g];if("function"!=typeof x)throw new hs(Ce);if(v&&!P&&"wrapper"==vl(x))var P=new Bn([],!0)}for(g=P?g:h;++g<h;){var R=vl(x=u[g]),z="wrapper"==R?yl(x):E;P=z&&Nf(z[0])&&424==z[1]&&!z[4].length&&1==z[9]?P[vl(z[0])].apply(P,z[3]):1==x.length&&Nf(x)?P[R]():P.thru(x)}return function(){var oe=arguments,le=oe[0];if(P&&1==oe.length&&Rt(le))return P.plant(le).value();for(var pe=0,Te=h?u[pe].apply(this,oe):le;++pe<h;)Te=u[pe].call(this,Te);return Te}})}function Gc(l,u,h,g,v,x,P,R,z,oe){var le=u&G,pe=1&u,Te=2&u,Xe=24&u,ht=512&u,Ht=Te?E:ms(l);return function ft(){for(var Zt=arguments.length,nn=Z(Zt),Br=Zt;Br--;)nn[Br]=arguments[Br];if(Xe)var cr=ys(ft),Hr=a0(nn,cr);if(g&&(nn=Cd(nn,g,v,Xe)),x&&(nn=xa(nn,x,P,Xe)),Zt-=Hr,Xe&&Zt<oe){var ui=Ls(nn,cr);return Wc(l,u,Gc,ft.placeholder,h,nn,ui,R,z,oe-Zt)}var Ys=pe?h:this,Qs=Te?Ys[l]:l;return Zt=nn.length,R?nn=Kc(nn,R):ht&&Zt>1&&nn.reverse(),le&&z<Zt&&(nn.length=z),this&&this!==zi&&this instanceof ft&&(Qs=Ht||ms(Qs)),Qs.apply(Ys,nn)}}function Ia(l,u){return function(h,g){return function(l,u,h,g){return mo(l,function(v,x,P){u(g,h(v),x,P)}),g}(h,l,u(g),{})}}function Vi(l,u){return function(h,g){var v;if(h===E&&g===E)return u;if(h!==E&&(v=h),g!==E){if(v===E)return g;"string"==typeof h||"string"==typeof g?(h=yi(h),g=yi(g)):(h=$o(h),g=$o(g)),v=l(h,g)}return v}}function gl(l){return yo(function(u){return u=Yt(u,Li(dt())),qt(function(h){var g=this;return l(u,function(v){return Or(v,g,h)})})})}function _s(l,u){var h=(u=u===E?" ":yi(u)).length;if(h<2)return h?Mm(u,l):u;var g=Mm(u,sr(l/pc(u)));return Xr(u)?Wo(ds(g),0,l).join(""):g.slice(0,l)}function Tf(l){return function(u,h,g){return g&&"number"!=typeof g&&ar(u,h,g)&&(h=g=E),u=vo(u),h===E?(h=u,u=0):h=vo(h),function(l,u,h,g){for(var v=-1,x=Ci(sr((u-l)/(h||1)),0),P=Z(x);x--;)P[g?x:++v]=l,l+=h;return P}(u,h,g=g===E?u<h?1:-1:vo(g),l)}}function ml(l){return function(u,h){return"string"==typeof u&&"string"==typeof h||(u=ws(u),h=ws(h)),l(u,h)}}function Wc(l,u,h,g,v,x,P,R,z,oe){var le=8&u;u|=le?32:64,4&(u&=~(le?64:32))||(u&=-4);var Ht=[l,u,v,le?x:E,le?P:E,le?E:x,le?E:P,R,z,oe],ft=h.apply(E,Ht);return Nf(l)&&Vf(ft,Ht),ft.placeholder=g,$0(ft,l,u)}function wd(l){var u=Ii[l];return function(h,g){if(h=ws(h),(g=null==g?0:ni(Ft(g),292))&&br(h)){var v=(Tn(h)+"e").split("e");return+((v=(Tn(u(v[0]+"e"+(+v[1]+g)))+"e").split("e"))[0]+"e"+(+v[1]-g))}return u(h)}}var F0=ya&&1/ma(new ya([,-0]))[1]==ze?function(l){return new ya(l)}:Es;function Fm(l){return function(u){var h=Bi(u);return h==Nn?Jr(u):h==Bt?function(U){var ie=-1,Z=Array(U.size);return U.forEach(function($e){Z[++ie]=[$e,$e]}),Z}(u):function(U,ie){return Yt(ie,function(Z){return[Z,U[Z]]})}(u,l(u))}}function Er(l,u,h,g,v,x,P,R){var z=2&u;if(!z&&"function"!=typeof l)throw new hs(Ce);var oe=g?g.length:0;if(oe||(u&=-97,g=v=E),P=P===E?P:Ci(Ft(P),0),R=R===E?R:Ft(R),oe-=v?v.length:0,64&u){var le=g,pe=v;g=v=E}var Te=z?E:yl(l),Xe=[l,u,h,g,v,le,pe,x,P,R];if(Te&&function(l,u){var h=l[1],g=u[1],v=h|g;if(!(v<131||(g==G&&8==h||g==G&&256==h&&l[7].length<=u[8]||384==g&&u[7].length<=u[8]&&8==h)))return l;1&g&&(l[2]=u[2],v|=1&h?0:4);var R=u[3];if(R){var z=l[3];l[3]=z?Cd(z,R,u[4]):R,l[4]=z?Ls(l[3],W):u[4]}(R=u[5])&&(l[5]=(z=l[5])?xa(z,R,u[6]):R,l[6]=z?Ls(l[5],W):u[6]),(R=u[7])&&(l[7]=R),g&G&&(l[8]=null==l[8]?u[8]:ni(l[8],u[8])),null==l[9]&&(l[9]=u[9]),l[0]=u[0],l[1]=v}(Xe,Te),l=Xe[0],u=Xe[1],h=Xe[2],g=Xe[3],v=Xe[4],!(R=Xe[9]=Xe[9]===E?z?0:l.length:Ci(Xe[9]-oe,0))&&24&u&&(u&=-25),u&&1!=u)ht=8==u||16==u?function(l,u,h){var g=ms(l);return function v(){for(var x=arguments.length,P=Z(x),R=x,z=ys(v);R--;)P[R]=arguments[R];var oe=x<3&&P[0]!==z&&P[x-1]!==z?[]:Ls(P,z);return(x-=oe.length)<h?Wc(l,u,Gc,v.placeholder,E,P,oe,E,E,h-x):Or(this&&this!==zi&&this instanceof v?g:l,this,P)}}(l,u,R):32!=u&&33!=u||v.length?Gc.apply(E,Xe):function(l,u,h,g){var v=1&u,x=ms(l);return function P(){for(var R=-1,z=arguments.length,oe=-1,le=g.length,pe=Z(le+z),Te=this&&this!==zi&&this instanceof P?x:l;++oe<le;)pe[oe]=g[oe];for(;z--;)pe[oe++]=arguments[++R];return Or(Te,v?h:this,pe)}}(l,u,h,g);else var ht=function(l,u,h){var g=1&u,v=ms(l);return function x(){return(this&&this!==zi&&this instanceof x?v:l).apply(g?h:this,arguments)}}(l,u,h);return $0((Te?_i:Vf)(ht,Xe),l,u)}function _l(l,u,h,g){return l===E||fi(l,ts[h])&&!Dn.call(g,h)?u:l}function Nm(l,u,h,g,v,x){return bn(l)&&bn(u)&&(x.set(u,l),Us(l,u,E,Nm,x),x.delete(u)),l}function yx(l){return Na(l)?E:l}function If(l,u,h,g,v,x){var P=1&h,R=l.length,z=u.length;if(R!=z&&!(P&&z>R))return!1;var oe=x.get(l),le=x.get(u);if(oe&&le)return oe==u&&le==l;var pe=-1,Te=!0,Xe=2&h?new hi:E;for(x.set(l,u),x.set(u,l);++pe<R;){var ht=l[pe],Ht=u[pe];if(g)var ft=P?g(Ht,ht,pe,u,l,x):g(ht,Ht,pe,l,u,x);if(ft!==E){if(ft)continue;Te=!1;break}if(Xe){if(!vr(u,function(Zt,nn){if(!rr(Xe,nn)&&(ht===Zt||v(ht,Zt,h,g,x)))return Xe.push(nn)})){Te=!1;break}}else if(ht!==Ht&&!v(ht,Ht,h,g,x)){Te=!1;break}}return x.delete(l),x.delete(u),Te}function yo(l){return zm(Lf(l,E,jf),l+"")}function Of(l){return Cm(l,ii,Dd)}function Pf(l){return Cm(l,Zi,Rf)}var yl=de?function(l){return de.get(l)}:Es;function vl(l){for(var u=l.name+"",h=zt[u],g=Dn.call(zt,u)?h.length:0;g--;){var v=h[g],x=v.func;if(null==x||x==l)return v.name}return u}function ys(l){return(Dn.call(S,"placeholder")?S:l).placeholder}function dt(){var l=S.iteratee||Z_;return l=l===Z_?_d:l,arguments.length?l(arguments[0],arguments[1]):l}function Ed(l,u){var h=l.__data__;return function(l){var u=typeof l;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==l:null===l}(u)?h["string"==typeof u?"string":"hash"]:h.map}function Lm(l){for(var u=ii(l),h=u.length;h--;){var g=u[h],v=l[g];u[h]=[g,v,jm(v)]}return u}function Gs(l,u){var h=function(U,ie){return null==U?E:U[ie]}(l,u);return vf(h)?h:E}var Dd=yc?function(l){return null==l?[]:(l=Vn(l),Lo(yc(l),function(u){return od.call(l,u)}))}:Ap,Rf=yc?function(l){for(var u=[];l;)Jn(u,Dd(l)),l=il(l);return u}:Ap,Bi=Ei;function Vm(l,u,h){for(var g=-1,v=(u=Sa(u,l)).length,x=!1;++g<v;){var P=rs(u[g]);if(!(x=null!=l&&h(l,P)))break;l=l[P]}return x||++g!=v?x:!!(v=null==l?0:l.length)&&Ml(v)&&qs(P,v)&&(Rt(l)||Fa(l))}function Bm(l){return"function"!=typeof l.constructor||qc(l)?{}:po(il(l))}function Ws(l){return Rt(l)||Fa(l)||!!(ei&&l&&l[ei])}function qs(l,u){var h=typeof l;return!!(u=null==u?He:u)&&("number"==h||"symbol"!=h&&Wh.test(l))&&l>-1&&l%1==0&&l<u}function ar(l,u,h){if(!bn(h))return!1;var g=typeof u;return!!("number"==g?Dr(h)&&qs(u,h.length):"string"==g&&u in h)&&fi(h[u],l)}function Ff(l,u){if(Rt(l))return!1;var h=typeof l;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=l&&!Lr(l))||Ib.test(l)||!Tb.test(l)||null!=u&&l in Vn(u)}function Nf(l){var u=vl(l),h=S[u];if("function"!=typeof h||!(u in Mt.prototype))return!1;if(l===h)return!0;var g=yl(h);return!!g&&l===g[0]}(cf&&Bi(new cf(new ArrayBuffer(1)))!=sc||vc&&Bi(new vc)!=Nn||uf&&Bi(uf.resolve())!=Je||ya&&Bi(new ya)!=Bt||bc&&Bi(new bc)!=da)&&(Bi=function(l){var u=Ei(l),h=u==ut?l.constructor:E,g=h?wl(h):"";if(g)switch(g){case tn:return sc;case wi:return Nn;case dm:return Je;case wc:return Bt;case Vs:return da}return u});var Hm=gc?Zs:uu;function qc(l){var u=l&&l.constructor;return l===("function"==typeof u&&u.prototype||ts)}function jm(l){return l==l&&!bn(l)}function Um(l,u){return function(h){return null!=h&&h[l]===u&&(u!==E||l in Vn(h))}}function Lf(l,u,h){return u=Ci(u===E?l.length-1:u,0),function(){for(var g=arguments,v=-1,x=Ci(g.length-u,0),P=Z(x);++v<x;)P[v]=g[u+v];v=-1;for(var R=Z(u+1);++v<u;)R[v]=g[v];return R[u]=h(P),Or(l,this,R)}}function vs(l,u){return u.length<2?l:Ea(l,gs(u,0,-1))}function Kc(l,u){for(var h=l.length,g=ni(u.length,h),v=wr(l);g--;){var x=u[g];l[g]=qs(x,h)?v[x]:E}return l}function Ad(l,u){if(("constructor"!==u||"function"!=typeof l[u])&&"__proto__"!=u)return l[u]}var Vf=G0(_i),bl=ad||function(l,u){return zi.setTimeout(l,u)},zm=G0(Cf);function $0(l,u,h){var g=u+"";return zm(l,function(l,u){var h=u.length;if(!h)return l;var g=h-1;return u[g]=(h>1?"& ":"")+u[g],u=u.join(h>2?", ":" "),l.replace(Ob,"{\n/* [wrapped with "+u+"] */\n")}(g,function(l,u){return Pr(je,function(h){var g="_."+h[0];u&h[1]&&!dc(l,g)&&l.push(g)}),l.sort()}(function(l){var u=l.match(Pb);return u?u[1].split(Wg):[]}(g),h)))}function G0(l){var u=0,h=0;return function(){var g=um(),v=16-(g-h);if(h=g,v>0){if(++u>=800)return arguments[0]}else u=0;return l.apply(E,arguments)}}function Cl(l,u){var h=-1,g=l.length,v=g-1;for(u=u===E?g:u;++h<u;){var x=xm(h,v),P=l[x];l[x]=l[h],l[h]=P}return l.length=u,l}var u,h,Sd=(u=tu(function(l){var u=[];return 46===l.charCodeAt(0)&&u.push(""),l.replace(KS,function(h,g,v,x){u.push(v?x.replace(YS,"$1"):g||h)}),u},function(g){return 500===h.size&&h.clear(),g}),h=u.cache,u);function rs(l){if("string"==typeof l||Lr(l))return l;var u=l+"";return"0"==u&&1/l==-ze?"-0":u}function wl(l){if(null!=l){try{return mi.call(l)}catch(u){}try{return l+""}catch(u){}}return""}function Bf(l){if(l instanceof Mt)return l.clone();var u=new Bn(l.__wrapped__,l.__chain__);return u.__actions__=wr(l.__actions__),u.__index__=l.__index__,u.__values__=l.__values__,u}var K0=qt(function(l,u){return ci(l)?ll(l,li(u,1,ci,!0)):[]}),$m=qt(function(l,u){var h=Fr(u);return ci(h)&&(h=E),ci(l)?ll(l,li(u,1,ci,!0),dt(h,2)):[]}),xd=qt(function(l,u){var h=Fr(u);return ci(h)&&(h=E),ci(l)?ll(l,li(u,1,ci,!0),E,h):[]});function Wm(l,u,h){var g=null==l?0:l.length;if(!g)return-1;var v=null==h?0:Ft(h);return v<0&&(v=Ci(g+v,0)),$i(l,dt(u,3),v)}function Md(l,u,h){var g=null==l?0:l.length;if(!g)return-1;var v=g-1;return h!==E&&(v=Ft(h),v=h<0?Ci(g+v,0):ni(v,g-1)),$i(l,dt(u,3),v,!0)}function jf(l){return null!=l&&l.length?li(l,1):[]}function qm(l){return l&&l.length?l[0]:E}var Ex=qt(function(l){var u=Yt(l,Hc);return u.length&&u[0]===l[0]?mf(u):[]}),Yc=qt(function(l){var u=Fr(l),h=Yt(l,Hc);return u===Fr(h)?u=E:h.pop(),h.length&&h[0]===l[0]?mf(h,dt(u,2)):[]}),lr=qt(function(l){var u=Fr(l),h=Yt(l,Hc);return(u="function"==typeof u?u:E)&&h.pop(),h.length&&h[0]===l[0]?mf(h,E,u):[]});function Fr(l){var u=null==l?0:l.length;return u?l[u-1]:E}var Qc=qt(Td);function Td(l,u){return l&&l.length&&u&&u.length?bf(l,u):l}var Km=yo(function(l,u){var h=null==l?0:l.length,g=xc(l,u);return M0(l,Yt(u,function(v){return qs(v,h)?+v:v}).sort(P0)),g});function Id(l){return null==l?l:hx.call(l)}var Pa=qt(function(l){return _o(li(l,1,ci,!0))}),hC=qt(function(l){var u=Fr(l);return ci(u)&&(u=E),_o(li(l,1,ci,!0),dt(u,2))}),fC=qt(function(l){var u=Fr(l);return u="function"==typeof u?u:E,_o(li(l,1,ci,!0),E,u)});function El(l){if(!l||!l.length)return[];var u=0;return l=Lo(l,function(h){if(ci(h))return u=Ci(h.length,u),!0}),hc(u,function(h){return Yt(l,ga(h))})}function $f(l,u){if(!l||!l.length)return[];var h=El(l);return null==u?h:Yt(h,function(g){return Or(u,E,g)})}var _C=qt(function(l,u){return ci(l)?ll(l,u):[]}),yC=qt(function(l){return bd(Lo(l,ci))}),e_=qt(function(l){var u=Fr(l);return ci(u)&&(u=E),bd(Lo(l,ci),dt(u,2))}),t_=qt(function(l){var u=Fr(l);return u="function"==typeof u?u:E,bd(Lo(l,ci),E,u)}),Gf=qt(El),Dl=qt(function(l){var u=l.length,h=u>1?l[u-1]:E;return h="function"==typeof h?(l.pop(),h):E,$f(l,h)});function bs(l){var u=S(l);return u.__chain__=!0,u}function qf(l,u){return u(l)}var n_=yo(function(l){var u=l.length,h=u?l[0]:0,g=this.__wrapped__,v=function(x){return xc(x,l)};return!(u>1||this.__actions__.length)&&g instanceof Mt&&qs(h)?((g=g.slice(h,+h+(u?1:0))).__actions__.push({func:qf,args:[v],thisArg:E}),new Bn(g,this.__chain__).thru(function(x){return u&&!x.length&&x.push(E),x})):this.thru(v)}),r_=pl(function(l,u,h){Dn.call(l,h)?++l[h]:kr(l,h,1)}),Qf=Rm(Wm),o_=Rm(Md);function Jf(l,u){return(Rt(l)?Pr:js)(l,dt(u,3))}function a_(l,u){return(Rt(l)?im:Tc)(l,dt(u,3))}var ep=pl(function(l,u,h){Dn.call(l,h)?l[h].push(u):kr(l,h,[u])}),wC=qt(function(l,u,h){var g=-1,v="function"==typeof u,x=Dr(l)?Z(l.length):[];return js(l,function(P){x[++g]=v?Or(u,P,h):ul(P,u,h)}),x}),EC=pl(function(l,u,h){kr(l,h,u)});function Pd(l,u){return(Rt(l)?Yt:Aa)(l,dt(u,3))}var AC=pl(function(l,u,h){l[h?0:1].push(u)},function(){return[[],[]]}),ka=qt(function(l,u){if(null==l)return[];var h=u.length;return h>1&&ar(l,u[0],u[1])?u=[]:h>2&&ar(u[0],u[1],u[2])&&(u=[u[0]]),Am(l,li(u,1),[])}),Jc=dx||function(){return zi.Date.now()};function f_(l,u,h){return u=h?E:u,Er(l,G,E,E,E,E,u=l&&null==u?l.length:u)}function eu(l,u){var h;if("function"!=typeof u)throw new hs(Ce);return l=Ft(l),function(){return--l>0&&(h=u.apply(this,arguments)),l<=1&&(u=E),h}}var ip=qt(function(l,u,h){var g=1;if(h.length){var v=Ls(h,ys(ip));g|=32}return Er(l,g,u,h,v)}),rp=qt(function(l,u,h){var g=3;if(h.length){var v=Ls(h,ys(rp));g|=32}return Er(u,g,l,h,v)});function kd(l,u,h){var g,v,x,P,R,z,oe=0,le=!1,pe=!1,Te=!0;if("function"!=typeof l)throw new hs(Ce);function Xe(ui){var Ys=g,Qs=v;return g=v=E,oe=ui,P=l.apply(Qs,Ys)}function ht(ui){return oe=ui,R=bl(Zt,u),le?Xe(ui):P}function ft(ui){var Ys=ui-z;return z===E||Ys>=u||Ys<0||pe&&ui-oe>=x}function Zt(){var ui=Jc();if(ft(ui))return nn(ui);R=bl(Zt,function(ui){var sy=u-(ui-z);return pe?ni(sy,x-(ui-oe)):sy}(ui))}function nn(ui){return R=E,Te&&g?Xe(ui):(g=v=E,P)}function Hr(){var ui=Jc(),Ys=ft(ui);if(g=arguments,v=this,z=ui,Ys){if(R===E)return ht(z);if(pe)return Om(R),R=bl(Zt,u),Xe(z)}return R===E&&(R=bl(Zt,u)),P}return u=ws(u)||0,bn(h)&&(le=!!h.leading,x=(pe="maxWait"in h)?Ci(ws(h.maxWait)||0,u):x,Te="trailing"in h?!!h.trailing:Te),Hr.cancel=function(){R!==E&&Om(R),oe=0,g=z=v=R=E},Hr.flush=function(){return R===E?P:nn(Jc())},Hr}var p_=qt(function(l,u){return Mc(l,1,u)}),Rd=qt(function(l,u,h){return Mc(l,ws(u)||0,h)});function tu(l,u){if("function"!=typeof l||null!=u&&"function"!=typeof u)throw new hs(Ce);var h=function(){var g=arguments,v=u?u.apply(this,g):g[0],x=h.cache;if(x.has(v))return x.get(v);var P=l.apply(this,g);return h.cache=x.set(v,P)||x,P};return h.cache=new(tu.Cache||Hs),h}function Sl(l){if("function"!=typeof l)throw new hs(Ce);return function(){var u=arguments;switch(u.length){case 0:return!l.call(this);case 1:return!l.call(this,u[0]);case 2:return!l.call(this,u[0],u[1]);case 3:return!l.call(this,u[0],u[1],u[2])}return!l.apply(this,u)}}tu.Cache=Hs;var ap=Im(function(l,u){var h=(u=1==u.length&&Rt(u[0])?Yt(u[0],Li(dt())):Yt(li(u,1),Li(dt()))).length;return qt(function(g){for(var v=-1,x=ni(g.length,h);++v<x;)g[v]=u[v].call(this,g[v]);return Or(l,this,g)})}),Ra=qt(function(l,u){var h=Ls(u,ys(Ra));return Er(l,32,E,u,h)}),m_=qt(function(l,u){var h=Ls(u,ys(m_));return Er(l,64,E,u,h)}),__=yo(function(l,u){return Er(l,256,E,E,E,u)});function fi(l,u){return l===u||l!=l&&u!=u}var kC=ml(Rc),w_=ml(function(l,u){return l>=u}),Fa=_f(function(){return arguments}())?_f:function(l){return qn(l)&&Dn.call(l,"callee")&&!od.call(l,"callee")},Rt=Z.isArray,RC=Ju?Li(Ju):function(l){return qn(l)&&Ei(l)==Ro};function Dr(l){return null!=l&&Ml(l.length)&&!Zs(l)}function ci(l){return qn(l)&&Dr(l)}var qo=sl||uu,NC=Qh?Li(Qh):function(l){return qn(l)&&Ei(l)==Ke};function xl(l){if(!qn(l))return!1;var u=Ei(l);return u==ct||"[object DOMException]"==u||"string"==typeof l.message&&"string"==typeof l.name&&!Na(l)}function Zs(l){if(!bn(l))return!1;var u=Ei(l);return u==et||u==Un||"[object AsyncFunction]"==u||"[object Proxy]"==u}function A_(l){return"number"==typeof l&&l==Ft(l)}function Ml(l){return"number"==typeof l&&l>-1&&l%1==0&&l<=He}function bn(l){var u=typeof l;return null!=l&&("object"==u||"function"==u)}function qn(l){return null!=l&&"object"==typeof l}var cp=Fs?Li(Fs):function(l){return qn(l)&&Bi(l)==Nn};function Vd(l){return"number"==typeof l||qn(l)&&Ei(l)==Ln}function Na(l){if(!qn(l)||Ei(l)!=ut)return!1;var u=il(l);if(null===u)return!0;var h=Dn.call(u,"constructor")&&u.constructor;return"function"==typeof h&&h instanceof h&&mi.call(h)==am}var nu=tl?Li(tl):function(l){return qn(l)&&Ei(l)==Ir},x_=tm?Li(tm):function(l){return qn(l)&&Bi(l)==Bt};function Bd(l){return"string"==typeof l||!Rt(l)&&qn(l)&&Ei(l)==ic}function Lr(l){return"symbol"==typeof l||qn(l)&&Ei(l)==Zu}var Tl=Wn?Li(Wn):function(l){return qn(l)&&Ml(l.length)&&!!vn[Ei(l)]},kx=ml(zo),T_=ml(function(l,u){return l<=u});function dp(l){if(!l)return[];if(Dr(l))return Bd(l)?ds(l):wr(l);if(rl&&l[rl])return function(U){for(var ie,Z=[];!(ie=U.next()).done;)Z.push(ie.value);return Z}(l[rl]());var u=Bi(l);return(u==Nn?Jr:u==Bt?ma:Pl)(l)}function vo(l){return l?(l=ws(l))===ze||l===-ze?17976931348623157e292*(l<0?-1:1):l==l?l:0:0===l?l:0}function Ft(l){var u=vo(l),h=u%1;return u==u?h?u-h:u:0}function VC(l){return l?wa(Ft(l),0,Ze):0}function ws(l){if("number"==typeof l)return l;if(Lr(l))return NaN;if(bn(l)){var u="function"==typeof l.valueOf?l.valueOf():l;l=bn(u)?u+"":u}if("string"!=typeof l)return 0===l?l:+l;l=ir(l);var h=Lb.test(l);return h||xn.test(l)?r0(l.slice(2),h?2:8):Nb.test(l)?NaN:+l}function BC(l){return zs(l,Zi(l))}function Tn(l){return null==l?"":yi(l)}var Fx=$s(function(l,u){if(qc(u)||Dr(u))zs(u,ii(u),l);else for(var h in u)Dn.call(u,h)&&Ac(l,h,u[h])}),HC=$s(function(l,u){zs(u,Zi(u),l)}),hp=$s(function(l,u,h,g){zs(u,Zi(u),l,g)}),Nx=$s(function(l,u,h,g){zs(u,ii(u),l,g)}),Lx=yo(xc),fp=qt(function(l,u){l=Vn(l);var h=-1,g=u.length,v=g>2?u[2]:E;for(v&&ar(u[0],u[1],v)&&(g=1);++h<g;)for(var x=u[h],P=Zi(x),R=-1,z=P.length;++R<z;){var oe=P[R],le=l[oe];(le===E||fi(le,ts[oe])&&!Dn.call(l,oe))&&(l[oe]=x[oe])}return l}),jC=qt(function(l){return l.push(E,Nm),Or(k_,E,l)});function iu(l,u,h){var g=null==l?E:Ea(l,u);return g===E?h:g}function Hd(l,u){return null!=l&&Vm(l,u,pd)}var GC=Ia(function(l,u,h){null!=u&&"function"!=typeof u.toString&&(u=mc.call(u)),l[u]=h},au(Ki)),WC=Ia(function(l,u,h){null!=u&&"function"!=typeof u.toString&&(u=mc.call(u)),Dn.call(l,u)?l[u].push(h):l[u]=[h]},dt),ru=qt(ul);function ii(l){return Dr(l)?Ec(l):Da(l)}function Zi(l){return Dr(l)?Ec(l,!0):function(l){if(!bn(l))return function(l){var u=[];if(null!=l)for(var h in Vn(l))u.push(h);return u}(l);var u=qc(l),h=[];for(var g in l)"constructor"==g&&(u||!Dn.call(l,g))||h.push(g);return h}(l)}var Ol=$s(function(l,u,h){Us(l,u,h)}),k_=$s(function(l,u,h,g){Us(l,u,h,g)}),R_=yo(function(l,u){var h={};if(null==l)return h;var g=!1;u=Yt(u,function(x){return x=Sa(x,l),g||(g=x.length>1),x}),zs(l,Pf(l),h),g&&(h=ns(h,7,yx));for(var v=u.length;v--;)wf(h,u[v]);return h}),mp=yo(function(l,u){return null==l?{}:function(l,u){return Sm(l,u,function(h,g){return Hd(l,g)})}(l,u)});function jd(l,u){if(null==l)return{};var h=Yt(Pf(l),function(g){return[g]});return u=dt(u),Sm(l,h,function(g,v){return u(g,v[0])})}var _p=Fm(ii),ZC=Fm(Zi);function Pl(l){return null==l?[]:jo(l,ii(l))}var Vx=Ta(function(l,u,h){return u=u.toLowerCase(),l+(h?JC(u):u)});function JC(l){return wp(Tn(l).toLowerCase())}function yp(l){return(l=Tn(l))&&l.replace(Ut,td).replace(Jb,"")}var H_=Ta(function(l,u,h){return l+(h?"-":"")+u.toLowerCase()}),tw=Ta(function(l,u,h){return l+(h?" ":"")+u.toLowerCase()}),nw=xf("toLowerCase"),z_=Ta(function(l,u,h){return l+(h?"_":"")+u.toLowerCase()}),aw=Ta(function(l,u,h){return l+(h?" ":"")+wp(u)}),Cp=Ta(function(l,u,h){return l+(h?" ":"")+u.toUpperCase()}),wp=xf("toUpperCase");function W_(l,u,h){return l=Tn(l),(u=h?E:u)===E?function(U){return No.test(U)}(l)?function(U){return U.match(Yh)||[]}(l):function(U){return U.match(kb)||[]}(l):l.match(u)||[]}var ou=qt(function(l,u){try{return Or(l,E,u)}catch(h){return xl(h)?h:new kt(h)}}),Ep=yo(function(l,u){return Pr(u,function(h){h=rs(h),kr(l,h,ip(l[h],l))}),l});function au(l){return function(){return l}}var pw=Mf(),gw=Mf(!0);function Ki(l){return l}function Z_(l){return _d("function"==typeof l?l:ns(l,1))}var Y_=qt(function(l,u){return function(h){return ul(h,l,u)}}),Q_=qt(function(l,u){return function(h){return ul(l,h,u)}});function zd(l,u,h){var g=ii(u),v=kc(u,g);null==h&&(!bn(u)||!v.length&&g.length)&&(h=u,u=l,l=this,v=kc(u,ii(u)));var x=!(bn(h)&&"chain"in h&&!h.chain),P=Zs(l);return Pr(v,function(R){var z=u[R];l[R]=z,P&&(l.prototype[R]=function(){var oe=this.__chain__;if(x||oe){var le=l(this.__wrapped__),pe=le.__actions__=wr(this.__actions__);return pe.push({func:z,args:arguments,thisArg:l}),le.__chain__=oe,le}return z.apply(l,Jn([this.value()],arguments))})}),l}function Es(){}var _w=gl(Yt),yw=gl(pn),jx=gl(vr);function kl(l){return Ff(l)?ga(rs(l)):function(l){return function(u){return Ea(u,l)}}(l)}var lu=Tf(),cu=Tf(!0);function Ap(){return[]}function uu(){return!1}var ww=Vi(function(l,u){return l+u},0),ny=wd("ceil"),Rl=Vi(function(l,u){return l/u},1),iy=wd("floor"),Mw=Vi(function(l,u){return l*u},1),Ux=wd("round"),Tw=Vi(function(l,u){return l-u},0);return S.after=function(l,u){if("function"!=typeof u)throw new hs(Ce);return l=Ft(l),function(){if(--l<1)return u.apply(this,arguments)}},S.ary=f_,S.assign=Fx,S.assignIn=HC,S.assignInWith=hp,S.assignWith=Nx,S.at=Lx,S.before=eu,S.bind=ip,S.bindAll=Ep,S.bindKey=rp,S.castArray=function(){if(!arguments.length)return[];var l=arguments[0];return Rt(l)?l:[l]},S.chain=bs,S.chunk=function(l,u,h){u=(h?ar(l,u,h):u===E)?1:Ci(Ft(u),0);var g=null==l?0:l.length;if(!g||u<1)return[];for(var v=0,x=0,P=Z(sr(g/u));v<g;)P[x++]=gs(l,v,v+=u);return P},S.compact=function(l){for(var u=-1,h=null==l?0:l.length,g=0,v=[];++u<h;){var x=l[u];x&&(v[g++]=x)}return v},S.concat=function(){var l=arguments.length;if(!l)return[];for(var u=Z(l-1),h=arguments[0],g=l;g--;)u[g-1]=arguments[g];return Jn(Rt(h)?wr(h):[h],li(u,1))},S.cond=function(l){var u=null==l?0:l.length,h=dt();return l=u?Yt(l,function(g){if("function"!=typeof g[1])throw new hs(Ce);return[h(g[0]),g[1]]}):[],qt(function(g){for(var v=-1;++v<u;){var x=l[v];if(Or(x[0],this,g))return Or(x[1],this,g)}})},S.conforms=function(l){return function(l){var u=ii(l);return function(h){return A0(h,l,u)}}(ns(l,1))},S.constant=au,S.countBy=r_,S.create=function(l,u){var h=po(l);return null==u?h:ym(h,u)},S.curry=function sp(l,u,h){var g=Er(l,8,E,E,E,E,E,u=h?E:u);return g.placeholder=sp.placeholder,g},S.curryRight=function op(l,u,h){var g=Er(l,16,E,E,E,E,E,u=h?E:u);return g.placeholder=op.placeholder,g},S.debounce=kd,S.defaults=fp,S.defaultsDeep=jC,S.defer=p_,S.delay=Rd,S.difference=K0,S.differenceBy=$m,S.differenceWith=xd,S.drop=function(l,u,h){var g=null==l?0:l.length;return g?gs(l,(u=h||u===E?1:Ft(u))<0?0:u,g):[]},S.dropRight=function(l,u,h){var g=null==l?0:l.length;return g?gs(l,0,(u=g-(u=h||u===E?1:Ft(u)))<0?0:u):[]},S.dropRightWhile=function(l,u){return l&&l.length?Ef(l,dt(u,3),!0,!0):[]},S.dropWhile=function(l,u){return l&&l.length?Ef(l,dt(u,3),!0):[]},S.fill=function(l,u,h,g){var v=null==l?0:l.length;return v?(h&&"number"!=typeof h&&ar(l,u,h)&&(h=0,g=v),function(l,u,h,g){var v=l.length;for((h=Ft(h))<0&&(h=-h>v?0:v+h),(g=g===E||g>v?v:Ft(g))<0&&(g+=v),g=h>g?0:VC(g);h<g;)l[h++]=u;return l}(l,u,h,g)):[]},S.filter=function(l,u){return(Rt(l)?Lo:bm)(l,dt(u,3))},S.flatMap=function(l,u){return li(Pd(l,u),1)},S.flatMapDeep=function(l,u){return li(Pd(l,u),ze)},S.flatMapDepth=function(l,u,h){return h=h===E?1:Ft(h),li(Pd(l,u),h)},S.flatten=jf,S.flattenDeep=function(l){return null!=l&&l.length?li(l,ze):[]},S.flattenDepth=function(l,u){return null!=l&&l.length?li(l,u=u===E?1:Ft(u)):[]},S.flip=function(l){return Er(l,512)},S.flow=pw,S.flowRight=gw,S.fromPairs=function(l){for(var u=-1,h=null==l?0:l.length,g={};++u<h;){var v=l[u];g[v[0]]=v[1]}return g},S.functions=function(l){return null==l?[]:kc(l,ii(l))},S.functionsIn=function(l){return null==l?[]:kc(l,Zi(l))},S.groupBy=ep,S.initial=function(l){return null!=l&&l.length?gs(l,0,-1):[]},S.intersection=Ex,S.intersectionBy=Yc,S.intersectionWith=lr,S.invert=GC,S.invertBy=WC,S.invokeMap=wC,S.iteratee=Z_,S.keyBy=EC,S.keys=ii,S.keysIn=Zi,S.map=Pd,S.mapKeys=function(l,u){var h={};return u=dt(u,3),mo(l,function(g,v,x){kr(h,u(g,v,x),g)}),h},S.mapValues=function(l,u){var h={};return u=dt(u,3),mo(l,function(g,v,x){kr(h,v,u(g,v,x))}),h},S.matches=function(l){return fl(ns(l,1))},S.matchesProperty=function(l,u){return yd(l,ns(u,1))},S.memoize=tu,S.merge=Ol,S.mergeWith=k_,S.method=Y_,S.methodOf=Q_,S.mixin=zd,S.negate=Sl,S.nthArg=function(l){return l=Ft(l),qt(function(u){return x0(u,l)})},S.omit=R_,S.omitBy=function(l,u){return jd(l,Sl(dt(u)))},S.once=function(l){return eu(2,l)},S.orderBy=function(l,u,h,g){return null==l?[]:(Rt(u)||(u=null==u?[]:[u]),Rt(h=g?E:h)||(h=null==h?[]:[h]),Am(l,u,h))},S.over=_w,S.overArgs=ap,S.overEvery=yw,S.overSome=jx,S.partial=Ra,S.partialRight=m_,S.partition=AC,S.pick=mp,S.pickBy=jd,S.property=kl,S.propertyOf=function(l){return function(u){return null==l?E:Ea(l,u)}},S.pull=Qc,S.pullAll=Td,S.pullAllBy=function(l,u,h){return l&&l.length&&u&&u.length?bf(l,u,dt(h,2)):l},S.pullAllWith=function(l,u,h){return l&&l.length&&u&&u.length?bf(l,u,E,h):l},S.pullAt=Km,S.range=lu,S.rangeRight=cu,S.rearg=__,S.reject=function(l,u){return(Rt(l)?Lo:bm)(l,Sl(dt(u,3)))},S.remove=function(l,u){var h=[];if(!l||!l.length)return h;var g=-1,v=[],x=l.length;for(u=dt(u,3);++g<x;){var P=l[g];u(P,g,l)&&(h.push(P),v.push(g))}return M0(l,v),h},S.rest=function(l,u){if("function"!=typeof l)throw new hs(Ce);return qt(l,u=u===E?u:Ft(u))},S.reverse=Id,S.sampleSize=function(l,u,h){return u=(h?ar(l,u,h):u===E)?1:Ft(u),(Rt(l)?dd:Lc)(l,u)},S.set=function(l,u,h){return null==l?l:vd(l,u,h)},S.setWith=function(l,u,h,g){return g="function"==typeof g?g:E,null==l?l:vd(l,u,h,g)},S.shuffle=function(l){return(Rt(l)?pf:Vc)(l)},S.slice=function(l,u,h){var g=null==l?0:l.length;return g?(h&&"number"!=typeof h&&ar(l,u,h)?(u=0,h=g):(u=null==u?0:Ft(u),h=h===E?g:Ft(h)),gs(l,u,h)):[]},S.sortBy=ka,S.sortedUniq=function(l){return l&&l.length?Bc(l):[]},S.sortedUniqBy=function(l,u){return l&&l.length?Bc(l,dt(u,2)):[]},S.split=function(l,u,h){return h&&"number"!=typeof h&&ar(l,u,h)&&(u=h=E),(h=h===E?Ze:h>>>0)?(l=Tn(l))&&("string"==typeof u||null!=u&&!nu(u))&&!(u=yi(u))&&Xr(l)?Wo(ds(l),0,h):l.split(u,h):[]},S.spread=function(l,u){if("function"!=typeof l)throw new hs(Ce);return u=null==u?0:Ci(Ft(u),0),qt(function(h){var g=h[u],v=Wo(h,0,u);return g&&Jn(v,g),Or(l,this,v)})},S.tail=function(l){var u=null==l?0:l.length;return u?gs(l,1,u):[]},S.take=function(l,u,h){return l&&l.length?gs(l,0,(u=h||u===E?1:Ft(u))<0?0:u):[]},S.takeRight=function(l,u,h){var g=null==l?0:l.length;return g?gs(l,(u=g-(u=h||u===E?1:Ft(u)))<0?0:u,g):[]},S.takeRightWhile=function(l,u){return l&&l.length?Ef(l,dt(u,3),!1,!0):[]},S.takeWhile=function(l,u){return l&&l.length?Ef(l,dt(u,3)):[]},S.tap=function(l,u){return u(l),l},S.throttle=function(l,u,h){var g=!0,v=!0;if("function"!=typeof l)throw new hs(Ce);return bn(h)&&(g="leading"in h?!!h.leading:g,v="trailing"in h?!!h.trailing:v),kd(l,u,{leading:g,maxWait:u,trailing:v})},S.thru=qf,S.toArray=dp,S.toPairs=_p,S.toPairsIn=ZC,S.toPath=function(l){return Rt(l)?Yt(l,rs):Lr(l)?[l]:wr(Sd(Tn(l)))},S.toPlainObject=BC,S.transform=function(l,u,h){var g=Rt(l),v=g||qo(l)||Tl(l);if(u=dt(u,4),null==h){var x=l&&l.constructor;h=v?g?new x:[]:bn(l)&&Zs(x)?po(il(l)):{}}return(v?Pr:mo)(l,function(P,R,z){return u(h,P,R,z)}),h},S.unary=function(l){return f_(l,1)},S.union=Pa,S.unionBy=hC,S.unionWith=fC,S.uniq=function(l){return l&&l.length?_o(l):[]},S.uniqBy=function(l,u){return l&&l.length?_o(l,dt(u,2)):[]},S.uniqWith=function(l,u){return u="function"==typeof u?u:E,l&&l.length?_o(l,E,u):[]},S.unset=function(l,u){return null==l||wf(l,u)},S.unzip=El,S.unzipWith=$f,S.update=function(l,u,h){return null==l?l:Tm(l,u,Go(h))},S.updateWith=function(l,u,h,g){return g="function"==typeof g?g:E,null==l?l:Tm(l,u,Go(h),g)},S.values=Pl,S.valuesIn=function(l){return null==l?[]:jo(l,Zi(l))},S.without=_C,S.words=W_,S.wrap=function(l,u){return Ra(Go(u),l)},S.xor=yC,S.xorBy=e_,S.xorWith=t_,S.zip=Gf,S.zipObject=function(l,u){return Cr(l||[],u||[],Ac)},S.zipObjectDeep=function(l,u){return Cr(l||[],u||[],vd)},S.zipWith=Dl,S.entries=_p,S.entriesIn=ZC,S.extend=HC,S.extendWith=hp,zd(S,S),S.add=ww,S.attempt=ou,S.camelCase=Vx,S.capitalize=JC,S.ceil=ny,S.clamp=function(l,u,h){return h===E&&(h=u,u=E),h!==E&&(h=(h=ws(h))==h?h:0),u!==E&&(u=(u=ws(u))==u?u:0),wa(ws(l),u,h)},S.clone=function(l){return ns(l,4)},S.cloneDeep=function(l){return ns(l,5)},S.cloneDeepWith=function(l,u){return ns(l,5,u="function"==typeof u?u:E)},S.cloneWith=function(l,u){return ns(l,4,u="function"==typeof u?u:E)},S.conformsTo=function(l,u){return null==u||A0(l,u,ii(u))},S.deburr=yp,S.defaultTo=function(l,u){return null==l||l!=l?u:l},S.divide=Rl,S.endsWith=function(l,u,h){l=Tn(l),u=yi(u);var g=l.length,v=h=h===E?g:wa(Ft(h),0,g);return(h-=u.length)>=0&&l.slice(h,v)==u},S.eq=fi,S.escape=function(l){return(l=Tn(l))&&lc.test(l)?l.replace(Xa,Xh):l},S.escapeRegExp=function(l){return(l=Tn(l))&&$h.test(l)?l.replace(ha,"\\$&"):l},S.every=function(l,u,h){var g=Rt(l)?pn:vm;return h&&ar(l,u,h)&&(u=E),g(l,dt(u,3))},S.find=Qf,S.findIndex=Wm,S.findKey=function(l,u){return zn(l,dt(u,3),mo)},S.findLast=o_,S.findLastIndex=Md,S.findLastKey=function(l,u){return zn(l,dt(u,3),fd)},S.floor=iy,S.forEach=Jf,S.forEachRight=a_,S.forIn=function(l,u){return null==l?l:Oc(l,dt(u,3),Zi)},S.forInRight=function(l,u){return null==l?l:Pc(l,dt(u,3),Zi)},S.forOwn=function(l,u){return l&&mo(l,dt(u,3))},S.forOwnRight=function(l,u){return l&&fd(l,dt(u,3))},S.get=iu,S.gt=kC,S.gte=w_,S.has=function(l,u){return null!=l&&Vm(l,u,gf)},S.hasIn=Hd,S.head=qm,S.identity=Ki,S.includes=function(l,u,h,g){l=Dr(l)?l:Pl(l),h=h&&!g?Ft(h):0;var v=l.length;return h<0&&(h=Ci(v+h,0)),Bd(l)?h<=v&&l.indexOf(u,h)>-1:!!v&&Qr(l,u,h)>-1},S.indexOf=function(l,u,h){var g=null==l?0:l.length;if(!g)return-1;var v=null==h?0:Ft(h);return v<0&&(v=Ci(g+v,0)),Qr(l,u,v)},S.inRange=function(l,u,h){return u=vo(u),h===E?(h=u,u=0):h=vo(h),function(l,u,h){return l>=ni(u,h)&&l<Ci(u,h)}(l=ws(l),u,h)},S.invoke=ru,S.isArguments=Fa,S.isArray=Rt,S.isArrayBuffer=RC,S.isArrayLike=Dr,S.isArrayLikeObject=ci,S.isBoolean=function(l){return!0===l||!1===l||qn(l)&&Ei(l)==Dt},S.isBuffer=qo,S.isDate=NC,S.isElement=function(l){return qn(l)&&1===l.nodeType&&!Na(l)},S.isEmpty=function(l){if(null==l)return!0;if(Dr(l)&&(Rt(l)||"string"==typeof l||"function"==typeof l.splice||qo(l)||Tl(l)||Fa(l)))return!l.length;var u=Bi(l);if(u==Nn||u==Bt)return!l.size;if(qc(l))return!Da(l).length;for(var h in l)if(Dn.call(l,h))return!1;return!0},S.isEqual=function(l,u){return Fc(l,u)},S.isEqualWith=function(l,u,h){var g=(h="function"==typeof h?h:E)?h(l,u):E;return g===E?Fc(l,u,E,h):!!g},S.isError=xl,S.isFinite=function(l){return"number"==typeof l&&br(l)},S.isFunction=Zs,S.isInteger=A_,S.isLength=Ml,S.isMap=cp,S.isMatch=function(l,u){return l===u||yf(l,u,Lm(u))},S.isMatchWith=function(l,u,h){return h="function"==typeof h?h:E,yf(l,u,Lm(u),h)},S.isNaN=function(l){return Vd(l)&&l!=+l},S.isNative=function(l){if(Hm(l))throw new kt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return vf(l)},S.isNil=function(l){return null==l},S.isNull=function(l){return null===l},S.isNumber=Vd,S.isObject=bn,S.isObjectLike=qn,S.isPlainObject=Na,S.isRegExp=nu,S.isSafeInteger=function(l){return A_(l)&&l>=-He&&l<=He},S.isSet=x_,S.isString=Bd,S.isSymbol=Lr,S.isTypedArray=Tl,S.isUndefined=function(l){return l===E},S.isWeakMap=function(l){return qn(l)&&Bi(l)==da},S.isWeakSet=function(l){return qn(l)&&"[object WeakSet]"==Ei(l)},S.join=function(l,u){return null==l?"":cm.call(l,u)},S.kebabCase=H_,S.last=Fr,S.lastIndexOf=function(l,u,h){var g=null==l?0:l.length;if(!g)return-1;var v=g;return h!==E&&(v=(v=Ft(h))<0?Ci(g+v,0):ni(v,g-1)),u==u?function(U,ie,Z){for(var $e=Z+1;$e--;)if(U[$e]===ie)return $e;return $e}(l,u,v):$i(l,Vo,v,!0)},S.lowerCase=tw,S.lowerFirst=nw,S.lt=kx,S.lte=T_,S.max=function(l){return l&&l.length?Ic(l,Ki,Rc):E},S.maxBy=function(l,u){return l&&l.length?Ic(l,dt(u,2),Rc):E},S.mean=function(l){return oi(l,Ki)},S.meanBy=function(l,u){return oi(l,dt(u,2))},S.min=function(l){return l&&l.length?Ic(l,Ki,zo):E},S.minBy=function(l,u){return l&&l.length?Ic(l,dt(u,2),zo):E},S.stubArray=Ap,S.stubFalse=uu,S.stubObject=function(){return{}},S.stubString=function(){return""},S.stubTrue=function(){return!0},S.multiply=Mw,S.nth=function(l,u){return l&&l.length?x0(l,Ft(u)):E},S.noConflict=function(){return zi._===this&&(zi._=d0),this},S.noop=Es,S.now=Jc,S.pad=function(l,u,h){l=Tn(l);var g=(u=Ft(u))?pc(l):0;if(!u||g>=u)return l;var v=(u-g)/2;return _s(ld(v),h)+l+_s(sr(v),h)},S.padEnd=function(l,u,h){l=Tn(l);var g=(u=Ft(u))?pc(l):0;return u&&g<u?l+_s(u-g,h):l},S.padStart=function(l,u,h){l=Tn(l);var g=(u=Ft(u))?pc(l):0;return u&&g<u?_s(u-g,h)+l:l},S.parseInt=function(l,u,h){return h||null==u?u=0:u&&(u=+u),lf(Tn(l).replace(fa,""),u||0)},S.random=function(l,u,h){if(h&&"boolean"!=typeof h&&ar(l,u,h)&&(u=h=E),h===E&&("boolean"==typeof u?(h=u,u=E):"boolean"==typeof l&&(h=l,l=E)),l===E&&u===E?(l=0,u=1):(l=vo(l),u===E?(u=l,l=0):u=vo(u)),l>u){var g=l;l=u,u=g}if(h||l%1||u%1){var v=wt();return ni(l+v*(u-l+n0("1e-"+((v+"").length-1))),u)}return xm(l,u)},S.reduce=function(l,u,h){var g=Rt(l)?Ns:Vt,v=arguments.length<3;return g(l,dt(u,4),h,v,js)},S.reduceRight=function(l,u,h){var g=Rt(l)?pa:Vt,v=arguments.length<3;return g(l,dt(u,4),h,v,Tc)},S.repeat=function(l,u,h){return u=(h?ar(l,u,h):u===E)?1:Ft(u),Mm(Tn(l),u)},S.replace=function(){var l=arguments,u=Tn(l[0]);return l.length<3?u:u.replace(l[1],l[2])},S.result=function(l,u,h){var g=-1,v=(u=Sa(u,l)).length;for(v||(v=1,l=E);++g<v;){var x=null==l?E:l[rs(u[g])];x===E&&(g=v,x=h),l=Zs(x)?x.call(l):x}return l},S.round=Ux,S.runInContext=U,S.sample=function(l){return(Rt(l)?Dc:_x)(l)},S.size=function(l){if(null==l)return 0;if(Dr(l))return Bd(l)?pc(l):l.length;var u=Bi(l);return u==Nn||u==Bt?l.size:Da(l).length},S.snakeCase=z_,S.some=function(l,u,h){var g=Rt(l)?vr:T0;return h&&ar(l,u,h)&&(u=E),g(l,dt(u,3))},S.sortedIndex=function(l,u){return or(l,u)},S.sortedIndexBy=function(l,u,h){return is(l,u,dt(h,2))},S.sortedIndexOf=function(l,u){var h=null==l?0:l.length;if(h){var g=or(l,u);if(g<h&&fi(l[g],u))return g}return-1},S.sortedLastIndex=function(l,u){return or(l,u,!0)},S.sortedLastIndexBy=function(l,u,h){return is(l,u,dt(h,2),!0)},S.sortedLastIndexOf=function(l,u){if(null!=l&&l.length){var g=or(l,u,!0)-1;if(fi(l[g],u))return g}return-1},S.startCase=aw,S.startsWith=function(l,u,h){return l=Tn(l),h=null==h?0:wa(Ft(h),0,l.length),u=yi(u),l.slice(h,h+u.length)==u},S.subtract=Tw,S.sum=function(l){return l&&l.length?Ho(l,Ki):0},S.sumBy=function(l,u){return l&&l.length?Ho(l,dt(u,2)):0},S.template=function(l,u,h){var g=S.templateSettings;h&&ar(l,u,h)&&(u=E),l=Tn(l),u=hp({},u,g,_l);var R,z,v=hp({},u.imports,g.imports,_l),x=ii(v),P=jo(v,x),oe=0,le=u.interpolate||Ja,pe="__p += '",Te=rd((u.escape||Ja).source+"|"+le.source+"|"+(le===Mi?Fb:Ja).source+"|"+(u.evaluate||Ja).source+"|$","g"),Xe="//# sourceURL="+(Dn.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nx+"]")+"\n";l.replace(Te,function(ft,Zt,nn,Br,cr,Hr){return nn||(nn=Br),pe+=l.slice(oe,Hr).replace(Bb,fc),Zt&&(R=!0,pe+="' +\n__e("+Zt+") +\n'"),cr&&(z=!0,pe+="';\n"+cr+";\n__p += '"),nn&&(pe+="' +\n((__t = ("+nn+")) == null ? '' : __t) +\n'"),oe=Hr+ft.length,ft}),pe+="';\n";var ht=Dn.call(u,"variable")&&u.variable;if(ht){if(Rb.test(ht))throw new kt("Invalid `variable` option passed into `_.template`")}else pe="with (obj) {\n"+pe+"\n}\n";pe=(z?pe.replace(Sb,""):pe).replace(xb,"$1").replace(Mb,"$1;"),pe="function("+(ht||"obj")+") {\n"+(ht?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(R?", __e = _.escape":"")+(z?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+pe+"return __p\n}";var Ht=ou(function(){return En(x,Xe+"return "+pe).apply(E,P)});if(Ht.source=pe,xl(Ht))throw Ht;return Ht},S.times=function(l,u){if((l=Ft(l))<1||l>He)return[];var h=Ze,g=ni(l,Ze);u=dt(u),l-=Ze;for(var v=hc(g,u);++h<l;)u(h);return v},S.toFinite=vo,S.toInteger=Ft,S.toLength=VC,S.toLower=function(l){return Tn(l).toLowerCase()},S.toNumber=ws,S.toSafeInteger=function(l){return l?wa(Ft(l),-He,He):0===l?l:0},S.toString=Tn,S.toUpper=function(l){return Tn(l).toUpperCase()},S.trim=function(l,u,h){if((l=Tn(l))&&(h||u===E))return ir(l);if(!l||!(u=yi(u)))return l;var g=ds(l),v=ds(u);return Wo(g,Rn(g,v),rm(g,v)+1).join("")},S.trimEnd=function(l,u,h){if((l=Tn(l))&&(h||u===E))return l.slice(0,sm(l)+1);if(!l||!(u=yi(u)))return l;var g=ds(l);return Wo(g,0,rm(g,ds(u))+1).join("")},S.trimStart=function(l,u,h){if((l=Tn(l))&&(h||u===E))return l.replace(fa,"");if(!l||!(u=yi(u)))return l;var g=ds(l);return Wo(g,Rn(g,ds(u))).join("")},S.truncate=function(l,u){var h=30,g="...";if(bn(u)){var v="separator"in u?u.separator:v;h="length"in u?Ft(u.length):h,g="omission"in u?yi(u.omission):g}var x=(l=Tn(l)).length;if(Xr(l)){var P=ds(l);x=P.length}if(h>=x)return l;var R=h-pc(g);if(R<1)return g;var z=P?Wo(P,0,R).join(""):l.slice(0,R);if(v===E)return z+g;if(P&&(R+=z.length-R),nu(v)){if(l.slice(R).search(v)){var oe,le=z;for(v.global||(v=rd(v.source,Tn(qg.exec(v))+"g")),v.lastIndex=0;oe=v.exec(le);)var pe=oe.index;z=z.slice(0,pe===E?R:pe)}}else if(l.indexOf(yi(v),R)!=R){var Te=z.lastIndexOf(v);Te>-1&&(z=z.slice(0,Te))}return z+g},S.unescape=function(l){return(l=Tn(l))&&qS.test(l)?l.replace(Ni,sx):l},S.uniqueId=function(l){var u=++u0;return Tn(l)+u},S.upperCase=Cp,S.upperFirst=wp,S.each=Jf,S.eachRight=a_,S.first=qm,zd(S,function(){var l={};return mo(S,function(u,h){Dn.call(S.prototype,h)||(l[h]=u)}),l}(),{chain:!1}),S.VERSION="4.17.21",Pr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){S[l].placeholder=S}),Pr(["drop","take"],function(l,u){Mt.prototype[l]=function(h){h=h===E?1:Ci(Ft(h),0);var g=this.__filtered__&&!u?new Mt(this):this.clone();return g.__filtered__?g.__takeCount__=ni(h,g.__takeCount__):g.__views__.push({size:ni(h,Ze),type:l+(g.__dir__<0?"Right":"")}),g},Mt.prototype[l+"Right"]=function(h){return this.reverse()[l](h).reverse()}}),Pr(["filter","map","takeWhile"],function(l,u){var h=u+1,g=1==h||3==h;Mt.prototype[l]=function(v){var x=this.clone();return x.__iteratees__.push({iteratee:dt(v,3),type:h}),x.__filtered__=x.__filtered__||g,x}}),Pr(["head","last"],function(l,u){var h="take"+(u?"Right":"");Mt.prototype[l]=function(){return this[h](1).value()[0]}}),Pr(["initial","tail"],function(l,u){var h="drop"+(u?"":"Right");Mt.prototype[l]=function(){return this.__filtered__?new Mt(this):this[h](1)}}),Mt.prototype.compact=function(){return this.filter(Ki)},Mt.prototype.find=function(l){return this.filter(l).head()},Mt.prototype.findLast=function(l){return this.reverse().find(l)},Mt.prototype.invokeMap=qt(function(l,u){return"function"==typeof l?new Mt(this):this.map(function(h){return ul(h,l,u)})}),Mt.prototype.reject=function(l){return this.filter(Sl(dt(l)))},Mt.prototype.slice=function(l,u){l=Ft(l);var h=this;return h.__filtered__&&(l>0||u<0)?new Mt(h):(l<0?h=h.takeRight(-l):l&&(h=h.drop(l)),u!==E&&(h=(u=Ft(u))<0?h.dropRight(-u):h.take(u-l)),h)},Mt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Mt.prototype.toArray=function(){return this.take(Ze)},mo(Mt.prototype,function(l,u){var h=/^(?:filter|find|map|reject)|While$/.test(u),g=/^(?:head|last)$/.test(u),v=S[g?"take"+("last"==u?"Right":""):u],x=g||/^find/.test(u);!v||(S.prototype[u]=function(){var P=this.__wrapped__,R=g?[1]:arguments,z=P instanceof Mt,oe=R[0],le=z||Rt(P),pe=function(Zt){var nn=v.apply(S,Jn([Zt],R));return g&&Te?nn[0]:nn};le&&h&&"function"==typeof oe&&1!=oe.length&&(z=le=!1);var Te=this.__chain__,Xe=!!this.__actions__.length,ht=x&&!Te,Ht=z&&!Xe;if(!x&&le){P=Ht?P:new Mt(this);var ft=l.apply(P,R);return ft.__actions__.push({func:qf,args:[pe],thisArg:E}),new Bn(ft,Te)}return ht&&Ht?l.apply(this,R):(ft=this.thru(pe),ht?g?ft.value()[0]:ft.value():ft)})}),Pr(["pop","push","shift","sort","splice","unshift"],function(l){var u=tf[l],h=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",g=/^(?:pop|shift)$/.test(l);S.prototype[l]=function(){var v=arguments;if(g&&!this.__chain__){var x=this.value();return u.apply(Rt(x)?x:[],v)}return this[h](function(P){return u.apply(Rt(P)?P:[],v)})}}),mo(Mt.prototype,function(l,u){var h=S[u];if(h){var g=h.name+"";Dn.call(zt,g)||(zt[g]=[]),zt[g].push({name:u,func:h})}}),zt[Gc(E,2).name]=[{name:"wrapper",func:E}],Mt.prototype.clone=function(){var l=new Mt(this.__wrapped__);return l.__actions__=wr(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=wr(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=wr(this.__views__),l},Mt.prototype.reverse=function(){if(this.__filtered__){var l=new Mt(this);l.__dir__=-1,l.__filtered__=!0}else(l=this.clone()).__dir__*=-1;return l},Mt.prototype.value=function(){var l=this.__wrapped__.value(),u=this.__dir__,h=Rt(l),g=u<0,v=h?l.length:0,x=function(l,u,h){for(var g=-1,v=h.length;++g<v;){var x=h[g],P=x.size;switch(x.type){case"drop":l+=P;break;case"dropRight":u-=P;break;case"take":u=ni(u,l+P);break;case"takeRight":l=Ci(l,u-P)}}return{start:l,end:u}}(0,v,this.__views__),P=x.start,R=x.end,z=R-P,oe=g?R:P-1,le=this.__iteratees__,pe=le.length,Te=0,Xe=ni(z,this.__takeCount__);if(!h||!g&&v==z&&Xe==z)return I0(l,this.__actions__);var ht=[];e:for(;z--&&Te<Xe;){for(var Ht=-1,ft=l[oe+=u];++Ht<pe;){var Zt=le[Ht],Br=Zt.type,cr=(0,Zt.iteratee)(ft);if(2==Br)ft=cr;else if(!cr){if(1==Br)continue e;break e}}ht[Te++]=ft}return ht},S.prototype.at=n_,S.prototype.chain=function(){return bs(this)},S.prototype.commit=function(){return new Bn(this.value(),this.__chain__)},S.prototype.next=function(){this.__values__===E&&(this.__values__=dp(this.value()));var l=this.__index__>=this.__values__.length;return{done:l,value:l?E:this.__values__[this.__index__++]}},S.prototype.plant=function(l){for(var u,h=this;h instanceof ba;){var g=Bf(h);g.__index__=0,g.__values__=E,u?v.__wrapped__=g:u=g;var v=g;h=h.__wrapped__}return v.__wrapped__=l,u},S.prototype.reverse=function(){var l=this.__wrapped__;if(l instanceof Mt){var u=l;return this.__actions__.length&&(u=new Mt(this)),(u=u.reverse()).__actions__.push({func:qf,args:[Id],thisArg:E}),new Bn(u,this.__chain__)}return this.thru(Id)},S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=function(){return I0(this.__wrapped__,this.__actions__)},S.prototype.first=S.prototype.head,rl&&(S.prototype[rl]=function(){return this}),S}();zi._=Jh,(Oe=function(){return Jh}.call(Fe,Se,Fe,lt))!==E&&(lt.exports=Oe)}.call(this)},977:lt=>{var Fe=1e3,Se=6e4,Oe=60*Se,E=24*Oe;function K(B,W,ce,ue){var be=W>=1.5*ce;return Math.round(B/ce)+" "+ue+(be?"s":"")}lt.exports=function(B,W){W=W||{};var ce=typeof B;if("string"===ce&&B.length>0)return function(B){if(!((B=String(B)).length>100)){var W=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(B);if(W){var ce=parseFloat(W[1]);switch((W[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*ce;case"weeks":case"week":case"w":return 6048e5*ce;case"days":case"day":case"d":return ce*E;case"hours":case"hour":case"hrs":case"hr":case"h":return ce*Oe;case"minutes":case"minute":case"mins":case"min":case"m":return ce*Se;case"seconds":case"second":case"secs":case"sec":case"s":return ce*Fe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return ce;default:return}}}}(B);if("number"===ce&&isFinite(B))return W.long?function(B){var W=Math.abs(B);return W>=E?K(B,W,E,"day"):W>=Oe?K(B,W,Oe,"hour"):W>=Se?K(B,W,Se,"minute"):W>=Fe?K(B,W,Fe,"second"):B+" ms"}(B):function(B){var W=Math.abs(B);return W>=E?Math.round(B/E)+"d":W>=Oe?Math.round(B/Oe)+"h":W>=Se?Math.round(B/Se)+"m":W>=Fe?Math.round(B/Fe)+"s":B+"ms"}(B);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(B))}},819:(lt,Fe,Se)=>{const Oe=Se(557);function E(q){for(var T=q.previousElementSibling;"note"!=T.tagName&&"rest"!=T.tagName;)T=T.previousElementSibling;return T}function O(q){var T=q.nextElementSibling;return null!=T&&"dot"==T.tagName}function Ce(q,T,j,H,Q){var me=function(q){var T;for(var j of q)if(O(j)){T=j;break}return T}(q);if(null==me)return!1;var Ue=q.slice(0,q.indexOf(me)+1);console.log("Part 1 - preceding the dot:");var De=!1;if(1==K(Ue,T,j)/H&&(2==Q||3==Q)){var he=me.getAttribute("dur"),k=function(q){for(var T=q.nextElementSibling;"note"!=T.tagName&&"rest"!=T.tagName;)T=T.nextElementSibling;return T}(me).getAttribute("dur");("semibrevis"!=he||"semibrevis"!=k)&&(De=!0,console.log("\nDot of Imperfection"))}return De}function J(q){return q.hasAttribute("num")&&q.hasAttribute("numbase")}function K(q,T,j){var H,Q,me,Ue,G;for(Q of(H=0,console.log("@dur\t\tCounter (Sb)\tAccumulator (Sb)"),q)){me=Q.getAttribute("dur");try{Ue=T.indexOf(me)}catch(De){console.log("MISTAKE\nNote/Rest element not considered: "+Q+", with a duration @dur = "+me)}G=j[Ue],Q.hasAttribute("num")&&Q.hasAttribute("numbase")&&(G=new Oe([Q.getAttribute("numbase"),Q.getAttribute("num")]).mul(G)),H+=G,console.log(me+Array(10-me.length).join(" ")+"\t"+G+"\t\t"+H)}return H}function B(q,T,j,H,Q,me,Ue,G){var $=[];for(var De of T)"dot"!=De.tagName&&"Group_Begin"!=De.tagName&&"Group_End"!=De.tagName&&$.push(De);var he=K($,me,Ue);console.log("TOTAL (Sb): "+he);var k=he/Q;console.log("TOTAL (B):  "+k),console.log(),3==G&&function(q,T,j,H,Q,me,Ue,G,$,De){var k;switch(q%3){case 1:null==T||"note"!=T.tagName||T.getAttribute("dur")!=Ue||J(T)||O(T)?null==H||"note"!=H.tagName||H.getAttribute("dur")!=Ue||J(H)||O(H)?(console.log("MISTAKE 1 - Impossible to do Imperfection a.p.p. and also Imperfection a.p.a."),console.log(T),console.log(H),console.log("\n")):(console.log("Alternative Case:  Imperfection a.p.a.\n"),H.setAttribute("dur.quality","imperfecta"),H.setAttribute("num","3"),H.setAttribute("numbase","2"),null!=Q&&Q.getAttribute("dur")==Ue&&(console.log("WARNING 1! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+H+" and is followed by the perfect note "+Q+"\n"))):(console.log("Default Case:\tImperfection a.p.p.\n"),T.setAttribute("dur.quality","imperfecta"),T.setAttribute("num","3"),T.setAttribute("numbase","2"));break;case 2:for(k=j[j.length-1];k.hasAttribute("colored");)k=E(k);2==q?"note"!=k.tagName||k.getAttribute("dur")!=me||J(k)?null==T||"note"!=T.tagName||T.getAttribute("dur")!=Ue||J(T)||O(T)||null==H||"note"!=H.tagName||H.getAttribute("dur")!=Ue||J(H)||O(H)?(console.log("MISTAKE 2 - Alteration is impossible - Imperfections a.p.p. and a.p.a. are also impossible"),console.log(T),console.log(H),console.log("\n")):(console.log("Alternative Case:  Imperfection a.p.p. & Imperfection a.p.a.\n"),T.setAttribute("dur.quality","imperfecta"),T.setAttribute("num","3"),T.setAttribute("numbase","2"),H.setAttribute("dur.quality","imperfecta"),H.setAttribute("num","3"),H.setAttribute("numbase","2"),null!=Q&&Q.getAttribute("dur")==Ue&&(console.log("WARNING 2! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+H+" and is followed by the perfect note "+Q),console.log("\n"))):Ce(j,G,$,De,q)?(console.log("Alternative Case:  Imperfection a.p.p. & Imperfection a.p.a.\n"),T.setAttribute("dur.quality","imperfecta"),T.setAttribute("num","3"),T.setAttribute("numbase","2"),H.setAttribute("dur.quality","imperfecta"),H.setAttribute("num","3"),H.setAttribute("numbase","2"),null!=Q&&Q.getAttribute("dur")==Ue&&(console.log("WARNING 2! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+H+" and is followed by the perfect note "+Q),console.log("\n"))):(console.log("Default Case:\tAlteration\n"),k.setAttribute("dur.quality","altera"),k.setAttribute("num","1"),k.setAttribute("numbase","2")):(console.log(k),null==T||"note"!=T.tagName||T.getAttribute("dur")!=Ue||J(T)||O(T)||null==H||"note"!=H.tagName||H.getAttribute("dur")!=Ue||J(H)||O(H)?"note"!=k.tagName||k.getAttribute("dur")!=me||J(k)?(console.log("MISTAKE 3n + 2 - Imperfections a.p.p. and a.p.a. are impossible - Alteration is also impossible"),console.log(T),console.log(H),console.log("\n")):(console.log("Alternative Case:  Alteration\n"),k.setAttribute("dur.quality","altera"),k.setAttribute("num","1"),k.setAttribute("numbase","2")):null!=Q&&Q.getAttribute("dur")==Ue?"note"!=k.tagName||k.getAttribute("dur")!=me||J(k)?(console.log("Default Case:\tImperfection a.p.p. & Imperfection a.p.a.\n"),T.setAttribute("dur.quality","imperfecta"),T.setAttribute("num","3"),T.setAttribute("numbase","2"),H.setAttribute("dur.quality","imperfecta"),H.setAttribute("num","3"),H.setAttribute("numbase","2"),console.log("WARNING 3n + 2! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+H+" and is followed by the perfect note "+Q),console.log("\n")):(console.log("Alternative Case:  Alteration\n"),k.setAttribute("dur.quality","altera"),k.setAttribute("num","1"),k.setAttribute("numbase","2")):(console.log("Default Case:\tImperfection a.p.p. & Imperfection a.p.a.\n"),T.setAttribute("dur.quality","imperfecta"),T.setAttribute("num","3"),T.setAttribute("numbase","2"),H.setAttribute("dur.quality","imperfecta"),H.setAttribute("num","3"),H.setAttribute("numbase","2")));break;case 0:if(0==q)console.log("Default Case:\tNo modifications\n");else if(3==q){for(k=j[j.length-1];k.hasAttribute("colored");)k=E(k);Ce(j,G,$,De,q)?(console.log("Alternative Case:\tImperfection a.p.p. & Alteration\n"),T.setAttribute("dur.quality","imperfecta"),T.setAttribute("num","3"),T.setAttribute("numbase","2"),k.setAttribute("dur.quality","altera"),k.setAttribute("num","1"),k.setAttribute("numbase","2")):console.log("Default Case:\tNo modifications\n")}else{for(k=j[j.length-1];k.hasAttribute("colored");)k=E(k);null==T||"note"!=T.tagName||T.getAttribute("dur")!=Ue||J(T)||O(T)||"note"!=k.tagName||k.getAttribute("dur")!=me||J(k)?console.log("Alternative Case:  No modifications\n"):(console.log("Default Case:\tImperfection a.p.p. & Alteration\n"),T.setAttribute("dur.quality","imperfecta"),T.setAttribute("num","3"),T.setAttribute("numbase","2"),k.setAttribute("dur.quality","altera"),k.setAttribute("num","1"),k.setAttribute("numbase","2"))}}}(k,q,$,j,H,"brevis","longa",me,Ue,Q)}function ce(q,T){2==T?function(q){var T;switch(q.length){case 1:console.log("MISTAKE: 1 semibreve standing alone (this is not proper of Ars antiqua)");break;case 2:break;default:for(T of q)T.setAttribute("num",q.length),T.setAttribute("numbase","2")}}(q):3==T&&function(q){var T,j,H;switch(q.length){case 1:console.log("MISTAKE: 1 semibreve standing alone (this is not proper of Ars antiqua)");break;case 2:H=q[1],(j=q[0]).hasAttribute("stem.dir")&&"down"==j.getAttribute("stem.dir")?(j.setAttribute("dur.quality","maior"),j.setAttribute("num","1"),j.setAttribute("numbase","2"),H.setAttribute("dur.quality","minor")):(j.setAttribute("dur.quality","minor"),H.setAttribute("dur.quality","maior"),H.setAttribute("num","1"),H.setAttribute("numbase","2"));break;case 3:for(T of q)T.setAttribute("dur.quality","minor");break;default:for(T of q)T.setAttribute("num",q.length),T.setAttribute("numbase","3")}}(q)}Fe.lining_up=q=>{for(var T=q.getElementsByTagName("staff"),j=q.getElementsByTagName("staffDef"),H=0;H<j.length;H++){console.log("\nVoice # "+(H+1)+" results:\n");var Q=j[H].getElementsByTagName("mensur")[0],me=T[H],Ue=Q.getAttribute("tempus"),G=Q.getAttribute("modusminor");null==Ue&&(Ue=3);var $=["semibrevis","brevis","longa"],De=[1,1*Ue,G*Ue];console.log($),console.log(De),console.log();var he=me.getElementsByTagName("layer")[0].children,k=[];for(var ne of he){var ye=ne.tagName;if("note"==ye||"rest"==ye)k.push(ne);else if("dot"==ye)k.push(ne),ne.setAttribute("form","div");else if("ligature"==ye){for(var ve of(k.push(q.createElementNS("http://www.music-encoding.org/ns/mei","Group_Begin")),ne.children))if("note"==ve.tagName||"rest"==ve.tagName)k.push(ve);else if("choice"==ve.tagName){var _e=ve.getElementsByTagName("corr")[0];for(var ee of _e.children)"note"==ee.tagName||"rest"==ee.tagName?k.push(ee):(console.log("This child of corr (within the choice tag in a ligature) is not a note/rest:"),console.log(ee),console.log("It is a "+ee.tagName))}else console.log("This child of ligature is not a note/rest/choice:"),console.log(ve),console.log("It is a "+ve.tagName);k.push(q.createElementNS("http://www.music-encoding.org/ns/mei","Group_End"))}else if("choice"==ye)for(var ve of(_e=ne.getElementsByTagName("corr")[0]).children)"note"==ve.tagName||"rest"==ve.tagName?k.push(ve):"dot"==ve.tagName?(k.push(ve),ve.setAttribute("form","div")):(console.log("This child of corr is not a note/rest/dot:"),console.log(ve),console.log("It is a "+ve.tagName));else console.log("Unexpected tagnme : "+ye+"\n(not a note, rest, dot, ligature, or choice)\n")}var we,Ze,tt,St,je,en,ze=[],He=[];for(var Me of k)"dot"==Me.tagName||"Group_Begin"==Me.tagName||"Group_End"==Me.tagName||"brevis"==Me.getAttribute("dur")?ze.push(k.indexOf(Me)):("longa"==Me.getAttribute("dur")||"maxima"==Me.getAttribute("dur"))&&(ze.push(k.indexOf(Me)),He.push(k.indexOf(Me)));!ze.includes(0)&&0!=ze.length&&ce(je=k.slice(0,Ze=ze[0]),Ue);for(var jt=0;jt<ze.length-1;jt++)ce(je=k.slice((we=ze[jt])+1,Ze=ze[jt+1]),Ue);if(0==He.length){tt=null,St=null,je=k.slice(0,k.length);var Xn=null,Dt=null,Ke="";for(var at of je)Ke+="0 null"==(ct=at.getAttribute("pname")+at.getAttribute("oct")+" "+at.getAttribute("dur"))?at.tagName+", ":ct+", ";console.log("Delimited Sequence of Breves: "+Xn+", "+Ke+Dt),B(tt,je,St,en,Ue,$,De,G)}else{if(!He.includes(0)){tt=null,St=k[Ze=He[0]];try{en=k[Ze+1]}catch(hn){en=null}for(var at of(je=k.slice(0,Ze),Xn=null,Dt=St.getAttribute("pname")+St.getAttribute("oct")+" "+St.getAttribute("dur"),Ke="",je))Ke+="0 null"==(ct=at.getAttribute("pname")+at.getAttribute("oct")+" "+at.getAttribute("dur"))?at.tagName+", ":ct+", ";console.log("Delimited Sequence of Breves: "+Xn+", "+Ke+Dt),B(tt,je,St,en,Ue,$,De,G)}for(jt=0;jt<He.length-1;jt++){tt=k[we=He[jt]],St=k[Ze=He[jt+1]];try{en=k[Ze+1]}catch(ut){en=null}for(var at of(je=k.slice(we+1,Ze),Xn=tt.getAttribute("pname")+tt.getAttribute("oct")+" "+tt.getAttribute("dur"),Dt=St.getAttribute("pname")+St.getAttribute("oct")+" "+St.getAttribute("dur"),Ke="",je))Ke+="0 null"==(ct=at.getAttribute("pname")+at.getAttribute("oct")+" "+at.getAttribute("dur"))?at.tagName+", ":ct+", ";console.log("Delimited Sequence of Breves: "+Xn+", "+Ke+Dt),B(tt,je,St,en,Ue,$,De,G)}var et=k.length-1;if(!He.includes(et)){for(var at of(tt=k[we=He[He.length-1]],St=null,en=null,je=k.slice(we+1,et+1),Xn=tt.getAttribute("pname")+tt.getAttribute("oct")+" "+tt.getAttribute("dur"),Dt=null,Ke="",je)){var ct;Ke+="0 null"==(ct=at.getAttribute("pname")+at.getAttribute("oct")+" "+at.getAttribute("dur"))?at.tagName+", ":ct+", "}console.log("Delimited Sequence of Breves: "+Xn+", "+Ke+Dt),B(tt,je,St,en,Ue,$,De,G)}}}return function(q){const T=Array.from(q.getElementsByTagName("note"));for(var j of T)"maxima"==j.getAttribute("dur")&&(j.setAttribute("dur","longa"),j.setAttribute("dur.quality","duplex"),j.setAttribute("num","1"),j.setAttribute("numbase","2"))}(q),q}},194:(lt,Fe,Se)=>{const Oe=Se(557);function E(G){return G.nextElementSibling}function N(G){for(var $=G.previousElementSibling;"note"!=$.tagName&&"rest"!=$.tagName;)$=$.previousElementSibling;return $}function O(G){var $=E(G);return null!=$&&"dot"==$.tagName}function se(G){var $=-1,De=-1;for(var he of G)if($+=1,null!=he&&O(he)){De=$;break}return De}function Ce(G,$,De){var he,k,ne,ye,ve;for(k of(he=0,console.log("@dur\t\tCounter (m)\tAccumulator (m)"),G)){ne=k.getAttribute("dur");try{ye=$.indexOf(ne)}catch(ee){console.log("MISTAKE\nNote/Rest element not considered: "+k+", with a duration @dur = "+ne)}ve=De[ye],k.hasAttribute("num")&&k.hasAttribute("numbase")&&(ve=new Oe([k.getAttribute("numbase"),k.getAttribute("num")]).mul(ve)),he+=ve,console.log(ne+Array(10-ne.length).join(" ")+"\t"+ve+"\t\t"+he)}return he}function J(G,$,De,he,k=null,ne=null,ye=null,ve=null){var _e,ee,ze,He,Me;for(ee of(_e=0,console.log("@dur\t\tCounter (m)\tAccumulator (m)"),G)){ze=ee.getAttribute("dur");try{He=$.indexOf(ze)}catch(tt){console.log("MISTAKE\nNote/Rest element not considered: "+ee+", with a duration @dur = "+ze)}O(ee)?(Me=he[He],(4==He&&2==k||5==He&&2==ne||6==He&&2==ye||7==He&&2==ve||He<4)&&(E(ee).setAttribute("form","aug"),ee.setAttribute("num","2"),ee.setAttribute("numbase","3"),ee.setAttribute("dur.quality","perfecta"))):(Me=De[He],ee.hasAttribute("num")&&ee.hasAttribute("numbase")&&(Me=new Oe([ee.getAttribute("numbase"),ee.getAttribute("num")]).mul(Me))),_e+=Me,console.log(ze+Array(10-ze.length).join(" ")+"\t"+Me+"\t\t"+_e)}return _e}function K(G){return G.hasAttribute("num")&&G.hasAttribute("numbase")}function B(G,$,De,he,k,ne,ye){var _e;switch(G%3){case 1:null==$||"note"!=$.tagName||$.getAttribute("dur")!=ye||K($)||O($)?null==he||"note"!=he.tagName||he.getAttribute("dur")!=ye||K(he)||O(he)?(console.log("MISTAKE 1 - Impossible to do Imperfection a.p.p. and also Imperfection a.p.a."),console.log($),console.log(he),console.log("\n")):(console.log("Alternative Case:  Imperfection a.p.a.\n"),he.setAttribute("dur.quality","imperfecta"),he.setAttribute("num","3"),he.setAttribute("numbase","2"),null!=k&&k.getAttribute("dur")==ye&&(console.log("WARNING 1! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+he+" and is followed by the perfect note "+k+"\n"))):(console.log("Default Case:\tImperfection a.p.p.\n"),$.setAttribute("dur.quality","imperfecta"),$.setAttribute("num","3"),$.setAttribute("numbase","2"));break;case 2:for(_e=De[De.length-1];_e.hasAttribute("colored");)_e=N(_e);2==G?"note"!=_e.tagName||_e.getAttribute("dur")!=ne||K(_e)?null==$||"note"!=$.tagName||$.getAttribute("dur")!=ye||K($)||O($)||null==he||"note"!=he.tagName||he.getAttribute("dur")!=ye||K(he)||O(he)?(console.log("MISTAKE 2 - Alteration is impossible - Imperfections a.p.p. and a.p.a. are also impossible"),console.log($),console.log(he),console.log("\n")):(console.log("Alternative Case:  Imperfection a.p.p. & Imperfection a.p.a.\n"),$.setAttribute("dur.quality","imperfecta"),$.setAttribute("num","3"),$.setAttribute("numbase","2"),he.setAttribute("dur.quality","imperfecta"),he.setAttribute("num","3"),he.setAttribute("numbase","2"),null!=k&&k.getAttribute("dur")==ye&&(console.log("WARNING 2! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+he+" and is followed by the perfect note "+k),console.log("\n"))):(console.log("Default Case:\tAlteration\n"),_e.setAttribute("dur.quality","altera"),_e.setAttribute("num","1"),_e.setAttribute("numbase","2")):(console.log(_e),null==$||"note"!=$.tagName||$.getAttribute("dur")!=ye||K($)||O($)||null==he||"note"!=he.tagName||he.getAttribute("dur")!=ye||K(he)||O(he)?"note"!=_e.tagName||_e.getAttribute("dur")!=ne||K(_e)?(console.log("MISTAKE 3n + 2 - Imperfections a.p.p. and a.p.a. are impossible - Alteration is also impossible"),console.log($),console.log(he),console.log("\n")):(console.log("Alternative Case:  Alteration\n"),_e.setAttribute("dur.quality","altera"),_e.setAttribute("num","1"),_e.setAttribute("numbase","2")):null!=k&&k.getAttribute("dur")==ye?"note"!=_e.tagName||_e.getAttribute("dur")!=ne||K(_e)?(console.log("Default Case:\tImperfection a.p.p. & Imperfection a.p.a.\n"),$.setAttribute("dur.quality","imperfecta"),$.setAttribute("num","3"),$.setAttribute("numbase","2"),he.setAttribute("dur.quality","imperfecta"),he.setAttribute("num","3"),he.setAttribute("numbase","2"),console.log("WARNING 3n + 2! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+he+" and is followed by the perfect note "+k),console.log("\n")):(console.log("Alternative Case:  Alteration\n"),_e.setAttribute("dur.quality","altera"),_e.setAttribute("num","1"),_e.setAttribute("numbase","2")):(console.log("Default Case:\tImperfection a.p.p. & Imperfection a.p.a.\n"),$.setAttribute("dur.quality","imperfecta"),$.setAttribute("num","3"),$.setAttribute("numbase","2"),he.setAttribute("dur.quality","imperfecta"),he.setAttribute("num","3"),he.setAttribute("numbase","2")));break;case 0:if(G<=3)console.log("Default Case:\tNo modifications\n");else{for(_e=De[De.length-1];_e.hasAttribute("colored");)_e=N(_e);null==$||"note"!=$.tagName||$.getAttribute("dur")!=ye||K($)||O($)||"note"!=_e.tagName||_e.getAttribute("dur")!=ne||K(_e)?console.log("Alternative Case:  No modifications\n"):(console.log("Default Case:\tImperfection a.p.p. & Alteration\n"),$.setAttribute("dur.quality","imperfecta"),$.setAttribute("num","3"),$.setAttribute("numbase","2"),_e.setAttribute("dur.quality","altera"),_e.setAttribute("num","1"),_e.setAttribute("numbase","2"))}}}function be(G,$,De,he,k,ne,ye,ve){3==k&&function(G,$,De,he,k,ne,ye){var ze,He,Me,we,Ze,tt,St,je,en,ve=!0,_e=[G].concat($),ee=se(_e);console.log("1st dotted note index:",ee),-1==ee?ze=Ce($,k,ne):0==ee?((He=E(G)).setAttribute("form","perf"),ze=J($,k,ne,ye)):(He=E(Me=_e[ee])).hasAttribute("form")&&"aug"==He.getAttribute("form")?ze=J($,k,ne,ye):(we=_e.slice(1,ee+1),Ze=_e.slice(ee+1,_e.length),tt=Ce(we,k,ne),je=Me.getAttribute("dur"),en=ne[k.indexOf(je)],St=J(Ze,k,ne,ye),1==tt?St==Math.floor(St)?(ve=!1,He.setAttribute("form","div"),ze=tt+St,B(tt,G,we,null,null,"minima","semibrevis"),B(St,null,Ze,De,he,"minima","semibrevis")):(He.setAttribute("form","aug"),Me.setAttribute("dur.quality","perfecta"),Me.setAttribute("num","2"),Me.setAttribute("numbase","3"),ze=tt+.5*en+St):He.hasAttribute("form")&&"perf"==He.getAttribute("form")?ze=J($,k,ne,ye):(He.setAttribute("form","aug"),Me.setAttribute("dur.quality","perfecta"),Me.setAttribute("num","2"),Me.setAttribute("numbase","3"),ze=tt+.5*en+St)),ve&&(ze==Math.floor(ze)||(console.log("BAD! Not an integer number of Minimas!"),console.log([G].concat($).concat(De)),console.log("Minimas: "+ze)),B(ze,G,$,De,he,"minima","semibrevis"))}(G,$,De,he,ne,ye,ve)}function te(G,$,De,he,k,ne,ye,ve,_e){3==ne&&function(G,$,De,he,k,ne,ye,ve){var He,Me,we,Ze,tt,St,je,en,jt,Xn,Dt,Ke,_e=!0,ee=[G].concat($),ze=se(ee);console.log("1st dotted note index:",ze),-1==ze?(we=(Me=Ce($,ne,ye))/k,console.log("No-dot\n")):0==ze?((Ze=E(G)).setAttribute("form","perf"),console.log("Dot of perfection\n"),we=(Me=J($,ne,ye,ve,k))/k):(console.log("Dot in the middle of the sequence"),(Ze=E(Dt=ee[ze])).hasAttribute("form")?"aug"==Ze.getAttribute("form")?(console.log("- I already knew about this AUG dot"),we=(Me=J($,ne,ye,ve,k))/k):"div"==Ze.getAttribute("form")&&(console.log("- I already knew about this DIV dot"),we=(Me=Ce($,ne,ye))/k):(console.log("- Is this dot new? Lets divide the sequence in two and find out if it is a div/aug dot"),tt=ee.slice(1,ze+1),St=ee.slice(ze+1,ee.length),jt=(je=Ce(tt,ne,ye))/k,He=Dt.getAttribute("dur"),Ke=ye[ne.indexOf(He)],Xn=(en=J(St,ne,ye,ve,k))/k,1==jt?(console.log("-- Potential dot of div/aug"),Xn==Math.floor(Xn)?(console.log("--- Definitely a dot of division"),_e=!1,Ze.setAttribute("form","div"),Me=je+en,B(jt,G,tt,null,null,"semibrevis","brevis"),B(Xn,null,St,De,he,"semibrevis","brevis")):(console.log("--- Definitely a dot of augmentation"),Ze.setAttribute("form","aug"),Dt.setAttribute("dur.quality","perfecta"),Dt.setAttribute("num","2"),Dt.setAttribute("numbase","3"),Me=je+.5*Ke+en)):(console.log("-- Cannot be a dot of division (could be perf/aug)"),Ze.hasAttribute("form")&&"perf"==Ze.getAttribute("form")?(console.log("--- Definitely a dot of perfection"),Me=J($,ne,ye,ve,k)):(console.log("--- Definitely a dot of augmentation"),Ze.setAttribute("form","aug"),Dt.setAttribute("dur.quality","perfecta"),Dt.setAttribute("num","2"),Dt.setAttribute("numbase","3"),Me=je+.5*Ke+en)),we=Me/k)),_e&&(Me%k==0||(console.log("BAD! THE DIVISION IS NOT AN INTEGER NUMBER - not an integer number of Semibreves!"),console.log([G].concat($).concat(De)),console.log("Semibreves: "+Me/k)),B(we,G,$,De,he,"semibrevis","brevis"))}(G,$,De,he,k,ye,ve,_e)}function Ae(G,$,De,he,k,ne,ye,ve,_e,ee){if(3==ye)!function(G,$,De,he,k,ne,ye,ve,_e){var Me,we,Ze,tt,St,je,en,jt,Xn,Dt,Ke,at,ee=!0,ze=[G].concat($),He=se(ze);console.log("1st dotted note index:",He),-1==He?(Ze=(we=Ce($,ye,ve))/(ne*k),console.log("No-dot\n")):0==He?((tt=E(G)).setAttribute("form","perf"),console.log("Dot of perfection\n"),Ze=(we=J($,ye,ve,_e,k,ne))/(ne*k)):(console.log("Dot in the middle of the sequence"),(tt=E(Ke=ze[He])).hasAttribute("form")?"aug"==tt.getAttribute("form")?(console.log("- I already knew about this AUG dot"),Ze=(we=J($,ye,ve,_e,k,ne))/(ne*k)):"div"==tt.getAttribute("form")&&(console.log("- I already knew about this DIV dot"),Ze=(we=Ce($,ye,ve))/(ne*k)):(console.log("- Is this dot new? Lets divide the sequence in two and find out if it is a div/aug dot"),St=ze.slice(1,He+1),je=ze.slice(He+1,ze.length),Xn=(en=Ce(St,ye,ve))/(ne*k),Me=(Ke=St[St.length-1]).getAttribute("dur"),at=ve[ye.indexOf(Me)],Dt=(jt=J(je,ye,ve,_e,k,ne))/(ne*k),1==Xn?(console.log("-- Potential dot of div/aug"),Dt==Math.floor(Dt)?(console.log("--- Definitely a dot of division"),ee=!1,tt.setAttribute("form","div"),we=en+jt,B(Xn,G,St,null,null,"brevis","longa"),B(Dt,null,je,De,he,"brevis","longa")):(console.log("--- Definitely a dot of augmentation"),tt.setAttribute("form","aug"),Ke.setAttribute("dur.quality","perfecta"),Ke.setAttribute("num","2"),Ke.setAttribute("numbase","3"),we=en+.5*at+jt)):(console.log("-- Cannot be a dot of division (could be perf/aug)"),tt.hasAttribute("form")&&"perf"==tt.getAttribute("form")?(console.log("--- Definitely a dot of perfection"),we=J($,ye,ve,_e,k,ne)):(console.log("--- Definitely a dot of augmentation"),tt.setAttribute("form","aug"),Ke.setAttribute("dur.quality","perfecta"),Ke.setAttribute("num","2"),Ke.setAttribute("numbase","3"),we=en+.5*at+jt)),Ze=we/(ne*k))),console.log("TOTAL (m): "+we),console.log("TOTAL (Sb): "+we/k),console.log("TOTAL (B):  "+Ze),console.log(),ee&&(we%(ne*k)==0||(console.log("BAD! THE DIVISION IS NOT AN INTEGER NUMBER - not an integer number of Breves!"),console.log([G].concat($).concat(De)),console.log("Breves: "+we/(ne*k))),B(Ze,G,$,De,he,"brevis","longa"))}(G,$,De,he,k,ne,ve,_e,ee);else{var ze=Ce($,ve,_e);console.log("TOTAL (m): "+ze);var He=ze/k;console.log("TOTAL (Sb): "+He),console.log("TOTAL (B):  "+He/ne),console.log()}}function me(G,$,De,he,k,ne){var ye=["semifusa","fusa","semiminima","minima","semibrevis","brevis","longa","maxima"],ve=[.125,.25,.5,1,1*G,$*G,De*$*G,he*De*$*G],_e=[.1875,.375,.75,1.5,3,3*G,3*$*G,3*De*$*G];console.log(ye),console.log(ve),console.log();var ee=[];for(var ze of k){var He=ze.tagName;if("note"==He||"rest"==He)ee.push(ze);else if("ligature"==He)for(var Me of ze.children)if("note"==Me.tagName||"rest"==Me.tagName)ee.push(Me);else if("choice"==Me.tagName){var we=Me.getElementsByTagName("corr")[0];for(var Ze of we.children)"note"==Ze.tagName||"rest"==Ze.tagName?ee.push(Ze):(console.log("This child of corr (within the choice tag in a ligature) is not a note/rest:"),console.log(Ze),console.log("It is a "+Ze.tagName))}else console.log("This child of ligature is not a note/rest/choice:"),console.log(Me),console.log("It is a "+Me.tagName);else if("choice"==He)for(var Me of(we=ze.getElementsByTagName("corr")[0]).children)"note"==Me.tagName||"rest"==Me.tagName?ee.push(Me):(console.log("This child of corr is not a note/rest:"),console.log(Me),console.log("It is a "+Me.tagName));else console.log("Unexpected tagnme : "+He+"\n(not a note, rest, ligature, or choice)\n")}!function(G,$,De,he,k){var ne=function(G){var $=[],De=[];for(var he of G)if(he.hasAttribute("colored")){$.push(he);var k=he.getAttribute("dur");De.includes(k)||(De.push(k),console.log(k))}return[$,De]}(G),ye=ne[0],_e=function(G,$,De,he,k){return 3==G&&k.includes("maxima")?"Max":3==$&&(k.includes("longa")||k.includes("maxima"))?"L":3==De&&(k.includes("brevis")||k.includes("longa")||k.includes("maxima"))?"B":3==he&&(k.includes("semibrevis")||k.includes("brevis")||k.includes("longa")||k.includes("maxima"))?"Sb":null}($,De,he,k,ne[1]);if(console.log("Coloration level: "+_e),"Max"==_e)for(var ee of ye)"maxima"==ee.getAttribute("dur")&&(ee.setAttribute("num","3"),ee.setAttribute("numbase","2"));else if("L"==_e)for(var ee of ye)("longa"==ee.getAttribute("dur")||"maxima"==ee.getAttribute("dur"))&&(ee.setAttribute("num","3"),ee.setAttribute("numbase","2"));else if("B"==_e)for(var ee of ye)("brevis"==ee.getAttribute("dur")||"longa"==ee.getAttribute("dur")||"maxima"==ee.getAttribute("dur"))&&(ee.setAttribute("num","3"),ee.setAttribute("numbase","2"));else if("Sb"==_e)for(var ee of ye)("semibrevis"==ee.getAttribute("dur")||"brevis"==ee.getAttribute("dur")||"longa"==ee.getAttribute("dur")||"maxima"==ee.getAttribute("dur"))&&(ee.setAttribute("num","3"),ee.setAttribute("numbase","2"));else for(var ee of ye)ee.setAttribute("num","3"),ee.setAttribute("numbase","2")}(ee,he,De,$,G);var Dt,Ke,at,ct,et,Un,tt=[],St=[],je=[],en=[];for(var jt of ee){var Xn=jt.getAttribute("dur");("semibrevis"==Xn||jt.hasAttribute("colored"))&&tt.push(ee.indexOf(jt)),("brevis"==Xn||jt.hasAttribute("colored"))&&(tt.push(ee.indexOf(jt)),St.push(ee.indexOf(jt))),("longa"==Xn||jt.hasAttribute("colored"))&&(tt.push(ee.indexOf(jt)),St.push(ee.indexOf(jt)),je.push(ee.indexOf(jt))),("maxima"==Xn||jt.hasAttribute("colored"))&&(tt.push(ee.indexOf(jt)),St.push(ee.indexOf(jt)),je.push(ee.indexOf(jt)),en.push(ee.indexOf(jt)))}if(console.log("\nSEMIBREVE GEQ"),console.log(tt+"\n"),!tt.includes(0)&&0!=tt.length){at=null,ct=ee[Ke=tt[0]];try{Un=ee[Ke+1]}catch(Bt){Un=null}et=ee.slice(0,Ke);var Nn=null,Ln=ct.getAttribute("pname")+ct.getAttribute("oct")+" "+ct.getAttribute("dur"),hn="";for(var ut of et)hn+="0 null"==(Je=ut.getAttribute("pname")+ut.getAttribute("oct")+" "+ut.getAttribute("dur"))?ut.tagName+", ":Je+", ";console.log("Delimited Sequence of Minims: "+Nn+", "+hn+Ln),be(at,et,ct,Un,G,ye,ve,_e)}for(var Fi=0;Fi<tt.length-1;Fi++){at=ee[Dt=tt[Fi]],ct=ee[Ke=tt[Fi+1]];try{Un=ee[Ke+1]}catch(rc){Un=null}for(var ut of(et=ee.slice(Dt+1,Ke),Nn=at.getAttribute("pname")+at.getAttribute("oct")+" "+at.getAttribute("dur"),Ln=ct.getAttribute("pname")+ct.getAttribute("oct")+" "+ct.getAttribute("dur"),hn="",et))hn+="0 null"==(Je=ut.getAttribute("pname")+ut.getAttribute("oct")+" "+ut.getAttribute("dur"))?ut.tagName+", ":Je+", ";console.log("Delimited Sequence of Minims: "+Nn+", "+hn+Ln),be(at,et,ct,Un,G,ye,ve,_e)}if(console.log("\nBREVE GEQ"),console.log(St+"\n"),!St.includes(0)&&0!=St.length){at=null,ct=ee[Ke=St[0]];try{Un=ee[Ke+1]}catch(rc){Un=null}for(var ut of(et=ee.slice(0,Ke),Nn=null,Ln=ct.getAttribute("pname")+ct.getAttribute("oct")+" "+ct.getAttribute("dur"),hn="",et))hn+="0 null"==(Je=ut.getAttribute("pname")+ut.getAttribute("oct")+" "+ut.getAttribute("dur"))?ut.tagName+", ":Je+", ";console.log("Delimited Sequence of Semibreves: "+Nn+", "+hn+Ln),te(at,et,ct,Un,G,$,ye,ve,_e)}for(Fi=0;Fi<St.length-1;Fi++){at=ee[Dt=St[Fi]],ct=ee[Ke=St[Fi+1]];try{Un=ee[Ke+1]}catch(da){Un=null}for(var ut of(et=ee.slice(Dt+1,Ke),Nn=at.getAttribute("pname")+at.getAttribute("oct")+" "+at.getAttribute("dur"),Ln=ct.getAttribute("pname")+ct.getAttribute("oct")+" "+ct.getAttribute("dur"),hn="",et))hn+="0 null"==(Je=ut.getAttribute("pname")+ut.getAttribute("oct")+" "+ut.getAttribute("dur"))?ut.tagName+", ":Je+", ";console.log("Delimited Sequence of Semibreves: "+Nn+", "+hn+Ln),te(at,et,ct,Un,G,$,ye,ve,_e)}if(console.log("\nLONGA GEQ"),console.log(je+"\n"),0==je.length){for(var ut of(at=null,ct=null,Nn=null,Ln=null,hn="",et=ee.slice(0,ee.length)))hn+="0 null"==(Je=ut.getAttribute("pname")+ut.getAttribute("oct")+" "+ut.getAttribute("dur"))?ut.tagName+", ":Je+", ";console.log("Delimited Sequence of Breves: "+Nn+", "+hn+Ln),Ae(at,et,ct,Un,G,$,De,ye,ve,_e)}else{if(!je.includes(0)){at=null,ct=ee[Ke=je[0]];try{Un=ee[Ke+1]}catch(rc){Un=null}for(var ut of(et=ee.slice(0,Ke),Nn=null,Ln=ct.getAttribute("pname")+ct.getAttribute("oct")+" "+ct.getAttribute("dur"),hn="",et))hn+="0 null"==(Je=ut.getAttribute("pname")+ut.getAttribute("oct")+" "+ut.getAttribute("dur"))?ut.tagName+", ":Je+", ";console.log("Delimited Sequence of Breves: "+Nn+", "+hn+Ln),Ae(at,et,ct,Un,G,$,De,ye,ve,_e)}for(Fi=0;Fi<je.length-1;Fi++){at=ee[Dt=je[Fi]],ct=ee[Ke=je[Fi+1]];try{Un=ee[Ke+1]}catch(da){Un=null}for(var ut of(et=ee.slice(Dt+1,Ke),Nn=at.getAttribute("pname")+at.getAttribute("oct")+" "+at.getAttribute("dur"),Ln=ct.getAttribute("pname")+ct.getAttribute("oct")+" "+ct.getAttribute("dur"),hn="",et))hn+="0 null"==(Je=ut.getAttribute("pname")+ut.getAttribute("oct")+" "+ut.getAttribute("dur"))?ut.tagName+", ":Je+", ";console.log("Delimited Sequence of Breves: "+Nn+", "+hn+Ln),Ae(at,et,ct,Un,G,$,De,ye,ve,_e)}var Ir=ee.length-1;if(!je.includes(Ir)){for(var ut of(at=ee[Dt=je[je.length-1]],ct=null,Un=null,et=ee.slice(Dt+1,Ir+1),Nn=at.getAttribute("pname")+at.getAttribute("oct")+" "+at.getAttribute("dur"),Ln=null,hn="",et)){var Je;hn+="0 null"==(Je=ut.getAttribute("pname")+ut.getAttribute("oct")+" "+ut.getAttribute("dur"))?ut.tagName+", ":Je+", "}console.log("Delimited Sequence of Breves: "+Nn+", "+hn+Ln),Ae(at,et,ct,Un,G,$,De,ye,ve,_e)}}!function(G,$,De,he,k){for(var ne=["maxima","longa","brevis","semibrevis"],ye=[G,$,De,he],ve=[],_e=0,ee=1*ye[0];ee%2==0;){ve.push(ne[_e]),_e+=1;try{ee+=1*ye[_e]}catch(Ze){break}}var ze,He,Me,we;if(0!=ve.length)if(ze=k.getElementsByTagName("dot"),4==ve.length)for(He of ze)He.setAttribute("form","aug"),(Me=N(He)).setAttribute("dur.quality","perfecta"),Me.setAttribute("num","2"),Me.setAttribute("numbase","3");else for(He of ze)we=(Me=N(He)).getAttribute("dur"),ve.includes(we)&&(He.setAttribute("form","aug"),Me.setAttribute("dur.quality","perfecta"),Me.setAttribute("num","2"),Me.setAttribute("numbase","3"))}(he,De,$,G,ne)}Fe.lining_up=G=>{for(var $=G.getElementsByTagName("staff"),De=G.getElementsByTagName("staffDef"),he=0;he<De.length;he++){console.log("\nVoice # "+(he+1)+" results:\n");var k=De[he].getElementsByTagName("mensur")[0],ne=k.getAttribute("prolatio"),ye=k.getAttribute("tempus"),ve=k.getAttribute("modusminor"),_e=k.getAttribute("modusmaior"),ee=$[he],ze=Array.from(ee.getElementsByTagName("layer")[0].children);const tt=Array.from(ee.getElementsByTagName("mensur"));if(0==tt.length)me(ne,ye,ve,_e,ze,ee);else{var He,Me;for(var Ze of(He=0,tt))Me=ze.indexOf(Ze),me(ne,ye,ve,_e,ze.slice(He,Me),ee),He=Me+1,ne=Ze.getAttribute("prolatio"),ye=Ze.getAttribute("tempus"),ve=Ze.getAttribute("modusminor"),_e=Ze.getAttribute("modusmaior");me(ne,ye,ve,_e,ze.slice(He),ee)}}return function(G){const $=G.getElementsByTagName("dot");for(var De of $)De.hasAttribute("form")&&"perf"==De.getAttribute("form")&&De.setAttribute("form","div")}(G),G}},911:(lt,Fe)=>{function Oe(Ce,J){const K=Array.from(Ce.getElementsByTagName("clef")),B=K[0];for(var W of B.getAttributeNames())if("xml:id"!=W){var ce=B.getAttribute(W);J.setAttribute("clef."+W,ce)}var ue=B.parentElement;ue.removeChild(B);for(var be=1;be<K.length;be++){var te=K[be],Ae=K[be-1];te.getAttribute("line")==Ae.getAttribute("line")&&te.getAttribute("shape")==Ae.getAttribute("shape")&&(ue=te.parentElement).removeChild(te)}}Fe.merge=Ce=>{const J=Ce.documentElement,K=J.getElementsByTagName("mdiv")[0],B=Ce.createElementNS("http://www.music-encoding.org/ns/mei","score");K.appendChild(B);const W=Ce.createElementNS("http://www.music-encoding.org/ns/mei","scoreDef");W.setAttribute("midi.bpm","600"),B.appendChild(W);const ce=Ce.createElementNS("http://www.music-encoding.org/ns/mei","staffGrp");ce.setAttribute("symbol","bracket"),W.appendChild(ce);const ue=J.getElementsByTagName("staffDef"),be=Array.from(ue);for(var te of be){ce.appendChild(te);var Ae=Ce.createElementNS("http://www.music-encoding.org/ns/mei","label");Ae.textContent=te.getAttribute("label"),te.insertBefore(Ae,te.children[0]),te.removeAttribute("label")}const q=Ce.createElementNS("http://www.music-encoding.org/ns/mei","section");B.appendChild(q);const T=J.getElementsByTagName("staff"),j=Array.from(T);for(var H of j)q.appendChild(H);K.removeChild(J.getElementsByTagName("parts")[0]),function(Ce){const J=Array.from(Ce.getElementsByTagName("pb")),K=Array.from(Ce.getElementsByTagName("sb"));for(var W of J)W.parentElement.removeChild(W);for(var ce of K)ce.parentElement.removeChild(ce)}(Ce);for(var Q=0;Q<j.length;Q++)te=be[Q],(H=j[Q]).setAttribute("n",Q+1+""),te.setAttribute("n",Q+1+""),Oe(H,te);return 0!=Ce.getElementsByTagName("dir").length&&function(Ce){const J=Ce.getElementsByTagName("dir")[0],K=J.parentElement,B=K.getElementsByTagName("layer")[0];var W=J.getAttribute("plist").split(" "),ce=W[0],ue=W[1],be=J.getAttribute("n"),te=function(Ce,J,K){for(var B=Ce.createNSResolver(null==Ce.ownerDocument?Ce.documentElement:Ce.ownerDocument.documentElement),W=Ce.evaluate("//*[@xml:id='"+J+"']",Ce,B,window.XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,ce=Array.from([W]),ue=W.nextSibling;ue.getAttribute("xml:id")!=K;)"clef"!=ue.tagName&&ce.push(ue),ue=ue.nextSibling;return ce.push(ue),ce}(Ce,ce.slice(1),ue.slice(1));(function(Ce,J,K){var B,W,ce,ue,be,te,Ae,q=J[J.length-1];try{B=q.nextSibling,W=!1}catch(T){W=!0}if(W)for(ce=0;ce<K;ce++)for(ue of J)for(Ae of(be=ue.cloneNode(!0),te=ue.getAttribute("xml:id"),be.setAttribute("copyof","#"+te),be.setAttribute("xml:id",te+"_"+(ce+1)),Ce.appendChild(be),be.querySelectorAll("*")))te=Ae.getAttribute("xml:id"),Ae.setAttribute("copyof","#"+te),Ae.setAttribute("xml:id",te+"_"+(ce+1));else for(ce=0;ce<K;ce++)for(ue of J)for(Ae of(be=ue.cloneNode(!0),te=ue.getAttribute("xml:id"),be.setAttribute("copyof","#"+te),be.setAttribute("xml:id",te+"_"+(ce+1)),Ce.insertBefore(be,B),be.querySelectorAll("*")))te=Ae.getAttribute("xml:id"),Ae.setAttribute("copyof","#"+te),Ae.setAttribute("xml:id",te+"_"+(ce+1))})(B,te,be),K.removeChild(J)}(Ce),Ce}},307:(lt,Fe,Se)=>{const Oe=Se(911),E=Se(819),N=Se(194),O=Se(659);lt.exports={merge:Oe.merge,ArsAntiqua:E,ArsNova:N,refineScore:O.refine_score,PostProcessing:O}},659:(lt,Fe)=>{function E(J,K){var B=K.nextElementSibling,W=K.parentElement;null==B?"corr"==W.tagName?E(J,W.parentElement):W.appendChild(J):"dot"==B.tagName?E(J,B):W.insertBefore(J,B)}Fe.refine_score=(J,K,B)=>{if("None"===(K&&function(J){const K=Array.from(J.getElementsByTagName("staffDef"));for(var B of K)switch(B.getAttribute("clef.shape")+B.getAttribute("clef.line")){case"C1":case"C2":B.setAttribute("clef.shape","G"),B.setAttribute("clef.line","2");break;case"C3":case"C4":case"C5":case"F1":case"F2":case"F3":case"F4":case"F5":B.setAttribute("clef.shape","G"),B.setAttribute("clef.line","2"),B.setAttribute("clef.dis","8"),B.setAttribute("clef.dis.place","below")}const Ae=Array.from(J.getElementsByTagName("clef"));for(var q of Ae)q.parentElement.removeChild(q)}(J),B));else{for(var W of(function(J){for(var K=J.getElementsByTagName("staff"),B=J.getElementsByTagName("staffDef"),W=0;W<B.length;W++){var ce=B[W].getElementsByTagName("mensur")[0],ue=K[W],be=ce.getAttribute("modusminor"),te=ce.getAttribute("tempus"),Ae=ce.getAttribute("prolatio");null==te&&(te=3),null==Ae&&(Ae=3);var T,q=Array.from(ue.getElementsByTagName("note")).concat(Array.from(ue.getElementsByTagName("rest")));for(var j of q){switch(j.getAttribute("dur")){case"longa":if(T=be*te*Ae,j.hasAttribute("dur.quality"))switch(j.getAttribute("dur.quality")){case"perfecta":T=3*te*Ae;break;case"imperfecta":T=2*te*Ae;break;case"duplex":T*=2}else j.hasAttribute("num")&&j.hasAttribute("numbase")&&(T=T*j.getAttribute("numbase")/j.getAttribute("num"));break;case"brevis":if(T=te*Ae,j.hasAttribute("dur.quality"))switch(j.getAttribute("dur.quality")){case"perfecta":T=3*Ae;break;case"imperfecta":T=2*Ae;break;case"altera":T*=2}else j.hasAttribute("num")&&j.hasAttribute("numbase")&&(T=T*j.getAttribute("numbase")/j.getAttribute("num"));break;case"semibrevis":if(T=Ae,j.hasAttribute("dur.quality"))switch(j.getAttribute("dur.quality")){case"minor":T=Ae;break;case"perfecta":T=3;break;case"imperfecta":T=2;break;case"maior":case"altera":T*=2}else j.hasAttribute("num")&&j.hasAttribute("numbase")&&(T=T*j.getAttribute("numbase")/j.getAttribute("num"));break;case"minima":if(T=1,j.hasAttribute("dur.quality"))switch(j.getAttribute("dur.quality")){case"perfecta":T=1.5;break;case"imperfecta":T=1;break;case"altera":T*=2}else j.hasAttribute("num")&&j.hasAttribute("numbase")&&(T=T*j.getAttribute("numbase")/j.getAttribute("num"));break;case"semiminima":if(T=.5,j.hasAttribute("dur.quality"))switch(j.getAttribute("dur.quality")){case"perfecta":T=.75;break;case"imperfecta":T=.5}else j.hasAttribute("num")&&j.hasAttribute("numbase")&&(T=T*j.getAttribute("numbase")/j.getAttribute("num"));break;case"fusa":if(T=.25,j.hasAttribute("dur.quality"))switch(j.getAttribute("dur.quality")){case"perfecta":T=.375;break;case"imperfecta":T=.25}else j.hasAttribute("num")&&j.hasAttribute("numbase")&&(T=T*j.getAttribute("numbase")/j.getAttribute("num"));break;case"semifusa":T=.125,j.hasAttribute("dur.quality")?"imperfecta"===j.getAttribute("dur.quality")&&(T=.125):j.hasAttribute("num")&&j.hasAttribute("numbase")&&(T=T*j.getAttribute("numbase")/j.getAttribute("num"))}j.setAttribute("sb_value",""+T/Ae)}}}(J),function(J,K){for(var W,ce,ue,be=J.getElementsByTagName("staff"),te=J.getElementsByTagName("staffDef"),Ae=0;Ae<te.length;Ae++){var q=te[Ae].getElementsByTagName("mensur")[0],j=be[Ae].children[0],H=Array.from([]);for(var Q of j.children)switch(Q.tagName){case"note":case"rest":H.push(Q);break;case"ligature":for(W of Q.children)switch(W.tagName){case"note":case"rest":H.push(W);break;case"choice":for(ue of W.getElementsByTagName("corr")[0].children)switch(ue.tagName){case"note":case"rest":H.push(ue)}}break;case"choice":for(ce of Q.getElementsByTagName("corr")[0].children)switch(ce.tagName){case"note":case"rest":H.push(ce)}}var me,Ue=q.getAttribute("modusminor"),G=q.getAttribute("tempus"),$=q.getAttribute("prolatio");switch(null==G&&(G=3),null==$&&($=3),K){case"semibrevis":me=1;break;case"brevis":me=G;break;case"longa":me=Ue*G}console.log("\nVoice # "+(Ae+1)+": bar-length = "+me+" Sb");var De=0;for(var he of H)if(De+=parseFloat(he.getAttribute("sb_value")),console.log(he.tagName+" "+he.getAttribute("dur")+" "+he.getAttribute("sb_value")),console.log(De),Math.abs(De/me-Math.round(De/me))<1e-5){var k=J.createElementNS("http://www.music-encoding.org/ns/mei","barLine");k.setAttribute("form","dashed"),E(k,he),console.log("---- barline ----")}}}(J,B),J.getElementsByTagName("note")))W.removeAttribute("sb_value");for(var ce of J.getElementsByTagName("rest"))ce.removeAttribute("sb_value")}return J},Fe.replace_ligatures_by_brackets=J=>{const K=J.getElementsByTagName("section")[0],B=Array.from(J.getElementsByTagName("ligature"));for(var W of B){var ce=W.parentElement,ue=Array.from(W.children);for(var be of ue)ce.insertBefore(be,W);var te=J.createElementNS("http://www.music-encoding.org/ns/mei","bracketSpan");te.setAttribute("xml:id",W.getAttribute("xml:id"));var Ae=ue[0];"choice"==Ae.tagName&&(Ae=Ae.getElementsByTagName("corr")[0].children[0]);var q=ue[ue.length-1];if("choice"==q.tagName){var T=q.getElementsByTagName("corr")[0].children;q=T[T.length-1]}te.setAttribute("startid","#"+Ae.getAttribute("xml:id")),te.setAttribute("endid","#"+q.getAttribute("xml:id")),te.setAttribute("func","ligature"),te.setAttribute("lform","solid"),ce.removeChild(W),K.appendChild(te)}},Fe.remove_num_and_numbase=J=>{const K=J.getElementsByTagName("note");for(var B of K)B.hasAttribute("dur.quality")&&(B.removeAttribute("num"),B.removeAttribute("numbase"))}},239:(lt,Fe,Se)=>{var Oe=Se(291),E=Se(38),N=E;N.v1=Oe,N.v4=E,lt.exports=N},833:lt=>{for(var Fe=[],Se=0;Se<256;++Se)Fe[Se]=(Se+256).toString(16).substr(1);lt.exports=function(E,N){var O=N||0;return[Fe[E[O++]],Fe[E[O++]],Fe[E[O++]],Fe[E[O++]],"-",Fe[E[O++]],Fe[E[O++]],"-",Fe[E[O++]],Fe[E[O++]],"-",Fe[E[O++]],Fe[E[O++]],"-",Fe[E[O++]],Fe[E[O++]],Fe[E[O++]],Fe[E[O++]],Fe[E[O++]],Fe[E[O++]]].join("")}},76:lt=>{var Fe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Fe){var Se=new Uint8Array(16);lt.exports=function(){return Fe(Se),Se}}else{var Oe=new Array(16);lt.exports=function(){for(var O,N=0;N<16;N++)0==(3&N)&&(O=4294967296*Math.random()),Oe[N]=O>>>((3&N)<<3)&255;return Oe}}},291:(lt,Fe,Se)=>{var N,O,Oe=Se(76),E=Se(833),se=0,Ce=0;lt.exports=function(K,B,W){var ce=B&&W||0,ue=B||[],be=(K=K||{}).node||N,te=void 0!==K.clockseq?K.clockseq:O;if(null==be||null==te){var Ae=Oe();null==be&&(be=N=[1|Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5]]),null==te&&(te=O=16383&(Ae[6]<<8|Ae[7]))}var q=void 0!==K.msecs?K.msecs:(new Date).getTime(),T=void 0!==K.nsecs?K.nsecs:Ce+1,j=q-se+(T-Ce)/1e4;if(j<0&&void 0===K.clockseq&&(te=te+1&16383),(j<0||q>se)&&void 0===K.nsecs&&(T=0),T>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");se=q,Ce=T,O=te;var H=(1e4*(268435455&(q+=122192928e5))+T)%4294967296;ue[ce++]=H>>>24&255,ue[ce++]=H>>>16&255,ue[ce++]=H>>>8&255,ue[ce++]=255&H;var Q=q/4294967296*1e4&268435455;ue[ce++]=Q>>>8&255,ue[ce++]=255&Q,ue[ce++]=Q>>>24&15|16,ue[ce++]=Q>>>16&255,ue[ce++]=te>>>8|128,ue[ce++]=255&te;for(var me=0;me<6;++me)ue[ce+me]=be[me];return B||E(ue)}},38:(lt,Fe,Se)=>{var Oe=Se(76),E=Se(833);lt.exports=function(O,se,Ce){var J=se&&Ce||0;"string"==typeof O&&(se="binary"===O?new Array(16):null,O=null);var K=(O=O||{}).random||(O.rng||Oe)();if(K[6]=15&K[6]|64,K[8]=63&K[8]|128,se)for(var B=0;B<16;++B)se[J+B]=K[B];return se||E(K)}},575:lt=>{function Fe(N){var O="    ";if(isNaN(parseInt(N)))O=N;else switch(N){case 1:O=" ";break;case 2:O="  ";break;case 3:O="   ";break;case 4:O="    ";break;case 5:O="     ";break;case 6:O="      ";break;case 7:O="       ";break;case 8:O="        ";break;case 9:O="         ";break;case 10:O="          ";break;case 11:O="           ";break;case 12:O="            "}for(var se=["\n"],Ce=0;Ce<100;Ce++)se.push(se[Ce]+O);return se}function Se(){this.step="    ",this.shift=Fe(this.step)}function Oe(N,O){return O-(N.replace(/\(/g,"").length-N.replace(/\)/g,"").length)}function E(N,O){return N.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+O+O+"AND ").replace(/ BETWEEN /gi,"~::~"+O+"BETWEEN ").replace(/ CASE /gi,"~::~"+O+"CASE ").replace(/ ELSE /gi,"~::~"+O+"ELSE ").replace(/ END /gi,"~::~"+O+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+O+"ON ").replace(/ OR /gi,"~::~"+O+O+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+O+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+O).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+O+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}Se.prototype.xml=function(N,O){var se=N.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),Ce=se.length,J=!1,K=0,B="",W=0,ce=O?Fe(O):this.shift;for(W=0;W<Ce;W++)se[W].search(/<!/)>-1?(B+=ce[K]+se[W],J=!0,(se[W].search(/-->/)>-1||se[W].search(/\]>/)>-1||se[W].search(/!DOCTYPE/)>-1)&&(J=!1)):se[W].search(/-->/)>-1||se[W].search(/\]>/)>-1?(B+=se[W],J=!1):/^<\w/.exec(se[W-1])&&/^<\/\w/.exec(se[W])&&/^<[\w:\-\.\,]+/.exec(se[W-1])==/^<\/[\w:\-\.\,]+/.exec(se[W])[0].replace("/","")?(B+=se[W],J||K--):se[W].search(/<\w/)>-1&&-1==se[W].search(/<\//)&&-1==se[W].search(/\/>/)?B=B+=J?se[W]:ce[K++]+se[W]:se[W].search(/<\w/)>-1&&se[W].search(/<\//)>-1?B=B+=J?se[W]:ce[K]+se[W]:se[W].search(/<\//)>-1?B=B+=J?se[W]:ce[--K]+se[W]:se[W].search(/\/>/)>-1?B=B+=J?se[W]:ce[K]+se[W]:se[W].search(/<\?/)>-1||se[W].search(/xmlns\:/)>-1||se[W].search(/xmlns\=/)>-1?B+=ce[K]+se[W]:B+=se[W];return"\n"==B[0]?B.slice(1):B},Se.prototype.json=function(N,O){return O=O||this.step,"undefined"==typeof JSON?N:"string"==typeof N?JSON.stringify(JSON.parse(N),null,O):"object"==typeof N?JSON.stringify(N,null,O):N},Se.prototype.css=function(N,O){var se=N.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),Ce=se.length,J=0,K="",B=0,W=O?Fe(O):this.shift;for(B=0;B<Ce;B++)/\{/.exec(se[B])?K+=W[J++]+se[B]:/\}/.exec(se[B])?K+=W[--J]+se[B]:(/\*\\/.exec(se[B]),K+=W[J]+se[B]);return K.replace(/^\n{1,}/,"")},Se.prototype.sql=function(N,O){var se=N.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),Ce=se.length,J=[],K=0,B=this.step,ue=0,be="",te=0,Ae=O?Fe(O):this.shift;for(te=0;te<Ce;te++)J=J.concat(te%2?se[te]:E(se[te],B));for(Ce=J.length,te=0;te<Ce;te++)ue=Oe(J[te],ue),/\s{0,}\s{0,}SELECT\s{0,}/.exec(J[te])&&(J[te]=J[te].replace(/\,/g,",\n"+B+B)),/\s{0,}\s{0,}SET\s{0,}/.exec(J[te])&&(J[te]=J[te].replace(/\,/g,",\n"+B+B)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(J[te])?be+=Ae[++K]+J[te]:/\'/.exec(J[te])?(ue<1&&K&&K--,be+=J[te]):(be+=Ae[K]+J[te],ue<1&&K&&K--);return be.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},Se.prototype.xmlmin=function(N,O){return(O?N:N.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},Se.prototype.jsonmin=function(N){return"undefined"==typeof JSON?N:JSON.stringify(JSON.parse(N),null,0)},Se.prototype.cssmin=function(N,O){return(O?N:N.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},Se.prototype.sqlmin=function(N){return N.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},lt.exports=new Se},879:(lt,Fe,Se)=>{"use strict";function k(n){return"function"==typeof n}let ne=!1;const ye={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else ne&&console.log("RxJS: Back to a better error behavior. Thank you. <3");ne=n},get useDeprecatedSynchronousErrorHandling(){return ne}};function ve(n){setTimeout(()=>{throw n},0)}const _e={closed:!0,next(n){},error(n){if(ye.useDeprecatedSynchronousErrorHandling)throw n;ve(n)},complete(){}},ee=Array.isArray||(n=>n&&"number"==typeof n.length);function ze(n){return null!==n&&"object"==typeof n}const Me=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class we{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof we)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(k(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof Me?Ze(o.errors):[o]}}if(ee(s)){let o=-1,a=s.length;for(;++o<a;){const c=s[o];if(ze(c))try{c.unsubscribe()}catch(d){e=e||[],d instanceof Me?e=e.concat(Ze(d.errors)):e.push(d)}}}if(e)throw new Me(e)}add(e){let t=e;if(!e)return we.EMPTY;switch(typeof e){case"function":t=new we(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof we)){const s=t;t=new we,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof we){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function Ze(n){return n.reduce((e,t)=>e.concat(t instanceof Me?t.errors:t),[])}we.EMPTY=((n=new we).closed=!0,n);const tt="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class je extends we{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=_e;break;case 1:if(!e){this.destination=_e;break}if("object"==typeof e){e instanceof je?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new en(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new en(this,e,t,i)}}[tt](){return this}static create(e,t,i){const r=new je(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class en extends je{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;k(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==_e&&(o=Object.create(t),k(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;ye.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=ye;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):ve(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;ve(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);ye.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),ye.useDeprecatedSynchronousErrorHandling)throw i;ve(i)}}__tryOrSetError(e,t,i){if(!ye.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return ye.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(ve(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const Dt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ke(n){return n}let et=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function(n,e,t){if(n){if(n instanceof je)return n;if(n[tt])return n[tt]()}return n||e||t?new je(n,e,t):new je(_e)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||ye.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),ye.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){ye.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof je?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=Un(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(c){s(c),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[Dt](){return this}pipe(...t){return 0===t.length?this:function(n){return 0===n.length?Ke:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=Un(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Un(n){if(n||(n=ye.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const Ln=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class hn extends we{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class ut extends je{constructor(e){super(e),this.destination=e}}let Je=(()=>{class n extends et{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[tt](){return new ut(this)}lift(t){const i=new Fi(this,this);return i.operator=t,i}next(t){if(this.closed)throw new Ln;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new Ln;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new Ln;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new Ln;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new Ln;return this.hasError?(t.error(this.thrownError),we.EMPTY):this.isStopped?(t.complete(),we.EMPTY):(this.observers.push(t),new hn(this,t))}asObservable(){const t=new et;return t.source=this,t}}return n.create=(e,t)=>new Fi(e,t),n})();class Fi extends Je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):we.EMPTY}}function Ir(n){return n&&"function"==typeof n.schedule}function Bt(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new ic(n,e))}}class ic{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new Zu(e,this.project,this.thisArg))}}class Zu extends je{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const rc=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},Ro="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Ku=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Yu(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const oc=n=>{if(n&&"function"==typeof n[Dt])return(n=>e=>{const t=n[Dt]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Ku(n))return rc(n);if(Yu(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ve),e))(n);if(n&&"function"==typeof n[Ro])return(n=>e=>{const t=n[Ro]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${ze(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function ac(n,e){return new et(t=>{const i=new we;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function Ni(n,e){return e?function(n,e){if(null!=n){if(function(n){return n&&"function"==typeof n[Dt]}(n))return function(n,e){return new et(t=>{const i=new we;return i.add(e.schedule(()=>{const r=n[Dt]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(Yu(n))return function(n,e){return new et(t=>{const i=new we;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(Ku(n))return ac(n,e);if(function(n){return n&&"function"==typeof n[Ro]}(n)||"string"==typeof n)return function(n,e){if(!n)throw new Error("Iterable cannot be null");return new et(t=>{const i=new we;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[Ro](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof et?n:new et(oc(n))}class Xa extends je{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class lc extends je{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function cc(n,e){if(e.closed)return;if(n instanceof et)return n.subscribe(e);let t;try{t=oc(n)(e)}catch(i){e.error(i)}return t}function Mi(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(Mi((r,s)=>Ni(n(r,s)).pipe(Bt((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new Tb(n,t)))}class Tb{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new Ib(e,this.project,this.concurrent))}}class Ib extends lc{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new Xa(this),i=this.destination;i.add(t);const r=cc(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function ha(n=Number.POSITIVE_INFINITY){return Mi(Ke,n)}function $h(n,e){return e?ac(n,e):new et(rc(n))}function fa(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return Ir(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof et?n[0]:ha(e)($h(n,t))}function Gh(){return function(e){return e.lift(new Ob(e))}}class Ob{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new Pb(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class Pb extends je{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Wg extends et{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new we,e.add(this.source.subscribe(new Rb(this.getSubject(),this))),e.closed&&(this._connection=null,e=we.EMPTY)),e}refCount(){return Gh()(this)}}const kb=(()=>{const n=Wg.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class Rb extends ut{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function Lb(){return new Je}function xn(n){for(let e in n)if(n[e]===xn)return e;throw Error("Could not find renamed property on target object.")}function Wh(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ut(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ut).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Ja(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Bb=xn({__forward_ref__:xn});function fn(n){return n.__forward_ref__=fn,n.toString=function(){return Ut(this())},n}function nt(n){return Zg(n)?n():n}function Zg(n){return"function"==typeof n&&n.hasOwnProperty(Bb)&&n.__forward_ref__===fn}class Fo extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function xt(n){return"string"==typeof n?n:null==n?"":String(n)}function tr(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():xt(n)}function uc(n,e){const t=e?` in ${e}`:"";throw new Fo("201",`No provider for ${tr(n)} found${t}`)}function nr(n,e){null==n&&function(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ks(n){return Xg(n,Xu)||Xg(n,Jg)}function Xg(n,e){return n.hasOwnProperty(e)?n[e]:null}function Zh(n){return n&&(n.hasOwnProperty(Kh)||n.hasOwnProperty(Jb))?n[Kh]:null}const Xu=xn({\u0275prov:xn}),Kh=xn({\u0275inj:xn}),Jg=xn({ngInjectableDef:xn}),Jb=xn({ngInjectorDef:xn});var it=(()=>((it=it||{})[it.Default=0]="Default",it[it.Host=1]="Host",it[it.Self=2]="Self",it[it.SkipSelf=4]="SkipSelf",it[it.Optional=8]="Optional",it))();let Yh;function No(n){const e=Yh;return Yh=n,e}function em(n,e,t){const i=ks(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&it.Optional?null:void 0!==e?e:void uc(Ut(n),"Injector")}function vn(n){return{toString:n}.toString()}var Kt=(()=>((Kt=Kt||{})[Kt.OnPush=0]="OnPush",Kt[Kt.Default=1]="Default",Kt))(),_r=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(_r||(_r={})),_r))();const t0="undefined"!=typeof globalThis&&globalThis,n0="undefined"!=typeof window&&window,r0="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,wn=t0||"undefined"!=typeof global&&global||n0||r0,Rs={},Mn=[],el=xn({\u0275cmp:xn}),yr=xn({\u0275dir:xn}),Ju=xn({\u0275pipe:xn}),Qh=xn({\u0275mod:xn}),Fs=xn({\u0275fac:xn}),tl=xn({__NG_ELEMENT_ID__:xn});let tm=0;function Wn(n){return vn(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Mn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||_r.Emulated,id:"c",styles:n.styles||Mn,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=tm++,i.inputs=dc(n.inputs,t),i.outputs=dc(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(nm):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Pr):null,i})}function nm(n){return Jn(n)||function(n){return n[yr]||null}(n)}function Pr(n){return function(n){return n[Ju]||null}(n)}const im={};function pn(n){return vn(()=>{const e={type:n.type,bootstrap:n.bootstrap||Mn,declarations:n.declarations||Mn,imports:n.imports||Mn,exports:n.exports||Mn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(im[n.id]=n.type),e})}function dc(n,e){if(null==n)return Rs;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const ke=Wn;function Yt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Jn(n){return n[el]||null}function vr(n,e){const t=n[Qh]||null;if(!t&&!0===e)throw new Error(`Type ${Ut(n)} does not have '\u0275mod' property.`);return t}function Jr(n){return Array.isArray(n)&&"object"==typeof n[1]}function es(n){return Array.isArray(n)&&!0===n[1]}function Ls(n){return 0!=(8&n.flags)}function ma(n){return 2==(2&n.flags)}function id(n){return 1==(1&n.flags)}function us(n){return null!==n.template}function c0(n){return 0!=(512&n[2])}function ts(n,e){return n.hasOwnProperty(Fs)?n[Fs]:null}class gc{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function mi(){return Dn}function Dn(n){return n.type.prototype.ngOnChanges&&(n.setInput=om),u0}function u0(){const n=am(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Rs)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function om(n,e,t,i){const r=am(n)||function(n,e){return n[mc]=e}(n,{previous:Rs,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],c=o[a];s[a]=new gc(c&&c.currentValue,e,o===Rs),n[i]=e}mi.ngInherit=!0;const mc="__ngSimpleChanges__";function am(n){return n[mc]||null}let il;function ei(n){return!!n.listen}const rl={createRenderer:(n,e)=>void 0!==il?il:"undefined"!=typeof document?document:void 0};function ti(n){for(;Array.isArray(n);)n=n[0];return n}function ad(n,e){return ti(e[n])}function sr(n,e){return ti(e[n.index])}function yc(n,e){return n.data[e]}function br(n,e){const t=e[n];return Jr(t)?t:t[0]}function cm(n){return 4==(4&n[2])}function af(n){return 128==(128&n[2])}function ni(n,e){return null==e?null:n[e]}function um(n){n[18]=0}function lf(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const wt={lFrame:Hs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ya(){return wt.bindingsEnabled}function de(){return wt.lFrame.lView}function zt(){return wt.lFrame.tView}function tn(n){return wt.lFrame.contextLView=n,n[8]}function wi(){let n=dm();for(;null!==n&&64===n.type;)n=n.parent;return n}function dm(){return wt.lFrame.currentTNode}function Vs(n,e){const t=wt.lFrame;t.currentTNode=n,t.isParent=e}function ol(){return wt.lFrame.isParent}function va(){wt.lFrame.isParent=!1}function po(){return wt.isInCheckNoChangesMode}function ba(n){wt.isInCheckNoChangesMode=n}function Bn(){const n=wt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function al(){return wt.lFrame.bindingIndex++}function p0(n,e){const t=wt.lFrame;t.bindingIndex=t.bindingRootIndex=n,df(e)}function df(n){wt.lFrame.currentDirectiveIndex=n}function hf(n){const e=wt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function Bs(){return wt.lFrame.currentQueryIndex}function ff(n){wt.lFrame.currentQueryIndex=n}function m0(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function pm(n,e,t){if(t&it.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&it.Host||(r=m0(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=wt.lFrame=gm();return i.currentTNode=e,i.lView=n,!0}function cd(n){const e=gm(),t=n[1];wt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function gm(){const n=wt.lFrame,e=null===n?null:n.child;return null===e?Hs(n):e}function Hs(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function mm(){const n=wt.lFrame;return wt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const _m=mm;function ud(){const n=mm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hi(){return wt.lFrame.selectedIndex}function Uo(n){wt.lFrame.selectedIndex=n}function ai(){const n=wt.lFrame;return yc(n.tView,n.selectedIndex)}function Ec(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),d&&((n.viewHooks||(n.viewHooks=[])).push(t,d),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,d)),null!=f&&(n.destroyHooks||(n.destroyHooks=[])).push(t,f)}}function Dc(n,e,t){hd(n,e,3,t)}function dd(n,e,t,i){(3&n[2])===t&&hd(n,e,t,i)}function pf(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function hd(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(Ac(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function Ac(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Sc{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Mc(n,e,t){const i=ei(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],c=t[r++];i?n.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=s,a=t[++r];js(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function ll(n){return 3===n||4===n||6===n}function js(n){return 64===n.charCodeAt(0)}function Tc(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||vm(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function vm(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function Ic(n){return-1!==n}function cl(n){return 32767&n}function li(n,e){let t=function(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Oc=!0;function Pc(n){const e=Oc;return Oc=n,e}let Ea=0;function Ei(n,e){const t=gf(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,Rc(i.data,n),Rc(e,null),Rc(i.blueprint,null));const r=pd(n,e),s=n.injectorIndex;if(Ic(r)){const o=cl(r),a=li(r,e),c=a[1].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=r,s}function Rc(n,e){n.push(0,0,0,0,0,0,0,0,e)}function gf(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function pd(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function gd(n,e,t){!function(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(tl)&&(i=t[tl]),null==i&&(i=t[tl]=Ea++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function wm(n,e,t){if(t&it.Optional)return n;uc(e,"NodeInjector")}function ul(n,e,t,i){if(t&it.Optional&&void 0===i&&(i=null),0==(t&(it.Self|it.Host))){const r=n[9],s=No(void 0);try{return r?r.get(e,i,t&it.Optional):em(e,i,t&it.Optional)}finally{No(s)}}return wm(i,e,t)}function _f(n,e,t,i=it.Default,r){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(tl)?n[tl]:void 0;return"number"==typeof e?e>=0?255&e:S0:e}(t);if("function"==typeof s){if(!pm(e,n,i))return i&it.Host?wm(r,t,i):ul(e,t,i,r);try{const o=s(i);if(null!=o||i&it.Optional)return o;uc(t)}finally{_m()}}else if("number"==typeof s){let o=null,a=gf(n,e),c=-1,d=i&it.Host?e[16][6]:null;for((-1===a||i&it.SkipSelf)&&(c=-1===a?pd(n,e):e[a+8],-1!==c&&Dm(i,!1)?(o=e[1],a=cl(c),e=li(c,e)):a=-1);-1!==a;){const f=e[1];if(vf(s,a,f.data)){const p=Fc(a,e,t,o,i,d);if(p!==Em)return p}c=e[a+8],-1!==c&&Dm(i,e[1].data[a+8]===d)&&vf(s,a,e)?(o=f,a=cl(c),e=li(c,e)):a=-1}}}return ul(e,t,i,r)}const Em={};function S0(){return new dl(wi(),de())}function Fc(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],f=md(a,o,t,null==i?ma(a)&&Oc:i!=o&&0!=(3&a.type),r&it.Host&&s===a);return null!==f?Nc(e,o,f,a):Em}function md(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,m=r?a+f:n.directiveEnd;for(let y=i?a:a+f;y<m;y++){const _=o[y];if(y<c&&t===_||y>=c&&_.type===t)return y}if(r){const y=o[c];if(y&&us(y)&&y.type===t)return c}return null}function Nc(n,e,t,i){let r=n[t];const s=e.data;if(function(n){return n instanceof Sc}(r)){const o=r;o.resolving&&function(n,e){throw new Fo("200",`Circular dependency in DI detected for ${n}`)}(tr(s[t]));const a=Pc(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?No(o.injectImpl):null;pm(n,i,it.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Dn(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&No(c),Pc(a),o.resolving=!1,_m()}}return r}function vf(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Dm(n,e){return!(n&it.Self||n&it.Host&&e)}class dl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return _f(this._tNode,this._lView,e,i,t)}}function Wi(n){return vn(()=>{const e=n.prototype.constructor,t=e[Fs]||_d(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Fs]||_d(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function _d(n){return Zg(n)?()=>{const e=_d(nt(n));return e&&e()}:ts(n)}const zo="__parameters__";function Us(n,e,t){return vn(()=>{const i=function(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,d,f){const p=c.hasOwnProperty(zo)?c[zo]:Object.defineProperty(c,zo,{value:[]})[zo];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Le{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const bf=new Le("AnalyzeForEntryComponents");function or(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),or(i,e)):e!==n&&e.push(i)}return e}function is(n,e){n.forEach(t=>Array.isArray(t)?is(t,e):e(t))}function Bc(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $o(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function yi(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Cr(n,e,t){let i=Go(n,e);return i>=0?n[1|i]=t:(i=~i,function(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Hc(n,e){const t=Go(n,e);if(t>=0)return n[1|t]}function Go(n,e){return function(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const zc={},Cd="__NG_DI_FLAG__",xa="ngTempTokenPath",zs=/\n/gm,Sf="__source",pl=xn({provide:String,useValue:xn});let $s;function Ma(n){const e=$s;return $s=n,e}function km(n,e=it.Default){if(void 0===$s)throw new Error("inject() must be called from an injection context");return null===$s?em(n,void 0,e):$s.get(n,e&it.Optional?null:void 0,e)}function X(n,e=it.Default){return(Yh||km)(nt(n),e)}const Ta=X;function ms(n){const e=[];for(let t=0;t<n.length;t++){const i=nt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,s=it.Default;for(let o=0;o<i.length;o++){const a=i[o],c=Rm(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(X(r,s))}else e.push(X(i))}return e}function $c(n,e){return n[Cd]=e,n.prototype[Cd]=e,n}function Rm(n){return n[Cd]}function Mf(n,e,t,i){const r=n[xa];throw e[Sf]&&r.unshift(e[Sf]),n.message=function(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=Ut(e);if(Array.isArray(e))r=e.map(Ut).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ut(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(zs,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[xa]=null,n}const Ia=$c(Us("Inject",n=>({token:n})),-1),Vi=$c(Us("Optional"),8),_s=$c(Us("SkipSelf"),4);const Zm="__ngContext__";function qi(n,e){n[Zm]=e}function Td(n){const e=function(n){return n[Zm]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Od(n){return n.ngOriginalError}function dC(n,...e){n.error(...e)}class Pa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=this._findContext(e),r=function(n){return n&&n.ngErrorLogger||dC}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),i&&r(this._console,"ERROR CONTEXT",i)}_findContext(e){return e?function(n){return n.ngDebugContext}(e)||this._findContext(Od(e)):null}_findOriginalError(e){let t=e&&Od(e);for(;t&&Od(t);)t=Od(t);return t||null}}const t_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(wn))();function Gf(n){return n.ownerDocument.defaultView}function Wf(n){return n.ownerDocument}function bs(n){return n instanceof Function?n():n}var Nr=(()=>((Nr=Nr||{})[Nr.Important=1]="Important",Nr[Nr.DashCase=2]="DashCase",Nr))();function Kf(n,e){return undefined(n,e)}function Xc(n){const e=n[3];return es(e)?e[3]:e}function Yf(n){return o_(n[13])}function Qf(n){return o_(n[4])}function o_(n){for(;null!==n&&!es(n);)n=n[4];return n}function Al(n,e,t,i,r){if(null!=i){let s,o=!1;es(i)?s=i:Jr(i)&&(o=!0,i=i[0]);const a=ti(i);0===n&&null!==t?null==r?Jc(e,t,a):ka(e,t,a,r||null,!0):1===n&&null!==t?ka(e,t,a,r||null,!0):2===n?function(n,e,t){const i=eu(n,e);i&&function(n,e,t,i){ei(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function(n,e,t,i,r){const s=t[7];s!==ti(t)&&Al(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];Ra(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function ep(n,e,t){return ei(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function l_(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,lf(r,-1)),t.splice(i,1)}function tp(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&l_(r,i),e>0&&(n[t-1][4]=i[4]);const s=$o(n,10+e);!function(n,e){Ra(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function c_(n,e){if(!(256&e[2])){const t=e[11];ei(t)&&t.destroyNode&&Ra(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return np(n[1],n);for(;e;){let t=null;if(Jr(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Jr(e)&&np(e[1],e),e=e[3];null===e&&(e=n),Jr(e)&&np(e[1],e),t=e&&e[4]}e=t}}(e)}}function np(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Sc)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):ti(e[o]),c=i[r=t[s+2]],d=t[s+3];"boolean"==typeof d?a.removeEventListener(t[s],c,d):d>=0?i[r=d]():i[r=-d].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&ei(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&es(e[3])){t!==e[3]&&l_(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function u_(n,e,t){return function(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===_r.None||r===_r.Emulated)return null}return sr(i,t)}(n,e.parent,t)}function ka(n,e,t,i,r){ei(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function Jc(n,e,t){ei(n)?n.appendChild(e,t):e.appendChild(t)}function h_(n,e,t,i,r){null!==i?ka(n,e,t,i,r):Jc(n,e,t)}function eu(n,e){return ei(n)?n.parentNode(e):e.parentNode}function rp(n,e,t){return op(n,e,t)}let op=function(n,e,t){return 40&n.type?sr(n,t):null};function Rd(n,e,t,i){const r=u_(n,i,e),s=e[11],a=rp(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)h_(s,r,t[c],a,!1);else h_(s,r,t,a,!1)}function Fd(n,e){if(null!==e){const t=e.type;if(3&t)return sr(e,n);if(4&t)return Sl(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Fd(n,i);{const r=n[e.index];return es(r)?Sl(-1,r):ti(r)}}if(32&t)return Kf(e,n)()||ti(n[e.index]);{const i=tu(n,e);return null!==i?Array.isArray(i)?i[0]:Fd(Xc(n[16]),i):Fd(n,e.next)}}return null}function tu(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Sl(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Fd(i,r)}return e[7]}function ap(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&qi(ti(a),i),t.flags|=4),64!=(64&t.flags))if(8&c)ap(n,e,t.child,i,r,s,!1),Al(e,n,r,a,s);else if(32&c){const d=Kf(t,i);let f;for(;f=d();)Al(e,n,r,f,s);Al(e,n,r,a,s)}else 16&c?__(n,e,i,t,r,s):Al(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Ra(n,e,t,i,r,s){ap(t,i,n.firstChild,e,r,s,!1)}function __(n,e,t,i,r,s){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)Al(e,n,r,c[d],s);else ap(n,e,c,o[3],r,s,!0)}function y_(n,e,t){ei(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function lp(n,e,t){ei(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function v_(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const b_="ng-template";function IC(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==v_(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function C_(n){return 4===n.type&&n.value!==b_}function OC(n,e,t){return e===(4!==n.type||t?n.value:b_)}function PC(n,e,t){let i=4;const r=n.attrs||[],s=function(n){for(let e=0;e<n.length;e++)if(ll(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!OC(n,c,t)||""===c&&1===e.length){if(fi(i))return!1;o=!0}}else{const d=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!IC(n.attrs,d,t)){if(fi(i))return!1;o=!0}continue}const p=kC(8&i?"class":c,r,C_(n),t);if(-1===p){if(fi(i))return!1;o=!0;continue}if(""!==d){let m;m=p>s?"":r[p+1].toLowerCase();const y=8&i?m:null;if(y&&-1!==v_(y,d,0)||2&i&&d!==m){if(fi(i))return!1;o=!0}}}}else{if(!o&&!fi(i)&&!fi(c))return!1;if(o&&fi(c))continue;o=!1,i=c|1&i}}return fi(i)||o}function fi(n){return 0==(1&n)}function kC(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function w_(n,e,t=!1){for(let i=0;i<e.length;i++)if(PC(n,e[i],t))return!0;return!1}function Dr(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function ci(n,e){return n?":not("+e.trim()+")":e}function FC(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!fi(o)&&(e+=ci(s,r),r=""),i=o,s=s||!fi(i);t++}return""!==r&&(e+=ci(s,r)),e}const Tt={};function Qe(n){E_(zt(),de(),hi()+n,po())}function E_(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Dc(e,s,t)}else{const s=n.preOrderHooks;null!==s&&dd(e,s,0,t)}Uo(t)}function xl(n,e){return n<<17|e<<2}function Cs(n){return n>>17&32767}function Ml(n){return 2|n}function bn(n){return(131068&n)>>2}function qn(n,e){return-131069&n|e<<2}function up(n){return 1|n}function Hd(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];ff(r),o.contentQueries(2,e[s],s)}}}function ru(n,e,t,i,r,s,o,a,c,d){const f=e.blueprint.slice();return f[0]=r,f[2]=140|i,um(f),f[3]=f[15]=n,f[8]=t,f[10]=o||n&&n[10],f[11]=a||n&&n[11],f[12]=c||n&&n[12]||null,f[9]=d||n&&n[9]||null,f[6]=s,f[16]=2==e.type?n[16]:f,f}function ii(n,e,t,i,r){let s=n.data[e];if(null===s)s=function(n,e,t,i,r){const s=dm(),o=ol(),c=n.data[e]=function(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,i,r),wt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function(){const n=wt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Vs(s,!0),s}function Il(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function su(n,e,t){cd(e);try{const i=n.viewQuery;null!==i&&Ki(1,i,t);const r=n.template;null!==r&&R_(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Hd(n,e),n.staticViewQueries&&Ki(2,n.viewQuery,t);const s=n.components;null!==s&&function(n,e){for(let t=0;t<e.length;t++)wp(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,ud()}}function Ol(n,e,t,i){const r=e[2];if(256==(256&r))return;cd(e);const s=po();try{um(e),function(n){wt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&R_(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const d=n.preOrderCheckHooks;null!==d&&Dc(e,d,null)}else{const d=n.preOrderHooks;null!==d&&dd(e,d,0,null),pf(e,0)}if(function(n){for(let e=Yf(n);null!==e;e=Qf(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&lf(s,1),r[2]|=1024}}}(e),function(n){for(let e=Yf(n);null!==e;e=Qf(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];af(i)&&Ol(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&Hd(n,e),!s)if(o){const d=n.contentCheckHooks;null!==d&&Dc(e,d)}else{const d=n.contentHooks;null!==d&&dd(e,d,1),pf(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Uo(~r);else{const s=r,o=t[++i],a=t[++i];p0(o,s),a(2,e[s])}}}finally{Uo(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)hw(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&Ki(2,c,i),!s)if(o){const d=n.viewCheckHooks;null!==d&&Dc(e,d)}else{const d=n.viewHooks;null!==d&&dd(e,d,2),pf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,lf(e[3],-1))}finally{ud()}}function k_(n,e,t,i){const r=e[10],s=!po(),o=cm(e);try{s&&!o&&r.begin&&r.begin(),o&&su(n,e,i),Ol(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function R_(n,e,t,i,r){const s=hi(),o=2&i;try{Uo(-1),o&&e.length>20&&E_(n,e,20,po()),t(i,r)}finally{Uo(s)}}function F_(n,e,t){if(Ls(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function mp(n,e,t){!ya()||(function(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Ei(t,e),qi(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],d=us(c);d&&aw(e,t,c);const f=Nc(e,n,a,t);qi(f,e),null!==o&&lw(0,a-r,f,c,0,o),d&&(br(t.index,e)[8]=f)}}(n,e,t,sr(t,e)),128==(128&t.flags)&&function(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=wt.lFrame.currentDirectiveIndex;try{Uo(o);for(let c=i;c<r;c++){const d=n.data[c],f=e[c];df(c),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&j_(d,f)}}finally{Uo(-1),df(a)}}(n,e,t))}function jd(n,e,t=sr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function N_(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Ud(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Ud(n,e,t,i,r,s,o,a,c,d){const f=20+i,p=f+r,m=function(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Tt);return t}(f,p),y="function"==typeof d?d():d;return m[1]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1}}function V_(n,e,t,i){const r=K_(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&Y_(n).push(i,r.length-1))}function B_(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function Vr(n,e,t,i,r,s,o,a){const c=sr(e,t);let f,d=e.inputs;!a&&null!=d&&(f=d[i])?(X_(n,t,f,i,r),ma(e)&&function(n,e){const t=br(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,ei(s)?s.setProperty(c,i,r):js(i)||(c.setProperty?c.setProperty(i,r):c[i]=r))}function vp(n,e,t,i){let r=!1;if(ya()){const s=function(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];w_(t,o.selectors,!1)&&(r||(r=[]),gd(Ei(t,e),n,o.type),us(o)?(U_(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,z_(t,n.data.length,s.length);for(let f=0;f<s.length;f++){const p=s[f];p.providersResolver&&p.providersResolver(p)}let a=!1,c=!1,d=Il(n,e,s.length,null);for(let f=0;f<s.length;f++){const p=s[f];t.mergedAttrs=Tc(t.mergedAttrs,p.hostAttrs),$_(n,t,e,d,p),ow(d,p,o),null!==p.contentQueries&&(t.flags|=8),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=128);const m=p.type.prototype;!a&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),d++}!function(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,c=null;for(let d=e.directiveStart;d<i;d++){const f=r[d],p=f.inputs,m=null===s||C_(e)?null:cw(p,s);o.push(m),a=B_(p,d,a),c=B_(f.outputs,d,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}(n,t)}o&&function(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Fo("301",`Export of name '${e[r+1]}' not found!`);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=Tc(t.mergedAttrs,t.attrs),r}function H_(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(i,r,o)}}function j_(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function U_(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function ow(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;us(e)&&(t[""]=n)}}function z_(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function $_(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=ts(r.type)),o=new Sc(s,us(r),null);n.blueprint[i]=o,t[i]=o,H_(n,e,0,i,Il(n,t,r.hostVars,Tt),r)}function aw(n,e,t){const i=sr(e,n),r=N_(t),s=n[10],o=ou(n,ru(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function Ks(n,e,t,i,r,s){const o=sr(n,e);!function(n,e,t,i,r,s,o){if(null==s)ei(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?xt(s):o(s,i||"",r);ei(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function lw(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const d=o[c++],f=o[c++],p=o[c++];null!==a?i.setInput(t,p,d,f):t[f]=p}}}function cw(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function G_(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function hw(n,e){const t=br(e,n);if(af(t)){const i=t[1];80&t[2]?Ol(i,t,i.template,t[8]):t[5]>0&&Cp(t)}}function Cp(n){for(let i=Yf(n);null!==i;i=Qf(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];Ol(o,s,o.template,s[8])}else s[5]>0&&Cp(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=br(t[i],n);af(r)&&r[5]>0&&Cp(r)}}function wp(n,e){const t=br(e,n),i=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),su(i,t,t[8])}function ou(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Ep(n){for(;n;){n[2]|=64;const e=Xc(n);if(c0(n)&&!e)return n;n=e}return null}function au(n,e,t){const i=e[10];i.begin&&i.begin();try{Ol(n,e,n.template,t)}catch(r){throw zd(e,r),r}finally{i.end&&i.end()}}function q_(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=Td(t),r=i[1];k_(r,i,r.template,t)}}(n[8])}function Ki(n,e,t){ff(0),e(n,t)}const mw=(()=>Promise.resolve(null))();function K_(n){return n[7]||(n[7]=[])}function Y_(n){return n.cleanup||(n.cleanup=[])}function Q_(n,e,t){return(null===n||us(n))&&(t=function(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function zd(n,e){const t=n[9],i=t?t.get(Pa,null):null;i&&i.handleError(e)}function X_(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],d=n.data[o];null!==d.setInput?d.setInput(c,r,i,a):c[a]=r}}function Es(n,e,t){const i=ad(e,n);!function(n,e,t){ei(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function $d(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Ja(r,a):2==s&&(i=Ja(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const kl=new Le("INJECTOR",-1);class J_{get(e,t=zc){if(t===zc){const i=new Error(`NullInjectorError: No provider for ${Ut(e)}!`);throw i.name="NullInjectorError",i}return t}}const lu=new Le("Set Injector scope."),cu={},Ap={};let uu;function ey(){return void 0===uu&&(uu=new J_),uu}function ty(n,e=null,t=null,i){return new bw(n,t,e||ey(),i)}class bw{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&is(t,a=>this.processProvider(a,e,t)),is([e],a=>this.processInjectorType(a,[],s)),this.records.set(kl,Rl(void 0,this));const o=this.records.get(lu);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:Ut(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=zc,i=it.Default){this.assertNotDestroyed();const r=Ma(this),s=No(void 0);try{if(!(i&it.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof Le}(e)&&ks(e);a=c&&this.injectableDefInScope(c)?Rl(Sp(e),cu):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&it.Self?ey():this.parent).get(e,t=i&it.Optional&&t===zc?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[xa]=o[xa]||[]).unshift(Ut(e)),r)throw o;return Mf(o,e,"R3InjectorError",this.source)}throw o}finally{No(s),Ma(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(Ut(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,i){if(!(e=nt(e)))return!1;let r=Zh(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=Zh(s)),null==r)return!1;if(null!=r.imports&&!a){let f;i.push(o);try{is(r.imports,p=>{this.processInjectorType(p,t,i)&&(void 0===f&&(f=[]),f.push(p))})}finally{}if(void 0!==f)for(let p=0;p<f.length;p++){const{ngModule:m,providers:y}=f[p];is(y,_=>this.processProvider(_,m,y||Mn))}}this.injectorDefTypes.add(o);const c=ts(o)||(()=>new o);this.records.set(o,Rl(c,cu));const d=r.providers;if(null!=d&&!a){const f=e;is(d,p=>this.processProvider(p,f,d))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=Fl(e=nt(e))?e:nt(e&&e.provide);const s=function(n,e,t){return iy(n)?Rl(void 0,n.useValue):Rl(ny(n),cu)}(e);if(Fl(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Rl(void 0,cu,!0),o.factory=()=>ms(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===cu&&(t.value=Ap,t.value=t.factory()),"object"==typeof t.value&&t.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=nt(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Sp(n){const e=ks(n),t=null!==e?e.factory:ts(n);if(null!==t)return t;if(n instanceof Le)throw new Error(`Token ${Ut(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const i=yi(e,"?");throw new Error(`Can't resolve all parameters for ${Ut(n)}: (${i.join(", ")}).`)}const t=function(n){const e=n&&(n[Xu]||n[Jg]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function ny(n,e,t){let i;if(Fl(n)){const r=nt(n);return ts(r)||Sp(r)}if(iy(n))i=()=>nt(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...ms(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))i=()=>X(nt(n.useExisting));else{const r=nt(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return ts(r)||Sp(r);i=()=>new r(...ms(n.deps))}return i}function Rl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function iy(n){return null!==n&&"object"==typeof n&&pl in n}function Fl(n){return"function"==typeof n}const ry=function(n,e,t){return function(n,e=null,t=null,i){const r=ty(n,e,t,i);return r._resolveInjectorDefTypes(),r}({name:t},e,n,t)};let _n=(()=>{class n{static create(t,i){return Array.isArray(t)?ry(t,i,""):ry(t.providers,t.parent,t.name||"")}}return n.THROW_IF_NOT_FOUND=zc,n.NULL=new J_,n.\u0275prov=Ne({token:n,providedIn:"any",factory:()=>X(kl)}),n.__NG_ELEMENT_ID__=-1,n})();function sL(n,e){Ec(Td(n)[1],wi())}function $t(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(us(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=Ow(n.inputs),o.declaredInputs=Ow(n.declaredInputs),o.outputs=Ow(n.outputs);const a=r.hostBindings;a&&cL(n,a);const c=r.viewQuery,d=r.contentQueries;if(c&&aL(n,c),d&&lL(n,d),Wh(n.inputs,r.inputs),Wh(n.declaredInputs,r.declaredInputs),Wh(n.outputs,r.outputs),us(r)&&r.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===$t&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Tc(r.hostAttrs,t=Tc(t,r.hostAttrs))}}(i)}function Ow(n){return n===Rs?{}:n===Mn?[]:n}function aL(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function lL(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function cL(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let oy=null;function Gd(){if(!oy){const n=wn.Symbol;if(n&&n.iterator)oy=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(oy=i)}}}return oy}function xp(n){return!!Pw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Gd()in n)}function Pw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Yo(n,e,t){return n[e]=t}function Ar(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Sr(n,e,t,i){const r=de();return Ar(r,al(),e)&&(zt(),Ks(ai(),r,n,e,t,i)),Sr}function qd(n,e,t,i){return Ar(n,al(),t)?e+xt(t)+i:Tt}function $n(n,e,t,i,r,s,o,a){const c=de(),d=zt(),f=n+20,p=d.firstCreatePass?function(n,e,t,i,r,s,o,a,c){const d=e.consts,f=ii(e,n,4,o||null,ni(d,a));vp(e,t,f,ni(d,c)),Ec(e,f);const p=f.tViews=Ud(2,f,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d);return null!==e.queries&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}(f,d,c,e,t,i,r,s,o):d.data[f];Vs(p,!1);const m=c[11].createComment("");Rd(d,c,m,p),qi(m,c),ou(c,c[f]=G_(m,c,m,p)),id(p)&&mp(d,c,p),null!=o&&jd(c,p,a)}function V(n,e=it.Default){const t=de();return null===t?X(n,e):_f(wi(),t,nt(n),e)}function cy(){throw new Error("invalid")}function We(n,e,t){const i=de();return Ar(i,al(),e)&&Vr(zt(),ai(),i,n,e,i[11],t,!1),We}function Lw(n,e,t,i,r){const o=r?"class":"style";X_(n,t,e.inputs[o],o,i)}function C(n,e,t,i){const r=de(),s=zt(),o=20+n,a=r[11],c=r[o]=ep(a,e,wt.lFrame.currentNamespace),d=s.firstCreatePass?function(n,e,t,i,r,s,o){const a=e.consts,d=ii(e,n,2,r,ni(a,s));return vp(e,t,d,ni(a,o)),null!==d.attrs&&$d(d,d.attrs,!1),null!==d.mergedAttrs&&$d(d,d.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,d),d}(o,s,r,0,e,t,i):s.data[o];Vs(d,!0);const f=d.mergedAttrs;null!==f&&Mc(a,c,f);const p=d.classes;null!==p&&lp(a,c,p);const m=d.styles;null!==m&&y_(a,c,m),64!=(64&d.flags)&&Rd(s,r,c,d),0===wt.lFrame.elementDepthCount&&qi(c,r),wt.lFrame.elementDepthCount++,id(d)&&(mp(s,r,d),F_(s,d,r)),null!==i&&jd(r,d)}function w(){let n=wi();ol()?va():(n=n.parent,Vs(n,!1));const e=n;wt.lFrame.elementDepthCount--;const t=zt();t.firstCreatePass&&(Ec(t,n),Ls(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&Lw(t,e,de(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&Lw(t,e,de(),e.stylesWithoutHost,!1)}function vt(n,e,t,i){C(n,e,t,i),w()}function Js(){return de()}function Tp(n){return!!n&&"function"==typeof n.then}const uy=function(n){return!!n&&"function"==typeof n.subscribe};function Ge(n,e,t,i){const r=de(),s=zt(),o=wi();return v1(s,r,r[11],o,n,e,!!t,i),Ge}function Hw(n,e){const t=wi(),i=de(),r=zt();return v1(r,i,Q_(hf(r.data),t,i),t,n,e,!1),Hw}function v1(n,e,t,i,r,s,o,a){const c=id(i),f=n.firstCreatePass&&Y_(n),p=e[8],m=K_(e);let y=!0;if(3&i.type||a){const M=sr(i,e),F=a?a(M):M,L=m.length,Y=a?re=>a(ti(re[i.index])):i.index;if(ei(t)){let re=null;if(!a&&c&&(re=function(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==re)(re.__ngLastListenerFn__||re).__ngNextListenerFn__=s,re.__ngLastListenerFn__=s,y=!1;else{s=jw(i,e,p,s,!1);const Ee=t.listen(F,r,s);m.push(s,Ee),f&&f.push(r,Y,L,L+1)}}else s=jw(i,e,p,s,!0),F.addEventListener(r,s,o),m.push(s),f&&f.push(r,Y,L,o)}else s=jw(i,e,p,s,!1);const _=i.outputs;let I;if(y&&null!==_&&(I=_[r])){const M=I.length;if(M)for(let F=0;F<M;F+=2){const At=e[I[F]][I[F+1]].subscribe(s),Ct=m.length;m.push(s,At),f&&f.push(r,i.index,Ct,-(Ct+1))}}}function b1(n,e,t,i){try{return!1!==t(i)}catch(r){return zd(n,r),!1}}function jw(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?br(n.index,e):e;0==(32&e[2])&&Ep(a);let c=b1(e,0,i,o),d=s.__ngNextListenerFn__;for(;d;)c=b1(e,0,d,o)&&c,d=d.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Nt(n=1){return function(n){return(wt.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,wt.lFrame.contextLView))[8]}(n)}function zL(n,e){let t=null;const i=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?w_(n,s,!0):Dr(i,s))return r}else t=r}return t}function dy(n){const e=de()[16][6];if(!e.projection){const i=e.projection=yi(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?zL(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function hy(n,e=0,t){const i=de(),r=zt(),s=ii(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),va(),64!=(64&s.flags)&&function(n,e,t){__(e[11],0,e,t,u_(n,t,e),rp(t.parent||e[6],t,e))}(r,i,s)}function nh(n,e,t){return Uw(n,"",e,"",t),nh}function Uw(n,e,t,i,r){const s=de(),o=qd(s,e,t,i);return o!==Tt&&Vr(zt(),ai(),s,n,o,s[11],r,!1),Uw}function T1(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Cs(s):bn(s),c=!1;for(;0!==a&&(!1===c||o);){const f=n[a+1];WL(n[a],e)&&(c=!0,n[a+1]=i?up(f):Ml(f)),a=i?Cs(f):bn(f)}c&&(n[t+1]=i?Ml(s):up(s))}function WL(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Go(n,e)>=0}function Yi(n,e){return function(n,e,t,i){const r=de(),s=zt(),o=function(n){const e=wt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[hi()],o=function(n,e){return e>=n.expandoStartIndex}(n,t);(function(n,e){return 0!=(n.flags&(e?16:32))})(s,i)&&null===e&&!o&&(e=!1),e=function(n,e,t,i){const r=hf(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Ip(t=zw(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=zw(r,n,e,t,i),null===s){let c=function(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==bn(i))return n[Cs(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=zw(null,n,e,c[1],i),c=Ip(c,e.attrs,i),function(n,e,t,i){n[Cs(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Ip(i,n[s].hostAttrs,t);return Ip(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Cs(o),c=bn(o);n[i]=t;let f,d=!1;if(Array.isArray(t)){const p=t;f=p[1],(null===f||Go(p,f)>0)&&(d=!0)}else f=t;if(r)if(0!==c){const m=Cs(n[a+1]);n[i+1]=xl(m,a),0!==m&&(n[m+1]=qn(n[m+1],i)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=xl(a,0),0!==a&&(n[a+1]=qn(n[a+1],i)),a=i;else n[i+1]=xl(c,0),0===a?a=i:n[c+1]=qn(n[c+1],i),c=i;d&&(n[i+1]=Ml(n[i+1])),T1(n,f,i,!0),T1(n,f,i,!1),function(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Go(s,e)>=0&&(t[i+1]=up(t[i+1]))}(e,f,n,i,s),o=xl(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==Tt&&Ar(r,o,e)&&function(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,d=c[a+1];fy(function(n){return 1==(1&n)}(d)?j1(c,e,t,r,bn(d),o):void 0)||(fy(s)||function(n){return 2==(2&n)}(d)&&(s=j1(c,null,t,r,a,o)),function(n,e,t,i,r){const s=ei(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Nr.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Nr.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,ad(hi(),t),r,s))}(s,s.data[hi()],r,r[11],n,r[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ut(function(n){return n instanceof class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(e,t),i,o)}(n,e,null,!0),Yi}function zw(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Ip(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Ip(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Cr(n,o,!!t||e[++s]))}return void 0===n?null:n}function j1(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],d=Array.isArray(c),f=d?c[1]:c,p=null===f;let m=t[r+1];m===Tt&&(m=p?Mn:void 0);let y=p?Hc(m,i):f===i?m:void 0;if(d&&!fy(y)&&(y=Hc(c,i)),fy(y)&&(a=y,o))return a;const _=n[r+1];r=o?Cs(_):bn(_)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Hc(c,i))}return a}function fy(n){return void 0!==n}function D(n,e=""){const t=de(),i=zt(),r=n+20,s=i.firstCreatePass?ii(i,r,1,e,null):i.data[r],o=t[r]=function(n,e){return ei(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Rd(i,t,o,s),Vs(s,!1)}function hu(n){return $w("",n,""),hu}function $w(n,e,t){const i=de(),r=qd(i,n,e,t);return r!==Tt&&Es(i,hi(),r),$w}function Gw(n,e,t){const i=de();return Ar(i,al(),e)&&Vr(zt(),ai(),i,n,e,i[11],t,!0),Gw}function Ww(n,e,t){const i=de();if(Ar(i,al(),e)){const s=zt(),o=ai();Vr(s,o,i,n,e,Q_(hf(s.data),o,i),t,!0)}return Ww}const fu=void 0;var xV=["en",[["a","p"],["AM","PM"],fu],[["AM","PM"],fu,fu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fu,"{1} 'at' {0}",fu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let rh={};function jr(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=aM(e);if(t)return t;const i=e.split("-")[0];if(t=aM(i),t)return t;if("en"===i)return xV;throw new Error(`Missing locale data for the locale "${n}".`)}function aM(n){return n in rh||(rh[n]=wn.ng&&wn.ng.common&&wn.ng.common.locales&&wn.ng.common.locales[n]),rh[n]}var Ve=(()=>((Ve=Ve||{})[Ve.LocaleId=0]="LocaleId",Ve[Ve.DayPeriodsFormat=1]="DayPeriodsFormat",Ve[Ve.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ve[Ve.DaysFormat=3]="DaysFormat",Ve[Ve.DaysStandalone=4]="DaysStandalone",Ve[Ve.MonthsFormat=5]="MonthsFormat",Ve[Ve.MonthsStandalone=6]="MonthsStandalone",Ve[Ve.Eras=7]="Eras",Ve[Ve.FirstDayOfWeek=8]="FirstDayOfWeek",Ve[Ve.WeekendRange=9]="WeekendRange",Ve[Ve.DateFormat=10]="DateFormat",Ve[Ve.TimeFormat=11]="TimeFormat",Ve[Ve.DateTimeFormat=12]="DateTimeFormat",Ve[Ve.NumberSymbols=13]="NumberSymbols",Ve[Ve.NumberFormats=14]="NumberFormats",Ve[Ve.CurrencyCode=15]="CurrencyCode",Ve[Ve.CurrencySymbol=16]="CurrencySymbol",Ve[Ve.CurrencyName=17]="CurrencyName",Ve[Ve.Currencies=18]="Currencies",Ve[Ve.Directionality=19]="Directionality",Ve[Ve.PluralCase=20]="PluralCase",Ve[Ve.ExtraData=21]="ExtraData",Ve))();const py="en-US";let lM=py;function Kw(n,e,t,i,r){if(n=nt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Kw(n[s],e,t,i,r);else{const s=zt(),o=de();let a=Fl(n)?n:nt(n.provide),c=ny(n);const d=wi(),f=1048575&d.providerIndexes,p=d.directiveStart,m=d.providerIndexes>>20;if(Fl(n)||!n.multi){const y=new Sc(c,r,V),_=Qw(a,e,r?f:f+m,p);-1===_?(gd(Ei(d,o),s,a),Yw(s,n,e.length),e.push(a),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),t.push(y),o.push(y)):(t[_]=y,o[_]=y)}else{const y=Qw(a,e,f+m,p),_=Qw(a,e,f,f+m),I=y>=0&&t[y],M=_>=0&&t[_];if(r&&!M||!r&&!I){gd(Ei(d,o),s,a);const F=function(n,e,t,i,r){const s=new Sc(n,t,V);return s.multi=[],s.index=e,s.componentProviders=0,PM(s,r,i&&!t),s}(r?S3:A3,t.length,r,i,c);!r&&M&&(t[_].providerFactory=F),Yw(s,n,e.length,0),e.push(a),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),t.push(F),o.push(F)}else Yw(s,n,y>-1?y:_,PM(t[r?_:y],c,!r&&i));!r&&i&&M&&t[_].componentProviders++}}}function Yw(n,e,t,i){const r=Fl(e);if(r||function(n){return!!n.useClass}(e)){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const a=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const c=a.indexOf(t);-1===c?a.push(t,[i,o]):a[c+1].push(i,o)}else a.push(t,o)}}}function PM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Qw(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function A3(n,e,t,i){return Xw(this.multi,[])}function S3(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Nc(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),Xw(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Xw(r,s);return s}function Xw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function On(n,e=[]){return t=>{t.providersResolver=(i,r)=>function(n,e,t){const i=zt();if(i.firstCreatePass){const r=us(n);Kw(t,i.data,i.blueprint,r,!0),Kw(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class kM{}const FM="ngComponent";class T3{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${Ut(n)}. Did you add it to @NgModule.entryComponents?`);return e[FM]=n,e}(e)}}let Jo=(()=>{class n{}return n.NULL=new T3,n})();function vy(...n){}function oh(n,e){return new Xt(sr(n,e))}const P3=function(){return oh(wi(),de())};let Xt=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=P3,n})();function NM(n){return n instanceof Xt?n.nativeElement:n}class pu{}let ea=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>R3(),n})();const R3=function(){const n=de(),t=br(wi().index,n);return function(n){return n[11]}(Jr(t)?t:n)};let eE=(()=>{class n{}return n.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>null}),n})();class Nl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const LM=new Nl("13.0.2"),ah={};function by(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(ti(s)),es(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1].firstChild;null!==d&&by(c[1],c,d,i)}const o=t.type;if(8&o)by(n,e,t.child,i);else if(32&o){const a=Kf(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=tu(e,t);if(Array.isArray(a))i.push(...a);else{const c=Xc(e[16]);by(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Fp{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return by(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(es(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(tp(e,i),$o(t,i))}this._attachedToViewContainer=!1}c_(this._lView[1],this._lView)}onDestroy(e){V_(this._lView[1],this._lView,null,e)}markForCheck(){Ep(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){au(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){ba(!0);try{au(n,e,t)}finally{ba(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,e){Ra(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class L3 extends Fp{constructor(e){super(e),this._view=e}detectChanges(){q_(this._view)}checkNoChanges(){!function(n){ba(!0);try{q_(n)}finally{ba(!1)}}(this._view)}get context(){return null}}class VM extends Jo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Jn(e);return new tE(t,this.ngModule)}}function BM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const B3=new Le("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>t_});class tE extends kM{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function(n){return n.map(FC).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return BM(this.componentDef.inputs)}get outputs(){return BM(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function(n,e){return{get:(t,i,r)=>{const s=n.get(t,ah,r);return s!==ah||i===ah?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(pu,rl),a=s.get(eE,null),c=o.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",f=i?function(n,e,t){if(ei(n))return n.selectRootElement(e,t===_r.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(c,i,this.componentDef.encapsulation):ep(o.createRenderer(null,this.componentDef),d,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(d)),p=this.componentDef.onPush?576:528,m=function(n,e){return{components:[],scheduler:n||t_,clean:mw,playerHandler:e||null,flags:0}}(),y=Ud(0,null,null,1,0,null,null,null,null,null),_=ru(null,y,m,p,null,null,o,c,a,s);let I,M;cd(_);try{const F=function(n,e,t,i,r,s){const o=t[1];t[20]=n;const c=ii(o,20,2,"#host",null),d=c.mergedAttrs=e.hostAttrs;null!==d&&($d(c,d,!0),null!==n&&(Mc(r,n,d),null!==c.classes&&lp(r,n,c.classes),null!==c.styles&&y_(r,n,c.styles)));const f=i.createRenderer(n,e),p=ru(t,N_(e),null,e.onPush?64:16,t[20],c,i,f,s||null,null);return o.firstCreatePass&&(gd(Ei(c,t),o,e.type),U_(o,c),z_(c,t.length,1)),ou(t,p),t[20]=p}(f,this.componentDef,_,o,c);if(f)if(i)Mc(c,f,["ng-version",LM.full]);else{const{attrs:L,classes:Y}=function(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!fi(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);L&&Mc(c,f,L),Y&&Y.length>0&&lp(c,f,Y.join(" "))}if(M=yc(y,20),void 0!==t){const L=M.projection=[];for(let Y=0;Y<this.ngContentSelectors.length;Y++){const re=t[Y];L.push(null!=re?Array.from(re):null)}}I=function(n,e,t,i,r){const s=t[1],o=function(n,e,t){const i=wi();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),$_(n,i,e,Il(n,e,1,null),t));const r=Nc(e,n,i.directiveStart,i);qi(r,e);const s=sr(i,e);return s&&qi(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(c=>c(o,e)),e.contentQueries){const c=wi();e.contentQueries(1,o,c.directiveStart)}const a=wi();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Uo(a.index),H_(t[1],a,0,a.directiveStart,a.directiveEnd,e),j_(e,o)),o}(F,this.componentDef,_,m,[sL]),su(y,_,null)}finally{ud()}return new U3(this.componentType,I,oh(M,_),_,M)}}class U3 extends class{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new L3(r),this.componentType=e}get injector(){return new dl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class ta{}class HM{}const lh=new Map;class UM extends ta{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new VM(this);const i=vr(e);this._bootstrapComponents=bs(i.bootstrap),this._r3Injector=ty(e,t,[{provide:ta,useValue:this},{provide:Jo,useValue:this.componentFactoryResolver}],Ut(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=_n.THROW_IF_NOT_FOUND,i=it.Default){return e===_n||e===ta||e===kl?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class iE extends HM{constructor(e){super(),this.moduleType=e,null!==vr(e)&&function(n){const e=new Set;!function t(i){const r=vr(i,!0),s=r.id;null!==s&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Ut(e)} vs ${Ut(e.name)}`)}(s,lh.get(s),i),lh.set(s,i));const o=bs(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new UM(this.moduleType,e)}}function zM(n,e,t,i){return function(n,e,t,i,r,s){const o=e+t;return Ar(n,o,r)?Yo(n,o+1,s?i.call(s,r):i(r)):Np(n,o+1)}(de(),Bn(),n,e,t,i)}function $M(n,e,t,i,r){return function(n,e,t,i,r,s,o){const a=e+t;return function(n,e,t,i){const r=Ar(n,e,t);return Ar(n,e+1,i)||r}(n,a,r,s)?Yo(n,a+2,o?i.call(o,r,s):i(r,s)):Np(n,a+2)}(de(),Bn(),n,e,t,i,r)}function Np(n,e){const t=n[e];return t===Tt?void 0:t}function rE(n){return e=>{setTimeout(n,void 0,e)}}const rn=class extends Je{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var c,d,f;let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const p=e;r=null==(c=p.next)?void 0:c.bind(p),s=null==(d=p.error)?void 0:d.bind(p),o=null==(f=p.complete)?void 0:f.bind(p)}this.__isAsync&&(s=rE(s),r&&(r=rE(r)),o&&(o=rE(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof we&&e.add(a),a}};function aB(){return this._results[Gd()]()}class gu{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Gd(),i=gu.prototype;i[t]||(i[t]=aB)}get changes(){return this._changes||(this._changes=new rn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=or(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;const cB=function(){return Cy(wi(),de())};let Ds=(()=>{class n{}return n.__NG_ELEMENT_ID__=cB,n})();const uB=Ds,dB=class extends uB{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=ru(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),su(t,i,e),new Fp(i)}};function Cy(n,e){return 4&n.type?new dB(e,n,oh(n,e)):null}const pB=function(){return XM(wi(),de())};let Ur=(()=>{class n{}return n.__NG_ELEMENT_ID__=pB,n})();const mB=Ur,YM=class extends mB{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return oh(this._hostTNode,this._hostLView)}get injector(){return new dl(this._hostTNode,this._hostLView)}get parentInjector(){const e=pd(this._hostTNode,this._hostLView);if(Ic(e)){const t=li(e,this._hostLView),i=cl(e);return new dl(t[1].data[i+8],t)}return new dl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=QM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=e&&!function(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.ngModuleRef}const c=o?e:new tE(Jn(e)),d=i||this.parentInjector;if(!s&&null==c.ngModule&&d){const p=d.get(ta,null);p&&(s=p)}const f=c.create(d,r,void 0,s);return this.insert(f.hostView,a),f}insert(e,t){const i=e._lView,r=i[1];if(function(n){return es(n[3])}(i)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const p=i[3],m=new YM(p,p[6],p[3]);m.detach(m.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],Bc(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=Sl(s,o),c=i[11],d=eu(c,o[7]);return null!==d&&function(n,e,t,i,r,s){i[0]=r,i[6]=e,Ra(n,i,t,1,r,s)}(r,o[6],c,i,d,a),e.attachToViewContainerRef(),Bc(sE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=QM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=tp(this._lContainer,t);i&&($o(sE(this._lContainer),t),c_(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=tp(this._lContainer,t);return i&&null!=$o(sE(this._lContainer),t)?new Fp(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function QM(n){return n[8]}function sE(n){return n[8]||(n[8]=[])}function XM(n,e){let t;const i=e[n.index];if(es(i))t=i;else{let r;if(8&n.type)r=ti(i);else{const s=e[11];r=s.createComment("");const o=sr(n,e);ka(s,eu(s,o),r,function(n,e){return ei(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=G_(i,e,r,n),ou(e,t)}return new YM(t,n,e)}class oE{constructor(e){this.queryList=e,this.matches=null}clone(){return new oE(this.queryList)}setDirty(){this.queryList.setDirty()}}class aE{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new aE(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==iT(e,t).matches&&this.queries[t].setDirty()}}class JM{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class lE{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new lE(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class cE{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new cE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,vB(t,s)),this.matchTNodeWithReadOption(e,t,md(t,e,s,!1,!1))}else i===Ds?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,md(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Xt||r===Ur||r===Ds&&4&t.type)this.addMatch(t.index,-2);else{const s=md(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function vB(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function CB(n,e,t,i){return-1===t?function(n,e){return 11&n.type?oh(n,e):4&n.type?Cy(n,e):null}(e,n):-2===t?function(n,e,t){return t===Xt?oh(e,n):t===Ds?Cy(e,n):t===Ur?XM(e,n):void 0}(n,e,i):Nc(n,n[1],t,e)}function eT(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const d=o[c];a.push(d<0?null:CB(e,s[d],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function uE(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=eT(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const d=s[a+1],f=e[-c];for(let p=10;p<f.length;p++){const m=f[p];m[17]===m[3]&&uE(m[1],m,d,i)}if(null!==f[9]){const p=f[9];for(let m=0;m<p.length;m++){const y=p[m];uE(y[1],y,d,i)}}}}}return i}function Di(n){const e=de(),t=zt(),i=Bs();ff(i+1);const r=iT(t,i);if(n.dirty&&cm(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?uE(t,e,i,[]):eT(t,e,r,i);n.reset(s,NM),n.notifyOnChanges()}return!0}return!1}function zr(n,e,t){const i=zt();i.firstCreatePass&&(nT(i,new JM(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),tT(i,de(),e)}function mu(n,e,t,i){const r=zt();if(r.firstCreatePass){const s=wi();nT(r,new JM(e,t,i),s.index),function(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}tT(r,de(),t)}function Ai(){return function(n,e){return n[19].queries[e].queryList}(de(),Bs())}function tT(n,e,t){const i=new gu(4==(4&t));V_(n,e,i,i.destroy),null===e[19]&&(e[19]=new aE),e[19].queries.push(new oE(i))}function nT(n,e,t){null===n.queries&&(n.queries=new lE),n.queries.track(new cE(e,t))}function iT(n,e){return n.queries.getByIndex(e)}const Bp=new Le("Application Initializer");let uh=(()=>{class n{constructor(t){this.appInits=t,this.resolve=vy,this.reject=vy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Tp(s))t.push(s);else if(uy(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(X(Bp,8))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();const Hp=new Le("AppId"),XB={provide:Hp,useFactory:function(){return`${mE()}${mE()}${mE()}`},deps:[]};function mE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const CT=new Le("Platform Initializer"),Dy=new Le("Platform ID"),wT=new Le("appBootstrapListener");let Ay=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();const na=new Le("LocaleId"),ET=new Le("DefaultCurrencyCode");class e5{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const _E=function(n){return new iE(n)},t5=_E,n5=function(n){return Promise.resolve(_E(n))},AT=function(n){const e=_E(n),i=bs(vr(n).declarations).reduce((r,s)=>{const o=Jn(s);return o&&r.push(new tE(o)),r},[]);return new e5(e,i)},r5=AT,s5=function(n){return Promise.resolve(AT(n))};let Sy=(()=>{class n{constructor(){this.compileModuleSync=t5,this.compileModuleAsync=n5,this.compileModuleAndAllComponentsSync=r5,this.compileModuleAndAllComponentsAsync=s5}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();const l5=(()=>Promise.resolve(0))();function yE(n){"undefined"==typeof Zone?l5.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class gn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rn(!1),this.onMicrotaskEmpty=new rn(!1),this.onStable=new rn(!1),this.onError=new rn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let n=wn.requestAnimationFrame,e=wn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(wn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,bE(n),n.isCheckStableRunning=!0,vE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),bE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return ST(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),xT(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return ST(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),xT(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,bE(n),vE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,u5,vy,vy);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const u5={};function vE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function ST(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xT(n){n._nesting--,vE(n)}class f5{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rn,this.onMicrotaskEmpty=new rn,this.onStable=new rn,this.onError=new rn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let CE=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gn.assertNotInAngularZone(),yE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(X(gn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})(),MT=(()=>{class n{constructor(){this._applications=new Map,wE.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return wE.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();class p5{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let wE=new p5,TT=!0,IT=!1;function EE(){return IT=!0,TT}let Eo;const OT=new Le("AllowMultipleToken");class DE{constructor(e,t){this.name=e,this.token=t}}function PT(n,e,t=[]){const i=`Platform: ${e}`,r=new Le(i);return(s=[])=>{let o=kT();if(!o||o.injector.get(OT,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:lu,useValue:"platform"});!function(n){if(Eo&&!Eo.destroyed&&!Eo.injector.get(OT,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Eo=n.get(RT);const e=n.get(CT,null);e&&e.forEach(t=>t())}(_n.create({providers:a,name:i}))}return function(n){const e=kT();if(!e)throw new Error("No platform exists!");if(!e.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function kT(){return Eo&&!Eo.destroyed?Eo:null}let RT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function(n,e){let t;return t="noop"===n?new f5:("zone.js"===n?void 0:n)||new gn({enableLongStackTrace:EE(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),c=[{provide:gn,useValue:a}];return a.run(()=>{const d=_n.create({providers:c,parent:this.injector,name:t.moduleType.name}),f=t.create(d),p=f.injector.get(Pa,null);if(!p)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const m=a.onError.subscribe({next:y=>{p.handleError(y)}});f.onDestroy(()=>{AE(this._modules,f),m.unsubscribe()})}),function(n,e,t){try{const i=t();return Tp(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(p,a,()=>{const m=f.injector.get(uh);return m.runInitializers(),m.donePromise.then(()=>(function(n){nr(n,"Expected localeId to be defined"),"string"==typeof n&&(lM=n.toLowerCase().replace(/_/g,"-"))}(f.injector.get(na,py)||py),this._moduleDoBootstrap(f),f))})})}bootstrapModule(t,i=[]){const r=FT({},i);return function(n,e,t){const i=new iE(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(_u);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${Ut(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(X(_n))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();function FT(n,e){return Array.isArray(e)?e.reduce(FT,n):Pe(Pe({},n),e)}let _u=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new et(d=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{d.next(this._stable),d.complete()})}),c=new et(d=>{let f;this._zone.runOutsideAngular(()=>{f=this._zone.onStable.subscribe(()=>{gn.assertNotInAngularZone(),yE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,d.next(!0))})})});const p=this._zone.onUnstable.subscribe(()=>{gn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),p.unsubscribe()}});this.isStable=fa(a,c.pipe(n=>Gh()(function(n,e){return function(i){let r;r="function"==typeof n?n:function(){return n};const s=Object.create(i,kb);return s.source=i,s.subjectFactory=r,s}}(Lb)(n))))}bootstrap(t,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=t instanceof kM?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function(n){return n.isBoundToModule}(r)?void 0:this._injector.get(ta),a=r.create(_n.NULL,[],i||r.selector,s),c=a.location.nativeElement,d=a.injector.get(CE,null),f=d&&a.injector.get(MT);return d&&f&&f.registerApplication(c,d),a.onDestroy(()=>{this.detachView(a.hostView),AE(this.components,a),f&&f.unregisterApplication(c)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;AE(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(wT,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(X(gn),X(_n),X(Pa),X(Jo),X(uh))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();function AE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const T5=function(n){return function(n,e,t){if(ma(n)&&!t){const i=br(n.index,e);return new Fp(i,i)}return 47&n.type?new Fp(e[16],e):null}(wi(),de(),16==(16&n))};let Do=(()=>{class n{}return n.__NG_ELEMENT_ID__=T5,n})();class UT{constructor(){}supports(e){return xp(e)}create(e){return new U5(e)}}const j5=(n,e)=>e;class U5{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||j5}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<$T(i,r,s)?t:i,a=$T(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const d=a-r,f=c-r;if(d!=f){for(let m=0;m<d;m++){const y=m<s.length?s[m]:s[m]=0,_=y+m;f<=_&&_<d&&(s[m]=y+1)}s[o.previousIndex]=f-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!xp(e))throw new Error(`Error trying to diff '${Ut(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Gd()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new z5(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new zT),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zT),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class z5{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $5{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class zT{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new $5,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $T(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class GT{constructor(){}supports(e){return e instanceof Map||Pw(e)}create(){return new G5}}class G5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Pw(e)))throw new Error(`Error trying to diff '${Ut(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new W5(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class W5{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WT(){return new jp([new UT])}let jp=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||WT()),deps:[[n,new _s,new Vi]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=Ne({token:n,providedIn:"root",factory:WT}),n})();function qT(){return new dh([new GT])}let dh=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||qT()),deps:[[n,new _s,new Vi]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=Ne({token:n,providedIn:"root",factory:qT}),n})();const Z5=[new GT],Y5=new jp([new UT]),Q5=new dh(Z5),X5=PT(null,"core",[{provide:Dy,useValue:"unknown"},{provide:RT,deps:[_n]},{provide:MT,deps:[]},{provide:Ay,deps:[]}]),iH=[{provide:_u,useClass:_u,deps:[gn,_n,Pa,Jo,uh]},{provide:B3,deps:[gn],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:uh,useClass:uh,deps:[[new Vi,Bp]]},{provide:Sy,useClass:Sy,deps:[]},XB,{provide:jp,useFactory:function(){return Y5},deps:[]},{provide:dh,useFactory:function(){return Q5},deps:[]},{provide:na,useFactory:function(n){return n||"undefined"!=typeof $localize&&$localize.locale||py},deps:[[new Ia(na),new Vi,new _s]]},{provide:ET,useValue:"USD"}];let sH=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(X(_u))},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({providers:iH}),n})(),Hy=null;function ia(){return Hy}const sn=new Le("DocumentToken");let wu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:function(){return X(OI)},providedIn:"platform"}),n})();const Jj=new Le("Location Initialized");let OI=(()=>{class n extends wu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ia().getBaseHref(this._doc)}onPopState(t){const i=ia().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=ia().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){PI()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){PI()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(X(sn))},n.\u0275prov=Ne({token:n,factory:function(){return new OI(X(sn))},providedIn:"platform"}),n})();function PI(){return!!window.history.pushState}function JE(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function kI(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Va(n){return n&&"?"!==n[0]?"?"+n:n}let _h=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:function(){return function(n){const e=X(sn).location;return new RI(X(wu),e&&e.origin||"")}()},providedIn:"root"}),n})();const eD=new Le("appBaseHref");let RI=(()=>{class n extends _h{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return JE(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Va(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Va(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Va(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null==(r=(i=this._platformLocation).historyGo)||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(X(wu),X(eD,8))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})(),n4=(()=>{class n extends _h{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=JE(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Va(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Va(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null==(r=(i=this._platformLocation).historyGo)||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(X(wu),X(eD,8))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})(),Jp=(()=>{class n{constructor(t,i){this._subject=new rn,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=kI(FI(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Va(i))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,FI(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Va(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Va(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null==(r=(i=this._platformStrategy).historyGo)||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Va,n.joinWithSlash=JE,n.stripTrailingSlash=kI,n.\u0275fac=function(t){return new(t||n)(X(_h),X(wu))},n.\u0275prov=Ne({token:n,factory:function(){return new Jp(X(_h),X(wu))},providedIn:"root"}),n})();function FI(n){return n.replace(/\/index.html$/,"")}var ss=(()=>((ss=ss||{})[ss.Decimal=0]="Decimal",ss[ss.Percent=1]="Percent",ss[ss.Currency=2]="Currency",ss[ss.Scientific=3]="Scientific",ss))(),Oi=(()=>((Oi=Oi||{})[Oi.Zero=0]="Zero",Oi[Oi.One=1]="One",Oi[Oi.Two=2]="Two",Oi[Oi.Few=3]="Few",Oi[Oi.Many=4]="Many",Oi[Oi.Other=5]="Other",Oi))(),pt=(()=>((pt=pt||{})[pt.Decimal=0]="Decimal",pt[pt.Group=1]="Group",pt[pt.List=2]="List",pt[pt.PercentSign=3]="PercentSign",pt[pt.PlusSign=4]="PlusSign",pt[pt.MinusSign=5]="MinusSign",pt[pt.Exponential=6]="Exponential",pt[pt.SuperscriptingExponent=7]="SuperscriptingExponent",pt[pt.PerMille=8]="PerMille",pt[pt.Infinity=9]="Infinity",pt[pt.NaN=10]="NaN",pt[pt.TimeSeparator=11]="TimeSeparator",pt[pt.CurrencyDecimal=12]="CurrencyDecimal",pt[pt.CurrencyGroup=13]="CurrencyGroup",pt))();function os(n,e){const t=jr(n),i=t[Ve.NumberSymbols][e];if(void 0===i){if(e===pt.CurrencyDecimal)return t[Ve.NumberSymbols][pt.Decimal];if(e===pt.CurrencyGroup)return t[Ve.NumberSymbols][pt.Group]}return i}const h4=function(n){return jr(n)[Ve.PluralCase]},O4=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function lD(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class Yy{}let j4=(()=>{class n extends Yy{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(h4(i||this.locale)(t)){case Oi.Zero:return"zero";case Oi.One:return"one";case Oi.Two:return"two";case Oi.Few:return"few";case Oi.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(X(na))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();class G4{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ng=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=[];t.forEachOperation((r,s,o)=>{if(null==r.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new G4(null,this._ngForOf,-1,-1),null===o?void 0:o),c=new $I(r,a);i.push(c)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const c=new $I(r,a);i.push(c)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,s=this._viewContainer.length;r<s;r++){const o=this._viewContainer.get(r);o.context.index=r,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(t,i){t.context.$implicit=i.item}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(V(Ur),V(Ds),V(jp))},n.\u0275dir=ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class $I{constructor(e,t){this.record=e,this.view=t}}let Eu=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new q4,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){GI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){GI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(V(Ur),V(Ds))},n.\u0275dir=ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class q4{constructor(){this.$implicit=null,this.ngIf=null}}function GI(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ut(e)}'.`)}let dD=(()=>{class n{constructor(t){this._locale=t}transform(t,i,r){if(!function(n){return!(null==n||""===n||n!=n)}(t))return null;r=r||this._locale;try{return function(n,e,t){return function(n,e,t,i,r,s,o=!1){let a="",c=!1;if(isFinite(n)){let d=function(n){let i,r,s,o,a,e=Math.abs(n)+"",t=0;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))i=[0],r=1;else{for(a--;"0"===e.charAt(a);)a--;for(r-=s,i=[],o=0;s<=a;s++,o++)i[o]=Number(e.charAt(s))}return r>22&&(i=i.splice(0,21),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}(n);o&&(d=function(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(d));let f=e.minInt,p=e.minFrac,m=e.maxFrac;if(s){const L=s.match(O4);if(null===L)throw new Error(`${s} is not a valid digit info`);const Y=L[1],re=L[3],Ee=L[5];null!=Y&&(f=lD(Y)),null!=re&&(p=lD(re)),null!=Ee?m=lD(Ee):null!=re&&p>m&&(m=p)}!function(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+n.integerLen,a=i[o];if(o>0){i.splice(Math.max(n.integerLen,o));for(let p=o;p<i.length;p++)i[p]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let p=1;p<o;p++)i[p]=0}if(a>=5)if(o-1<0){for(let p=0;p>o;p--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let c=0!==s;const d=e+n.integerLen,f=i.reduceRight(function(p,m,y,_){return _[y]=(m+=p)<10?m:m-10,c&&(0===_[y]&&y>=d?_.pop():c=!1),m>=10?1:0},0);f&&(i.unshift(f),n.integerLen++)}(d,p,m);let y=d.digits,_=d.integerLen;const I=d.exponent;let M=[];for(c=y.every(L=>!L);_<f;_++)y.unshift(0);for(;_<0;_++)y.unshift(0);_>0?M=y.splice(_,y.length):(M=y,y=[0]);const F=[];for(y.length>=e.lgSize&&F.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)F.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&F.unshift(y.join("")),a=F.join(os(t,i)),M.length&&(a+=os(t,r)+M.join("")),I&&(a+=os(t,pt.Exponential)+"+"+I)}else a=os(t,pt.Infinity);return a=n<0&&!c?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(";"),r=i[0],s=i[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],a=o[0],c=o[1]||"";t.posPre=a.substr(0,a.indexOf("#"));for(let f=0;f<c.length;f++){const p=c.charAt(f);"0"===p?t.minFrac=t.maxFrac=f+1:"#"===p?t.maxFrac=f+1:t.posSuf+=p}const d=a.split(",");if(t.gSize=d[1]?d[1].length:0,t.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,s){const f=r.length-t.posPre.length-t.posSuf.length,p=s.indexOf("#");t.negPre=s.substr(0,p).replace(/'/g,""),t.negSuf=s.substr(p+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function(n,e){return jr(n)[Ve.NumberFormats][e]}(e,ss.Decimal),os(e,pt.MinusSign)),e,pt.Group,pt.Decimal,t)}(function(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),r,i)}catch(s){throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Ut(n)}'`)}(n,s.message)}}}return n.\u0275fac=function(t){return new(t||n)(V(na,16))},n.\u0275pipe=Yt({name:"number",type:n,pure:!0}),n})();let Ha=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({providers:[{provide:Yy,useClass:j4}]}),n})();const ZI="browser";let EU=(()=>{class n{}return n.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new DU(X(sn),window)}),n})();class DU{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=KI(this.window.history)||KI(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function KI(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class pD extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){Hy||(Hy=n)}(new pD)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(ig=ig||document.querySelector("base"),ig?ig.getAttribute("href"):null);return null==t?null:function(n){Qy=Qy||document.createElement("a"),Qy.setAttribute("href",n);const e=Qy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ig=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Qy,ig=null;const YI=new Le("TRANSITION_ID"),OU=[{provide:Bp,useFactory:function(n,e,t){return()=>{t.get(uh).donePromise.then(()=>{const i=ia(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[YI,sn,_n],multi:!0}];class gD{static init(){!function(n){wE=n}(new gD)}addToWindow(e){wn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},wn.getAllAngularTestabilities=()=>e.getAllTestabilities(),wn.getAllAngularRootElements=()=>e.getAllRootElements(),wn.frameworkStabilizers||(wn.frameworkStabilizers=[]),wn.frameworkStabilizers.push(i=>{const r=wn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?ia().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let PU=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();const rg=new Le("EventManagerPlugins");let Jy=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(X(rg),X(gn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();class mD{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=ia().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let XI=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})(),sg=(()=>{class n extends XI{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(JI),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(JI))}}return n.\u0275fac=function(t){return new(t||n)(X(sn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();function JI(n){ia().remove(n)}const _D={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yD=/%COMP%/g;function ev(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?ev(n,r,t):(r=r.replace(yD,n),t.push(r))}return t}function nO(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let tv=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new vD(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case _r.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new qU(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case _r.ShadowDom:return new ZU(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=ev(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(X(Jy),X(sg),X(Hp))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();class vD{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_D[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=_D[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=_D[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Nr.DashCase|Nr.Important)?e.style.setProperty(t,i,r&Nr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Nr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,nO(i)):this.eventManager.addEventListener(e,t,nO(i))}}class qU extends vD{constructor(e,t,i,r){super(e),this.component=i;const s=ev(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(yD,n)}(r+"-"+i.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(yD,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class ZU extends vD{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ev(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let KU=(()=>{class n extends mD{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(X(sn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();const sO=["alt","control","meta","shift"],n8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oO={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},r8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let s8=(()=>{class n extends mD{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ia().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(sO.forEach(c=>{const d=i.indexOf(c);d>-1&&(i.splice(d,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&oO.hasOwnProperty(e)&&(e=oO[e]))}return n8[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),sO.forEach(s=>{s!=r&&r8[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(X(sn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();const d8=[{provide:Dy,useValue:ZI},{provide:CT,useValue:function(){pD.makeCurrent(),gD.init()},multi:!0},{provide:sn,useFactory:function(){return function(n){il=n}(document),document},deps:[]}],f8=PT(X5,"browser",d8),p8=[[],{provide:lu,useValue:"root"},{provide:Pa,useFactory:function(){return new Pa},deps:[]},{provide:rg,useClass:KU,multi:!0,deps:[sn,gn,Dy]},{provide:rg,useClass:s8,multi:!0,deps:[sn]},[],{provide:tv,useClass:tv,deps:[Jy,sg,Hp]},{provide:pu,useExisting:tv},{provide:XI,useExisting:sg},{provide:sg,useClass:sg,deps:[sn]},{provide:CE,useClass:CE,deps:[gn]},{provide:Jy,useClass:Jy,deps:[rg,gn]},{provide:class{},useClass:PU,deps:[]},[]];let aO=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Hp,useValue:t.appId},{provide:YI,useExisting:Hp},OU]}}}return n.\u0275fac=function(t){return new(t||n)(X(n,12))},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({providers:p8,imports:[Ha,sH]}),n})();function nv(n,e){return new et(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const c=Ni(n[a]);let d=!1;t.add(c.subscribe({next:f=>{d||(d=!0,o++),r[a]=f},error:f=>t.error(f),complete:()=>{s++,(s===i||!d)&&(o===i&&t.next(e?e.reduce((f,p,m)=>(f[p]=r[m],f),{}):r),t.complete())}}))}})}"undefined"!=typeof window&&window;let cO=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(V(ea),V(Xt))},n.\u0275dir=ke({type:n}),n})(),Du=(()=>{class n extends cO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Wi(n)))(i||n)}}(),n.\u0275dir=ke({type:n,features:[$t]}),n})();const Oo=new Le("NgValueAccessor"),E8={provide:Oo,useExisting:fn(()=>DD),multi:!0};let DD=(()=>{class n extends Du{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Wi(n)))(i||n)}}(),n.\u0275dir=ke({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,i){1&t&&Ge("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[On([E8]),$t]}),n})();const D8={provide:Oo,useExisting:fn(()=>yh),multi:!0},S8=new Le("CompositionEventMode");let yh=(()=>{class n extends cO{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=ia()?ia().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(V(ea),V(Xt),V(S8,8))},n.\u0275dir=ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&Ge("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[On([D8]),$t]}),n})();function Hl(n){return null==n||0===n.length}function uO(n){return null!=n&&"number"==typeof n.length}const Ji=new Le("NgValidators"),ra=new Le("NgAsyncValidators"),x8=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class io{static min(e){return dO(e)}static max(e){return function(n){return e=>{if(Hl(e.value)||Hl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return fO(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return Hl(n.value)||x8.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>Hl(e.value)||!uO(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>uO(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return og;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Hl(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return DO(e)}static composeAsync(e){return AO(e)}}function dO(n){return e=>{if(Hl(e.value)||Hl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function fO(n){return Hl(n.value)?{required:!0}:null}function og(n){return null}function vO(n){return null!=n}function bO(n){const e=Tp(n)?Ni(n):n;return uy(e),e}function CO(n){let e={};return n.forEach(t=>{e=null!=t?Pe(Pe({},e),t):e}),0===Object.keys(e).length?null:e}function wO(n,e){return e.map(t=>t(n))}function EO(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function DO(n){if(!n)return null;const e=n.filter(vO);return 0==e.length?null:function(t){return CO(wO(t,e))}}function AD(n){return null!=n?DO(EO(n)):null}function AO(n){if(!n)return null;const e=n.filter(vO);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if(ee(e))return nv(e,null);if(ze(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return nv(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return nv(n=1===n.length&&ee(n[0])?n[0]:n,null).pipe(Bt(t=>e(...t)))}return nv(n,null)}(wO(t,e).map(bO)).pipe(Bt(CO))}}function SD(n){return null!=n?AO(EO(n)):null}function SO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xO(n){return n._rawValidators}function MO(n){return n._rawAsyncValidators}function xD(n){return n?Array.isArray(n)?n:[n]:[]}function iv(n,e){return Array.isArray(n)?n.includes(e):n===e}function TO(n,e){const t=xD(e);return xD(n).forEach(r=>{iv(t,r)||t.push(r)}),t}function IO(n,e){return xD(e).filter(t=>!iv(n,t))}class OO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=SD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Wr extends OO{get formDirective(){return null}get path(){return null}}class jl extends OO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class PO{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(r=null==(i=this._cd)?void 0:i.control)?void 0:r[e])}}let ag=(()=>{class n extends PO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(V(jl,2))},n.\u0275dir=ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Yi("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[$t]}),n})(),rv=(()=>{class n extends PO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(V(Wr,10))},n.\u0275dir=ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&Yi("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[$t]}),n})();function ov(n,e){return[...e.path,n]}function lg(n,e){ID(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&kO(n,e)})}(n,e),function(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&kO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function av(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),cv(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function lv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ID(n,e){const t=xO(n);null!==e.validator?n.setValidators(SO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=MO(n);null!==e.asyncValidator?n.setAsyncValidators(SO(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();lv(e._rawValidators,r),lv(e._rawAsyncValidators,r)}function cv(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=xO(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=MO(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return lv(e._rawValidators,i),lv(e._rawAsyncValidators,i),t}function kO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function OD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function PD(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===yh?t=s:function(n){return Object.getPrototypeOf(n.constructor)===Du}(s)?i=s:r=s}),r||i||t||null}function uv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const cg="VALID",dv="INVALID",vh="PENDING",ug="DISABLED";function kD(n){return(FD(n)?n.validators:n)||null}function NO(n){return Array.isArray(n)?AD(n):n||null}function RD(n,e){return(FD(e)?e.asyncValidators:n)||null}function LO(n){return Array.isArray(n)?SD(n):n||null}function FD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ND{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=NO(this._rawValidators),this._composedAsyncValidatorFn=LO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cg}get invalid(){return this.status===dv}get pending(){return this.status==vh}get disabled(){return this.status===ug}get enabled(){return this.status!==ug}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=NO(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=LO(e)}addValidators(e){this.setValidators(TO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IO(e,this._rawAsyncValidators))}hasValidator(e){return iv(this._rawValidators,e)}hasAsyncValidator(e){return iv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ug,this.errors=null,this._forEachChild(i=>{i.disable(Ui(Pe({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ui(Pe({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cg,this._forEachChild(i=>{i.enable(Ui(Pe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ui(Pe({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cg||this.status===vh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ug:cg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vh,this._hasOwnPendingAsyncValidator=!0;const t=bO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=i instanceof An?i.controls.hasOwnProperty(r)?i.controls[r]:null:i instanceof kn&&i.at(r)||null}),i}(this,e)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new rn,this.statusChanges=new rn}_calculateStatus(){return this._allControlsDisabled()?ug:this.errors?dv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vh)?vh:this._anyControlsHaveStatus(dv)?dv:cg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){FD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class yn extends ND{constructor(e=null,t,i){super(kD(t),RD(i,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){uv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){uv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class An extends ND{constructor(e,t,i){super(kD(t),RD(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t instanceof yn?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class kn extends ND{constructor(e,t,i){super(kD(t),RD(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((i,r)=>{this._throwIfControlMissing(r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof yn?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const U8={provide:jl,useExisting:fn(()=>hv)},HO=(()=>Promise.resolve(null))();let hv=(()=>{class n extends jl{constructor(t,i,r,s){super(),this.control=new yn,this._registered=!1,this.update=new rn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=PD(0,s)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),OD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?ov(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){lg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){HO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;HO.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(V(Wr,9),V(Ji,10),V(ra,10),V(Oo,10))},n.\u0275dir=ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[On([U8]),$t,mi]}),n})(),fv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const z8={provide:Oo,useExisting:fn(()=>VD),multi:!0};let VD=(()=>{class n extends Du{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Wi(n)))(i||n)}}(),n.\u0275dir=ke({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&Ge("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[On([z8]),$t]}),n})();const $8={provide:Oo,useExisting:fn(()=>BD),multi:!0};let jO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({}),n})(),G8=(()=>{class n{constructor(){this._accessors=[]}add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t)return void this._accessors.splice(i,1)}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return!!t[0].control&&t[0]._parent===i._control._parent&&t[1].name===i.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:jO}),n})(),BD=(()=>{class n extends Du{constructor(t,i,r,s){super(t,i),this._registry=r,this._injector=s,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(jl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(V(ea),V(Xt),V(G8),V(_n))},n.\u0275dir=ke({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,i){1&t&&Ge("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[On([$8]),$t]}),n})();const HD=new Le("NgModelWithFormControlWarning"),Z8={provide:Wr,useExisting:fn(()=>bh)};let bh=(()=>{class n extends Wr{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new rn,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return lg(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){av(t.control||null,t,!1),uv(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(av(i||null,t),r instanceof yn&&(lg(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function(n,e){ID(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function(n,e){return cv(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ID(this.form,this),this._oldForm&&cv(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(V(Ji,10),V(ra,10))},n.\u0275dir=ke({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&Ge("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[On([Z8]),$t,mi]}),n})();const Q8={provide:jl,useExisting:fn(()=>hg)};let hg=(()=>{class n extends jl{constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new rn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=PD(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),OD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ov(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(V(Wr,13),V(Ji,10),V(ra,10),V(Oo,10),V(HD,8))},n.\u0275dir=ke({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[On([Q8]),$t,mi]}),n})();const X8={provide:Oo,useExisting:fn(()=>Au),multi:!0};function GO(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Au=(()=>{class n extends Du{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=this._getOptionId(t);null==i&&this.setProperty("selectedIndex",-1);const r=GO(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Wi(n)))(i||n)}}(),n.\u0275dir=ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&Ge("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[On([X8]),$t]}),n})(),fg=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(GO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(ea),V(Au,9))},n.\u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const ez={provide:Oo,useExisting:fn(()=>zD),multi:!0};function WO(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let zD=(()=>{class n extends Du{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[];if(void 0!==i.selectedOptions){const s=i.selectedOptions;for(let o=0;o<s.length;o++){const a=s.item(o),c=this._getOptionValue(a.value);r.push(c)}}else{const s=i.options;for(let o=0;o<s.length;o++){const a=s.item(o);if(a.selected){const c=this._getOptionValue(a.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Wi(n)))(i||n)}}(),n.\u0275dir=ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&Ge("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[On([ez]),$t]}),n})(),pg=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(WO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(WO(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(ea),V(zD,9))},n.\u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let pv=(()=>{class n{constructor(){this._validator=og}handleChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._validator=this.enabled()?this.createValidator(i):og,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(){return null!=this[this.inputName]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ke({type:n}),n})();const iz={provide:Ji,useExisting:fn(()=>$D),multi:!0};let $D=(()=>{class n extends pv{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>dO(t)}ngOnChanges(t){this.handleChanges(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Wi(n)))(i||n)}}(),n.\u0275dir=ke({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&Sr("min",i.enabled()?i.min:null)},inputs:{min:"min"},features:[On([iz]),$t,mi]}),n})();const rz={provide:Ji,useExisting:fn(()=>gv),multi:!0};let gv=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?fO(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&Sr("required",i.required?"":null)},inputs:{required:"required"},features:[On([rz])]}),n})(),tP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[jO]]}),n})(),Ch=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[tP]}),n})(),Su=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:HD,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[tP]}),n})();function bt(...n){let e=n[n.length-1];return Ir(e)?(n.pop(),ac(n,e)):$h(n)}class ro extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ln;return this._value}next(e){super.next(this._value=e)}}class dz extends je{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class hz extends je{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function fz(n,e,t,i,r=new hz(n,t,i)){if(!r.closed)return e instanceof et?e.subscribe(r):oc(e)(r)}const nP={};class gz{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new mz(e,this.resultSelector))}}class mz extends dz{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(nP),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(fz(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===nP?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const mv=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function WD(...n){return ha(1)(bt(...n))}const wh=new et(n=>n.complete());function qD(n){return n?function(n){return new et(e=>n.schedule(()=>e.complete()))}(n):wh}function ZD(n){return new et(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?Ni(t):qD()).subscribe(e)})}function Ul(n,e){return"function"==typeof e?t=>t.pipe(Ul((i,r)=>Ni(n(i,r)).pipe(Bt((s,o)=>e(i,s,r,o))))):t=>t.lift(new vz(n))}class vz{constructor(e){this.project=e}call(e,t){return t.subscribe(new bz(e,this.project))}}class bz extends lc{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new Xa(this),r=this.destination;r.add(i),this.innerSubscription=cc(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const iP=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function zl(n){return e=>0===n?qD():e.lift(new Cz(n))}class Cz{constructor(e){if(this.total=e,this.total<0)throw new iP}call(e,t){return t.subscribe(new wz(e,this.total))}}class wz extends je{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function _v(...n){const e=n[n.length-1];return Ir(e)?(n.pop(),t=>WD(n,t,e)):t=>WD(n,t)}function rP(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new Ez(n,e,t))}}class Ez{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new Dz(e,this.accumulator,this.seed,this.hasSeed))}}class Dz extends je{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function so(n,e){return function(i){return i.lift(new Az(n,e))}}class Az{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Sz(e,this.predicate,this.thisArg))}}class Sz extends je{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function xu(n){return function(t){const i=new xz(n),r=t.lift(i);return i.caught=r}}class xz{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Mz(e,this.selector,this.caught))}}class Mz extends lc{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new Xa(this);this.add(i);const r=cc(t,i);r!==i&&this.add(r)}}}function gg(n,e){return Mi(n,e,1)}function KD(n){return function(t){return 0===n?qD():t.lift(new Tz(n))}}class Tz{constructor(e){if(this.total=e,this.total<0)throw new iP}call(e,t){return t.subscribe(new Iz(e,this.total))}}class Iz extends je{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<i;s++){const o=t++%i;e.next(r[o])}}e.complete()}}function sP(n=kz){return e=>e.lift(new Oz(n))}class Oz{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Pz(e,this.errorFactory))}}class Pz extends je{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function kz(){return new mv}function oP(n=null){return e=>e.lift(new Rz(n))}class Rz{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Fz(e,this.defaultValue))}}class Fz extends je{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Eh(n,e){const t=arguments.length>=2;return i=>i.pipe(n?so((r,s)=>n(r,s,i)):Ke,zl(1),t?oP(e):sP(()=>new mv))}function $l(){}function as(n,e,t){return function(r){return r.lift(new Lz(n,e,t))}}class Lz{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new Vz(e,this.nextOrObserver,this.error,this.complete))}}class Vz extends je{constructor(e,t,i,r){super(e),this._tapNext=$l,this._tapError=$l,this._tapComplete=$l,this._tapError=i||$l,this._tapComplete=r||$l,k(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||$l,this._tapError=t.error||$l,this._tapComplete=t.complete||$l)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class Hz{constructor(e){this.callback=e}call(e,t){return t.subscribe(new jz(e,this.callback))}}class jz extends je{constructor(e,t){super(e),this.add(new we(t))}}class ja{constructor(e,t){this.id=e,this.url=t}}class YD extends ja{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class mg extends ja{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class aP extends ja{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uz extends ja{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zz extends ja{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $z extends ja{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gz extends ja{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wz extends ja{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qz extends ja{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lP{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cP{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zz{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kz{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yz{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qz{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uP{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Jt="primary";class Xz{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Dh(n){return new Xz(n)}const dP="ngNavigationCancelingError";function QD(n){const e=Error("NavigationCancelingError: "+n);return e[dP]=!0,e}function e$(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function sa(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!hP(n[r],e[r]))return!1;return!0}function hP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function fP(n){return Array.prototype.concat.apply([],n)}function pP(n){return n.length>0?n[n.length-1]:null}function ur(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function oa(n){return uy(n)?n:Tp(n)?Ni(Promise.resolve(n)):bt(n)}const i$={exact:function _P(n,e,t){if(!Tu(n.segments,e.segments)||!yv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!_P(n.children[i],e.children[i],t))return!1;return!0},subset:yP},gP={exact:function(n,e){return sa(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hP(n[t],e[t]))},ignored:()=>!0};function mP(n,e,t){return i$[t.paths](n.root,e.root,t.matrixParams)&&gP[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function yP(n,e,t){return vP(n,e,e.segments,t)}function vP(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Tu(r,t)||e.hasChildren()||!yv(r,t,i))}if(n.segments.length===t.length){if(!Tu(n.segments,t)||!yv(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!yP(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Tu(n.segments,r)&&yv(n.segments,r,i)&&n.children[Jt])&&vP(n.children[Jt],e,s,i)}}function yv(n,e,t){return e.every((i,r)=>gP[t](n[r].parameters,i.parameters))}class Mu{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dh(this.queryParams)),this._queryParamMap}toString(){return l$.serialize(this)}}class mn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ur(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vv(this)}}class _g{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Dh(this.parameters)),this._parameterMap}toString(){return DP(this)}}function Tu(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class bP{}class CP{parse(e){const t=new _$(e);return new Mu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${yg(e.root,!0)}`,i=function(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${bv(t)}=${bv(r)}`).join("&"):`${bv(t)}=${bv(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const l$=new CP;function vv(n){return n.segments.map(e=>DP(e)).join("/")}function yg(n,e){if(!n.hasChildren())return vv(n);if(e){const t=n.children[Jt]?yg(n.children[Jt],!1):"",i=[];return ur(n.children,(r,s)=>{s!==Jt&&i.push(`${s}:${yg(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function(n,e){let t=[];return ur(n.children,(i,r)=>{r===Jt&&(t=t.concat(e(i,r)))}),ur(n.children,(i,r)=>{r!==Jt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Jt?[yg(n.children[Jt],!1)]:[`${r}:${yg(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${vv(n)}/${t[0]}`:`${vv(n)}/(${t.join("//")})`}}function wP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bv(n){return wP(n).replace(/%3B/gi,";")}function XD(n){return wP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cv(n){return decodeURIComponent(n)}function EP(n){return Cv(n.replace(/\+/g,"%20"))}function DP(n){return`${XD(n.path)}${function(n){return Object.keys(n).map(e=>`;${XD(e)}=${XD(n[e])}`).join("")}(n.parameters)}`}const h$=/^[^\/()?;=#]+/;function wv(n){const e=n.match(h$);return e?e[0]:""}const f$=/^[^=?&#]+/,g$=/^[^&#]+/;class _${constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mn([],{}):new mn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Jt]=new mn(e,t)),i}parseSegment(){const e=wv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new _g(Cv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=wv(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=wv(this.remaining);r&&(i=r,this.capture(i))}e[Cv(t)]=Cv(i)}parseQueryParam(e){const t=function(n){const e=n.match(f$);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function(n){const e=n.match(g$);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=EP(t),s=EP(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=wv(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Jt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Jt]:new mn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class AP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=JD(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=JD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=eA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return eA(e,this._root).map(t=>t.value)}}function JD(n,e){if(n===e.value)return e;for(const t of e.children){const i=JD(n,t);if(i)return i}return null}function eA(n,e){if(n===e.value)return[e];for(const t of e.children){const i=eA(n,t);if(i.length)return i.unshift(e),i}return[]}class Ua{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ah(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class SP extends AP{constructor(e,t){super(e),this.snapshot=t,tA(this,e)}toString(){return this.snapshot.toString()}}function xP(n,e){const t=function(n,e){const o=new Ev([],{},{},"",{},Jt,e,null,n.root,-1,{});return new TP("",new Ua(o,[]))}(n,e),i=new ro([new _g("",{})]),r=new ro({}),s=new ro({}),o=new ro({}),a=new ro(""),c=new aa(i,r,o,a,s,Jt,e,t.root);return c.snapshot=t.root,new SP(new Ua(c,[]),t)}class aa{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Bt(e=>Dh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Bt(e=>Dh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function MP(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function(n){return n.reduce((e,t)=>({params:Pe(Pe({},e.params),t.params),data:Pe(Pe({},e.data),t.data),resolve:Pe(Pe({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Ev{constructor(e,t,i,r,s,o,a,c,d,f,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=d,this._lastPathIndex=f,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class TP extends AP{constructor(e,t){super(t),this.url=e,tA(this,t)}toString(){return IP(this._root)}}function tA(n,e){e.value._routerState=n,e.children.forEach(t=>tA(n,t))}function IP(n){const e=n.children.length>0?` { ${n.children.map(IP).join(", ")} } `:"";return`${n.value}${e}`}function nA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,sa(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),sa(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!sa(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),sa(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function iA(n,e){const t=sa(n.params,e.params)&&function(n,e){return Tu(n,e)&&n.every((t,i)=>sa(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||iA(n.parent,e.parent))}function vg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return vg(n,i,r);return vg(n,i)})}(n,e,t);return new Ua(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>vg(n,a)),o}}const i=function(n){return new aa(new ro(n.url),new ro(n.params),new ro(n.queryParams),new ro(n.fragment),new ro(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>vg(n,s));return new Ua(i,r)}}function Dv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function bg(n){return"object"==typeof n&&null!=n&&n.outlets}function rA(n,e,t,i,r){let s={};return i&&ur(i,(o,a)=>{s[a]=Array.isArray(o)?o.map(c=>`${c}`):`${o}`}),new Mu(t.root===n?e:OP(t.root,n,e),s,r)}function OP(n,e,t){const i={};return ur(n.children,(r,s)=>{i[s]=r===e?t:OP(r,e,t)}),new mn(n.segments,i)}class PP{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Dv(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(bg);if(r&&r!==pP(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sA{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function kP(n,e,t){if(n||(n=new mn([],{})),0===n.segments.length&&n.hasChildren())return Av(n,e,t);const i=function(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(bg(a))break;const c=`${a}`,d=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&d&&"object"==typeof d&&void 0===d.outlets){if(!FP(c,d,o))return s;i+=2}else{if(!FP(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new mn(n.segments.slice(0,i.pathIndex),{});return s.children[Jt]=new mn(n.segments.slice(i.pathIndex),n.children),Av(s,0,r)}return i.match&&0===r.length?new mn(n.segments,{}):i.match&&!n.hasChildren()?oA(n,e,t):i.match?Av(n,0,r):oA(n,e,t)}function Av(n,e,t){if(0===t.length)return new mn(n.segments,{});{const i=function(n){return bg(n[0])?n[0].outlets:{[Jt]:n}}(t),r={};return ur(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=kP(n.children[o],e,s))}),ur(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new mn(n.segments,r)}}function oA(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(bg(s)){const c=T$(s.outlets);return new mn(i,c)}if(0===r&&Dv(t[0])){i.push(new _g(n.segments[e].path,RP(t[0]))),r++;continue}const o=bg(s)?s.outlets[Jt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Dv(a)?(i.push(new _g(o,RP(a))),r+=2):(i.push(new _g(o,{})),r++)}return new mn(i,{})}function T$(n){const e={};return ur(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=oA(new mn([],{}),0,t))}),e}function RP(n){const e={};return ur(n,(t,i)=>e[i]=`${t}`),e}function FP(n,e,t){return n==t.path&&sa(e,t.parameters)}class O${constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),nA(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ah(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),ur(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ah(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ah(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ah(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Qz(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Kz(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(nA(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),nA(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),c=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=c,o.outlet&&o.outlet.activateWith(r,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class aA{constructor(e,t){this.routes=e,this.module=t}}function Gl(n){return"function"==typeof n}function Iu(n){return n instanceof Mu}const Cg=Symbol("INITIAL_VALUE");function wg(){return Ul(n=>function(...n){let e,t;return Ir(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&ee(n[0])&&(n=n[0]),$h(n,t).lift(new gz(e))}(n.map(e=>e.pipe(zl(1),_v(Cg)))).pipe(rP((e,t)=>{let i=!1;return t.reduce((r,s,o)=>r!==Cg?r:(s===Cg&&(i=!0),i||!1!==s&&o!==t.length-1&&!Iu(s)?r:s),e)},Cg),so(e=>e!==Cg),Bt(e=>Iu(e)?e:!0===e),zl(1)))}class V${constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Eg,this.attachRef=null}}class Eg{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new V$,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let lA=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new rn,this.deactivateEvents=new rn,this.attachEvents=new rn,this.detachEvents=new rn,this.name=s||Jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,c=new B$(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,c),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(V(Eg),V(Ur),V(Jo),function(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(ll(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(wi(),n)}("name"),V(Do))},n.\u0275dir=ke({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class B${constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===aa?this.route:e===Eg?this.childContexts:this.parent.get(e,t)}}let NP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&vt(0,"router-outlet")},directives:[lA],encapsulation:2}),n})();function LP(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];H$(i,j$(e,i))}}function H$(n,e){n.children&&LP(n.children,e)}function j$(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function cA(n){const e=n.children&&n.children.map(cA),t=e?Ui(Pe({},n),{children:e}):Pe({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=NP),t}function oo(n){return n.outlet||Jt}function VP(n,e){const t=n.filter(i=>oo(i)===e);return t.push(...n.filter(i=>oo(i)!==e)),t}const BP={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Sv(n,e,t){var a;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Pe({},BP):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(e.matcher||e$)(t,n,e);if(!r)return Pe({},BP);const s={};ur(r.posParams,(c,d)=>{s[d]=c.path});const o=r.consumed.length>0?Pe(Pe({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o,positionalParamSegments:null!=(a=r.posParams)?a:{}}}function xv(n,e,t,i,r="corrected"){if(t.length>0&&function(n,e,t){return t.some(i=>Mv(n,e,i)&&oo(i)!==Jt)}(n,t,i)){const o=new mn(e,function(n,e,t,i){const r={};r[Jt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&oo(s)!==Jt){const o=new mn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[oo(s)]=o}return r}(n,e,i,new mn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(i=>Mv(n,e,i))}(n,t,i)){const o=new mn(n.segments,function(n,e,t,i,r,s){const o={};for(const a of i)if(Mv(n,t,a)&&!r[oo(a)]){const c=new mn([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[oo(a)]=c}return Pe(Pe({},r),o)}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new mn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Mv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function HP(n,e,t,i){return!!(oo(n)===i||i!==Jt&&Mv(e,t,n))&&("**"===n.path||Sv(e,n,t).matched)}function jP(n,e,t){return 0===e.length&&!n.children[t]}class Dg{constructor(e){this.segmentGroup=e||null}}class UP{constructor(e){this.urlTree=e}}function Tv(n){return new et(e=>e.error(new Dg(n)))}function zP(n){return new et(e=>e.error(new UP(n)))}function W$(n){return new et(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class K${constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(ta)}apply(){const e=xv(this.urlTree.root,[],[],this.config).segmentGroup,t=new mn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Jt).pipe(Bt(s=>this.createUrlTree(uA(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xu(s=>{if(s instanceof UP)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Dg?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Jt).pipe(Bt(r=>this.createUrlTree(uA(r),e.queryParams,e.fragment))).pipe(xu(r=>{throw r instanceof Dg?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new mn([],{[Jt]:e}):e;return new Mu(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Bt(s=>new mn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Ni(r).pipe(gg(s=>{const o=i.children[s],a=VP(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Bt(c=>({segment:c,outlet:s})))}),rP((s,o)=>(s[o.outlet]=o.segment,s),{}),function(n,e){const t=arguments.length>=2;return i=>i.pipe(n?so((r,s)=>n(r,s,i)):Ke,KD(1),t?oP(e):sP(()=>new mv))}())}expandSegment(e,t,i,r,s,o){return Ni(i).pipe(gg(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(xu(d=>{if(d instanceof Dg)return bt(null);throw d}))),Eh(a=>!!a),xu((a,c)=>{if(a instanceof mv||"EmptyError"===a.name){if(jP(t,r,s))return bt(new mn([],{}));throw new Dg(t)}throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return HP(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):Tv(t):Tv(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?zP(s):this.lineralizeSegments(i,s).pipe(Mi(o=>{const a=new mn(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,lastChild:d,positionalParamSegments:f}=Sv(t,r,s);if(!a)return Tv(t);const p=this.applyRedirectCommands(c,r.redirectTo,f);return r.redirectTo.startsWith("/")?zP(p):this.lineralizeSegments(r,p).pipe(Mi(m=>this.expandSegment(e,t,i,m.concat(s.slice(d)),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?bt(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(Bt(m=>(i._loadedConfig=m,new mn(r,{})))):bt(new mn(r,{}));const{matched:o,consumedSegments:a,lastChild:c}=Sv(t,i,r);if(!o)return Tv(t);const d=r.slice(c);return this.getChildConfig(e,i,r).pipe(Mi(p=>{const m=p.module,y=p.routes,{segmentGroup:_,slicedSegments:I}=xv(t,a,d,y),M=new mn(_.segments,_.children);if(0===I.length&&M.hasChildren())return this.expandChildren(m,y,M).pipe(Bt(re=>new mn(a,re)));if(0===y.length&&0===I.length)return bt(new mn(a,{}));const F=oo(i)===s;return this.expandSegment(m,M,y,I,F?Jt:s,!0).pipe(Bt(Y=>new mn(a.concat(Y.segments),Y.children)))}))}getChildConfig(e,t,i){return t.children?bt(new aA(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?bt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(Mi(r=>r?this.configLoader.load(e.injector,t).pipe(Bt(s=>(t._loadedConfig=s,s))):function(n){return new et(e=>e.error(QD(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):bt(new aA([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;if(!r||0===r.length)return bt(!0);const s=r.map(o=>{const a=e.get(o);let c;if(function(n){return n&&Gl(n.canLoad)}(a))c=a.canLoad(t,i);else{if(!Gl(a))throw new Error("Invalid CanLoad guard");c=a(t,i)}return oa(c)});return bt(s).pipe(wg(),as(o=>{if(!Iu(o))return;const a=QD(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),Bt(o=>!0===o))}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return bt(i);if(r.numberOfChildren>1||!r.children[Jt])return W$(e.redirectTo);r=r.children[Jt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Mu(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return ur(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return ur(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new mn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function uA(n){const e={};for(const i of Object.keys(n.children)){const s=uA(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function(n){if(1===n.numberOfChildren&&n.children[Jt]){const e=n.children[Jt];return new mn(n.segments.concat(e.segments),e.children)}return n}(new mn(n.segments,e))}class $P{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Iv{constructor(e,t){this.component=e,this.route=t}}function X$(n,e,t){const i=n._root;return Ag(i,e?e._root:null,t,[i.value])}function Ov(n,e,t){const i=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function Ag(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ah(e);return n.children.forEach(o=>{(function(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Tu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tu(n.url,e.url)||!sa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iA(n,e)||!sa(n.queryParams,e.queryParams);default:return!iA(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new $P(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Ag(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Iv(a.outlet.component,o))}else o&&Sg(e,a,r),r.canActivateChecks.push(new $P(i)),Ag(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),ur(s,(o,a)=>Sg(o,t.getContext(a),r)),r}function Sg(n,e,t){const i=Ah(n),r=n.value;ur(i,(s,o)=>{Sg(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Iv(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class d9{}function GP(n){return new et(e=>e.error(n))}class f9{constructor(e,t,i,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=xv(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Jt);if(null===t)return null;const i=new Ev([],Object.freeze({}),Object.freeze(Pe({},this.urlTree.queryParams)),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ua(i,t),s=new TP(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=MP(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=VP(e,s),c=this.processSegmentGroup(a,o,s);if(null===c)return null;i.push(...c)}const r=WP(i);return function(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,i,r);if(null!==o)return o}return jP(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!HP(e,t,i,r))return null;let s,o=[],a=[];if("**"===e.path){const y=i.length>0?pP(i).parameters:{};s=new Ev(i,y,Object.freeze(Pe({},this.urlTree.queryParams)),this.urlTree.fragment,KP(e),oo(e),e.component,e,qP(t),ZP(t)+i.length,YP(e))}else{const y=Sv(t,e,i);if(!y.matched)return null;o=y.consumedSegments,a=i.slice(y.lastChild),s=new Ev(o,y.parameters,Object.freeze(Pe({},this.urlTree.queryParams)),this.urlTree.fragment,KP(e),oo(e),e.component,e,qP(t),ZP(t)+o.length,YP(e))}const c=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:d,slicedSegments:f}=xv(t,o,a,c.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution);if(0===f.length&&d.hasChildren()){const y=this.processChildren(c,d);return null===y?null:[new Ua(s,y)]}if(0===c.length&&0===f.length)return[new Ua(s,[])];const p=oo(e)===r,m=this.processSegment(c,d,f,p?Jt:r);return null===m?null:[new Ua(s,m)]}}function m9(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function WP(n){const e=[],t=new Set;for(const i of n){if(!m9(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=WP(i.children);e.push(new Ua(i.value,r))}return e.filter(i=>!t.has(i))}function qP(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ZP(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function KP(n){return n.data||{}}function YP(n){return n.resolve||{}}function dA(n){return Ul(e=>{const t=n(e);return t?Ni(t).pipe(Bt(()=>e)):bt(e)})}class D9 extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const hA=new Le("ROUTES");class QP{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(Bt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new aA(fP(o.injector.get(hA,void 0,it.Self|it.Optional)).map(cA),o)}),xu(s=>{throw t._loader$=void 0,s}));return t._loader$=new Wg(r,()=>new Je).pipe(Gh()),t._loader$}loadModuleFactory(e){return oa(e()).pipe(Mi(t=>t instanceof HM?bt(t):Ni(this.compiler.compileModuleAsync(t))))}}class S9{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function x9(n){throw n}function M9(n,e,t){return e.parse("/")}function XP(n,e){return bt(null)}const T9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},I9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let dr=(()=>{class n{constructor(t,i,r,s,o,a,c){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Je,this.errorHandler=x9,this.malformedUriErrorHandler=M9,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:XP,afterPreactivation:XP},this.urlHandlingStrategy=new S9,this.routeReuseStrategy=new D9,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(ta),this.console=o.get(Ay);const p=o.get(gn);this.isNgZoneEnabled=p instanceof gn&&gn.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new Mu(new mn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new QP(o,a,m=>this.triggerEvent(new lP(m)),m=>this.triggerEvent(new cP(m))),this.routerState=xP(this.currentUrlTree,this.rootComponentType),this.transitions=new ro({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(so(r=>0!==r.id),Bt(r=>Ui(Pe({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ul(r=>{let s=!1,o=!1;return bt(r).pipe(as(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Ui(Pe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ul(a=>{const c=this.browserUrlTree.toString(),d=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Pv(a.source)&&(this.browserUrlTree=a.extractedUrl),bt(a).pipe(Ul(p=>{const m=this.transitions.getValue();return i.next(new YD(p.id,this.serializeUrl(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions.getValue()?wh:Promise.resolve(p)}),function(n,e,t,i){return Ul(r=>function(n,e,t,i,r){return new K$(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(Bt(s=>Ui(Pe({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),as(p=>{this.currentNavigation=Ui(Pe({},this.currentNavigation),{finalUrl:p.urlAfterRedirects})}),function(n,e,t,i,r){return Mi(s=>function(n,e,t,i,r="emptyOnly",s="legacy"){try{const o=new f9(n,e,t,i,r,s).recognize();return null===o?GP(new d9):bt(o)}catch(o){return GP(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe(Bt(o=>Ui(Pe({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,p=>this.serializeUrl(p),this.paramsInheritanceStrategy,this.relativeLinkResolution),as(p=>{if("eager"===this.urlUpdateStrategy){if(!p.extras.skipLocationChange){const y=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);this.setBrowserUrl(y,p)}this.browserUrlTree=p.urlAfterRedirects}const m=new zz(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);i.next(m)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:y,source:_,restoredState:I,extras:M}=a,F=new YD(m,this.serializeUrl(y),_,I);i.next(F);const L=xP(y,this.rootComponentType).snapshot;return bt(Ui(Pe({},a),{targetSnapshot:L,urlAfterRedirects:y,extras:Ui(Pe({},M),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),wh}),dA(a=>{const{targetSnapshot:c,id:d,extractedUrl:f,rawUrl:p,extras:{skipLocationChange:m,replaceUrl:y}}=a;return this.hooks.beforePreactivation(c,{navigationId:d,appliedUrlTree:f,rawUrlTree:p,skipLocationChange:!!m,replaceUrl:!!y})}),as(a=>{const c=new $z(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),Bt(a=>Ui(Pe({},a),{guards:X$(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(n,e){return Mi(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?bt(Ui(Pe({},t),{guardsResult:!0})):function(n,e,t,i){return Ni(n).pipe(Mi(r=>function(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?bt(s.map(a=>{const c=Ov(a,e,r);let d;if(function(n){return n&&Gl(n.canDeactivate)}(c))d=oa(c.canDeactivate(n,e,t,i));else{if(!Gl(c))throw new Error("Invalid CanDeactivate guard");d=oa(c(n,e,t,i))}return d.pipe(Eh())})).pipe(wg()):bt(!0)}(r.component,r.route,t,e,i)),Eh(r=>!0!==r,!0))}(o,i,r,n).pipe(Mi(a=>a&&function(n){return"boolean"==typeof n}(a)?function(n,e,t,i){return Ni(e).pipe(gg(r=>WD(function(n,e){return null!==n&&e&&e(new Zz(n)),bt(!0)}(r.route.parent,i),function(n,e){return null!==n&&e&&e(new Yz(n)),bt(!0)}(r.route,i),function(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>ZD(()=>bt(o.guards.map(c=>{const d=Ov(c,o.node,t);let f;if(function(n){return n&&Gl(n.canActivateChild)}(d))f=oa(d.canActivateChild(i,n));else{if(!Gl(d))throw new Error("Invalid CanActivateChild guard");f=oa(d(i,n))}return f.pipe(Eh())})).pipe(wg())));return bt(s).pipe(wg())}(n,r.path,t),function(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return bt(!0);const r=i.map(s=>ZD(()=>{const o=Ov(s,e,t);let a;if(function(n){return n&&Gl(n.canActivate)}(o))a=oa(o.canActivate(e,n));else{if(!Gl(o))throw new Error("Invalid CanActivate guard");a=oa(o(e,n))}return a.pipe(Eh())}));return bt(r).pipe(wg())}(n,r.route,t))),Eh(r=>!0!==r,!0))}(i,s,n,e):bt(a)),Bt(a=>Ui(Pe({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),as(a=>{if(Iu(a.guardsResult)){const d=QD(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw d.url=a.guardsResult,d}const c=new Gz(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),so(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),dA(a=>{if(a.guards.canActivateChecks.length)return bt(a).pipe(as(c=>{const d=new Wz(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}),Ul(c=>{let d=!1;return bt(c).pipe(function(n,e){return Mi(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return bt(t);let s=0;return Ni(r).pipe(gg(o=>function(n,e,t,i){return function(n,e,t,i){const r=Object.keys(n);if(0===r.length)return bt({});const s={};return Ni(r).pipe(Mi(o=>function(n,e,t,i){const r=Ov(n,e,i);return oa(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(as(a=>{s[o]=a}))),KD(1),Mi(()=>Object.keys(s).length===r.length?bt(s):wh))}(n._resolve,n,e,i).pipe(Bt(s=>(n._resolvedData=s,n.data=Pe(Pe({},n.data),MP(n,t).resolve),null)))}(o.route,i,n,e)),as(()=>s++),KD(1),Mi(o=>s===r.length?bt(t):wh))})}(this.paramsInheritanceStrategy,this.ngModule.injector),as({next:()=>d=!0,complete:()=>{d||(this.restoreHistory(c),this.cancelNavigationTransition(c,"At least one route resolver didn't emit any value."))}}))}),as(c=>{const d=new qz(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}))}),dA(a=>{const{targetSnapshot:c,id:d,extractedUrl:f,rawUrl:p,extras:{skipLocationChange:m,replaceUrl:y}}=a;return this.hooks.afterPreactivation(c,{navigationId:d,appliedUrlTree:f,rawUrlTree:p,skipLocationChange:!!m,replaceUrl:!!y})}),Bt(a=>{const c=function(n,e,t){const i=vg(n,e._root,t?t._root:void 0);return new SP(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Ui(Pe({},a),{targetRouterState:c})}),as(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Bt(i=>(new O$(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),as({next(){s=!0},complete(){s=!0}}),function(n){return e=>e.lift(new Hz(n))}(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null==(a=this.currentNavigation)?void 0:a.id)===r.id&&(this.currentNavigation=null)}),xu(a=>{if(o=!0,function(n){return n&&n[dP]}(a)){const c=Iu(a.url);c||(this.navigated=!0,this.restoreHistory(r,!0));const d=new aP(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(d),c?setTimeout(()=>{const f=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),p={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pv(r.source)};this.scheduleNavigation(f,"imperative",null,p,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const c=new Uz(r.id,this.serializeUrl(r.extractedUrl),a);i.next(c);try{r.resolve(this.errorHandler(a))}catch(d){r.reject(d)}}return wh}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Pe(Pe({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var a;const r={replaceUrl:!0},s=(null==(a=t.state)?void 0:a.navigationId)?t.state:null;if(s){const c=Pe({},s);delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(r.state=c)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){LP(t),this.config=t.map(cA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,d=r||this.routerState.root,f=c?this.currentUrlTree.fragment:o;let p=null;switch(a){case"merge":p=Pe(Pe({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}return null!==p&&(p=this.removeEmptyProps(p)),function(n,e,t,i,r){if(0===t.length)return rA(e.root,e.root,e,i,r);const s=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new PP(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return ur(s.outlets,(c,d)=>{a[d]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new PP(t,e,i)}(t);if(s.toRoot())return rA(e.root,new mn([],{}),e,i,r);const o=function(n,e,t){if(n.isAbsolute)return new sA(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new sA(s,s===e.root,0)}const i=Dv(n.commands[0])?0:1;return function(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new sA(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?Av(o.segmentGroup,o.index,s.commands):kP(o.segmentGroup,o.index,s.commands);return rA(o.segmentGroup,a,e,i,r)}(d,this.currentUrlTree,t,p,null!=f?f:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Iu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Pe({},T9):!1===i?Pe({},I9):i,Iu(t))return mP(this.currentUrlTree,t,r);const s=this.parseUrl(t);return mP(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new mg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){var F,L,Y;if(this.disposed)return Promise.resolve(!1);const a=this.transitions.value,c=Pv(i)&&a&&!Pv(a.source),d=a.rawUrl.toString()===t.toString(),f=a.id===(null==(F=this.currentNavigation)?void 0:F.id);if(c&&d&&f)return Promise.resolve(!0);let m,y,_;o?(m=o.resolve,y=o.reject,_=o.promise):_=new Promise((re,Ee)=>{m=re,y=Ee});const I=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),M=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!=(L=this.browserPageId)?L:0:(null!=(Y=this.browserPageId)?Y:0)+1):M=0,this.setTransition({id:I,targetPageId:M,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:m,reject:y,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(re=>Promise.reject(re))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Pe(Pe({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(r=this.currentNavigation)?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null==(s=this.currentNavigation)?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new aP(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){cy()},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();function Pv(n){return"imperative"!==n}class JP{}class ek{preload(e,t){return bt(null)}}let tk=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new QP(r,i,c=>t.triggerEvent(new lP(c)),c=>t.triggerEvent(new cP(c)))}setUpPreloading(){this.subscription=this.router.events.pipe(so(t=>t instanceof mg),gg(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(ta);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return Ni(r).pipe(ha(),Bt(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?bt(i._loadedConfig):this.loader.load(t.injector,i)).pipe(Mi(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(X(dr),X(Sy),X(_n),X(JP))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})(),gA=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof YD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof mg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof uP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new uP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){cy()},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();const Ou=new Le("ROUTER_CONFIGURATION"),nk=new Le("ROUTER_FORROOT_GUARD"),F9=[Jp,{provide:bP,useClass:CP},{provide:dr,useFactory:function(n,e,t,i,r,s,o={},a,c){const d=new dr(null,n,e,t,i,r,fP(s));return a&&(d.urlHandlingStrategy=a),c&&(d.routeReuseStrategy=c),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,d),o.enableTracing&&d.events.subscribe(f=>{var p,m;null==(p=console.group)||p.call(console,`Router Event: ${f.constructor.name}`),console.log(f.toString()),console.log(f),null==(m=console.groupEnd)||m.call(console)}),d},deps:[bP,Eg,Jp,_n,Sy,hA,Ou,[class{},new Vi],[class{},new Vi]]},Eg,{provide:aa,useFactory:function(n){return n.routerState.root},deps:[dr]},tk,ek,class{preload(e,t){return t().pipe(xu(()=>bt(null)))}},{provide:Ou,useValue:{enableTracing:!1}}];function N9(){return new DE("Router",dr)}let L9=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[F9,ik(t),{provide:nk,useFactory:H9,deps:[[dr,new Vi,new _s]]},{provide:Ou,useValue:i||{}},{provide:_h,useFactory:B9,deps:[wu,[new Ia(eD),new Vi],Ou]},{provide:gA,useFactory:V9,deps:[dr,EU,Ou]},{provide:JP,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:ek},{provide:DE,multi:!0,useFactory:N9},[mA,{provide:Bp,multi:!0,useFactory:$9,deps:[mA]},{provide:rk,useFactory:G9,deps:[mA]},{provide:wT,multi:!0,useExisting:rk}]]}}static forChild(t){return{ngModule:n,providers:[ik(t)]}}}return n.\u0275fac=function(t){return new(t||n)(X(nk,8),X(dr,8))},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({}),n})();function V9(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new gA(n,e,t)}function B9(n,e,t={}){return t.useHash?new n4(n,e):new RI(n,e)}function H9(n){return"guarded"}function ik(n){return[{provide:bf,multi:!0,useValue:n},{provide:hA,multi:!0,useValue:n}]}let mA=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Je}appInitializer(){return this.injector.get(Jj,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(dr),o=this.injector.get(Ou);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?bt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Ou),r=this.injector.get(tk),s=this.injector.get(gA),o=this.injector.get(dr),a=this.injector.get(_u);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(X(_n))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();function $9(n){return n.appInitializer.bind(n)}function G9(n){return n.bootstrapListener.bind(n)}const rk=new Le("Router Initializer");function _A(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class h6 extends we{constructor(e,t){super()}schedule(e,t=0){return this}}class yA extends h6{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let sk=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class la extends sk{constructor(e,t=sk.now){super(e,()=>la.delegate&&la.delegate!==this?la.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return la.delegate&&la.delegate!==this?la.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const vA=new la(yA);function ok(n,e=vA){return t=>t.lift(new f6(n,e))}class f6{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new p6(e,this.dueTime,this.scheduler))}}class p6 extends je{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(g6,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function g6(n){n.debouncedNext()}class _6{constructor(e){this.total=e}call(e,t){return t.subscribe(new y6(e,this.total))}}class y6 extends je{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function ak(n,e){return t=>t.lift(new v6(n,e))}class v6{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new b6(e,this.compare,this.keySelector))}}class b6 extends je{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}function Wl(n){return e=>e.lift(new C6(n))}class C6{constructor(e){this.notifier=e}call(e,t){const i=new w6(e),r=cc(this.notifier,new Xa(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class w6 extends lc{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Pu(n){return null!=n&&"false"!=`${n}`}function kv(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function lk(n){return Array.isArray(n)?n:[n]}function ki(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ku(n){return n instanceof Xt?n.nativeElement:n}let bA;try{bA="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){bA=!1}let xg,Ru,wA,As=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function(n){return n===ZI}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!bA)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(X(Dy))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({}),n})();function Rv(n){return function(){if(null==xg&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>xg=!0}))}finally{xg=xg||!1}return xg}()?n:!!n.capture}function A6(){if(null==Ru){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ru=!1,Ru;if("scrollBehavior"in document.documentElement.style)Ru=!0;else{const n=Element.prototype.scrollTo;Ru=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ru}function EA(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Fu(n){return n.composedPath?n.composedPath()[0]:n.target}function DA(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}let uk=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),M6=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=ku(t);return new et(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new Je,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(X(uk))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T6=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new rn,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Pu(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=kv(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(ok(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null==(t=this._currentSubscription)||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(V(M6),V(Xt),V(gn))},n.\u0275dir=ke({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),AA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({providers:[uk]}),n})();class k6 extends class{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Je,this._typeaheadSubscription=we.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Je,this.change=new Je,e instanceof gu&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(as(t=>this._pressedLetters.push(t)),ok(e),so(()=>this._pressedLetters.length>0),Bt(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||_A(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof gu?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let fk=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===gk(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=gk(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||pk(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(X(As))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pk(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function gk(n){if(!pk(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class $6{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let i=0;i<t.length;i++)t[i].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]):t[i].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(zl(1)).subscribe(e)}}let G6=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new $6(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(X(fk),X(gn),X(sn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mk(n){return 0===n.offsetX&&0===n.offsetY}function _k(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const W6=new Le("cdk-input-modality-detector-options"),q6={ignoreKeys:[18,17,224,91,16]},Mh=Rv({passive:!0,capture:!0});let Z6=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new ro(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,c;(null==(c=null==(a=this._options)?void 0:a.ignoreKeys)?void 0:c.some(d=>d===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Fu(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(mk(o)?"keyboard":"mouse"),this._mostRecentTarget=Fu(o))},this._onTouchstart=o=>{_k(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Fu(o))},this._options=Pe(Pe({},q6),s),this.modalityDetected=this._modality.pipe(e=>e.lift(new _6(1))),this.modalityChanged=this.modalityDetected.pipe(ak()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Mh),r.addEventListener("mousedown",this._onMousedown,Mh),r.addEventListener("touchstart",this._onTouchstart,Mh)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Mh),document.removeEventListener("mousedown",this._onMousedown,Mh),document.removeEventListener("touchstart",this._onTouchstart,Mh))}}return n.\u0275fac=function(t){return new(t||n)(X(As),X(gn),X(sn),X(W6,8))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Y6=new Le("cdk-focus-monitor-default-options"),Nv=Rv({passive:!0,capture:!0});let SA=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Je,this._rootNodeFocusAndBlurListener=a=>{const c=Fu(a),d="focus"===a.type?this._onFocus:this._onBlur;for(let f=c;f;f=f.parentElement)d.call(this,a,f)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=ku(t);if(!this._platform.isBrowser||1!==r.nodeType)return bt(null);const s=function(n){if(function(){if(null==wA){const n="undefined"!=typeof document?document.head:null;wA=!(!n||!n.createShadowRoot&&!n.attachShadow)}return wA}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Je,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=ku(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=ku(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Fu(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Nv),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Nv)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Wl(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Nv),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Nv),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(X(gn),X(As),X(Z6),X(sn,8),X(Y6,8))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Q6=(()=>{class n{constructor(t,i){this._elementRef=t,this._focusMonitor=i,this.cdkFocusChange=new rn}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>this.cdkFocusChange.emit(i))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(SA))},n.\u0275dir=ke({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),n})();const vk="cdk-high-contrast-black-on-white",bk="cdk-high-contrast-white-on-black",xA="cdk-high-contrast-active";let Ck=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(xA),t.remove(vk),t.remove(bk),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(xA),t.add(vk)):2===i&&(t.add(xA),t.add(bk))}}}return n.\u0275fac=function(t){return new(t||n)(X(As),X(sn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X6=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(X(Ck))},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[CA,AA]]}),n})();class MA{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class TA extends MA{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class IA extends MA{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class J6 extends MA{constructor(e){super(),this.element=e instanceof Xt?e.nativeElement:e}}class OA{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof TA?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof IA?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof J6?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class e7 extends OA{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Mg=(()=>{class n extends OA{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new rn,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(V(Jo),V(Ur),V(sn))},n.\u0275dir=ke({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[$t]}),n})(),PA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({}),n})();const t7=new Le("cdk-dir-doc",{providedIn:"root",factory:function(){return Ta(sn)}});let ql=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new rn,t){const r=t.documentElement?t.documentElement.dir:null,s=(t.body?t.body.dir:null)||r;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(X(t7,8))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({}),n})();const wk=new Nl("13.0.2");class Ek{}const za="*";function Ig(n,e){return{type:7,name:n,definitions:e,options:{}}}function Zl(n,e=null){return{type:4,styles:e,timings:n}}function Dk(n,e=null){return{type:2,steps:n,options:e}}function hr(n){return{type:6,styles:n,offset:null}}function $a(n,e,t){return{type:0,name:n,styles:e,options:t}}function Ga(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Ak(n){Promise.resolve(null).then(n)}class Th{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ak(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Sk{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?Ak(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function xk(){return"undefined"!=typeof window&&void 0!==window.document}function RA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Kl(n){switch(n.length){case 0:return new Th;case 1:return n[0];default:return new Sk(n)}}function Mk(n,e,t,i,r={},s={}){const o=[],a=[];let c=-1,d=null;if(i.forEach(f=>{const p=f.offset,m=p==c,y=m&&d||{};Object.keys(f).forEach(_=>{let I=_,M=f[_];if("offset"!==_)switch(I=e.normalizePropertyName(I,o),M){case"!":M=r[_];break;case za:M=s[_];break;default:M=e.normalizeStyleValue(_,I,M,o)}y[I]=M}),m||a.push(y),d=y,c=p}),o.length){const f="\n - ";throw new Error(`Unable to animate due to the following errors:${f}${o.join(f)}`)}return a}function FA(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&NA(t,"start",n)));break;case"done":n.onDone(()=>i(t&&NA(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&NA(t,"destroy",n)))}}function NA(n,e,t){const i=t.totalTime,s=LA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function LA(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Ss(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function Tk(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let VA=(n,e)=>!1,BA=(n,e)=>!1,Ik=(n,e,t)=>[];const Ok=RA();(Ok||"undefined"!=typeof Element)&&(VA=xk()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),BA=(()=>{if(Ok||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,i)=>e.apply(t,[i]):BA}})(),Ik=(n,e,t)=>{let i=[];if(t){const r=n.querySelectorAll(e);for(let s=0;s<r.length;s++)i.push(r[s])}else{const r=n.querySelector(e);r&&i.push(r)}return i});let Nu=null,Pk=!1;function HA(n){Nu||(Nu=("undefined"!=typeof document?document.body:null)||{},Pk=!!Nu.style&&"WebkitAppearance"in Nu.style);let e=!0;return Nu.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Nu.style,!e&&Pk&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Nu.style)),e}const jA=BA,UA=VA,zA=Ik;function kk(n){const e={};return Object.keys(n).forEach(t=>{const i=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=n[t]}),e}let Rk=(()=>{class n{validateStyleProperty(t){return HA(t)}matchesElement(t,i){return jA(t,i)}containsElement(t,i){return UA(t,i)}query(t,i,r){return zA(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],c){return new Th(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})(),$A=(()=>{class n{}return n.NOOP=new Rk,n})();const GA="ng-enter",Lv="ng-leave",Vv="ng-trigger",Bv=".ng-trigger",Nk="ng-animating",WA=".ng-animating";function Lu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:qA(parseFloat(e[1]),e[2])}function qA(n,e){return"s"===e?1e3*n:n}function Hv(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};r=qA(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=qA(parseFloat(c),a[4]));const d=a[5];d&&(o=d)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),a=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&e.splice(c,0,`The provided timing value "${n}" is invalid.`)}return{duration:r,delay:s,easing:o}}(n,e,t)}function Ih(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Yl(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Ih(n,t);return t}function Vk(n,e,t){return t?e+":"+t+";":""}function Bk(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=Vk(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Vk(0,p7(t),n.style[t]));n.setAttribute("style",e)}function ca(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=KA(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),RA()&&Bk(n))}function Vu(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=KA(t);n.style[i]=""}),RA()&&Bk(n))}function Og(n){return Array.isArray(n)?1==n.length?n[0]:Dk(n):n}const ZA=new RegExp("{{\\s*(.+?)\\s*}}","g");function Hk(n){let e=[];if("string"==typeof n){let t;for(;t=ZA.exec(n);)e.push(t[1]);ZA.lastIndex=0}return e}function jv(n,e,t){const i=n.toString(),r=i.replace(ZA,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return r==i?n:r}function Uv(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const f7=/-+([a-z0-9])/g;function KA(n){return n.replace(f7,(...e)=>e[1].toUpperCase())}function p7(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jk(n,e){return 0===n||0===e}function Uk(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(c){a[c]=YA(n,c)})}}return e}function xs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function YA(n,e){return window.getComputedStyle(n)[e]}function g7(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function(n,e,t){if(":"==n[0]){const c=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const r=i[1],s=i[2],o=i[3];e.push(zk(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(zk(o,r))}(i,t,e)):t.push(n),t}const $v=new Set(["true","1"]),Gv=new Set(["false","0"]);function zk(n,e){const t=$v.has(n)||Gv.has(n),i=$v.has(e)||Gv.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?$v.has(n):Gv.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?$v.has(e):Gv.has(e)),o&&a}}const y7=new RegExp("s*:selfs*,?","g");function QA(n,e,t){return new v7(n).build(e,t)}class v7{constructor(e){this._driver=e}build(e,t){const i=new w7(t);return this._resetContextStyleTimingState(i),xs(this,Og(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,s.push(this.visitState(c,t))}),c.name=d}else if(1==a.type){const c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};if(i.styles.forEach(a=>{if(Wv(a)){const c=a;Object.keys(c).forEach(d=>{Hk(c[d]).forEach(f=>{o.hasOwnProperty(f)||s.add(f)})})}}),s.size){const a=Uv(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=xs(this,Og(e.animation),t);return{type:1,matchers:g7(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Bu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>xs(this,i,t)),options:Bu(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=xs(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Bu(e.options)}}visitAnimate(e,t){const i=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return XA(Hv(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=XA(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||Hv(i,e),XA(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:hr({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const d={};i.easing&&(d.easing=i.easing),o=hr(d)}t.currentTime+=i.duration+i.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==za?i.push(o):t.errors.push(`The provided style string value ${o} is not allowed.`):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(Wv(o)){const a=o,c=a.easing;if(c&&(s=c,delete a.easing),!r)for(let d in a)if(a[d].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void t.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const c=t.collectedStyles[t.currentQuerySelector],d=c[a];let f=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(t.errors.push(`The CSS property "${a}" that exists between the times of "${d.startTime}ms" and "${d.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),f=!1),s=d.startTime),f&&(c[a]={startTime:s,endTime:r}),t.options&&function(n,e,t){const i=e.params||{},r=Hk(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),i;let s=0;const o=[];let a=!1,c=!1,d=0;const f=e.steps.map(F=>{const L=this._makeStyleAst(F,t);let Y=null!=L.offset?L.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Wv(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(Wv(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(L.styles),re=0;return null!=Y&&(s++,re=L.offset=Y),c=c||re<0||re>1,a=a||re<d,d=re,o.push(re),L});c&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&t.errors.push("Please ensure that all keyframe offsets are in order");const p=e.steps.length;let m=0;s>0&&s<p?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(m=1/(p-1));const y=p-1,_=t.currentTime,I=t.currentAnimateTimings,M=I.duration;return f.forEach((F,L)=>{const Y=m>0?L==y?1:m*L:o[L],re=Y*M;t.currentTime=_+I.delay+re,I.duration=re,this._validateStyleAst(F,t),F.offset=Y,i.styles.push(F)}),i}visitReference(e,t){return{type:8,animation:xs(this,Og(e.animation),t),options:Bu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Bu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Bu(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(y7,"")),n=n.replace(/@\*/g,Bv).replace(/@\w+/g,t=>Bv+"-"+t.substr(1)).replace(/:animating/g,WA),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Ss(t.collectedStyles,t.currentQuerySelector,{});const a=xs(this,Og(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Bu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Hv(e.timings,t.errors,!0);return{type:12,animation:xs(this,Og(e.animation),t),timings:i,options:null}}}class w7{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Wv(n){return!Array.isArray(n)&&"object"==typeof n}function Bu(n){return n?(n=Ih(n)).params&&(n.params=function(n){return n?Ih(n):null}(n.params)):n={},n}function XA(n,e,t){return{duration:n,delay:e,easing:t}}function JA(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class qv{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const x7=new RegExp(":enter","g"),T7=new RegExp(":leave","g");function eS(n,e,t,i,r,s={},o={},a,c,d=[]){return(new I7).buildKeyframes(n,e,t,i,r,s,o,a,c,d)}class I7{buildKeyframes(e,t,i,r,s,o,a,c,d,f=[]){d=d||new qv;const p=new tS(e,t,d,r,s,f,[]);p.options=c,p.currentTimeline.setStyles([o],null,p.errors,c),xs(this,i,p);const m=p.timelines.filter(y=>y.containsAnimation());if(m.length&&Object.keys(a).length){const y=m[m.length-1];y.allowOnlyTimelineStyles()||y.setStyles([a],null,p.errors,c)}return m.length?m.map(y=>y.buildKeyframes()):[JA(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.consume(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Lu(i.duration):null,a=null!=i.delay?Lu(i.delay):null;return 0!==o&&e.forEach(c=>{const d=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,d.duration+d.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),xs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Zv);const o=Lu(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>xs(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Lu(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),xs(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Hv(t.params?jv(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Lu(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Zv);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((d,f)=>{t.currentQueryIndex=f;const p=t.createSubContext(e.options,d);s&&p.delayNextStep(s),d===t.element&&(c=p.currentTimeline),xs(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,p.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const f=t.currentTimeline;c&&f.delayNextStep(c);const p=f.currentTime;xs(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-p+(r.startTime-i.currentTimeline.startTime)}}const Zv={};class tS{constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Zv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Kv(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Lu(i.duration)),null!=i.delay&&(r.delay=Lu(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=jv(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new tS(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Zv,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new O7(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(x7,"."+this._enterClassName)).replace(T7,"."+this._leaveClassName);let d=this._driver.query(this.element,e,1!=i);0!==i&&(d=i<0?d.slice(d.length+i,d.length):d.slice(0,i)),a.push(...d)}return!s&&0==a.length&&o.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),a}}class Kv{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Kv(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||za,this._currentKeyframe[t]=za}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=za})):Yl(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const c=jv(o[a],s,i);this._pendingStyles[a]=c,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:za),this._updateStyle(a,c)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,c)=>{const d=Yl(a,!0);Object.keys(d).forEach(f=>{const p=d[f];"!"==p?e.add(f):p==za&&t.add(f)}),i||(d.offset=c/this.duration),r.push(d)});const s=e.size?Uv(e.values()):[],o=t.size?Uv(t.values()):[];if(i){const a=r[0],c=Ih(a);a.offset=0,c.offset=1,r=[a,c]}return JA(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class O7 extends Kv{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,c=Yl(e[0],!1);c.offset=0,s.push(c);const d=Yl(e[0],!1);d.offset=Wk(a),s.push(d);const f=e.length-1;for(let p=1;p<=f;p++){let m=Yl(e[p],!1);m.offset=Wk((t+m.offset*i)/o),s.push(m)}i=o,t=0,r="",e=s}return JA(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function Wk(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class nS{}class k7 extends nS{normalizePropertyName(e,t){return KA(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(R7[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(`Please provide a CSS unit value for ${e}:${i}`)}return o+s}}const R7=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function qk(n,e,t,i,r,s,o,a,c,d,f,p,m){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:f,totalTime:p,errors:m}}const iS={};class Zk{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,c,d,f){const p=[],m=this.ast.options&&this.ast.options.params||iS,_=this.buildStyles(i,a&&a.params||iS,p),I=c&&c.params||iS,M=this.buildStyles(r,I,p),F=new Set,L=new Map,Y=new Map,re="void"===r,Ee={params:Pe(Pe({},m),I)},At=f?[]:eS(e,t,this.ast.animation,s,o,_,M,Ee,d,p);let Ct=0;if(At.forEach(Pt=>{Ct=Math.max(Pt.duration+Pt.delay,Ct)}),p.length)return qk(t,this._triggerName,i,r,re,_,M,[],[],L,Y,Ct,p);At.forEach(Pt=>{const yt=Pt.element,dn=Ss(L,yt,{});Pt.preStyleProps.forEach(Hn=>dn[Hn]=!0);const Kn=Ss(Y,yt,{});Pt.postStyleProps.forEach(Hn=>Kn[Hn]=!0),yt!==t&&F.add(yt)});const un=Uv(F.values());return qk(t,this._triggerName,i,r,re,_,M,At,un,L,Y,Ct)}}class L7{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Ih(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let c=o[a];c.length>1&&(c=jv(c,r,t));const d=this.normalizer.normalizePropertyName(a,t);c=this.normalizer.normalizeStyleValue(a,d,c,t),i[d]=c})}}),i}}class B7{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new L7(r.style,r.options&&r.options.params||{},i)}),Kk(this.states,"true","1"),Kk(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Zk(e,r,this.states))}),this.fallbackTransition=function(n,e,t){return new Zk(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function Kk(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const j7=new qv;class U7{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],r=QA(this._driver,t,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,i){const r=e.element,s=Mk(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=eS(this._driver,t,s,GA,Lv,{},{},i,j7,r),o.forEach(f=>{const p=Ss(a,f.element,{});f.postStyleProps.forEach(m=>p[m]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);a.forEach((f,p)=>{Object.keys(f).forEach(m=>{f[m]=this._driver.computeStyle(p,m,za)})});const d=Kl(o.map(f=>{const p=a.get(f.element);return this._buildPlayer(f,{},p)}));return this._playersById[e]=d,d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,i,r){const s=LA(t,"","","");return FA(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Yk="ng-animate-queued",Qk="ng-animate-disabled",Xk=".ng-animate-disabled",W7=[],Jk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},q7={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ao="__ng_removed";class rS{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(i?e.value:e),i){const s=Ih(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Pg="void",sS=new rS(Pg);class Z7{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,lo(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${t}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${t}" is not supported!`);const s=Ss(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Ss(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(lo(e,Vv),lo(e,Vv+"-"+t),a[t]=sS),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new oS(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(lo(e,Vv),lo(e,Vv+"-"+t),this._engine.statesByElement.set(e,a={}));let c=a[t];const d=new rS(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a[t]=d,c||(c=sS),d.value!==Pg&&c.value===d.value){if(!function(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,d.params)){const I=[],M=s.matchStyles(c.value,c.params,I),F=s.matchStyles(d.value,d.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(()=>{Vu(e,M),ca(e,F)})}return}const m=Ss(this._engine.playersByElement,e,[]);m.forEach(I=>{I.namespaceId==this.id&&I.triggerName==t&&I.queued&&I.destroy()});let y=s.matchTransition(c.value,d.value,e,d.params),_=!1;if(!y){if(!r)return;y=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:c,toState:d,player:o,isFallbackTransition:_}),_||(lo(e,Yk),o.onStart(()=>{Oh(e,Yk)})),o.onDone(()=>{let I=this.players.indexOf(o);I>=0&&this.players.splice(I,1);const M=this._engine.playersByElement.get(e);if(M){let F=M.indexOf(o);F>=0&&M.splice(F,1)}}),this.players.push(o),m.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Bv,!0);i.forEach(r=>{if(r[ao])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e);if(s){const o=[];if(Object.keys(s).forEach(a=>{if(this._triggers[a]){const c=this.trigger(e,a,Pg,r);c&&o.push(c)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),i&&Kl(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const c=this._triggers[o].fallbackTransition,d=i[o]||sS,f=new rS(Pg),p=new oS(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:d,toState:f,player:p,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ao];(!s||s===Jk)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){lo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const c=LA(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,FA(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class K7{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Z7(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(Yv(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Yv(t))return;const s=t[ao];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),lo(e,Qk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Oh(e,Qk))}removeNode(e,t,i,r){if(Yv(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r){this.collectedLeaveElements.push(t),t[ao]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1}}listen(e,t,i,r,s){return Yv(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Bv,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,WA,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Kl(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ao];if(t&&t.setForRemoval){if(e[ao]=Jk,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Xk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Xk,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)lo(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Kl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const i=new qv,r=[],s=new Map,o=[],a=new Map,c=new Map,d=new Map,f=new Set;this.disabledNodes.forEach(Ie=>{f.add(Ie);const Ye=this.driver.query(Ie,".ng-animate-queued",!0);for(let rt=0;rt<Ye.length;rt++)f.add(Ye[rt])});const p=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=nR(m,this.collectedEnterElements),_=new Map;let I=0;y.forEach((Ie,Ye)=>{const rt=GA+I++;_.set(Ye,rt),Ie.forEach(gt=>lo(gt,rt))});const M=[],F=new Set,L=new Set;for(let Ie=0;Ie<this.collectedLeaveElements.length;Ie++){const Ye=this.collectedLeaveElements[Ie],rt=Ye[ao];rt&&rt.setForRemoval&&(M.push(Ye),F.add(Ye),rt.hasAnimation?this.driver.query(Ye,".ng-star-inserted",!0).forEach(gt=>F.add(gt)):L.add(Ye))}const Y=new Map,re=nR(m,Array.from(F));re.forEach((Ie,Ye)=>{const rt=Lv+I++;Y.set(Ye,rt),Ie.forEach(gt=>lo(gt,rt))}),e.push(()=>{y.forEach((Ie,Ye)=>{const rt=_.get(Ye);Ie.forEach(gt=>Oh(gt,rt))}),re.forEach((Ie,Ye)=>{const rt=Y.get(Ye);Ie.forEach(gt=>Oh(gt,rt))}),M.forEach(Ie=>{this.processLeaveNode(Ie)})});const Ee=[],At=[];for(let Ie=this._namespaceList.length-1;Ie>=0;Ie--)this._namespaceList[Ie].drainQueuedTransitions(t).forEach(rt=>{const gt=rt.player,Qn=rt.element;if(Ee.push(gt),this.collectedEnterElements.length){const gr=Qn[ao];if(gr&&gr.setForMove)return void gt.destroy()}const er=!p||!this.driver.containsElement(p,Qn),In=Y.get(Qn),Ps=_.get(Qn),jn=this._buildInstruction(rt,i,Ps,In,er);if(jn.errors&&jn.errors.length)At.push(jn);else{if(er)return gt.onStart(()=>Vu(Qn,jn.fromStyles)),gt.onDestroy(()=>ca(Qn,jn.toStyles)),void r.push(gt);if(rt.isFallbackTransition)return gt.onStart(()=>Vu(Qn,jn.fromStyles)),gt.onDestroy(()=>ca(Qn,jn.toStyles)),void r.push(gt);jn.timelines.forEach(gr=>gr.stretchStartingKeyframe=!0),i.append(Qn,jn.timelines),o.push({instruction:jn,player:gt,element:Qn}),jn.queriedElements.forEach(gr=>Ss(a,gr,[]).push(gt)),jn.preStyleProps.forEach((gr,tc)=>{const qu=Object.keys(gr);if(qu.length){let ua=c.get(tc);ua||c.set(tc,ua=new Set),qu.forEach(Lh=>ua.add(Lh))}}),jn.postStyleProps.forEach((gr,tc)=>{const qu=Object.keys(gr);let ua=d.get(tc);ua||d.set(tc,ua=new Set),qu.forEach(Lh=>ua.add(Lh))})}});if(At.length){const Ie=[];At.forEach(Ye=>{Ie.push(`@${Ye.triggerName} has failed due to:\n`),Ye.errors.forEach(rt=>Ie.push(`- ${rt}\n`))}),Ee.forEach(Ye=>Ye.destroy()),this.reportError(Ie)}const Ct=new Map,un=new Map;o.forEach(Ie=>{const Ye=Ie.element;i.has(Ye)&&(un.set(Ye,Ye),this._beforeAnimationBuild(Ie.player.namespaceId,Ie.instruction,Ct))}),r.forEach(Ie=>{const Ye=Ie.element;this._getPreviousPlayers(Ye,!1,Ie.namespaceId,Ie.triggerName,null).forEach(gt=>{Ss(Ct,Ye,[]).push(gt),gt.destroy()})});const Pt=M.filter(Ie=>rR(Ie,c,d)),yt=new Map;tR(yt,this.driver,L,d,za).forEach(Ie=>{rR(Ie,c,d)&&Pt.push(Ie)});const Kn=new Map;y.forEach((Ie,Ye)=>{tR(Kn,this.driver,new Set(Ie),c,"!")}),Pt.forEach(Ie=>{const Ye=yt.get(Ie),rt=Kn.get(Ie);yt.set(Ie,Pe(Pe({},Ye),rt))});const Hn=[],xi=[],Yn={};o.forEach(Ie=>{const{element:Ye,player:rt,instruction:gt}=Ie;if(i.has(Ye)){if(f.has(Ye))return rt.onDestroy(()=>ca(Ye,gt.toStyles)),rt.disabled=!0,rt.overrideTotalTime(gt.totalTime),void r.push(rt);let Qn=Yn;if(un.size>1){let In=Ye;const Ps=[];for(;In=In.parentNode;){const jn=un.get(In);if(jn){Qn=jn;break}Ps.push(In)}Ps.forEach(jn=>un.set(jn,Qn))}const er=this._buildAnimation(rt.namespaceId,gt,Ct,s,Kn,yt);if(rt.setRealPlayer(er),Qn===Yn)Hn.push(rt);else{const In=this.playersByElement.get(Qn);In&&In.length&&(rt.parentPlayer=Kl(In)),r.push(rt)}}else Vu(Ye,gt.fromStyles),rt.onDestroy(()=>ca(Ye,gt.toStyles)),xi.push(rt),f.has(Ye)&&r.push(rt)}),xi.forEach(Ie=>{const Ye=s.get(Ie.element);if(Ye&&Ye.length){const rt=Kl(Ye);Ie.setRealPlayer(rt)}}),r.forEach(Ie=>{Ie.parentPlayer?Ie.syncPlayerEvents(Ie.parentPlayer):Ie.destroy()});for(let Ie=0;Ie<M.length;Ie++){const Ye=M[Ie],rt=Ye[ao];if(Oh(Ye,Lv),rt&&rt.hasAnimation)continue;let gt=[];if(a.size){let er=a.get(Ye);er&&er.length&&gt.push(...er);let In=this.driver.query(Ye,WA,!0);for(let Ps=0;Ps<In.length;Ps++){let jn=a.get(In[Ps]);jn&&jn.length&&gt.push(...jn)}}const Qn=gt.filter(er=>!er.destroyed);Qn.length?J7(this,Ye,Qn):this.processLeaveNode(Ye)}return M.length=0,Hn.forEach(Ie=>{this.players.push(Ie),Ie.onDone(()=>{Ie.destroy();const Ye=this.players.indexOf(Ie);this.players.splice(Ye,1)}),Ie.play()}),Hn}elementContainsData(e,t){let i=!1;const r=t[ao];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==Pg;a.forEach(d=>{d.queued||!c&&d.triggerName!=r||o.push(d)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const d=c.element,f=d!==s,p=Ss(i,d,[]);this._getPreviousPlayers(d,f,o,a,t.toState).forEach(y=>{const _=y.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),y.destroy(),p.push(y)})}Vu(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,c=t.element,d=[],f=new Set,p=new Set,m=t.timelines.map(_=>{const I=_.element;f.add(I);const M=I[ao];if(M&&M.removedBeforeQueried)return new Th(_.duration,_.delay);const F=I!==c,L=function(n){const e=[];return iR(n,e),e}((i.get(I)||W7).map(Ct=>Ct.getRealPlayer())).filter(Ct=>!!Ct.element&&Ct.element===I),Y=s.get(I),re=o.get(I),Ee=Mk(0,this._normalizer,0,_.keyframes,Y,re),At=this._buildPlayer(_,Ee,L);if(_.subTimeline&&r&&p.add(I),F){const Ct=new oS(e,a,I);Ct.setRealPlayer(At),d.push(Ct)}return At});d.forEach(_=>{Ss(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>function(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,_.element,_))}),f.forEach(_=>lo(_,Nk));const y=Kl(m);return y.onDestroy(()=>{f.forEach(_=>Oh(_,Nk)),ca(c,t.toStyles)}),p.forEach(_=>{Ss(r,_,[]).push(y)}),y}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Th(e.duration,e.delay)}}class oS{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Th,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>FA(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ss(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Yv(n){return n&&1===n.nodeType}function eR(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function tR(n,e,t,i,r){const s=[];t.forEach(c=>s.push(eR(c)));const o=[];i.forEach((c,d)=>{const f={};c.forEach(p=>{const m=f[p]=e.computeStyle(d,p,r);(!m||0==m.length)&&(d[ao]=q7,o.push(d))}),n.set(d,f)});let a=0;return t.forEach(c=>eR(c,s[a++])),o}function nR(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const d=a.parentNode;return c=t.has(d)?d:r.has(d)?1:o(d),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}const Qv="$$classes";function lo(n,e){if(n.classList)n.classList.add(e);else{let t=n[Qv];t||(t=n[Qv]={}),t[e]=!0}}function Oh(n,e){if(n.classList)n.classList.remove(e);else{let t=n[Qv];t&&delete t[e]}}function J7(n,e,t){Kl(t).onDone(()=>n.processLeaveNode(e))}function iR(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof Sk?iR(i.players,e):e.push(i)}}function rR(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Xv{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new K7(e,t,i),this._timelineEngine=new U7(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const c=[],d=QA(this._driver,s,c);if(c.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${c.join("\n - ")}`);a=function(n,e,t){return new B7(n,e,t)}(r,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=Tk(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=Tk(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function sR(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=aS(e[0]),e.length>1&&(i=aS(e[e.length-1]))):e&&(t=aS(e)),t||i?new nG(n,t,i):null}let nG=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ca(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ca(this._element,this._initialStyles),this._endStyles&&(ca(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Vu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vu(this._element,this._endStyles),this._endStyles=null),ca(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function aS(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];iG(r)&&(e=e||{},e[r]=n[r])}return e}function iG(n){return"display"===n||"position"===n}const oR="animation",aR="animationend";class oG{constructor(e,t,i,r,s,o,a){this._element=e,this._name=t,this._duration=i,this._delay=r,this._easing=s,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=c=>this._handleCallback(c)}apply(){(function(n,e){const t=cS(n,"").trim();let i=0;t.length&&(function(n,e){let t=0;for(let i=0;i<n.length;i++)","===n.charAt(i)&&t++;return t}(t)+1,e=`${t}, ${e}`),Jv(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),uR(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){lR(this._element,this._name,"paused")}resume(){lR(this._element,this._name,"running")}setPosition(e){const t=cR(this._element,this._name);this._position=e*this._duration,Jv(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),uR(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const i=cS(n,"").split(","),r=lS(i,e);r>=0&&(i.splice(r,1),Jv(n,"",i.join(",")))}(this._element,this._name))}}function lR(n,e,t){Jv(n,"PlayState",t,cR(n,e))}function cR(n,e){const t=cS(n,"");return t.indexOf(",")>0?lS(t.split(","),e):lS([t],e)}function lS(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function uR(n,e,t){t?n.removeEventListener(aR,e):n.addEventListener(aR,e)}function Jv(n,e,t,i){const r=oR+e;if(null!=i){const s=n.style[r];if(s.length){const o=s.split(",");o[i]=t,t=o.join(",")}}n.style[r]=t}function cS(n,e){return n.style[oR+e]||""}class dR{constructor(e,t,i,r,s,o,a,c){this.element=e,this.keyframes=t,this.animationName=i,this._duration=r,this._delay=s,this._finalStyles=a,this._specialStyles=c,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new oG(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(e[i]=t?this._finalStyles[i]:YA(this.element,i))})}this.currentSnapshot=e}}class hG extends Th{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=kk(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class fR{constructor(){this._count=0}validateStyleProperty(e){return HA(e)}matchesElement(e,t){return jA(e,t)}containsElement(e,t){return UA(e,t)}query(e,t,i){return zA(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,i){i=i.map(a=>kk(a));let r=`@keyframes ${t} {\n`,s="";i.forEach(a=>{s=" ";const c=parseFloat(a.offset);r+=`${s}${100*c}% {\n`,s+=" ",Object.keys(a).forEach(d=>{const f=a[d];switch(d){case"offset":return;case"easing":return void(f&&(r+=`${s}animation-timing-function: ${f};\n`));default:return void(r+=`${s}${d}: ${f};\n`)}}),r+=`${s}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(e,t,i,r,s,o=[],a){const c=o.filter(M=>M instanceof dR),d={};jk(i,r)&&c.forEach(M=>{let F=M.currentSnapshot;Object.keys(F).forEach(L=>d[L]=F[L])});const f=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(i=>{Object.keys(i).forEach(r=>{"offset"==r||"easing"==r||(e[r]=i[r])})}),e}(t=Uk(e,t,d));if(0==i)return new hG(e,f);const p="gen_css_kf_"+this._count++,m=this.buildKeyframeElement(e,p,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(m);const _=sR(e,t),I=new dR(e,t,p,i,r,s,f,_);return I.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(m)),I}}class gR{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:YA(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class _G{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(mR().toString()),this._cssKeyframesDriver=new fR}validateStyleProperty(e){return HA(e)}matchesElement(e,t){return jA(e,t)}containsElement(e,t){return UA(e,t)}query(e,t,i){return zA(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,i,r,s,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,i,r,s,o);const f={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(f.easing=s);const p={},m=o.filter(_=>_ instanceof gR);jk(i,r)&&m.forEach(_=>{let I=_.currentSnapshot;Object.keys(I).forEach(M=>p[M]=I[M])});const y=sR(e,t=Uk(e,t=t.map(_=>Yl(_,!1)),p));return new gR(e,t,f,y)}}function mR(){return xk()&&Element.prototype.animate||{}}let vG=(()=>{class n extends Ek{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:_r.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?Dk(t):t;return _R(this._renderer,null,i,"register",[r]),new bG(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(X(pu),X(sn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();class bG extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new CG(this._id,e,t||{},this._renderer)}}class CG{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return _R(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function _R(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const yR="@.disabled";let wG=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let f=this._rendererCache.get(s);return f||(f=new vR("",s,this.engine),this._rendererCache.set(s,f)),f}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=f=>{Array.isArray(f)?f.forEach(c):this.engine.registerTrigger(o,a,t,f.name,f)};return i.data.animation.forEach(c),new EG(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(X(pu),X(Xv),X(gn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();class vR{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==yR?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class EG extends vR{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==yR?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let SG=(()=>{class n extends Xv{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(X(sn),X($A),X(nS))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();const Po=new Le("AnimationModuleType"),bR=[{provide:Ek,useClass:vG},{provide:nS,useFactory:function(){return new k7}},{provide:Xv,useClass:SG},{provide:pu,useFactory:function(n,e,t){return new wG(n,e,t)},deps:[tv,Xv,gn]}],CR=[{provide:$A,useFactory:function(){return"function"==typeof mR()?new _G:new fR}},{provide:Po,useValue:"BrowserAnimations"},...bR],IG=[{provide:$A,useClass:Rk},{provide:Po,useValue:"NoopAnimations"},...bR];let OG=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?IG:CR}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({providers:CR,imports:[aO]}),n})();const wR=new Nl("13.0.2"),kG=new Le("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Tr=(()=>{class n{constructor(t,i,r){this._hasDoneGlobalChecks=!1,this._document=r,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!(!EE()||DA())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const i=getComputedStyle(t);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),t.remove()}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&wR.full!==wk.full&&console.warn("The Angular Material version ("+wR.full+") does not match the Angular CDK version ("+wk.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(X(Ck),X(kG,8),X(sn))},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[Tg],Tg]}),n})();function uS(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Pu(e)}}}function ER(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function DR(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Pu(e)}}}class FG{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const AR={enterDuration:225,exitDuration:150},dS=Rv({passive:!0}),SR=["mousedown","touchstart"],xR=["mouseup","mouseleave","touchend","touchcancel"];class LG{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ku(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Pe(Pe({},AR),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,d=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=c-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=i.color&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f),function(n){window.getComputedStyle(n).getPropertyValue("opacity")}(f),f.style.transform="scale(1)";const p=new FG(this,f,i);return p.state=0,this._activeRipples.add(p),i.persistent||(this._mostRecentTransientRipple=p),this._runTimeoutOutsideZone(()=>{const m=p===this._mostRecentTransientRipple;p.state=1,!i.persistent&&(!m||!this._isPointerDown)&&p.fadeOut()},d),p}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Pe(Pe({},AR),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ku(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(SR))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(xR),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=mk(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!_k(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,dS)})})}_removeTriggerEvents(){this._triggerElement&&(SR.forEach(e=>{this._triggerElement.removeEventListener(e,this,dS)}),this._pointerUpEventsRegistered&&xR.forEach(e=>{this._triggerElement.removeEventListener(e,this,dS)}))}}const HG=new Le("mat-ripple-global-options");let tb=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new LG(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Pe(Pe(Pe({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Pe(Pe({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Pe(Pe({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(gn),V(As),V(HG,8),V(Po,8))},n.\u0275dir=ke({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Yi("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),hS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[Tr,CA],Tr]}),n})(),jG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[Tr]]}),n})(),MR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[hS,Ha,Tr,jG]]}),n})();function Rg(n,e,t,i){return k(t)&&(i=t,t=void 0),i?Rg(n,e,t).pipe(Bt(r=>ee(r)?i(...r):i(r))):new et(r=>{TR(n,e,function(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function TR(n,e,t,i,r){let s;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)TR(n[o],e,t,i,r)}i.add(s)}function IR(n){return!ee(n)&&n-parseFloat(n)+1>=0}function OR(n=0,e,t){let i=-1;return IR(e)?i=Number(e)<1?1:Number(e):Ir(e)&&(t=e),Ir(t)||(t=vA),new et(r=>{const s=IR(n)?n:+n-t.now();return t.schedule(GG,s,{index:0,period:i,subscriber:r})})}function GG(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}new class extends la{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends yA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let KG=1;const YG=Promise.resolve(),nb={};function PR(n){return n in nb&&(delete nb[n],!0)}const kR={setImmediate(n){const e=KG++;return nb[e]=!0,YG.then(()=>PR(e)&&n()),e},clearImmediate(n){PR(n)}};new class extends la{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends yA{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=kR.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(kR.clearImmediate(t),e.scheduled=void 0)}});class tW{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new nW(e,this.durationSelector))}}class nW extends lc{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:r}=this;t=r(e)}catch(r){return this.destination.error(r)}const i=cc(t,new Xa(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function RR(n,e=vA){return function(n){return function(t){return t.lift(new tW(n))}}(()=>OR(n,e))}let rW=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Je,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new et(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(RR(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):bt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(so(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=ku(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Rg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(X(gn),X(As),X(sn,8))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fg=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Je,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(RR(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(X(As),X(gn),X(sn,8))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({}),n})(),FR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[Tg,CA,fS],Tg,fS]}),n})();function oW(n,e){1&n&&hy(0)}const NR=["*"];function aW(n,e){}const lW=function(n){return{animationDuration:n}},cW=function(n,e){return{value:n,params:e}},uW=["tabListContainer"],dW=["tabList"],hW=["tabListInner"],fW=["nextPaginator"],pW=["previousPaginator"],gW=["tabBodyWrapper"],mW=["tabHeader"];function _W(n,e){}function yW(n,e){1&n&&$n(0,_W,0,0,"ng-template",9),2&n&&We("cdkPortalOutlet",Nt().$implicit.templateLabel)}function vW(n,e){1&n&&D(0),2&n&&hu(Nt().$implicit.textLabel)}function bW(n,e){if(1&n){const t=Js();C(0,"div",6),Ge("click",function(){const r=tn(t),s=r.$implicit,o=r.index,a=Nt(),c=function(n){return function(n,e){return n[e]}(wt.lFrame.contextLView,20+n)}(1);return a._handleClick(s,c,o)})("cdkFocusChange",function(r){const o=tn(t).index;return Nt()._tabFocusChanged(r,o)}),C(1,"div",7),$n(2,yW,1,1,"ng-template",8),$n(3,vW,1,1,"ng-template",8),w(),w()}if(2&n){const t=e.$implicit,i=e.index,r=Nt();Yi("mat-tab-label-active",r.selectedIndex==i),We("id",r._getTabLabelId(i))("disabled",t.disabled)("matRippleDisabled",t.disabled||r.disableRipple),Sr("tabIndex",r._getTabIndex(t,i))("aria-posinset",i+1)("aria-setsize",r._tabs.length)("aria-controls",r._getTabContentId(i))("aria-selected",r.selectedIndex==i)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),Qe(2),We("ngIf",t.templateLabel),Qe(1),We("ngIf",!t.templateLabel)}}function CW(n,e){if(1&n){const t=Js();C(0,"mat-tab-body",10),Ge("_onCentered",function(){return tn(t),Nt()._removeTabBodyWrapperHeight()})("_onCentering",function(r){return tn(t),Nt()._setTabBodyWrapperHeight(r)}),w()}if(2&n){const t=e.$implicit,i=e.index,r=Nt();Yi("mat-tab-body-active",r.selectedIndex===i),We("id",r._getTabContentId(i))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",r.animationDuration),Sr("tabindex",null!=r.contentTabIndex&&r.selectedIndex===i?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(i))}}const wW=new Le("MatInkBarPositioner",{providedIn:"root",factory:function(){return e=>({left:e?(e.offsetLeft||0)+"px":"0",width:e?(e.offsetWidth||0)+"px":"0"})}});let LR=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._inkBarPositioner=r,this._animationMode=s}alignToElement(t){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(t))}):this._setStyles(t)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(t){const i=this._inkBarPositioner(t),r=this._elementRef.nativeElement;r.style.left=i.left,r.style.width=i.width}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(gn),V(wW),V(Po,8))},n.\u0275dir=ke({type:n,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,i){2&t&&Yi("_mat-animation-noopable","NoopAnimations"===i._animationMode)}}),n})();const DW=new Le("MatTabContent"),AW=new Le("MatTabLabel"),SW=new Le("MAT_TAB"),xW=uS(class{}),VR=new Le("MAT_TAB_GROUP");let pS=(()=>{class n extends xW{constructor(t,i){super(),this._viewContainerRef=t,this._closestTabGroup=i,this.textLabel="",this._contentPortal=null,this._stateChanges=new Je,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new IA(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return n.\u0275fac=function(t){return new(t||n)(V(Ur),V(VR,8))},n.\u0275cmp=Wn({type:n,selectors:[["mat-tab"]],contentQueries:function(t,i,r){if(1&t&&(mu(r,AW,5),mu(r,DW,7,Ds)),2&t){let s;Di(s=Ai())&&(i.templateLabel=s.first),Di(s=Ai())&&(i._explicitContent=s.first)}},viewQuery:function(t,i){if(1&t&&zr(Ds,7),2&t){let r;Di(r=Ai())&&(i._implicitContent=r.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[On([{provide:SW,useExisting:n}]),$t,mi],ngContentSelectors:NR,decls:1,vars:0,template:function(t,i){1&t&&(dy(),$n(0,oW,1,0,"ng-template"))},encapsulation:2}),n})();const MW={translateTab:Ig("translateTab",[$a("center, void, left-origin-center, right-origin-center",hr({transform:"none"})),$a("left",hr({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),$a("right",hr({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),Ga("* => left, * => right, left => center, right => center",Zl("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Ga("void => left-origin-center",[hr({transform:"translate3d(-100%, 0, 0)"}),Zl("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Ga("void => right-origin-center",[hr({transform:"translate3d(100%, 0, 0)"}),Zl("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let TW=(()=>{class n extends Mg{constructor(t,i,r,s){super(t,i,s),this._host=r,this._centeringSub=we.EMPTY,this._leavingSub=we.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(_v(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(V(Jo),V(Ur),V(fn(()=>BR)),V(sn))},n.\u0275dir=ke({type:n,selectors:[["","matTabBodyHost",""]],features:[$t]}),n})(),IW=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._dir=i,this._dirChangeSubscription=we.EMPTY,this._translateTabComplete=new Je,this._onCentering=new rn,this._beforeCentering=new rn,this._afterLeavingCenter=new rn,this._onCentered=new rn(!0),this.animationDuration="500ms",i&&(this._dirChangeSubscription=i.change.subscribe(s=>{this._computePositionAnimationState(s),r.markForCheck()})),this._translateTabComplete.pipe(ak((s,o)=>s.fromState===o.fromState&&s.toState===o.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const i=this._isCenterPosition(t.toState);this._beforeCentering.emit(i),i&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const i=this._getLayoutDirection();return"ltr"==i&&t<=0||"rtl"==i&&t>0?"left-origin-center":"right-origin-center"}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(ql,8),V(Do))},n.\u0275dir=ke({type:n,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),n})(),BR=(()=>{class n extends IW{constructor(t,i,r){super(t,i,r)}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(ql,8),V(Do))},n.\u0275cmp=Wn({type:n,selectors:[["mat-tab-body"]],viewQuery:function(t,i){if(1&t&&zr(Mg,5),2&t){let r;Di(r=Ai())&&(i._portalHost=r.first)}},hostAttrs:[1,"mat-tab-body"],features:[$t],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,i){1&t&&(C(0,"div",0,1),Ge("@translateTab.start",function(s){return i._onTranslateTabStarted(s)})("@translateTab.done",function(s){return i._translateTabComplete.next(s)}),$n(2,aW,0,0,"ng-template",2),w()),2&t&&We("@translateTab",$M(3,cW,i._position,zM(1,lW,i.animationDuration)))},directives:[TW],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[MW.translateTab]}}),n})();const HR=new Le("MAT_TABS_CONFIG"),OW=uS(class{});let jR=(()=>{class n extends OW{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return n.\u0275fac=function(t){return new(t||n)(V(Xt))},n.\u0275dir=ke({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,i){2&t&&(Sr("aria-disabled",!!i.disabled),Yi("mat-tab-disabled",i.disabled))},inputs:{disabled:"disabled"},features:[$t]}),n})();const UR=Rv({passive:!0});let RW=(()=>{class n{constructor(t,i,r,s,o,a,c){this._elementRef=t,this._changeDetectorRef=i,this._viewportRuler=r,this._dir=s,this._ngZone=o,this._platform=a,this._animationMode=c,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new Je,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new Je,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new rn,this.indexFocused=new rn,o.runOutsideAngular(()=>{Rg(t.nativeElement,"mouseleave").pipe(Wl(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=kv(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){Rg(this._previousPaginator.nativeElement,"touchstart",UR).pipe(Wl(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Rg(this._nextPaginator.nativeElement,"touchstart",UR).pipe(Wl(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:bt("ltr"),i=this._viewportRuler.change(150),r=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new k6(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(r):r(),fa(t,i,this._items.changes).pipe(Wl(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(r)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Wl(this._destroyed)).subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!_A(t))switch(t.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const i=this._items?this._items.toArray()[t]:null;return!!i&&!i.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const i=this._tabListContainer.nativeElement;i.scrollLeft="ltr"==this._getLayoutDirection()?0:i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,i="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const i=this._items?this._items.toArray()[t]:null;if(!i)return;const r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:o}=i.elementRef.nativeElement;let a,c;"ltr"==this._getLayoutDirection()?(a=s,c=a+o):(c=this._tabListInner.nativeElement.offsetWidth-s,a=c-o);const d=this.scrollDistance,f=this.scrollDistance+r;a<d?this.scrollDistance-=d-a+60:c>f&&(this.scrollDistance+=c-f+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=t?t.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,i){i&&null!=i.button&&0!==i.button||(this._stopInterval(),OR(650,100).pipe(Wl(fa(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:r,distance:s}=this._scrollHeader(t);(0===s||s>=r)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(Do),V(Fg),V(ql,8),V(gn),V(As),V(Po,8))},n.\u0275dir=ke({type:n,inputs:{disablePagination:"disablePagination"}}),n})(),FW=(()=>{class n extends RW{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Pu(t)}_itemSelected(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(Do),V(Fg),V(ql,8),V(gn),V(As),V(Po,8))},n.\u0275dir=ke({type:n,inputs:{disableRipple:"disableRipple"},features:[$t]}),n})(),NW=(()=>{class n extends FW{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c)}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(Do),V(Fg),V(ql,8),V(gn),V(As),V(Po,8))},n.\u0275cmp=Wn({type:n,selectors:[["mat-tab-header"]],contentQueries:function(t,i,r){if(1&t&&mu(r,jR,4),2&t){let s;Di(s=Ai())&&(i._items=s)}},viewQuery:function(t,i){if(1&t&&(zr(LR,7),zr(uW,7),zr(dW,7),zr(hW,7),zr(fW,5),zr(pW,5)),2&t){let r;Di(r=Ai())&&(i._inkBar=r.first),Di(r=Ai())&&(i._tabListContainer=r.first),Di(r=Ai())&&(i._tabList=r.first),Di(r=Ai())&&(i._tabListInner=r.first),Di(r=Ai())&&(i._nextPaginator=r.first),Di(r=Ai())&&(i._previousPaginator=r.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,i){2&t&&Yi("mat-tab-header-pagination-controls-enabled",i._showPaginationControls)("mat-tab-header-rtl","rtl"==i._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[$t],ngContentSelectors:NR,decls:14,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,i){1&t&&(dy(),C(0,"div",0,1),Ge("click",function(){return i._handlePaginatorClick("before")})("mousedown",function(s){return i._handlePaginatorPress("before",s)})("touchend",function(){return i._stopInterval()}),vt(2,"div",2),w(),C(3,"div",3,4),Ge("keydown",function(s){return i._handleKeydown(s)}),C(5,"div",5,6),Ge("cdkObserveContent",function(){return i._onContentChanges()}),C(7,"div",7,8),hy(9),w(),vt(10,"mat-ink-bar"),w(),w(),C(11,"div",9,10),Ge("mousedown",function(s){return i._handlePaginatorPress("after",s)})("click",function(){return i._handlePaginatorClick("after")})("touchend",function(){return i._stopInterval()}),vt(13,"div",2),w()),2&t&&(Yi("mat-tab-header-pagination-disabled",i._disableScrollBefore),We("matRippleDisabled",i._disableScrollBefore||i.disableRipple),Qe(5),Yi("_mat-animation-noopable","NoopAnimations"===i._animationMode),Qe(6),Yi("mat-tab-header-pagination-disabled",i._disableScrollAfter),We("matRippleDisabled",i._disableScrollAfter||i.disableRipple))},directives:[tb,T6,LR],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),n})(),LW=0;class VW{}const BW=ER(DR(class{constructor(n){this._elementRef=n}}),"primary");let HW=(()=>{class n extends BW{constructor(t,i,r,s){var o;super(t),this._changeDetectorRef=i,this._animationMode=s,this._tabs=new gu,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=we.EMPTY,this._tabLabelSubscription=we.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new rn,this.focusChange=new rn,this.animationDone=new rn,this.selectedTabChange=new rn(!0),this._groupId=LW++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=!(!r||null==r.disablePagination)&&r.disablePagination,this.dynamicHeight=!(!r||null==r.dynamicHeight)&&r.dynamicHeight,this.contentTabIndex=null!=(o=null==r?void 0:r.contentTabIndex)?o:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=Pu(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=kv(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=kv(t,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const i=this._elementRef.nativeElement;i.classList.remove(`mat-background-${this.backgroundColor}`),t&&i.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const i=null==this._selectedIndex;if(!i){this.selectedTabChange.emit(this._createChangeEvent(t));const r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,s)=>r.isActive=s===t),i||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,r)=>{i.position=r-t,null!=this._selectedIndex&&0==i.position&&!i.origin&&(i.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const i=this._tabs.toArray();for(let r=0;r<i.length;r++)if(i[r].isActive){this._indexToSelect=this._selectedIndex=r;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(_v(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(t){const i=this._tabHeader;i&&(i.focusIndex=t)}_focusChanged(t){this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const i=new VW;return i.index=t,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[t]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=fa(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,i,r){t.disabled||(this.selectedIndex=i.focusIndex=r)}_getTabIndex(t,i){return t.disabled?null:this.selectedIndex===i?0:-1}_tabFocusChanged(t,i){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=i)}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(Do),V(HR,8),V(Po,8))},n.\u0275dir=ke({type:n,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[$t]}),n})(),$R=(()=>{class n extends HW{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(Do),V(HR,8),V(Po,8))},n.\u0275cmp=Wn({type:n,selectors:[["mat-tab-group"]],contentQueries:function(t,i,r){if(1&t&&mu(r,pS,5),2&t){let s;Di(s=Ai())&&(i._allTabs=s)}},viewQuery:function(t,i){if(1&t&&(zr(gW,5),zr(mW,5)),2&t){let r;Di(r=Ai())&&(i._tabBodyWrapper=r.first),Di(r=Ai())&&(i._tabHeader=r.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,i){2&t&&Yi("mat-tab-group-dynamic-height",i.dynamicHeight)("mat-tab-group-inverted-header","below"===i.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[On([{provide:VR,useExisting:n}]),$t],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(t,i){1&t&&(C(0,"mat-tab-header",0,1),Ge("indexFocused",function(s){return i._focusChanged(s)})("selectFocusedIndex",function(s){return i.selectedIndex=s}),$n(2,bW,4,14,"div",2),w(),C(3,"div",3,4),$n(5,CW,1,9,"mat-tab-body",5),w()),2&t&&(We("selectedIndex",i.selectedIndex||0)("disableRipple",i.disableRipple)("disablePagination",i.disablePagination),Qe(2),We("ngForOf",i._tabs),Qe(1),Yi("_mat-animation-noopable","NoopAnimations"===i._animationMode),Qe(2),We("ngForOf",i._tabs))},directives:[NW,ng,jR,tb,Q6,Eu,Mg,BR],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),n})(),gS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[Ha,Tr,PA,hS,AA,X6],Tr]}),n})();const jW=["mat-button",""],UW=["*"],$W=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],GW=ER(uS(DR(class{constructor(n){this._elementRef=n}})));let Ph=(()=>{class n extends GW{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of $W)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(SA),V(Po,8))},n.\u0275cmp=Wn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&zr(tb,5),2&t){let r;Di(r=Ai())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(Sr("disabled",i.disabled||null),Yi("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[$t],attrs:jW,ngContentSelectors:UW,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(dy(),C(0,"span",0),hy(1),w(),vt(2,"span",1),vt(3,"span",2)),2&t&&(Qe(2),Yi("mat-button-ripple-round",i.isRoundButton||i.isIconButton),We("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[tb],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),mS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[hS,Tr],Tr]}),n})(),ib=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Pu(t)}get inset(){return this._inset}set inset(t){this._inset=Pu(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,i){2&t&&(Sr("aria-orientation",i.vertical?"vertical":"horizontal"),Yi("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),n})(),_S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[Tr],Tr]}),n})(),yS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[Ha,Tr,AA],Tr]}),n})();const GR=A6();class YW{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ki(-this._previousScrollPosition.left),e.style.top=ki(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),GR&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),GR&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class QW{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class WR{enable(){}disable(){}attach(){}}function vS(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function qR(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class XW{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();vS(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let JW=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new WR,this.close=o=>new QW(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new YW(this._viewportRuler,this._document),this.reposition=o=>new XW(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(X(rW),X(Fg),X(gn),X(sn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ZR{constructor(e){if(this.scrollStrategy=new WR,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class eq{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let KR=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(X(sn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tq=(()=>{class n extends KR{constructor(t){super(t),this._keydownListener=i=>{const r=this._attachedOverlays;for(let s=r.length-1;s>-1;s--)if(r[s]._keydownEvents.observers.length>0){r[s]._keydownEvents.next(i);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(X(sn))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nq=(()=>{class n extends KR{constructor(t,i){super(t),this._platform=i,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=Fu(r)},this._clickListener=r=>{const s=Fu(r),o="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const a=this._attachedOverlays.slice();for(let c=a.length-1;c>-1;c--){const d=a[c];if(!(d._outsidePointerEvents.observers.length<1)&&d.hasAttached()){if(d.overlayElement.contains(s)||d.overlayElement.contains(o))break;d._outsidePointerEvents.next(r)}}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)(X(sn),X(As))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bS=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null==(t=this._containerElement)||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||DA()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),DA()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(X(sn),X(As))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class iq{constructor(e,t,i,r,s,o,a,c,d){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=d,this._backdropElement=null,this._backdropClick=new Je,this._attachments=new Je,this._detachments=new Je,this._locationChanges=we.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._keydownEvents=new Je,this._outsidePointerEvents=new Je,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(zl(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(t=this._host)||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Pe(Pe({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Ui(Pe({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ki(this._config.width),e.height=ki(this._config.height),e.minWidth=ki(this._config.minWidth),e.minHeight=ki(this._config.minHeight),e.maxWidth=ki(this._config.maxWidth),e.maxHeight=ki(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const i=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",i),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",i)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(e,t,i){const r=lk(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Wl(fa(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null))}}const YR="cdk-overlay-connected-position-bounding-box",rq=/([A-Za-z%]+)$/;class sq{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Je,this._resizeSubscription=we.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(YR),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=[];let s;for(let o of this._preferredPositions){let a=this._getOriginPoint(e,o),c=this._getOverlayPoint(a,t,o),d=this._getOverlayFit(c,t,i,o);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,a);this._canFitWithFlexibleDimensions(d,c,i)?r.push({position:o,origin:a,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(a,o)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:c,originPoint:a,position:o,overlayRect:t})}if(r.length){let o=null,a=-1;for(const c of r){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>a&&(a=d,o=c)}return this._isPushed=!1,void this._applyPosition(o.position,o.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Hu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(YR),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let i,r;if("center"==t.originX)i=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,o=this._isRtl()?e.left:e.right;i="start"==t.originX?s:o}return r="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:i,y:r}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=XR(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),d=this._getOffset(r,"y");c&&(o+=c),d&&(a+=d);let m=0-a,y=a+s.height-i.height,_=this._subtractOverflows(s.width,0-o,o+s.width-i.width),I=this._subtractOverflows(s.height,m,y),M=_*I;return{visibleArea:M,isCompletelyWithinViewport:s.width*s.height===M,fitsInViewportVertically:I===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=QR(this._overlayRef.getConfig().minHeight),a=QR(this._overlayRef.getConfig().minWidth),d=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&d}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=XR(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),d=Math.max(s.left-i.left-e.x,0);let f=0,p=0;return f=r.width<=s.width?d||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,p=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:f,y:p},{x:e.x+f,y:e.y+p}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new eq(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,f,p,m;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const y=Math.min(i.bottom-e.y+i.top,e.y),_=this._lastBoundingBoxSize.height;s=2*y,o=e.y-y,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-_/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)m=i.width-e.x+this._viewportMargin,f=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)p=e.x,f=i.right-e.x;else{const y=Math.min(i.right-e.x+i.left,e.x),_=this._lastBoundingBoxSize.width;f=2*y,p=e.x-y,f>_&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-_/2)}return{top:o,left:p,bottom:a,right:m,width:f,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ki(i.height),r.top=ki(i.top),r.bottom=ki(i.bottom),r.width=ki(i.width),r.left=ki(i.left),r.right=ki(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ki(s)),o&&(r.maxWidth=ki(o))}this._lastBoundingBoxSize=i,Hu(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Hu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Hu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const f=this._viewportRuler.getViewportScrollPosition();Hu(i,this._getExactOverlayY(t,e,f)),Hu(i,this._getExactOverlayX(t,e,f))}else i.position="static";let a="",c=this._getOffset(t,"x"),d=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),d&&(a+=`translateY(${d}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=ki(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=ki(o.maxWidth):s&&(i.maxWidth="")),Hu(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=o,"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ki(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ki(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:qR(e,i),isOriginOutsideView:vS(e,i),isOverlayClipped:qR(t,i),isOverlayOutsideView:vS(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&lk(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Xt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Hu(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function QR(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(rq);return t&&"px"!==t?null:parseFloat(e)}return n||null}function XR(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const JR="cdk-global-overlay-wrapper";class oq{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(JR),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),d=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=c?"0":this._leftOffset,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,c?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(JR),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let aq=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new oq}flexibleConnectedTo(t){return new sq(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(X(Fg),X(sn),X(As),X(bS))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lq=0,Ng=(()=>{class n{constructor(t,i,r,s,o,a,c,d,f,p,m){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=d,this._directionality=f,this._location=p,this._outsideClickDispatcher=m}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new ZR(t);return o.direction=o.direction||this._directionality.value,new iq(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+lq++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(_u)),new e7(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(X(JW),X(bS),X(Jo),X(aq),X(tq),X(_n),X(gn),X(sn),X(ql),X(Jp),X(nq))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})();const dq={provide:new Le("cdk-connected-overlay-scroll-strategy"),deps:[Ng],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let eF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({providers:[Ng,dq],imports:[[Tg,PA,FR],FR]}),n})();const mq={provide:new Le("mat-select-scroll-strategy"),deps:[Ng],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let nF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({providers:[mq],imports:[[Ha,eF,MR,Tr],fS,yS,MR,Tr]}),n})();function _q(n,e){}class CS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const yq={dialogContainer:Ig("dialogContainer",[$a("void, exit",hr({opacity:0,transform:"scale(0.7)"})),$a("enter",hr({transform:"none"})),Ga("* => enter",Zl("150ms cubic-bezier(0, 0, 0.2, 1)",hr({transform:"none",opacity:1}))),Ga("* => void, * => exit",Zl("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",hr({opacity:0})))])};let vq=(()=>{class n extends OA{constructor(t,i,r,s,o,a,c,d){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._focusMonitor=d,this._animationStateChanged=new rn,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=f=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(f)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{t.addEventListener("blur",()=>t.removeAttribute("tabindex")),t.addEventListener("mousedown",()=>t.removeAttribute("tabindex"))})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=EA(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=EA())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=EA();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(G6),V(Do),V(sn,8),V(CS),V(fk),V(gn),V(SA))},n.\u0275dir=ke({type:n,viewQuery:function(t,i){if(1&t&&zr(Mg,7),2&t){let r;Di(r=Ai())&&(i._portalOutlet=r.first)}},features:[$t]}),n})(),bq=(()=>{class n extends vq{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Wi(n)))(i||n)}}(),n.\u0275cmp=Wn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&Hw("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(Gw("id",i._id),Sr("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Ww("@dialogContainer",i._state))},features:[$t],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&$n(0,_q,0,0,"ng-template",0)},directives:[Mg],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[yq.dialogContainer]}}),n})(),Cq=0;class wq{constructor(e,t,i="mat-dialog-"+Cq++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Je,this._afterClosed=new Je,this._beforeClosed=new Je,this._state=0,t._id=i,t._animationStateChanged.pipe(so(r=>"opened"===r.state),zl(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(so(r=>"closed"===r.state),zl(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(so(r=>27===r.keyCode&&!this.disableClose&&!_A(r))).subscribe(r=>{r.preventDefault(),iF(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():iF(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(so(t=>"closing"===t.state),zl(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function iF(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const Eq=new Le("MatDialogData"),Dq=new Le("mat-dialog-default-options"),rF=new Le("mat-dialog-scroll-strategy"),Sq={provide:rF,deps:[Ng],useFactory:function(n){return()=>n.scrollStrategies.block()}};let xq=(()=>{class n{constructor(t,i,r,s,o,a,c,d,f,p){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=c,this._dialogContainerType=d,this._dialogDataToken=f,this._animationMode=p,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je,this._afterOpenedAtThisLevel=new Je,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=ZD(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(_v(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){if(i=function(n,e){return Pe(Pe({},e),n)}(i,this._defaultOptions||new CS),i.id&&this.getDialogById(i.id),this._dialogAnimatingOpen)return this._lastDialogRef;const r=this._createOverlay(i),s=this._attachDialogContainer(r,i);if("NoopAnimations"!==this._animationMode){const a=s._animationStateChanged.subscribe(c=>{"opening"===c.state&&(this._dialogAnimatingOpen=!0),"opened"===c.state&&(this._dialogAnimatingOpen=!1,a.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new we),this._animationStateSubscriptions.add(a)}const o=this._attachDialogContent(t,s,r,i);return this._lastDialogRef=o,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new ZR({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=_n.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:CS,useValue:i}]}),o=new TA(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(t instanceof Ds)i.attachTemplatePortal(new IA(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,i),c=i.attachComponentPortal(new TA(t,s.viewContainerRef,a));o.componentInstance=c.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(ql,null,it.Optional))&&o.push({provide:ql,useValue:{value:t.direction,change:bt()}}),_n.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){cy()},n.\u0275dir=ke({type:n}),n})(),sF=(()=>{class n extends xq{constructor(t,i,r,s,o,a,c,d){super(t,i,s,a,c,o,wq,bq,Eq,d)}}return n.\u0275fac=function(t){return new(t||n)(X(Ng),X(_n),X(Jp,8),X(Dq,8),X(rF),X(n,12),X(bS),X(Po,8))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})(),Tq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({providers:[sF,Sq],imports:[[eF,PA,Tr],Tr]}),n})(),Iq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[Ha,Ch,Su,OG,gS,mS,_S,Tq,yS,nF]]}),n})();var ko=Se(239);function oF(n){let e;switch(n){case"semibrevis":e=1;break;case"brevis":e=0;break;case"maxima":e=7;break;case"longa":e=9;break;case"minima":e=2;break;case"semiminima":e=4;break;case"fusa":e=8;break;case"semifusa":e=6}return e}var an=(()=>(function(n){n[n.C=0]="C",n[n.D=1]="D",n[n.E=2]="E",n[n.F=3]="F",n[n.G=4]="G",n[n.A=5]="A",n[n.B=6]="B"}(an||(an={})),an))(),co=(()=>(function(n){n[n.NONE=0]="NONE",n.SHARP="#",n.FLAT="-",n.NATURAL="n"}(co||(co={})),co))(),fr=(()=>(function(n){n[n.NONE=0]="NONE",n[n.START=1]="START",n[n.END=2]="END"}(fr||(fr={})),fr))(),ls=(()=>(function(n){n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN"}(ls||(ls={})),ls))(),qr=(()=>(function(n){n[n.NONE=0]="NONE",n[n.COLORED=1]="COLORED"}(qr||(qr={})),qr))();class rb{constructor(){this.m_type="clef",this.m_line=-1,this.m_pname=an.C,this.m_clefLine=3,this.m_keySig=new Map}raisePitch(){this.m_clefLine+=1,this.m_clefLine>5&&(this.m_clefLine=5)}lowerPitch(){this.m_clefLine-=1,this.m_clefLine<1&&(this.m_clefLine=1)}getHumdrumLine(){let e="*clef";switch(this.m_pname){case an.G:e+="G";break;case an.F:e+="F";break;default:e+="C"}if(e+=this.m_clefLine,e+="\t",e+="*",this.m_keySig.size>0){e+="\n",e+="*k[";for(let[t,i]of this.m_keySig)e+=t,e+=i;e+="]\t*"}return e}static parseXML(e){let t=new rb;switch(e.hasAttribute("xml:id")&&(t.m_id=e.getAttribute("xml:id")),e.getAttribute("shape")){case"F":t.m_pname=an.F;break;case"G":t.m_pname=an.G}try{let i=parseInt(e.getAttribute("line"));t.m_clefLine=i}catch(i){}return t}}class sb{constructor(e){this.m_type="rest",this.m_line=-1,this.m_dot=!1,this.m_color=qr.NONE,this.m_rhythm=void 0!==e?e:1}getHumdrumLine(e){let t="";switch(this.m_rhythm){case 7:t+="X";break;case 9:t+="L";break;case 0:t+="S";break;case 1:t+="s";break;case 2:t+="M";break;case 4:t+="m";break;case 6:t+="u";break;case 8:t+="U"}return this.m_dot&&(t+=":"),this.m_color===qr.COLORED&&(t+="~"),t+="r",e.mark&&(t+="@"),t+="\t.",t}static parseXML(e){let t=new sb;return e.hasAttribute("xml:id")&&(t.m_id=e.getAttribute("xml:id")),e.hasAttribute("dur")&&(t.m_rhythm=oF(e.getAttribute("dur"))),e.hasAttribute("colored")&&(t.m_color=qr.COLORED),t}}class ob{constructor(){this.m_type="mensur",this.m_line=-1,this.m_modus=Zr.NA,this.m_tempus=Zr.Two,this.m_prolatio=Zr.Two,this.m_sign=Ri.signc,this.mensurvis="*met(C)",this.mensurlog="0022"}getHumdrumLine(){return this.mensurvis="*met("+this.m_sign+")",this.mensurlog="0"+this.m_modus+this.m_tempus+this.m_prolatio,this.mensurvis+"_"+this.mensurlog+"\t*"}static parseXML(e){let t="",i=new ob;return e.hasAttribute("xml:id")&&(i.m_id=e.getAttribute("xml:id")),e.hasAttribute("modusminor")&&(i.m_modus=e.getAttribute("modusminor")),e.hasAttribute("tempus")&&(i.m_tempus=e.getAttribute("tempus")),e.hasAttribute("prolatio")&&(i.m_prolatio=e.getAttribute("prolatio")),e.hasAttribute("sign")&&(t+=e.getAttribute("sign")),e.hasAttribute("slash")&&"1"===e.getAttribute("slash")&&(t+="|"),e.hasAttribute("dot")&&"true"===e.getAttribute("dot")&&(t+="."),e.hasAttribute("num")&&(t+=e.getAttribute("num")),e.hasAttribute("numbase")&&(t=t+"/"+e.getAttribute("numbase")),""===t&&(t="N/A"),i.m_sign=t,i}}class ju{constructor(){this.m_type="note",this.m_line=-1,this.m_pname=an.C,this.m_accid=co.NONE,this.m_oct=4,this.m_rhythm=1,this.m_dot=!1,this.m_text="",this.m_lig=fr.NONE,this.m_plica=ls.NONE,this.m_color=qr.NONE}raisePitch(e){void 0===e&&(e=1),e>=7&&(this.m_oct+=e%7,e-=e%7*7),this.m_pname+=e,this.m_pname>6&&(this.m_pname-=7,this.m_oct+=1)}lowerPitch(e){void 0===e&&(e=1),e>=7&&(this.m_oct-=e%7,e-=e%7*7),this.m_pname-=e,this.m_pname<0&&(this.m_pname+=7,this.m_oct-=1)}getHumdrumLine(e){let i,t="";switch(this.m_lig===fr.START&&(t+="["),this.m_rhythm){case 7:t+="X";break;case 9:t+="L";break;case 0:t+="S";break;case 1:t+="s";break;case 2:t+="M";break;case 4:t+="m";break;case 6:t+="u";break;case 8:t+="U"}switch(this.m_dot&&(t+=":"),this.m_pname){case an.C:i="c";break;case an.D:i="d";break;case an.E:i="e";break;case an.F:i="f";break;case an.G:i="g";break;case an.A:i="a";break;case an.B:i="b"}if(this.m_oct>=4)for(let r=4;r<=this.m_oct;r++)t+=i;else{i=i.toUpperCase();for(let r=3;r>=this.m_oct;r--)t+=i}return this.m_plica===ls.DOWN?t+="k":this.m_plica===ls.UP&&(t+="K"),this.m_color===qr.COLORED&&(t+="~"),this.m_accid!==co.NONE&&(t+=this.m_accid.toString()),this.m_lig===fr.END&&(t+="]"),e.mark&&(t+="@"),t+="\t",this.m_text?(e.hyphen&&(t+="-"),t+=this.m_text):t+=".",t}static parseXML(e){let t=new ju;if(e.hasAttribute("xml:id")&&(t.m_id=e.getAttribute("xml:id")),e.hasAttribute("oct")&&(t.m_oct=parseInt(e.getAttribute("oct"))),e.hasAttribute("dur")&&(t.m_rhythm=oF(e.getAttribute("dur"))),e.hasAttribute("pname")&&(t.m_pname=an[e.getAttribute("pname").toUpperCase()]),e.hasAttribute("colored")&&(t.m_color=qr.COLORED),e.querySelector("plica")&&(e.querySelector("plica"),t.m_plica=e.hasAttribute("dir")&&"up"==e.getAttribute("dir")?ls.UP:ls.DOWN),e.nextElementSibling&&"dot"===e.nextElementSibling.tagName&&(t.m_dot=!0),e.querySelector("accid"))switch(e.querySelector("accid").getAttribute("accid")){case"s":t.m_accid=co.SHARP;break;case"f":t.m_accid=co.FLAT;break;case"n":t.m_accid=co.NATURAL}if(e.querySelector("syl")){const i=e.querySelector("syl");t.m_text=i.textContent}return"ligature"===e.parentElement.tagName&&(e===e.parentElement.firstElementChild?t.m_lig=fr.START:e===e.parentElement.lastElementChild?t.m_lig=fr.END:e.nextElementSibling&&"dot"==e.nextElementSibling.tagName&&e.nextElementSibling===e.parentElement.lastElementChild&&(t.m_dot=!0,t.m_lig=fr.END)),t}}class Oq{constructor(){this.m_list=[],this.m_index=-1,this.m_rhythm=1,this.m_notationCallback=null}addClef(e){let t=new rb;e===an.G?(t.m_pname=an.G,t.m_clefLine=2):e===an.F?(t.m_pname=an.F,t.m_clefLine=4):(t.m_pname=an.C,t.m_clefLine=3),this.m_list.push(t),this.runNotationCallback()}addRest(){0!==this.m_list.length&&(this.m_list.push(new sb(this.m_rhythm)),this.runNotationCallback())}addMensur(){this.m_list.push(new ob),this.runNotationCallback()}addPitchFar(e){if(0===this.m_list.length)return void this.addClef(e);e=(e+7e3)%7;let t=this.getLastNote();t||(t=new ju,t.m_pname=an.C,t.m_oct=4,t.m_rhythm=1);let i=t.m_oct,r=t.m_pname+7*i,s=[];s[0]=7*(i-1)+e,s[1]=7*(i+0)+e,s[2]=7*(i+1)+e;let o=-1;for(let c=0;c<s.length;c++)if(Math.abs(r-s[c])>3&&Math.abs(r-s[c])<8){o=c;break}let a=new ju;switch(a.m_rhythm=this.m_rhythm,a.m_pname=e,o){case 0:a.m_oct=i-1;break;case 1:a.m_oct=i;break;case 2:a.m_oct=i+1}this.m_list.push(a),this.runNotationCallback()}addPitchNear(e){if(0==this.m_list.length)return void this.addClef(e);e=(e+7e3)%7;let t=this.getLastNote();t||(t=new ju,t.m_pname=0,t.m_oct=4,t.m_rhythm=1);let i=t.m_oct,r=t.m_pname+7*i,s=[];s[0]=7*(i-1)+e,s[1]=7*(i+0)+e,s[2]=7*(i+1)+e;let o=-1;for(let c=0;c<s.length;c++)if(Math.abs(r-s[c])<4){o=c;break}let a=new ju;switch(a.m_rhythm=this.m_rhythm,a.m_pname=e,o){case 0:a.m_oct=i-1;break;case 1:a.m_oct=i;break;case 2:a.m_oct=i+1}this.m_list.push(a),this.runNotationCallback()}getLastNote(){for(let e=this.m_list.length-1;e>=0;e--)if("note"===this.m_list[e].m_type)return this.m_list[e];return null}removeLastItem(){this.m_list.pop(),this.runNotationCallback()}hasOpenLigature(){let e=!1;for(let t of this.m_list)if("note"===t.m_type){let i=t;i.m_lig===fr.START?e=!0:i.m_lig===fr.END&&(e=!1)}return e}selectBackward(){this.m_index>0?this.m_index--:0===this.m_index?this.m_index=-1:this.m_index<0&&(this.m_index=this.m_list.length-1),this.runNotationCallback()}selectForward(){this.m_index<this.m_list.length-1?this.m_index++:this.m_index==this.m_list.length-1?this.m_index=-1:this.m_index<0&&(this.m_index=0),this.runNotationCallback()}runNotationCallback(){if(this.m_notationCallback){let e=this.getHumdrumScore({});this.m_notationCallback(e)}}addTextToCurrentItem(e){if(0===this.m_list.length)return!1;let t=this.m_index;if(t<0&&(t=this.m_list.length-1),t<0)return!1;let i=this.m_list[t];return"note"===i.m_type&&(i.m_text+=e,"-"===e&&(this.m_index+=1,this.m_index>=this.m_list.length&&(this.m_index=-1))),this.runNotationCallback(),!0}goToEndOfList(){this.m_index=-1,this.runNotationCallback()}lowerPitch(e){if(0===this.m_list.length)return;let t=this.m_index;t<0&&(t=this.m_list.length-1),"note"===this.m_list[t].m_type?this.m_list[t].lowerPitch(e):"clef"===this.m_list[t].m_type&&this.m_list[t].lowerPitch(),this.runNotationCallback()}raisePitch(e){if(0===this.m_list.length)return;let t=this.m_index;t<0&&(t=this.m_list.length-1),"note"===this.m_list[t].m_type?this.m_list[t].raisePitch(e):"clef"===this.m_list[t].m_type&&this.m_list[t].raisePitch(),this.runNotationCallback()}deleteCharacterOnCurrentItem(){let e=this.m_index;e<0&&(e=this.m_list.length-1);try{let t=this.m_list[e];if(0===t.m_text.length)return;t.m_text=t.m_text.substring(0,t.m_text.length-1),this.runNotationCallback()}catch(t){}}clearTextOnCurrentItem(){let e=this.m_index;if(e<0||e>=this.m_list.length)return;let t=this.m_list[e];if(t)try{t.m_text="",this.runNotationCallback()}catch(i){}}clear(){this.m_list=[],this.m_index=-1,this.runNotationCallback()}getHumdrumScore(e){e||(e={});let t=[];t.push("**mens\t**text"),!0!==e.white&&t.push("*black\t*");var i,r,s=0,o=0,a=!1,c=e;for(i=0;i<this.m_list.length;i++){var d=this.m_list[i];"note"==d.m_type?s+=1:"rest"==d.m_type&&(o+=1),c.mark=!1,c.hyphen=a,i==this.m_index&&(c.mark=!0),c.export&&(c.mark=!1),void 0===d.m_id&&(d.m_id="m-"+(0,ko.v4)()),r=d.getHumdrumLine(c),"note"===d.m_type&&(a=!!d.m_text.match(/-$/)),this.m_list[i].m_line=t.length+1,t.push(r)}s+o==0&&t.push("4ryy\t."),t.push("=-\t=-"),t.push("*-\t*-"),c.export||t.push("!!!RDF**kern: @ = marked note");var f="";for(i=0;i<t.length;i++)f+=t[i]+"\n";return f}selectItemByLine(e){for(let t=0;t<this.m_list.length;t++)if(this.m_list[t].m_line===e)return this.m_index=t,void this.runNotationCallback()}processKeySig(e,t){if(this.m_list.length>0){let i=this.m_list[0];return"clef"!==i.m_type?(console.debug("First was not a clef!!!"),!1):(i.m_keySig.has(e)&&i.m_keySig.get(e)===t?i.m_keySig.delete(e):i.m_keySig.set(e,t),this.runNotationCallback(),!0)}}}var Gn=(()=>(function(n){n.altus="altus",n.cantus="cantus",n.contratenor="contratenor",n.contratenor1="contratenor I",n.contratenor2="contratenor II",n.discantus="discantus",n.duplum="duplum",n.lowervoice1="lower voice I",n.lowervoice2="lower voice II",n.motetus="motetus",n.quadruplum="quadruplum",n.quintus="quintus",n.superius="superius",n.uppervoice1="upper voice I",n.uppervoice2="uppervoice II",n.tenor="tenor",n.triplum="triplum",n.bassus="bassus"}(Gn||(Gn={})),Gn))();function aF(n){switch(n){case Gn.altus:case Gn.quintus:return 8;case Gn.cantus:case Gn.discantus:case Gn.superius:return 5;case Gn.contratenor:return 10;case Gn.contratenor1:return 10.1;case Gn.contratenor2:return 10.2;case Gn.duplum:case Gn.motetus:return 3;case Gn.lowervoice1:return 100;case Gn.lowervoice2:return 100.1;case Gn.quadruplum:return 1;case Gn.uppervoice1:return-1.1;case Gn.uppervoice2:return-1;case Gn.tenor:return 9;case Gn.triplum:return 2;case Gn.bassus:return 20;default:return 0}}var Zr=(()=>(function(n){n.Three="3",n.Two="2",n.NA="0"}(Zr||(Zr={})),Zr))(),Ri=(()=>(function(n){n.signc="C",n.signcdot="C.",n.signo="O",n.signodot="O.",n.signc2="C2",n.signc3="C3",n.signo2="O2",n.signo3="O3",n.signccut="C|",n.signc32="C3/2",n.signccut32="C|3/2",n.signocut="O|",n.signo32="O3/2",n.signocut32="O|3/2",n.NA="N/A"}(Ri||(Ri={})),Ri))();const Wa=new class{constructor(){this.vrvToolkit=null,this.options=null,this.options={humType:0,scale:90,spacingNonLinear:.35,lyricSize:3,breaks:"none",choiceXPathQuery:"./corr"}}setup(){this.vrvToolkit||(this.vrvToolkit=new verovio.toolkit,this.vrvToolkit.setOptions(this.options))}humdrumToMEI(e){return this.vrvToolkit.loadData(e),this.vrvToolkit.getMEI({pageNo:0,scoreBased:!0})}humdrumToSVG(e){this.vrvToolkit.loadData(e);let t=this.vrvToolkit.renderToSVG(1);return(new DOMParser).parseFromString(t,"image/svg+xml").documentElement}meiToSVG(e,t=!1){const r=(new XMLSerializer).serializeToString(e),s=new DOMParser;if(t){const a=Object.assign({},this.options);a.ligatureAsBracket=!0,this.vrvToolkit.setOptions(a)}this.vrvToolkit.loadData(r);const o=this.vrvToolkit.renderToSVG(1);return t&&this.vrvToolkit.setOptions(this.options),s.parseFromString(o,"image/svg+xml").documentElement}meiToHumdrum(e){const i=(new XMLSerializer).serializeToString(e);return this.vrvToolkit.convertMEIToHumdrum(i)}dissonanceInfo(e){return this.vrvToolkit.convertHumdrumToHumdrum(e+="\n!!!filter: mens2kern | dissonant\n")}};class lF{constructor(e,t){this.canvasIRI=e,this.id=t||"m-"+(0,ko.v4)()}}class wS{constructor(e,t){this.id=t||"m-"+(0,ko.v4)(),this.zone=e}get svg(){let e=document.createElementNS("http://www.w3.org/2000/svg","rect");return e.setAttribute("x",this.zone.ulx.toString()),e.setAttribute("y",this.zone.uly.toString()),e.id=this.id,e.setAttribute("width",(this.zone.lrx-this.zone.ulx).toString()),e.setAttribute("height",(this.zone.lry-this.zone.uly).toString()),e.classList.add("zoneRect"),e}}class ES{constructor(e){this.contents=e||new Oq}static compare(e,t){let i=e.pb.index-t.pb.index;if(0!==i)return i;const r=e.sb.zone,s=t.sb.zone,c=r.lry-s.uly,d=s.lry-r.uly;if(c>0&&d>0){const f=Math.min(c,d),p=(r.lry-r.uly+s.lry-s.uly)/2,m=r.lrx-s.ulx,y=s.lrx-r.ulx,_=(r.lrx-r.ulx+s.lrx-s.ulx)/2;let I;if(I=m>0&&y>0?Math.min(m,y):0,f>.25*p&&I<.1*_)return r.ulx-s.ulx}return e.sb.zone.uly-t.sb.zone.uly}get id(){return this.sb.id}get voice(){return this.parent.voice}set voice(e){if(e!==this.parent.voice){let t=this.parent.parent.getOrCreatePart(e),i=this.parent.systems.indexOf(this);this.parent.systems.splice(i,1),t.addSystem(this)}}getContents(){let e="mensural.white"===this.parent.parent.notationType;console.debug(this.parent.parent.notationType);let t=Wa.humdrumToMEI(this.contents.getHumdrumScore({white:e})),r=[],s=(new DOMParser).parseFromString(t,"application/xml"),o=s.querySelector("clef");null!==o&&(this._recurseId(o),r.push(o));let a=s.querySelector("keySig");null!==a&&(this._recurseId(a),r.push(a));let c=s.querySelector("mensur");null!==c&&null===c.closest("layer")&&(this._recurseId(c),r.push(c));let d=s.querySelector("layer");if(console.debug(d),null!==d)for(let f of Array.from(d.children))this._recurseId(f),"note"===f.tagName&&f.hasAttribute("dots")&&f.removeAttribute("dots"),r.push(f);return r}_recurseId(e){let t=e.getAttribute("xml:id"),i=!1;if(t&&/(note|rest|clef|keySig|pb|sb|mensur)/.test(e.tagName)){let r=t.match(/L(\d+)[\w\d]+$/);if(r){let s=parseInt(r[1]),o=this.contents.m_list.filter(a=>a.m_line===s);if(o.length>0)if(i=!0,e.setAttribute("xml:id",o[0].m_id),"mensur"===o[0].m_type){let a=o[0];a.m_modus!==Zr.NA&&e.setAttribute("modusminor",a.m_modus.toString()),a.m_tempus!==Zr.NA&&e.setAttribute("tempus",a.m_tempus.toString()),a.m_prolatio!==Zr.NA&&e.setAttribute("prolatio",a.m_prolatio.toString())}else if("note"===o[0].m_type&&e.hasAttribute("dots")&&(!e.nextElementSibling||"dot"!==e.nextElementSibling.tagName)){const c=e.ownerDocument.createElementNS(xe,"dot");e.insertAdjacentElement("afterend",c),e.removeAttribute("dots")}}}i||e.setAttribute("xml:id","m-"+(0,ko.v4)());for(let r of Array.from(e.children))this._recurseId(r)}}class Lg{constructor(e,t){this.parent=e,t?this.id=t:t="m-"+(0,ko.v4)(),this.systems=[],this.modus=Zr.NA,this.tempus=Zr.NA,this.prolatio=Zr.NA,this.sign=Ri.NA}static compare(e,t){return aF(e.voice)-aF(t.voice)}addSystem(e){e.parent=this,this.systems.push(e)}removeSystem(e){let t=this.systems.filter(i=>i.id===e);if(t.length>0){let i=this.systems.indexOf(t[0]);return this.systems.splice(i,1)[0]}return null}generatePartXML(){this.systems.sort(ES.compare);let e=this.parent._meiDoc.createElementNS(xe,"part"),t=this._generateScoreDef();e.appendChild(t);let i=t.querySelector("staffDef");i.setAttribute("label",this.voice.toString()),i.setAttribute("xml:id",this.voice.toString().replace(" ",""));let r=this.parent._meiDoc.createElementNS(xe,"mensur");i.appendChild(r),this.modus!==Zr.NA&&r.setAttribute("modusminor",this.modus.toString()),this.tempus!==Zr.NA&&r.setAttribute("tempus",this.tempus.toString()),this.prolatio!==Zr.NA&&r.setAttribute("prolatio",this.prolatio.toString()),this.sign===Ri.signc?r.setAttribute("sign","C"):this.sign===Ri.signc2?(r.setAttribute("sign","C"),r.setAttribute("num","2")):this.sign===Ri.signc3?(r.setAttribute("sign","C"),r.setAttribute("num","3")):this.sign===Ri.signc32?(r.setAttribute("sign","C"),r.setAttribute("num","3"),r.setAttribute("numbase","2")):this.sign===Ri.signccut?(r.setAttribute("sign","C"),r.setAttribute("slash","1")):this.sign===Ri.signccut32?(r.setAttribute("sign","C"),r.setAttribute("slash","1"),r.setAttribute("num","3"),r.setAttribute("numbase","2")):this.sign===Ri.signcdot?(r.setAttribute("sign","C"),r.setAttribute("dot","true")):this.sign===Ri.signo?r.setAttribute("sign","O"):this.sign===Ri.signo2?(r.setAttribute("sign","O"),r.setAttribute("num","2")):this.sign===Ri.signo3?(r.setAttribute("sign","O"),r.setAttribute("num","3")):this.sign===Ri.signo32?(r.setAttribute("sign","O"),r.setAttribute("num","3"),r.setAttribute("numbase","2")):this.sign===Ri.signocut?(r.setAttribute("sign","O"),r.setAttribute("slash","1")):this.sign===Ri.signocut32?(r.setAttribute("sign","O"),r.setAttribute("slash","1"),r.setAttribute("num","3"),r.setAttribute("numbase","2")):this.sign===Ri.signodot&&(r.setAttribute("sign","O"),r.setAttribute("dot","true"));let s=this.parent._meiDoc.createElementNS(xe,"section");e.appendChild(s);let o=this.parent._meiDoc.createElementNS(xe,"staff");o.setAttribute("n","1"),s.appendChild(o);let a=this.parent._meiDoc.createElementNS(xe,"layer");a.setAttribute("n","1"),o.appendChild(a);let c=null,d=null,f=this.parent._meiDoc.querySelector("facsimile");for(let p of this.systems){let m=p.getContents();if(console.debug(m),0===m.filter(M=>"clef"!==M.tagName&&"rest"!==M.tagName).length)continue;if(p.pb.canvasIRI!==c){let M=this.parent._meiDoc.createElementNS(xe,"pb"),F=Array.from(f.querySelectorAll("graphic")).filter(Y=>Y.getAttribute("target")===p.pb.canvasIRI);if(F.length>0)d=F[0];else{let Y=this.parent._meiDoc.createElementNS(xe,"surface");Y.setAttribute("xml:id","m-"+(0,ko.v4)()),d=this.parent._meiDoc.createElementNS(xe,"graphic"),d.setAttribute("xml:id","m-"+(0,ko.v4)()),d.setAttribute("target",p.pb.canvasIRI),Y.appendChild(d),f.appendChild(Y)}let L=d.closest("surface");M.setAttribute("facs","#"+L.getAttribute("xml:id")),M.setAttribute("xml:id",p.pb.id),c=p.pb.canvasIRI,a.appendChild(M)}let y=this.parent._meiDoc.createElementNS(xe,"zone"),_="m"+(0,ko.v4)();y.setAttribute("xml:id",_),y.setAttribute("ulx",Math.round(p.sb.zone.ulx).toString()),y.setAttribute("uly",Math.round(p.sb.zone.uly).toString()),y.setAttribute("lrx",Math.round(p.sb.zone.lrx).toString()),y.setAttribute("lry",Math.round(p.sb.zone.lry).toString()),d.appendChild(y);let I=this.parent._meiDoc.createElementNS(xe,"sb");I.setAttribute("facs","#"+y.getAttribute("xml:id")),I.setAttribute("xml:id",p.sb.id),a.appendChild(I),m.forEach(M=>{M.hasAttribute("color")&&M.removeAttribute("color"),M.hasAttribute("type")&&M.removeAttribute("type"),"ligature"===M.tagName&&M.removeAttribute("form"),a.appendChild(M)})}return e}_generateScoreDef(){let e=this.parent._meiDoc.createElementNS(xe,"scoreDef"),t=this.parent._meiDoc.createElementNS(xe,"staffGrp");e.appendChild(t);let i=this.parent._meiDoc.createElementNS(xe,"staffDef");return i.setAttribute("n","1"),i.setAttribute("lines","5"),i.setAttribute("notationtype",this.parent.notationType),this.parent.notationSubtype&&i.setAttribute("notationsubtype",this.parent.notationSubtype),t.appendChild(i),e}}class cF extends Lg{constructor(e,t){super(e,t),this.voice=Gn.tenor,this.repetitions=1}generatePartXML(){let e=super.generatePartXML();if(this.repetitions>1){let t=this.parent._meiDoc.createElementNS(xe,"dir");t.setAttribute("n",(this.repetitions-1).toString()),t.setAttribute("layer","1"),console.debug(e),console.debug(e.querySelector("note,ligature,rest"));let i=e.querySelector("note,ligature,rest").getAttribute("xml:id");console.debug(e),console.debug(this.endingId);let r=void 0!==this.endingId?Array.from(e.querySelectorAll("note,rest")).find(a=>a.getAttribute("xml:id")===this.endingId):e.querySelector("layer").lastElementChild,s=null===r.closest("ligature")?r.getAttribute("xml:id"):r.closest("ligature").getAttribute("xml:id");t.setAttribute("plist","#"+i+" #"+s),t.setAttribute("follows","#"+s),e.querySelector("staff").appendChild(t),t.insertAdjacentHTML("beforebegin","\x3c!-- The @n attribute on <dir> is used to represent the number of repetitions in a machine readable format. --\x3e")}return e}}const xe="http://www.music-encoding.org/ns/mei";class ab{constructor(e){this.metadata=new kq,this.metadata.sourceIRI=e,this.parts=[],this._createSkeletonMEI()}get notationType(){return/Ars[_ ](antiqua|nova)/.test(this.notationSubtype)?"mensural.black":"mensural.white"}static fromXML(e){var t,i,r,s,o;let a=e.documentElement,c="";try{let M=a.querySelectorAll("sourceDesc");for(let F of Array.from(M))for(let L of Array.from(F.querySelectorAll("source"))){if(""!==c)break;if("IIIF"===L.getAttribute("targettype")){c=L.getAttribute("target");break}}}catch(M){console.debug(M)}let d=new ab(c);for(let M of Array.from(a.querySelectorAll("manifestation")))if(M.querySelector("titleStmt")){let F=null===(i=null===(t=M.querySelector("titleStmt"))||void 0===t?void 0:t.querySelector("title"))||void 0===i?void 0:i.querySelector("identifier");if(F&&"siglum"===F.getAttribute("label")){d.metadata.siglum=F.textContent;break}}let f=null===(r=a.querySelector("fileDesc"))||void 0===r?void 0:r.querySelector("titleStmt");if(f){f.querySelector("title")&&(d.metadata.shortTitle=f.querySelector("title").textContent);for(let M of Array.from(null===(s=f.querySelector("respStmt"))||void 0===s?void 0:s.querySelectorAll("persName")))switch(M.getAttribute("role").toLowerCase()){case"encoder":case"proofreader":case"editor":let F={name:M.textContent,type:M.getAttribute("role").toLowerCase()};d.metadata.contributors.push(F)}}if(a.querySelector("workList")){let M=a.querySelector("work");if(M&&(M.querySelector("title")&&(d.metadata.shortTitle=M.querySelector("title").textContent),M.querySelector("composer")&&(d.metadata.composerName=M.querySelector("composer").textContent),M.querySelector("classification"))){let F=M.querySelector("classification").querySelector("termList");if(F)for(let L of Array.from(F.querySelectorAll("term"))){switch(L.textContent){case"Motet":case"Song":case"Conductus":case"Mass Movement":case"Plainchant":d.metadata.genre=L.textContent}if(""!==d.metadata.genre)break}}}let m=a.querySelector("facsimile"),y=Array.from(m.querySelectorAll("surface")),_=Array.from(m.querySelectorAll("zone"));const I=Array.from(a.querySelectorAll("part"));for(const M of I){let F=M.querySelector("staffDef");console.assert(F.hasAttribute("label"));let L=F.getAttribute("label"),Y=/^[tT]enor/.test(L)?new cF(d,M.getAttribute("xml:id")):new Lg(d,M.getAttribute("xml:id"));Y.voice=Gn[L],d.parts.push(Y);let re=F.querySelector("mensur"),Ee="";d.notationSubtype=F.hasAttribute("notationsubtype")?F.getAttribute("notationsubtype"):"",F.hasAttribute("modusminor")?Y.modus=F.getAttribute("modusminor"):re&&re.hasAttribute("modusminor")&&(Y.modus=re.getAttribute("modusminor")),F.hasAttribute("tempus")?Y.tempus=F.getAttribute("tempus"):re&&re.hasAttribute("tempus")&&(Y.tempus=re.getAttribute("tempus")),F.hasAttribute("prolatio")?Y.prolatio=F.getAttribute("prolatio"):re&&re.hasAttribute("prolatio")&&(Y.prolatio=re.getAttribute("prolatio")),F.hasAttribute("sign")?Ee+=F.getAttribute("sign"):re&&re.hasAttribute("sign")&&(Ee+=re.getAttribute("sign")),(F.hasAttribute("slash")&&"1"===F.getAttribute("slash")||re&&re.hasAttribute("slash")&&"1"===re.getAttribute("slash"))&&(Ee+="|"),(F.hasAttribute("dot")&&"true"===F.getAttribute("dot")||re&&re.hasAttribute("dot")&&"true"===re.getAttribute("dot"))&&(Ee+="."),F.hasAttribute("num")?Ee+=F.getAttribute("num"):re&&re.hasAttribute("num")&&(Ee+=re.getAttribute("num")),F.hasAttribute("numbase")?Ee=Ee+"/"+F.getAttribute("numbase"):re&&re.hasAttribute("numbase")&&(Ee=Ee+"/"+re.getAttribute("numbase")),""===Ee&&(Ee="N/A"),Y.sign=Ee;const At=M.querySelector("layer");if(/^[tT]enor/.test(Y.voice)){const yt=M.querySelector("dir");if(yt){const dn=Y;dn.repetitions=Number(yt.getAttribute("n"))+1;const Kn=yt.getAttribute("plist").match(/^#[-\w\d]+ #([-\w\d]+)$/);Kn.length>1&&(dn.endingId=Kn[1])}}const Ct=Array.from(At.querySelectorAll("pb,sb,clef,note,rest,mensur"));let un=null,Pt=null;for(const yt of Ct)if("pb"===yt.tagName){let xi=function(Yn){fetch(c).then(Ie=>Ie.json()).then(Ie=>{let Ye=Ie.sequences[0].canvases;Yn.index=Ye.findIndex(rt=>rt["@id"]===Yn.canvasIRI),Yn.codedVal=Ye[Yn.index].label})},dn=yt.getAttribute("facs").split("#")[1];console.assert(y.some(Yn=>Yn.getAttribute("xml:id")===dn));let Hn=y.find(Yn=>Yn.getAttribute("xml:id")===dn).querySelector("graphic");un=new lF(Hn.getAttribute("target"),yt.getAttribute("xml:id")),xi(un)}else if("sb"===yt.tagName){let dn;if(yt.hasAttribute("facs")){let Kn=yt.getAttribute("facs").split("#")[1];console.assert(_.some(xi=>xi.getAttribute("xml:id")===Kn));let Hn=_.find(xi=>xi.getAttribute("xml:id")===Kn);dn=new wS({ulx:Number(Hn.getAttribute("ulx")),uly:Number(Hn.getAttribute("uly")),lrx:Number(Hn.getAttribute("lrx")),lry:Number(Hn.getAttribute("lry"))},yt.getAttribute("xml:id"))}else dn=new wS({ulx:0,uly:0,lrx:0,lry:0},yt.getAttribute("xml:id"));Pt=new ES,Pt.sb=dn,Pt.pb=un,Y.addSystem(Pt)}else if("clef"===yt.tagName){let dn=rb.parseXML(yt);if("keySig"===(null===(o=yt.nextElementSibling)||void 0===o?void 0:o.tagName)){const Kn=yt.nextElementSibling.getAttribute("sig");if(/([1-9]|1[0-2])(f|s)/.test(Kn)){const Hn=/([1-9]|1[0-2])(f|s)/.exec(Kn),xi=parseInt(Hn[1]),Yn=Hn[2],Ie=["f","c","g","d","a","e","b"],Ye=["b","e","a","d","g","c","f"];for(let rt=0;rt<xi;rt++)"f"===Yn?dn.m_keySig.set(Ye[rt],"-"):dn.m_keySig.set(Ie[rt],"#")}}Pt.contents.m_list.push(dn)}else if("rest"===yt.tagName){let dn=sb.parseXML(yt);Pt.contents.m_list.push(dn)}else if("note"===yt.tagName){let dn=ju.parseXML(yt);Pt.contents.m_list.push(dn)}else if("mensur"===yt.tagName){let dn=ob.parseXML(yt);Pt.contents.m_list.push(dn)}}return d}generateXML(){this.parts.sort(Lg.compare),this._createSkeletonMEI();let e=this._meiDoc.querySelector("parts");for(let t of this.parts){if(0===t.systems.length)continue;let i=(/^[tT]enor/.test(t.voice),t.generatePartXML());0!==i.querySelector("layer").children.length&&e.appendChild(i)}return this._meiDoc}_createSkeletonMEI(){this._meiDoc=document.implementation.createDocument(xe,"mei",null);let e=this._meiDoc.documentElement;e.setAttribute("meiversion","5.0.0-dev"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");let t=this._generateHeader();e.appendChild(t);let i=this._meiDoc.createElementNS(xe,"music"),r=this._meiDoc.createElementNS(xe,"facsimile"),s=this._meiDoc.createElementNS(xe,"body"),o=this._meiDoc.createElementNS(xe,"mdiv"),a=this._meiDoc.createElementNS(xe,"parts");e.appendChild(i),i.appendChild(r),i.appendChild(s),s.appendChild(o),o.appendChild(a)}_generateHeader(){var e,t;let i=this._meiDoc.createElementNS(xe,"meiHead"),r=this._meiDoc.createElementNS(xe,"fileDesc");i.appendChild(r);let s=this._meiDoc.createElementNS(xe,"titleStmt");r.appendChild(s);let o=this._meiDoc.createElementNS(xe,"title");o.textContent=this.metadata.shortTitle,s.appendChild(o);let a=this._meiDoc.createElementNS(xe,"composer");a.textContent=this.metadata.composerName,s.appendChild(a);let c=this._meiDoc.createElementNS(xe,"funder"),d=this._meiDoc.createElementNS(xe,"funder"),f=this._meiDoc.createElementNS(xe,"corpName"),p=this._meiDoc.createElementNS(xe,"corpName");f.textContent="Brandeis University",c.appendChild(f),p.textContent="National Endowment for the Humanities (NEH)",d.appendChild(p),s.appendChild(c),s.appendChild(d);let m=this._meiDoc.createElementNS(xe,"respStmt");s.appendChild(m);let y=this._meiDoc.createElementNS(xe,"persName");y.textContent="Karen Desmond",y.setAttribute("role","project director"),y.setAttribute("auth","VIAF"),y.setAttribute("auth.uri","http://viaf.org/viaf/"),y.setAttribute("codedval","316001213"),m.appendChild(y);for(let Vh of this.metadata.contributors){let nc=this._meiDoc.createElementNS(xe,"persName");nc.textContent=Vh.name,nc.setAttribute("role",Vh.type),m.appendChild(nc)}let _=this._meiDoc.createElementNS(xe,"pubStmt");r.appendChild(_);let I=this._meiDoc.createElementNS(xe,"publisher");_.appendChild(I);let M=this._meiDoc.createElementNS(xe,"persName");M.textContent="Karen Desmond",I.appendChild(M);let F=this._meiDoc.createElementNS(xe,"corpName");F.textContent="Brandeis University",I.appendChild(F);let L=this._meiDoc.createElementNS(xe,"date");L.textContent=(new Date).getFullYear().toString(),_.appendChild(L);let Y=this._meiDoc.createElementNS(xe,"availability");_.appendChild(Y);let re=this._meiDoc.createElementNS(xe,"useRestrict");re.textContent="Available for purposes of academic research and teaching only.",Y.appendChild(re);let Ee=this._meiDoc.createElementNS(xe,"seriesStmt");r.appendChild(Ee);let At=this._meiDoc.createElementNS(xe,"title");At.textContent="Measuring Polyphony: Digital Encodings of Late Medieval Music",Ee.appendChild(At);let Ct=this._meiDoc.createElementNS(xe,"editor");Ee.appendChild(Ct);let un=this._meiDoc.createElementNS(xe,"persName");un.textContent="Karen Desmond",Ct.appendChild(un);let Pt=this._meiDoc.createElementNS(xe,"identifier");Ee.appendChild(Pt);let yt=this._meiDoc.createElementNS(xe,"ref");yt.setAttribute("targettype","home_page"),yt.setAttribute("target","http://www.measuringpolyphony.org/"),Pt.appendChild(yt);let dn=this._meiDoc.createElementNS(xe,"notesStmt"),Kn=this._meiDoc.createElementNS(xe,"annot");Kn.setAttribute("label","original_clefs"),dn.appendChild(Kn);let Hn=this._meiDoc.createElementNS(xe,"annot");Hn.setAttribute("label","commentary"),dn.appendChild(Hn),r.appendChild(dn);let xi=this._meiDoc.createElementNS(xe,"sourceDesc");r.appendChild(xi);let Yn=this._meiDoc.createElementNS(xe,"source");xi.appendChild(Yn),Yn.setAttribute("targettype","IIIF"),Yn.setAttribute("target",this.metadata.sourceIRI);let Ie=this._meiDoc.createElementNS(xe,"locus");Yn.appendChild(Ie),Ie.textContent=null===(t=null===(e=this.parts[0])||void 0===e?void 0:e.systems[0])||void 0===t?void 0:t.pb.codedVal;let Ye=this._meiDoc.createElementNS(xe,"encodingDesc");i.appendChild(Ye);let rt=this._meiDoc.createElementNS(xe,"appInfo");Ye.appendChild(rt);let gt=this._meiDoc.createElementNS(xe,"application");gt.setAttribute("xml:id","MPEditor"),rt.appendChild(gt);let Qn=this._meiDoc.createElementNS(xe,"name");Qn.textContent="Measuring Polyphony Editor",gt.appendChild(Qn);let er=this._meiDoc.createElementNS(xe,"editorialDecl");Ye.appendChild(er);let In=this._meiDoc.createElementNS(xe,"p");In.textContent="This MEI encoding in mensural notation was made using the Measuring Polyphony Editor, transcribed from IIIF images of the original manuscript source one staff at a time, entering the pitches and rhythms for each stave using a combination of number and letter keystrokes. The Measuring Polyphony Editor generates two MEI files from this user input: an MEI parts file that captures each voice part entered, and an MEI score file that scores up the voice parts, which is viewable here.",er.appendChild(In);let Ps=this._meiDoc.createElementNS(xe,"projectDesc");Ye.appendChild(Ps);let jn=this._meiDoc.createElementNS(xe,"p");jn.textContent="The Measuring Polyphony Editor, funded by a 2019-2020 NEH Digital Humanities Grant, is a prototype tool that allows a variety of modern readers (students and experts, musicologists, music theorists, those interested in the history of music notation, counterpoint, medieval palaeography and/or manuscript studies) to access and contribute transcriptions of music directly linked to digital images of the medieval manuscripts, and to learn about the original notation. This tool will offer new possibilities for the analysis and interpretation of late medieval music. In a broader humanities context, the project investigates how modeling the meanings of notational signs can lead to new understandings of the interaction between the sign and the signified, and of the relationship between notational style and changes in musical style across time and place.",Ps.appendChild(jn);let Eb=this._meiDoc.createElementNS(xe,"workList");i.appendChild(Eb);let gr=this._meiDoc.createElementNS(xe,"work");Eb.appendChild(gr);let tc=this._meiDoc.createElementNS(xe,"identifier");tc.setAttribute("type","catalogue_number"),gr.appendChild(tc);let qu=this._meiDoc.createElementNS(xe,"title");qu.textContent=this.metadata.shortTitle,gr.appendChild(qu);let ua=this._meiDoc.createElementNS(xe,"composer");ua.textContent=this.metadata.composerName,gr.appendChild(ua);let Lh=this._meiDoc.createElementNS(xe,"incip");gr.appendChild(Lh);for(let Vh of this.parts){let nc=this._meiDoc.createElementNS(xe,"incipText");nc.setAttribute("label",Vh.voice.toString()),nc.setAttribute("corresp","#"+Vh.voice.toString().replace(" ","")),nc.innerHTML="<lg><l>["+Vh.voice.toString().toUpperCase()+"]</l></lg>",Lh.appendChild(nc)}let $2=this._meiDoc.createElementNS(xe,"classification");gr.appendChild($2);let G2=this._meiDoc.createElementNS(xe,"termList");$2.appendChild(G2);let W2=this._meiDoc.createElementNS(xe,"term");W2.textContent=this.metadata.genre,G2.appendChild(W2);let q2=this._meiDoc.createElementNS(xe,"manifestationList");i.appendChild(q2);let Gg=this._meiDoc.createElementNS(xe,"manifestation");Gg.setAttribute("singleton","true"),q2.appendChild(Gg);let Z2=this._meiDoc.createElementNS(xe,"titleStmt");Gg.appendChild(Z2);let K2=this._meiDoc.createElementNS(xe,"title");Z2.appendChild(K2);let GS=this._meiDoc.createElementNS(xe,"identifier");GS.setAttribute("label","siglum"),GS.textContent=this.metadata.siglum,K2.appendChild(GS);let Y2=this._meiDoc.createElementNS(xe,"physLoc");Gg.appendChild(Y2);let Db=this._meiDoc.createElementNS(xe,"repository");Y2.appendChild(Db);let Q2=this._meiDoc.createElementNS(xe,"corpName");Q2.textContent="[LIBRARY NAME]",Db.appendChild(Q2);let X2=this._meiDoc.createElementNS(xe,"identifier");Db.appendChild(X2),X2.textContent="[SHELFMARK]";let WS=this._meiDoc.createElementNS(xe,"ptr");Db.appendChild(WS),WS.setAttribute("targettype","IIIF"),WS.setAttribute("target",this.metadata.sourceIRI);let J2=this._meiDoc.createElementNS(xe,"notesStmt");Gg.appendChild(J2);let eL=this._meiDoc.createElementNS(xe,"annot");return eL.textContent="Primary manuscript source for this encoding.",J2.appendChild(eL),i}getSystems(){let e=[];for(let t of this.parts)e.unshift(...t.systems);return e}getSystem(e){let i=this.getSystems().filter(r=>r.id===e);return i.length>0?i[0]:null}getPart(e){let t=this.parts.filter(i=>i.voice===e);return t.length>0?t[0]:null}getOrCreatePart(e){if(this.parts.some(i=>i.voice===e))return this.getPart(e);let t=/^[tT]enor/.test(e)?new cF(this):new Lg(this);return t.voice=e,this.parts.push(t),this.parts.sort(Lg.compare),t}getPb(e){let t=new Set;for(let i of this.parts)i.systems.forEach(r=>{t.add(r.pb)});for(let i of t.values())if(i.index===e)return i;return null}}class kq{constructor(){this.contributors=[]}}function uF(n,e){switch(n){case"gallica":return"https://gallica.bnf.fr/iiif/ark:/"+e+"/manifest.json";case"ecodices":return"https://www.e-codices.unifr.ch/metadata/iiif/"+e+"/manifest.json";case"iiif":return decodeURIComponent(e);default:return""}}const dF=new RegExp("https?://gallica.bnf.fr/ark:/([a-z0-9]+/[a-z0-9]+)"),hF=new RegExp("https?://gallica.bnf.fr/iiif/ark:/([a-z0-9]+/[a-z0-9]+)/manifest.json"),fF=new RegExp("https?://www.e-codices.unifr.ch/[a-z]{2}/list/one/([a-z]+)/([-a-zA-Z0-9]+)"),lb=new RegExp("https?://www.e-codices.unifr.ch/metadata/iiif/([-a-zA-Z0-9]+)/manifest.json"),pF=new RegExp("https?://.*");var Vg=(()=>(function(n){n.NONE="None",n.SEMIBREVE="semibrevis",n.BREVE="brevis",n.LONG="longa"}(Vg||(Vg={})),Vg))();let Ql=(()=>{class n{constructor(){this.meiDoc=null,this.editorialMode=!1,this.scoreOptions={barlines:Vg.NONE,modernClefs:!1}}get mei(){return this.meiDoc}set mei(t){this.meiDoc=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ot(n){const e=document.createElement(n),t=Array.prototype.slice.call(arguments,1);for(;t.length;)gF(e,t.shift());return e}function gF(n,e){if(null!=e)if("object"!=typeof e&&"function"!=typeof e)n.appendChild(document.createTextNode(e));else if(e instanceof window.Node)n.appendChild(e);else if(e instanceof Array){const t=e.length;for(let i=0;i<t;i++)gF(n,e[i])}else mF(n,e)}function mF(n,e){for(const t in e)!e.hasOwnProperty(t)||("style"===t?Rq(n,e.style):n.setAttribute(t,e[t]))}function Rq(n,e){if(e){if("object"!=typeof e)return void(n.style.cssText=e);for(const t in e)!e.hasOwnProperty(t)||(n.style[t]=e[t])}}function _F(n){this.name="DivaParentElementNotFoundException",this.message=n,this.stack=(new Error).stack}function yF(n){this.name="NotAnIIIFManifestException",this.message=n,this.stack=(new Error).stack}function vF(n){this.name="ObjectDataNotSuppliedException",this.message=n,this.stack=(new Error).stack}Se(733),Se(447),_F.prototype=new Error,yF.prototype=new Error,vF.prototype=new Error;const Ms={Events:new class{constructor(){this._cache={}}publish(e,t,i){if(this._cache[e]){const r=this._cache[e];if(void 0!==r.global){const s=r.global,o=s.length;for(let a=0;a<o;a++)s[a].apply(i||null,t||[])}if(i&&void 0!==i.getInstanceId){const s=i.getInstanceId();if(this._cache[e][s]){const o=this._cache[e][s],a=o.length;for(let c=0;c<a;c++)o[c].apply(i,t||[])}}}}subscribe(e,t,i){return this._cache[e]||(this._cache[e]={}),"string"==typeof i?(this._cache[e][i]||(this._cache[e][i]=[]),this._cache[e][i].push(t)):(this._cache[e].global||(this._cache[e].global=[]),this._cache[e].global.push(t)),i?[e,t,i]:[e,t]}unsubscribe(e,t){const i=e[0];if(this._cache[i]){let r;const s=3===e.length?e[2]:"global";if(r=this._cache[i][s],!r)return!1;if(t)return delete this._cache[i][s],r.length>0;let o=r.length;for(;o--;)if(r[o]===e[1])return this._cache[i][s].splice(o,1),!0}return!1}unsubscribeAll(e){if(e){const t=Object.keys(this._cache);let r,i=t.length;for(;i--;)r=t[i],void 0!==this._cache[r][e]&&delete this._cache[r][e]}else this._cache={}}}},DS_onDoubleClick=function(n,e){n.addEventListener("dblclick",function(i){i.ctrlKey||e(i,cb(i.currentTarget,i))});const t=bF(500);n.addEventListener("contextmenu",function(i){i.preventDefault(),i.ctrlKey&&(t.isTriggered()?(t.reset(),e(i,cb(i.currentTarget,i))):t.trigger())})},DS_onPinch=function(n,e){let t=0;n.addEventListener("touchstart",function(i){i.preventDefault(),2===i.originalEvent.touches.length&&(t=AS(i.originalEvent.touches[0].clientX,i.originalEvent.touches[0].clientY,i.originalEvent.touches[1].clientX,i.originalEvent.touches[1].clientY))}),n.addEventListener("touchmove",function(i){if(i.preventDefault(),2===i.originalEvent.touches.length){const r=i.originalEvent.touches,s=AS(r[0].clientX,r[0].clientY,r[1].clientX,r[1].clientY);Math.abs(s-t)>0&&e(i,cb(i.currentTarget,{pageX:(r[0].clientX+r[1].clientX)/2,pageY:(r[0].clientY+r[1].clientY)/2}),t,s)}})},DS_onDoubleTap=function(n,e){const t=bF(250);let i=null;n.addEventListener("touchend",r=>{if(r.preventDefault(),t.isTriggered()){t.reset();const s={pageX:r.originalEvent.changedTouches[0].clientX,pageY:r.originalEvent.changedTouches[0].clientY};AS(i.pageX,i.pageY,s.pageX,s.pageY)<50&&e(r,cb(r.currentTarget,s)),i=null}else i={pageX:r.originalEvent.changedTouches[0].clientX,pageY:r.originalEvent.changedTouches[0].clientY},t.trigger()})};function AS(n,e,t,i){return Math.sqrt((t-n)*(t-n)+(i-e)*(i-e))}function bF(n){let e=!1,t=null;return{trigger(){e=!0,i(),t=setTimeout(function(){e=!1,t=null},n)},isTriggered:()=>e,reset(){e=!1,i()}};function i(){null!==t&&(clearTimeout(t),t=null)}}function cb(n,e){const t=n.getBoundingClientRect();return{left:e.pageX-t.left,top:e.pageY-t.top}}var CF=Se(127);class zq{constructor(e,t){this.page=e,this._viewerCore=t,this._innerElement=this._viewerCore.getSettings().innerElement,this._pageToolsElem=null,this.labelWidth=0}mount(){null===this._pageToolsElem&&(this._buttons=this._initializePageToolButtons(),this._pageToolsElem=Ot("div",{class:"diva-page-tools-wrapper"},Ot("div",{class:"diva-page-tools"},this._buttons)),this._pageLabelsElem=Ot("div",{class:"diva-page-labels-wrapper"},Ot("div",{class:"diva-page-labels"},this._viewerCore.settings.manifest.pages[this.page].l))),this.refresh(),this._innerElement.appendChild(this._pageToolsElem),this._innerElement.appendChild(this._pageLabelsElem)}_initializePageToolButtons(){const e=this._viewerCore.getSettings(),t=this._viewerCore.getPublicInstance(),i=this.page;return this._viewerCore.getPageTools().map(r=>{const s=r.pageToolsIcon.cloneNode(!0);return s.addEventListener("click",o=>{r.handleClick.call(r,o,e,t,i)},!1),s.addEventListener("touchend",o=>{o.preventDefault(),r.handleClick.call(r,o,e,t,i)},!1),s})}unmount(){this._innerElement.removeChild(this._pageToolsElem),this._innerElement.removeChild(this._pageLabelsElem)}refresh(){const e=this._viewerCore.getPageRegion(this.page,{includePadding:!0,incorporateViewport:!0});let t=window.getComputedStyle(this._innerElement,null).getPropertyValue("margin-left");this._pageToolsElem.style.top=`${e.top}px`,this._pageToolsElem.style.left=e.left-parseInt(t)+"px",this._pageLabelsElem.style.top=`${e.top}px`,this._pageLabelsElem.style.left=e.right-parseInt(t)-this.labelWidth-5+"px"}}class $q{constructor(e){if(this._viewerCore=e,this._viewerState=e.getInternalState(),this._overlays=[],this._viewerCore.getPageTools().length){const t=e.getSettings().numPages;for(let i=0;i<t;i++){const r=new zq(i,e);this._overlays.push(r),this._viewerCore.addPageOverlay(r);let s=document.createElement("span");s.innerHTML=e.settings.manifest.pages[i].l,s.classList.add("diva-page-labels"),s.setAttribute("style","display: inline-block;"),document.body.appendChild(s);let o=s.clientWidth;document.body.removeChild(s),r.labelWidth=o}}}onDoubleClick(e,t){const i=this._viewerCore.getSettings(),r=e.ctrlKey?i.zoomLevel-1:i.zoomLevel+1,s=this._viewerCore.getPagePositionAtViewportOffset(t);this._viewerCore.zoom(r,s)}onPinch(e,t,i,r){const s=this._viewerCore.getInternalState(),o=this._viewerCore.getSettings();let a=Math.log(Math.pow(2,o.zoomLevel)*r/(i*Math.log(2)))/Math.log(2);if(a=Math.max(o.minZoomLevel,a),a=Math.min(o.maxZoomLevel,a),a===o.zoomLevel)return;const c=this._viewerCore.getPagePositionAtViewportOffset(t),f=this._viewerCore.getCurrentLayout().getPageToViewportCenterOffset(c.anchorPage,s.viewport),p=1/Math.pow(2,o.zoomLevel-a);this._viewerCore.reload({zoomLevel:a,goDirectlyTo:c.anchorPage,horizontalOffset:f.x-c.offset.left+c.offset.left*p,verticalOffset:f.y-c.offset.top+c.offset.top*p})}onViewWillLoad(){this._viewerCore.publish("DocumentWillLoad",this._viewerCore.getSettings())}onViewDidLoad(){this._handleZoomLevelChange();const e=this._viewerCore.getSettings().activePageIndex,t=this._viewerCore.getPageName(e);this._viewerCore.publish("DocumentDidLoad",e,t)}onViewDidUpdate(e,t){const i=null!==t?t:function(n,e,t){const i=t.top+t.height/2,r=t.left+t.width/2,s=(0,CF.maxBy)(n,o=>{const a=e.getPageDimensions(o),c=e.getPageOffset(o,{includePadding:!0}),f=c.top+a.height/2,p=Math.max(Math.abs(r-(c.left+a.width/2))-a.width/2,0),m=Math.max(Math.abs(i-f)-a.height/2,0);return-(p*p+m*m)});return null!=s?s:null}(e,this._viewerCore.getCurrentLayout(),this._viewerCore.getViewport());let r=this._viewerState.viewport.intersectionTolerance;this._viewerState.viewport.intersectionTolerance=0;let s=e.filter(o=>this._viewerState.renderer.isPageVisible(o));this._viewerState.viewport.intersectionTolerance=r,null!==i&&this._viewerCore.setCurrentPages(i,s),null!==t&&this._viewerCore.publish("ViewerDidJump",t),this._handleZoomLevelChange()}_handleZoomLevelChange(){const e=this._viewerState,t=e.options.zoomLevel;e.oldZoomLevel!==t&&e.oldZoomLevel>=0&&(this._viewerCore.publish(e.oldZoomLevel<t?"ViewerDidZoomIn":"ViewerDidZoomOut",t),this._viewerCore.publish("ViewerDidZoom",t)),e.oldZoomLevel=t}destroy(){this._overlays.forEach(e=>{this._viewerCore.removePageOverlay(e)},this)}}class Wq{constructor(e){this._viewerCore=e}onDoubleClick(e,t){const i=this._viewerCore.getPagePositionAtViewportOffset(t),r=this._viewerCore.getCurrentLayout(),s=this._viewerCore.getViewport(),o=r.getPageToViewportCenterOffset(i.anchorPage,s);this._viewerCore.reload({inGrid:!1,goDirectlyTo:i.anchorPage,horizontalOffset:o.x+i.offset.left,verticalOffset:o.y+i.offset.top})}onPinch(){this._viewerCore.reload({inGrid:!1})}onViewWillLoad(){}onViewDidLoad(){}onViewDidUpdate(e,t){if(0===e.length)return;let i=this._viewerCore.viewerState.viewport.intersectionTolerance;this._viewerCore.viewerState.viewport.intersectionTolerance=0;let r=e.filter(p=>this._viewerCore.viewerState.renderer.isPageVisible(p));if(this._viewerCore.viewerState.viewport.intersectionTolerance=i,null!==t)return void this._viewerCore.setCurrentPages(t,r);const s=this._viewerCore.getCurrentLayout(),o=[];e.forEach(p=>{const m=s.getPageInfo(p).group;(0===o.length||m!==o[o.length-1])&&o.push(m)});const a=this._viewerCore.getViewport();let c;c=1===o.length||o[0].region.top>=a.top?o[0]:o[1].region.bottom<=a.bottom?o[1]:function(n,e){const t=e.top+e.height/2;return(0,CF.maxBy)(n,i=>-Math.abs(t-(i.region.top+i.dimensions.height/2)))}(o,a);const d=this._viewerCore.getSettings().activePageIndex;c.pages.some(p=>p.index===d)||this._viewerCore.setCurrentPages(c.pages[0].index,r)}destroy(){}}class Zq{constructor(){this._pages={},this._renderedPages=[],this._renderedPageMap={}}addOverlay(e){(this._pages[e.page]||(this._pages[e.page]=[])).push(e),this._renderedPageMap[e.page]&&e.mount()}removeOverlay(e){const t=e.page,i=this._pages[t];if(!i)return;const r=i.indexOf(e);-1!==r&&(this._renderedPageMap[t]&&i[r].unmount(),i.splice(r,1),0===i.length&&delete this._pages[t])}updateOverlays(e){const t=this._renderedPages,i={};e.map(r=>{i[r]=!0,this._renderedPageMap[r]||(this._renderedPageMap[r]=!0,this._invokeOnOverlays(r,s=>{s.mount()}))}),t.map(r=>{i[r]?this._invokeOnOverlays(r,s=>{s.refresh()}):(delete this._renderedPageMap[r],this._invokeOnOverlays(r,s=>{s.unmount()}))}),this._renderedPages=e}_invokeOnOverlays(e,t){const i=this._pages[e];i&&i.map(r=>t(r))}}class wF{constructor(e,t){this._rows=e,this._cols=t,this._map=new Array(e).fill(null).map(()=>new Array(t).fill(!1))}isLoaded(e,t){return e>=this._rows||t>=this._cols||this._map[e][t]}set(e,t,i){this._map[e][t]=i}}class Kq{constructor(e){this._levels=e;const t=this._urlsToTiles={};e.forEach(i=>{i.tiles.forEach(r=>{t[r.url]={zoomLevel:i.zoomLevel,row:r.row,col:r.col}})}),this.clear()}clear(){const e=this._loadedByLevel={};this._levels.forEach(t=>{e[t.zoomLevel]=new wF(t.rows,t.cols)})}getTiles(e){const t=[],i=this._levels[0].zoomLevel,r=new wF(this._levels[0].rows,this._levels[0].cols);let s;if(null===e)s=0;else{const c=Math.ceil(e);s=function(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].zoomLevel<=c)return i;return-1}(this._levels)}this._levels.slice(0,s+1).reverse().concat(this._levels.slice(s+1)).forEach(c=>{const d=this._loadedByLevel[c.zoomLevel];let f=c.tiles.filter(m=>d.isLoaded(m.row,m.col));const p=Math.pow(2,i-c.zoomLevel);f=f.filter(m=>{let y=!1;const _=m.row*p,I=m.col*p;for(let M=0;M<p;M++)for(let F=0;F<p;F++)r.isLoaded(_+M,I+F)||(y=!0,r.set(_+M,I+F,!0));return y}),t.push(f)},this),t.reverse();const a=[];return t.forEach(c=>{a.push.apply(a,c)}),a}updateFromCache(e){this.clear(),this._levels.forEach(t=>{const i=this._loadedByLevel[t.zoomLevel];t.tiles.forEach(r=>{e.has(r.url)&&i.set(r.row,r.col,!0)})},this)}updateWithLoadedUrls(e){e.forEach(t=>{const i=this._urlsToTiles[t];this._loadedByLevel[i.zoomLevel].set(i.row,i.col,!0)},this)}}class Qq{constructor(e,t){const i=function(n,e){const t=null===e?n.pageLayouts:function(n,e){const t=Math.pow(2,e-n.maxZoomLevel);return n.pageLayouts.map(i=>({dimensions:DF(i.dimensions,t),pages:i.pages.map(r=>({index:r.index,groupOffset:{top:Math.floor(r.groupOffset.top*t),left:Math.floor(r.groupOffset.left*t)},dimensions:DF(r.dimensions,t)}))}))}(n,e),i=function(n,e){let t,i;const r=n.padding.document;return n.verticallyOriented?(t="width",i=r.left+r.right):(t="height",i=r.top+r.bottom),i+e.reduce((s,o)=>Math.max(o.dimensions[t],s),0)}(n,t);let r=n.verticallyOriented?n.padding.document.top:n.padding.document.left;const s=[],o={top:n.padding.page.top,left:n.padding.page.left};let a,c;return t.forEach((d,f)=>{let p,m;n.verticallyOriented?(p=r,m=(i-d.dimensions.width)/2):(p=(i-d.dimensions.height)/2,m=r);const y={top:p,bottom:p+o.top+d.dimensions.height,left:m,right:m+o.left+d.dimensions.width};s.push({index:f,dimensions:d.dimensions,pages:d.pages,region:y,padding:o}),r=n.verticallyOriented?y.bottom:y.right}),n.verticallyOriented?(a=r+o.top,c=i):(a=i,c=r+o.left),{dimensions:{height:a,width:c},pageGroups:s}}(e,t);this.dimensions=i.dimensions,this.pageGroups=i.pageGroups,this._pageLookup=function(n){const e={};return n.forEach(t=>{t.pages.forEach(i=>{e[i.index]={index:i.index,group:t,dimensions:i.dimensions,groupOffset:i.groupOffset}})}),e}(i.pageGroups)}getPageInfo(e){return this._pageLookup[e]||null}getPageDimensions(e){if(!this._pageLookup||!this._pageLookup[e])return null;const t=EF(this._pageLookup[e]);return{height:t.bottom-t.top,width:t.right-t.left}}getPageOffset(e,t){const i=this.getPageRegion(e,t);return i?{top:i.top,left:i.left}:null}getPageRegion(e,t){const i=this._pageLookup[e];if(!i)return null;const r=EF(i),s=i.group.padding;return t&&t.includePadding?{top:r.top+s.top,left:r.left+s.left,bottom:r.bottom,right:r.right}:{top:r.top,left:r.left,bottom:r.bottom+s.top,right:r.right}}getPageToViewportCenterOffset(e,t){const i=t.left,r=t.right-t.left,s=this.getPageOffset(e);return{x:i-s.left+parseInt(r/2,10),y:t.top-s.top+parseInt((t.bottom-t.top)/2,10)}}}function EF(n){const e=n.groupOffset.top+n.group.region.top,i=n.groupOffset.left+n.group.region.left;return{top:e,bottom:e+n.dimensions.height,left:i,right:i+n.dimensions.width}}function DF(n,e){return{height:Math.floor(n.height*e),width:Math.floor(n.width*e)}}const SS=Se(933)("diva:ImageCache");class nZ{constructor(e){this.maxKeys=(e=e||{maxKeys:100}).maxKeys||100,this._held={},this._urls={},this._lru=[]}get(e){const t=this._urls[e];return t?t.img:null}has(e){return!!this._urls[e]}put(e,t){let i=this._urls[e];i?(i.img=t,this._promote(i)):(i={img:t,url:e},this._urls[e]=i,this._tryEvict(1),this._lru.unshift(i))}_promote(e){const t=this._lru.indexOf(e);this._lru.splice(t,1),this._lru.unshift(e)}_tryEvict(e){const t=this.maxKeys-e;if(this._lru.length<=t)return;let i=this._lru.length-1;for(;;){const r=this._lru[i];if(!this._held[r.url]&&(SS("Evicting image %s",r.url),this._lru.splice(i,1),delete this._urls[r.url],this._lru.length<=t))break;if(0===i){SS.enabled&&SS("Cache overfull by %s (all entries are being held)",this._lru.length-t);break}i--}}acquire(e){this._held[e]=(this._held[e]||0)+1,this._promote(this._urls[e])}release(e){this._held[e]>1?this._held[e]--:delete this._held[e],this._tryEvict(0)}}class iZ{constructor(e){this._url=e.url,this._callback=e.load,this._errorCallback=e.error,this.timeoutTime=e.timeoutTime||0,this._aborted=this._complete=!1,this._crossOrigin=e.settings.imageCrossOrigin,this.timeout=setTimeout(()=>{this._image=new Image,this._image.crossOrigin=this._crossOrigin,this._image.onload=this._handleLoad.bind(this),this._image.onerror=this._handleError.bind(this),this._image.src=e.url},this.timeoutTime)}abort(){clearTimeout(this.timeout),this._image&&(this._image.onload=this._image.onerror=null,this._image.src=""),this._aborted=!0}_handleLoad(){this._aborted?console.error("ImageRequestHandler invoked on cancelled request for "+this._url):this._complete?console.error("ImageRequestHandler invoked on completed request for "+this._url):(this._complete=!0,this._callback(this._image))}_handleError(){this._errorCallback(this._image)}}const rZ_animate=function(n){const e=n.duration,t=n.parameters,i=n.onUpdate,r=n.onEnd,s=ub(),o=s+e,a={},c={},d=Object.keys(t);d.forEach(_=>{const I=t[_];a[_]=function(n,e,t){return i=>n+(e-n)*t(i)}(I.from,I.to,I.easing||SF)});let f=requestAnimationFrame(function p(){const _=ub();(function(_){d.forEach(I=>{c[I]=a[I](_)})})(Math.min((_-s)/e,1)),i(c),_<o?f=requestAnimationFrame(p):y({interrupted:!1})});return{cancel(){null!==f&&(cancelAnimationFrame(f),y({interrupted:!0}))}};function y(_){f=null,r&&r(_)}};let ub;function SF(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1}ub="undefined"!=typeof performance&&performance.now?()=>performance.now():()=>Date.now();class xF{constructor(e,t){this._viewport=e.viewport,this._outerElement=e.outerElement,this._documentElement=e.innerElement,this._settings=e.settings,this._hooks=t||{},this._canvas=Ot("canvas",{class:"diva-viewer-canvas"}),this._ctx=this._canvas.getContext("2d"),this.layout=null,this._sourceResolver=null,this._renderedPages=null,this._config=null,this._zoomLevel=null,this._compositeImages=null,this._renderedTiles=null,this._animation=null,this._cache=new nZ,this._pendingRequests={}}static getCompatibilityErrors(){return"undefined"!=typeof HTMLCanvasElement?null:["Your browser lacks support for the ",Ot("pre","canvas")," element. Please upgrade your browser."]}load(e,t,i){if(this._clearAnimation(),this._hooks.onViewWillLoad&&this._hooks.onViewWillLoad(),this._sourceResolver=i,this._config=e,this._compositeImages={},this._setLayoutToZoomLevel(t.zoomLevel),!this.layout.getPageInfo(t.anchorPage))throw new Error("invalid page: "+t.anchorPage);(this._canvas.width!==this._viewport.width||this._canvas.height!==this._viewport.height)&&(this._canvas.width=this._viewport.width,this._canvas.height=this._viewport.height),this.goto(t.anchorPage,t.verticalOffset,t.horizontalOffset),this._canvas.parentNode!==this._outerElement&&this._outerElement.insertBefore(this._canvas,this._outerElement.firstChild),this._hooks.onViewDidLoad&&this._hooks.onViewDidLoad()}_setViewportPosition(e){if(e.zoomLevel!==this._zoomLevel){if(null===this._zoomLevel)throw new TypeError("The current view is not zoomable");if(null===e.zoomLevel)throw new TypeError("The current view requires a zoom level");this._setLayoutToZoomLevel(e.zoomLevel)}this._goto(e.anchorPage,e.verticalOffset,e.horizontalOffset)}_setLayoutToZoomLevel(e){this.layout=new Qq(this._config,e),this._zoomLevel=e,mF(this._documentElement,{style:{height:this.layout.dimensions.height+"px",width:this.layout.dimensions.width+"px"}}),this._viewport.setInnerDimensions(this.layout.dimensions)}adjust(){this._clearAnimation(),this._render(),this._hooks.onViewDidUpdate&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),null)}_render(){const e=[];this.layout.pageGroups.forEach(i=>{if(!this._viewport.intersectsRegion(i.region))return;const r=i.pages.filter(function(s){return this.isPageVisible(s.index)},this).map(s=>s.index);e.push.apply(e,r)},this),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._paintOutline(e),e.forEach(i=>{if(!this._compositeImages[i]){const r=this.layout.getPageInfo(i),s=this._sourceResolver.getAllZoomLevelsForPage(r),o=new Kq(s);o.updateFromCache(this._cache),this._compositeImages[i]=o}},this),this._initiateTileRequests(e);const t=TF(this._renderedPages||[],e);t.removed.forEach(i=>{delete this._compositeImages[i]},this),this._renderedPages=e,this._paint(),this._hooks.onPageWillLoad&&t.added.forEach(i=>{this._hooks.onPageWillLoad(i)},this)}_paint(){const e=[];this._renderedPages.forEach(r=>{this._compositeImages[r].getTiles(this._zoomLevel).forEach(s=>{const o=MF(s,this._zoomLevel);this._isTileVisible(r,o)&&(e.push(s.url),this._drawTile(r,o,this._cache.get(s.url)))})});const t=this._cache,i=TF(this._renderedTiles||[],e);i.added.forEach(r=>{t.acquire(r)}),i.removed.forEach(r=>{t.release(r)}),i.removed&&this._renderedPages.forEach(r=>{this._compositeImages[r].updateFromCache(this._cache)},this),this._renderedTiles=e}_paintOutline(e){e.forEach(t=>{let i=this.layout.getPageInfo(t),r=this._getImageOffset(t),s=Math.max(0,(this._viewport.width-this.layout.dimensions.width)/2),o=Math.max(0,(this._viewport.height-this.layout.dimensions.height)/2),a=r.left-this._viewport.left+s,c=r.top-this._viewport.top+o,d=a<0?-a:0,f=c<0?-c:0,p=Math.max(0,a),m=Math.max(0,c),y=i.dimensions.width-d,_=i.dimensions.height-f;this._ctx.strokeStyle="#AAA",this._ctx.strokeRect(p+.5,m+.5,y,_)})}_initiateTileRequests(e){const t={},i=(r,s)=>{const o=this._compositeImages[s];t[r.url]=new iZ({url:r.url,timeoutTime:250,settings:this._settings,load:a=>{delete this._pendingRequests[r.url],this._cache.put(r.url,a),o===this._compositeImages[s]?(o.updateWithLoadedUrls([r.url]),this._isTileForSourceVisible(s,r)&&this._paint()):this._isTileForSourceVisible(s,r)&&this._paint()},error:()=>{delete this._pendingRequests[r.url]}})};for(let r=0;r<e.length;r++){const s=e[r],o=this._sourceResolver.getBestZoomLevelForPage(this.layout.getPageInfo(s)).tiles;for(let a=0;a<o.length;a++){const c=o[a];if(!this._cache.has(c.url)&&this._isTileForSourceVisible(s,c)){if(this._pendingRequests[c.url]){t[c.url]=this._pendingRequests[c.url],delete this._pendingRequests[c.url];continue}i(c,s)}}}for(const r in this._pendingRequests)this._pendingRequests[r].abort();this._pendingRequests=t}_drawTile(e,t,i){let r=this._getTileToDocumentOffset(e,t),s=Math.max(0,(this._viewport.width-this.layout.dimensions.width)/2),o=Math.max(0,(this._viewport.height-this.layout.dimensions.height)/2),a=r.left-this._viewport.left+s,c=r.top-this._viewport.top+o,d=a<0?-a:0,f=c<0?-c:0,p=Math.max(0,a),m=Math.max(0,c),y=d/t.scaleRatio,_=f/t.scaleRatio,I=Math.min(t.dimensions.width,i.width*t.scaleRatio)-d,M=Math.min(t.dimensions.height,i.height*t.scaleRatio)-f,F=Math.max(1,Math.round(I)),L=Math.max(1,Math.round(M));this._ctx.drawImage(i,y,_,F/t.scaleRatio,L/t.scaleRatio,p,m,F,L)}_isTileForSourceVisible(e,t){return this._isTileVisible(e,MF(t,this._zoomLevel))}_isTileVisible(e,t){const i=this._getTileToDocumentOffset(e,t);return this._viewport.intersectsRegion({top:i.top,bottom:i.top+t.dimensions.height,left:i.left,right:i.left+t.dimensions.width})}_getTileToDocumentOffset(e,t){const i=this._getImageOffset(e);return{top:i.top+t.offset.top,left:i.left+t.offset.left}}_getImageOffset(e){return this.layout.getPageOffset(e,{includePadding:!0})}goto(e,t,i){this._clearAnimation(),this._goto(e,t,i),this._hooks.onViewDidUpdate&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),e)}_goto(e,t,i){const r=this.layout.getPageOffset(e),o=r.top+t-Math.round(this._viewport.height/2),c=r.left+i-Math.round(this._viewport.width/2);this._viewport.top=o,this._viewport.left=c,this._render()}transitionViewportPosition(e){this._clearAnimation();const t=e.getPosition,i=this._hooks.onViewDidTransition;this._animation=rZ_animate({duration:e.duration,parameters:e.parameters,onUpdate:r=>{this._setViewportPosition(t(r)),this._hooks.onZoomLevelWillChange(r.zoomLevel),i&&i()},onEnd:r=>{e.onEnd&&e.onEnd(r),this._hooks.onViewDidUpdate&&!r.interrupted&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),null)}})}_clearAnimation(){this._animation&&(this._animation.cancel(),this._animation=null)}isPageVisible(e){return!(!this.layout||!this.layout.getPageInfo(e))&&this._viewport.intersectsRegion(this.layout.getPageRegion(e))}getRenderedPages(){return this._renderedPages.slice()}destroy(){this._clearAnimation(),Object.keys(this._pendingRequests).forEach(e=>{const t=this._pendingRequests[e];delete this._pendingRequests[e],t.abort()},this),this._canvas.parentNode.removeChild(this._canvas)}}function MF(n,e){let t;return t=null===e?1:Math.pow(2,e-n.zoomLevel),{sourceZoomLevel:n.zoomLevel,scaleRatio:t,row:n.row,col:n.col,dimensions:{width:n.dimensions.width*t,height:n.dimensions.height*t},offset:{left:n.offset.left*t,top:n.offset.top*t},url:n.url}}function TF(n,e){if(n===e)return{added:[],removed:[]};const t=n.filter(r=>-1===e.indexOf(r));return{added:e.filter(r=>-1===n.indexOf(r)),removed:t}}function IF(n,e){const t=e.getMaxPageDimensions(n);return{width:Math.floor(t.width),height:Math.floor(t.height)}}function gZ(n){if(n.inGrid)return function(n){const e=n.viewport.width,t=n.manifest,i=n.pagesPerRow,r=n.fixedHeightGrid,s=n.fixedPadding,o=n.showNonPagedPages,c=(e-s*(i+1))/i,d=c,f=r?s+t.minRatio*c:s+t.maxRatio*c,p=[];let m=[];const _={height:f,width:e};return t.pages.forEach((I,M)=>{if(!o&&t.paged&&!I.paged)return;const F=(I=>{const M=I.d[I.d.length-1],F=M.h/M.w;let L,Y;return r?(L=(f-s)/F,Y=f-s):(L=d,Y=L*F),{width:Math.round(L),height:Math.round(Y)}})(I);let L=Math.floor(m.length*(s+d)+s);r&&(L+=(d-F.width)/2),m.push({index:M,dimensions:F,groupOffset:{top:0,left:L}}),m.length===i&&(p.push({dimensions:_,pages:m}),m=[])}),m.length>0&&p.push({dimensions:_,pages:m}),p}(OF(n,["manifest","viewport","pagesPerRow","fixedHeightGrid","fixedPadding","showNonPagedPages"]));{const e=OF(n,["manifest","verticallyOriented","showNonPagedPages"]);return n.inBookLayout?function(n){return function(n){const e=n.manifest,t=[];let i=null,r=[];const s=()=>{for(let o=0,a=r.length;o<a;o++)t.push([r[o]]);r=[]};return e.pages.forEach((o,a)=>{const c={index:a,dimensions:IF(a,e),paged:!e.paged||o.paged};!n.showNonPagedPages&&!c.paged||(c.paged?0===a||o.facingPages?(t.push([c]),s()):null===i?i=c:(t.push([i,c]),i=null,s()):r.push(c))}),null!==i&&(t.push([i]),s()),t}(n).map(t=>function(n,e){const t=n.verticallyOriented;if(2===e.length)return function(n,e,t){const i=n.dimensions,r=e.dimensions,s=Math.max(i.height,r.height);let o,a,c;if(t){const d=Math.max(i.width,r.width);o=2*d,a=d-i.width,c=d}else o=i.width+r.width,a=0,c=i.width;return{dimensions:{height:s,width:o},pages:[{index:n.index,dimensions:i,groupOffset:{top:0,left:a}},{index:e.index,dimensions:r,groupOffset:{top:0,left:c}}]}}(e[0],e[1],t);const i=e[0],r=i.dimensions;let s;return s=i.paged?0===i.index&&t?r.width:0:t?r.width/2:0,{dimensions:{height:r.height,width:t&&!n.manifest.pages[i.index].facingPages?2*r.width:r.width},pages:[{index:i.index,groupOffset:{top:0,left:s},dimensions:r}]}}(n,t))}(e):function(n){const e=n.manifest,t=[];return e.pages.forEach((i,r)=>{if(!n.showNonPagedPages&&e.paged&&!i.paged)return;const s=IF(r,e);t.push({dimensions:s,pages:[{index:r,groupOffset:{top:0,left:0},dimensions:s}]})}),t}(e)}}function OF(n,e){const t={};return e.forEach(function(i){t[i]=n[i]}),t}class yZ{constructor(e){this.whitelistedKeys=e.whitelistedKeys||[],this.additionalProperties=e.additionalProperties||[],this.validations=e.validations}isValid(e,t,i){let r=null;if(this.validations.some((a,c)=>a.key===e&&(r=c,!0)),null===r)return!0;const s={};s[e]=t;const o=PF(i,s,this);return!this._runValidation(r,t,o)}validate(e){this._validateOptions({},e)}getValidatedOptions(e,t){const i=Object.assign({},t);return this._validateOptions(e,i),i}_validateOptions(e,t){const i=PF(e,t,this);this._applyValidations(t,i)}_applyValidations(e,t){this.validations.forEach((i,r)=>{if(!e.hasOwnProperty(i.key))return;const s=e[i.key],o=this._runValidation(r,s,t);o&&(o.warningSuppressed||function(n,e,t){console.warn("Invalid value for "+n+": "+e+". Using "+t+" instead.")}(i.key,s,o.value),e[i.key]=o.value)},this)}_runValidation(e,t,i){const r=this.validations[e];i.index=e;let s=!1;const a=r.validate(t,i.proxy,{suppressWarning:()=>{s=!0}});return void 0===a||a===t?null:{value:a,warningSuppressed:s}}}function PF(n,e,t){const i={proxy:{},index:null},r=bZ.bind(null,n,e),s={};return t.whitelistedKeys.forEach(o=>{s[o]={get:r.bind(null,o)}}),t.additionalProperties.forEach(o=>{s[o.key]={get:o.get}}),t.validations.forEach((o,a)=>{s[o.key]={get:()=>{if(a<i.index)return r(o.key);throw new TypeError("Cannot access setting "+o.key+" while validating "+t.validations[i.index].key)}}}),Object.defineProperties(i.proxy,s),i}function bZ(n,e,t){return t in e?e[t]:n[t]}class kF{constructor(e,t){this.intersectionTolerance=(t=t||{}).intersectionTolerance||0,this.outer=e,this._top=this._left=this._width=this._height=this._innerDimensions=null,this.invalidate()}intersectsRegion(e){return this.hasHorizontalOverlap(e)&&this.hasVerticalOverlap(e)}hasVerticalOverlap(e){const t=this.top-this.intersectionTolerance,i=this.bottom+this.intersectionTolerance;return db(e.top,t,i)||db(e.bottom,t,i)||e.top<=t&&e.bottom>=i}hasHorizontalOverlap(e){const t=this.left-this.intersectionTolerance,i=this.right+this.intersectionTolerance;return db(e.left,t,i)||db(e.right,t,i)||e.left<=t&&e.right>=i}invalidate(){this._width=this.outer.clientWidth,this._height=this.outer.clientHeight,this._top=this.outer.scrollTop,this._left=this.outer.scrollLeft}setInnerDimensions(e){this._innerDimensions=e,e&&(this._top=xS(this._top,0,e.height-this._height),this._left=xS(this._left,0,e.width-this._width))}}function RF(n,e){const t="_"+n,i="scroll"+n.charAt(0).toUpperCase()+n.slice(1);return{get:function(){return this[t]},set:function(r){let s;s=this._innerDimensions?xS(r,0,this._innerDimensions[e]-this[e]):NF(r,0),this[t]=this.outer[i]=s}}}function FF(n){return{get:function(){return this["_"+n]}}}function db(n,e,t){return n>=e&&n<=t}function xS(n,e,t){return NF(function(n,e){return Math.min(n,e)}(n,t),e)}function NF(n,e){return Math.max(n,e)}Object.defineProperties(kF.prototype,{top:RF("top","height"),left:RF("left","width"),width:FF("width"),height:FF("height"),bottom:{get:function(){return this._top+this._height}},right:{get:function(){return this._left+this._width}}});const Bg=Se(933)("diva:ViewerCore");function MS(){return MS.counter++}MS.counter=1;const wZ=[{key:"goDirectlyTo",validate:(n,e)=>{if(n<0||n>=e.manifest.pages.length)return 0}},{key:"minPagesPerRow",validate:n=>Math.max(2,n)},{key:"maxPagesPerRow",validate:(n,e)=>Math.max(n,e.minPagesPerRow)},{key:"pagesPerRow",validate:(n,e)=>{if(n<e.minPagesPerRow||n>e.maxPagesPerRow)return e.maxPagesPerRow}},{key:"maxZoomLevel",validate:(n,e,t)=>{if(t.suppressWarning(),n<0||n>e.manifest.maxZoom)return e.manifest.maxZoom}},{key:"minZoomLevel",validate:(n,e,t)=>n>e.manifest.maxZoom?(t.suppressWarning(),0):n<0||n>e.maxZoomLevel?0:void 0},{key:"zoomLevel",validate:(n,e,t)=>n>e.manifest.maxZoom?(t.suppressWarning(),0):n<e.minZoomLevel||n>e.maxZoomLevel?e.minZoomLevel:void 0}];class EZ{constructor(e,t,i){this.parentObject=e,this.publicInstance=i,this.viewerState={currentPageIndices:[0],activePageIndex:0,horizontalOffset:0,horizontalPadding:0,ID:null,initialKeyScroll:!1,initialSpaceScroll:!1,innerElement:null,innerObject:{},isActiveDiva:!0,isScrollable:!0,isZooming:!1,loaded:!1,manifest:null,mobileWebkit:!1,numPages:0,oldZoomLevel:-1,options:t,outerElement:null,outerObject:{},pageOverlays:new Zq,pageTools:[],parentObject:this.parentObject,pendingManifestRequest:null,pluginInstances:[],renderer:null,resizeTimer:-1,scrollbarWidth:0,selector:"",throbberTimeoutID:-1,toolbar:null,verticalOffset:0,verticalPadding:0,viewHandler:null,viewport:null,viewportElement:null,viewportObject:null,zoomDuration:400},this.settings=function(n){const e={};return n.forEach(t=>{!function(n,e){Object.keys(e).forEach(t=>{Object.defineProperty(n,t,{get:()=>e[t],set:()=>{throw new TypeError("Cannot set settings."+t)}})})}(e,t)}),e}([t,this.viewerState]);const r=MS();this.viewerState.ID="diva-"+r+"-",this.viewerState.selector=this.settings.ID,Object.defineProperties(this.settings,{panelHeight:{get:()=>this.viewerState.viewport.height},panelWidth:{get:()=>this.viewerState.viewport.width}}),this.optionsValidator=new yZ({additionalProperties:[{key:"manifest",get:()=>this.viewerState.manifest}],validations:wZ}),this.viewerState.scrollbarWidth=function(){let n=document.createElement("p");n.style.width="100%",n.style.height="200px";let e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(n),document.body.appendChild(e);let t=n.offsetWidth;e.style.overflow="scroll";let i=n.offsetWidth;return t===i&&(i=e.clientWidth),document.body.removeChild(e),t-i}(),this.viewerState.mobileWebkit=void 0!==window.orientation,null===t.hashParamSuffix&&(t.hashParamSuffix=1===r?"":r+"");const s=Ot("div",this.elemAttrs("inner",{class:"diva-inner"})),o=Ot("div",this.elemAttrs("viewport"),s),a=Ot("div",this.elemAttrs("outer"),o,Ot("div",this.elemAttrs("throbber"),[Ot("div",{class:"cube cube1"}),Ot("div",{class:"cube cube2"}),Ot("div",{class:"cube cube3"}),Ot("div",{class:"cube cube4"}),Ot("div",{class:"cube cube5"}),Ot("div",{class:"cube cube6"}),Ot("div",{class:"cube cube7"}),Ot("div",{class:"cube cube8"}),Ot("div",{class:"cube cube9"})]));this.viewerState.innerElement=s,this.viewerState.viewportElement=o,this.viewerState.outerElement=a,this.viewerState.innerObject=s,this.viewerState.viewportObject=o,this.viewerState.outerObject=a,this.settings.parentObject.append(a),this.viewerState.viewport=new kF(this.viewerState.viewportElement,{intersectionTolerance:this.settings.viewportMargin}),this.boundScrollFunction=this.scrollFunction.bind(this),this.boundEscapeListener=this.escapeListener.bind(this),this.initPlugins(),this.handleEvents(),this.showThrobber()}isValidOption(e,t){return this.optionsValidator.isValid(e,t,this.viewerState.options)}elemAttrs(e,t){const i={id:this.settings.ID+e,class:"diva-"+e};return t?Object.assign(i,t):i}getPageData(e,t){return this.settings.manifest.pages[e].d[this.settings.zoomLevel][t]}clearViewer(){this.viewerState.viewport.top=0,clearTimeout(this.viewerState.resizeTimer)}hasChangedOption(e,t){return t in e&&e[t]!==this.settings[t]}escapeListener(e){27===e.keyCode&&this.publicInstance.leaveFullscreenMode()}reloadViewer(e){const t=[];if(e=this.optionsValidator.getValidatedOptions(this.settings,e),this.hasChangedOption(e,"zoomLevel")&&(this.viewerState.oldZoomLevel=this.settings.zoomLevel,this.viewerState.options.zoomLevel=e.zoomLevel,t.push(["ZoomLevelDidChange",e.zoomLevel])),this.hasChangedOption(e,"pagesPerRow")&&(this.viewerState.options.pagesPerRow=e.pagesPerRow,t.push(["GridRowNumberDidChange",e.pagesPerRow])),this.hasChangedOption(e,"verticallyOriented")&&(this.viewerState.options.verticallyOriented=e.verticallyOriented),this.hasChangedOption(e,"showNonPagedPages")&&(this.viewerState.options.showNonPagedPages=e.showNonPagedPages),"goDirectlyTo"in e?(this.viewerState.options.goDirectlyTo=e.goDirectlyTo,"verticalOffset"in e&&(this.viewerState.verticalOffset=e.verticalOffset),"horizontalOffset"in e&&(this.viewerState.horizontalOffset=e.horizontalOffset)):this.viewerState.options.goDirectlyTo=this.settings.activePageIndex,(this.hasChangedOption(e,"inGrid")||this.hasChangedOption(e,"inBookLayout"))&&("inGrid"in e&&(this.viewerState.options.inGrid=e.inGrid),"inBookLayout"in e&&(this.viewerState.options.inBookLayout=e.inBookLayout),t.push(["ViewDidSwitch",this.settings.inGrid])),this.hasChangedOption(e,"inFullscreen")&&(this.viewerState.options.inFullscreen=e.inFullscreen,this.prepareModeChange(e),t.push(["ModeDidSwitch",this.settings.inFullscreen])),this.clearViewer(),this.updateViewHandlerAndRendering(),this.viewerState.renderer){const i={pageLayouts:gZ(this.settings),padding:this.getPadding(),maxZoomLevel:this.settings.inGrid?null:this.viewerState.manifest.maxZoom,verticallyOriented:this.settings.verticallyOriented||this.settings.inGrid},r={zoomLevel:this.settings.inGrid?null:this.settings.zoomLevel,anchorPage:this.settings.goDirectlyTo,verticalOffset:this.viewerState.verticalOffset,horizontalOffset:this.viewerState.horizontalOffset},s=this.getCurrentSourceProvider();if(Bg.enabled){const o=Object.keys(i).filter(function(a){return"pageLayouts"!==a&&"padding"!==a}).map(function(a){return a+": "+JSON.stringify(i[a])}).join(", ");Bg("reload with %s",o)}this.viewerState.renderer.load(i,r,s)}return t.forEach(i=>{this.publish.apply(this,i)}),!0}prepareModeChange(e){const t=e.inFullscreen?"add":"remove";this.viewerState.outerObject.classList[t]("diva-fullscreen"),document.body.classList[t]("diva-hide-scrollbar"),this.settings.parentObject.classList[t]("diva-full-width");const i=this.settings.panelHeight,r=this.settings.panelWidth;if(this.viewerState.viewport.invalidate(),!this.viewerState.loaded&&!this.settings.inGrid&&!("verticalOffset"in e)){const o=this.settings.panelWidth;this.viewerState.verticalOffset+=(i-this.settings.panelHeight)/2,this.viewerState.horizontalOffset+=(r-o)/2}e.inFullscreen?document.addEventListener("keyup",this.boundEscapeListener):document.removeEventListener("keyup",this.boundEscapeListener)}updateViewHandlerAndRendering(){const e=this.settings.inGrid?Wq:$q;this.viewerState.viewHandler&&!(this.viewerState.viewHandler instanceof e)&&(this.viewerState.viewHandler.destroy(),this.viewerState.viewHandler=null),this.viewerState.viewHandler||(this.viewerState.viewHandler=new e(this)),this.viewerState.renderer||this.initializeRenderer()}initializeRenderer(){const e=xF.getCompatibilityErrors();e?this.showError(e):this.viewerState.renderer=new xF({viewport:this.viewerState.viewport,outerElement:this.viewerState.outerElement,innerElement:this.viewerState.innerElement,settings:this.settings},{onViewWillLoad:()=>{this.viewerState.viewHandler.onViewWillLoad()},onViewDidLoad:()=>{this.updatePageOverlays(),this.viewerState.viewHandler.onViewDidLoad()},onViewDidUpdate:(r,s)=>{this.updatePageOverlays(),this.viewerState.viewHandler.onViewDidUpdate(r,s)},onViewDidTransition:()=>{this.updatePageOverlays()},onPageWillLoad:r=>{this.publish("PageWillLoad",r)},onZoomLevelWillChange:r=>{this.publish("ZoomLevelWillChange",r)}})}getCurrentSourceProvider(){if(this.settings.inGrid){const t={getAllZoomLevelsForPage:i=>[t.getBestZoomLevelForPage(i)],getBestZoomLevelForPage:i=>({zoomLevel:1,rows:1,cols:1,tiles:[{url:this.settings.manifest.getPageImageURL(i.index,{width:i.dimensions.width}),zoomLevel:1,row:0,col:0,dimensions:i.dimensions,offset:{top:0,left:0}}]})};return t}const e={width:this.settings.tileWidth,height:this.settings.tileHeight};return{getBestZoomLevelForPage:t=>this.settings.manifest.getPageImageTiles(t.index,Math.ceil(this.settings.zoomLevel),e),getAllZoomLevelsForPage:t=>{const i=[],r=this.viewerState.manifest.maxZoom;for(let s=0;s<=r;s++)i.push(this.settings.manifest.getPageImageTiles(t.index,s,e));return i.reverse(),i}}}getPadding(){let e,t,i,r;return this.settings.inGrid?(i=this.settings.fixedPadding,e=t=r=0):(e=this.settings.verticallyOriented?this.viewerState.verticalPadding:0,t=this.settings.verticallyOriented?0:this.viewerState.horizontalPadding,i=this.settings.verticallyOriented?0:this.viewerState.verticalPadding,r=this.settings.verticallyOriented?this.viewerState.horizontalPadding:0),{document:{top:i,bottom:i,left:r,right:r},page:{top:e,bottom:0,left:t,right:0}}}updatePageOverlays(){this.viewerState.pageOverlays.updateOverlays(this.viewerState.renderer.getRenderedPages())}handleZoom(e,t){if(!this.isValidOption("zoomLevel",e))return!1;if(this.viewerState.viewportObject.removeEventListener("scroll",this.boundScrollFunction),!t){const p=this.viewerState.viewport,m=this.viewerState.renderer.layout.getPageRegion(this.settings.activePageIndex);t={anchorPage:this.settings.activePageIndex,offset:{left:p.width/2-(m.left-p.left),top:p.height/2-(m.top-p.top)}}}const i=this.viewerState.renderer.layout.getPageRegion(t.anchorPage),r=i.left+t.offset.left-(this.settings.viewport.left+this.settings.viewport.width/2),s=i.top+t.offset.top-(this.settings.viewport.top+this.settings.viewport.height/2),o=(p,m)=>{const y=Math.pow(2,p-m);return{zoomLevel:p,anchorPage:t.anchorPage,verticalOffset:t.offset.top*y-s,horizontalOffset:t.offset.left*y-r}};this.viewerState.options.zoomLevel=e;let a=this.viewerState.oldZoomLevel;this.viewerState.oldZoomLevel=this.settings.zoomLevel;const c=o(e,a);this.viewerState.options.goDirectlyTo=c.anchorPage,this.viewerState.verticalOffset=c.verticalOffset,this.viewerState.horizontalOffset=c.horizontalOffset,this.viewerState.renderer.transitionViewportPosition({duration:this.settings.zoomDuration,parameters:{zoomLevel:{from:a,to:e}},getPosition:p=>o(p.zoomLevel,a),onEnd:p=>{this.viewerState.viewportObject.addEventListener("scroll",this.boundScrollFunction),p.interrupted&&(this.viewerState.oldZoomLevel=e)}});let d=document.getElementById(this.settings.selector+"zoom-in-button"),f=document.getElementById(this.settings.selector+"zoom-out-button");return d.disabled=!0,f.disabled=!0,setTimeout(()=>{d.disabled=!1,f.disabled=!1},this.settings.zoomDuration),this.publish("ZoomLevelDidChange",e),!0}getYOffset(e,t){let i=void 0===e?this.settings.activePageIndex:e;return parseInt("center"===t||"centre"===t?this.getPageData(i,"h")/2:"bottom"===t?this.getPageData(i,"h")-this.settings.panelHeight/2:this.settings.panelHeight/2,10)}getXOffset(e,t){let i=void 0===e?this.settings.activePageIndex:e;return parseInt("left"===t?this.settings.panelWidth/2:"right"===t?this.getPageData(i,"w")-this.settings.panelWidth/2:this.getPageData(i,"w")/2,10)}updatePanelSize(){return this.viewerState.viewport.invalidate(),this.viewerState.renderer&&(this.updateOffsets(),this.viewerState.renderer.goto(this.settings.activePageIndex,this.viewerState.verticalOffset,this.viewerState.horizontalOffset)),!0}updateOffsets(){const e=this.viewerState.renderer.layout.getPageToViewportCenterOffset(this.settings.activePageIndex,this.viewerState.viewport);e&&(this.viewerState.horizontalOffset=e.x,this.viewerState.verticalOffset=e.y)}bindMouseEvents(){this.viewerState.viewportObject.classList.add("dragscroll"),DS_onDoubleClick(this.viewerState.viewportObject,(e,t)=>{Bg("Double click at %s, %s",t.left,t.top),this.viewerState.viewHandler.onDoubleClick(e,t)})}onResize(){this.updatePanelSize(),clearTimeout(this.viewerState.resizeTimer),this.viewerState.resizeTimer=setTimeout(()=>{const e=this.viewerState.renderer.layout.getPageToViewportCenterOffset(this.settings.activePageIndex,this.viewerState.viewport);this.reloadViewer(e?{goDirectlyTo:this.settings.activePageIndex,verticalOffset:e.y,horizontalOffset:e.x}:{goDirectlyTo:this.settings.activePageIndex})},200)}bindTouchEvents(){this.settings.blockMobileMove&&document.body.addEventListener("touchmove",e=>(e.originalEvent.preventDefault(),!1)),DS_onPinch(this.viewerState.viewportObject,function(e,t,i,r){Bg("Pinch %s at %s, %s",r-i,t.left,t.top),this.viewerState.viewHandler.onPinch(e,t,i,r)}),DS_onDoubleTap(this.viewerState.viewportObject,function(e,t){Bg("Double tap at %s, %s",t.left,t.top),this.viewerState.viewHandler.onDoubleClick(e,t)})}scrollFunction(){const e=this.viewerState.viewport.top,t=this.viewerState.viewport.left;let i;this.viewerState.viewport.invalidate();const r=this.viewerState.viewport.top,s=this.viewerState.viewport.left;i=this.settings.verticallyOriented||this.settings.inGrid?r-e:s-t,this.viewerState.renderer.adjust();const o=this.settings.verticallyOriented||this.settings.inGrid?r:s;this.publish("ViewerDidScroll",o),i>0?this.publish("ViewerDidScrollDown",o):i<0&&this.publish("ViewerDidScrollUp",o),this.updateOffsets()}handleEvents(){this.viewerState.innerObject.addEventListener("mousedown",()=>{this.viewerState.innerObject.classList.add("diva-grabbing")}),this.viewerState.innerObject.addEventListener("mouseup",()=>{this.viewerState.innerObject.classList.remove("diva-grabbing")}),this.bindMouseEvents(),this.viewerState.viewportObject.addEventListener("scroll",this.boundScrollFunction),document.addEventListener("keydown.diva",f=>{if(!this.viewerState.isActiveDiva)return!0;if(this.settings.enableSpaceScroll&&!f.shiftKey&&32===f.keyCode||this.settings.enableKeyScroll&&34===f.keyCode)return this.viewerState.viewport.top+=this.settings.panelHeight,!1;if(!this.settings.enableSpaceScroll&&32===f.keyCode&&f.preventDefault(),this.settings.enableKeyScroll){if(f.shiftKey||f.ctrlKey||f.metaKey)return!0;switch(f.keyCode){case 33:return this.viewerState.viewport.top-=this.settings.panelHeight,!1;case 38:return this.viewerState.viewport.top-=this.settings.arrowScrollAmount,!1;case 40:return this.viewerState.viewport.top+=this.settings.arrowScrollAmount,!1;case 37:return this.viewerState.viewport.left-=this.settings.arrowScrollAmount,!1;case 39:return this.viewerState.viewport.left+=this.settings.arrowScrollAmount,!1;case 36:return this.viewerState.viewport.top=0,!1;case 35:return this.settings.verticallyOriented?this.viewerState.viewport.top=1/0:this.viewerState.viewport.left=1/0,!1;default:return!0}}return!0}),Ms.Events.subscribe("ViewerDidTerminate",function(){document.removeEventListener("keydown.diva")},this.settings.ID),window.addEventListener("resize",this.onResize.bind(this),!1),Ms.Events.subscribe("ViewerDidTerminate",function(){window.removeEventListener("resize",this.onResize,!1)},this.settings.ID),"onorientationchange"in window&&(window.addEventListener("orientationchange",this.onResize,!1),Ms.Events.subscribe("ViewerDidTerminate",function(){window.removeEventListener("orientationchange",this.onResize,!1)},this.settings.ID)),Ms.Events.subscribe("PanelSizeDidChange",this.updatePanelSize,this.settings.ID),Ms.Events.subscribe("ViewerDidTerminate",()=>{this.viewerState.renderer&&this.viewerState.renderer.destroy(),clearTimeout(this.viewerState.resizeTimer)},this.settings.ID)}initPlugins(){if(!this.settings.hasOwnProperty("plugins"))return null;this.viewerState.pluginInstances=this.settings.plugins.map(e=>{const t=new e(this);return t.isPageTool&&this.viewerState.pageTools.push(t),t})}showThrobber(){this.hideThrobber(),this.viewerState.throbberTimeoutID=setTimeout(()=>{let e=document.getElementById(this.settings.selector+"throbber");e&&(e.style.display="block")},this.settings.throbberTimeout)}hideThrobber(){clearTimeout(this.viewerState.throbberTimeoutID);let e=document.getElementById(this.settings.selector+"throbber");e&&(e.style.display="none")}showError(e){const t=Ot("div",this.elemAttrs("error"),[Ot("button",this.elemAttrs("error-close",{"aria-label":"Close dialog"})),Ot("p",Ot("strong","Error")),Ot("div",e)]);this.viewerState.outerObject.appendChild(t),document.getElementById(this.settings.selector+"error-close").addEventListener("click",()=>{t.parentNode.removeChild(t)})}setManifest(e,t){if(this.viewerState.manifest=e,this.hideThrobber(),this.viewerState.numPages=this.settings.manifest.pages.length,this.optionsValidator.validate(this.viewerState.options),this.publish("NumberOfPagesDidChange",this.settings.numPages),this.settings.adaptivePadding>0){const a=Math.floor((this.settings.minZoomLevel+this.settings.maxZoomLevel)/2);this.viewerState.horizontalPadding=parseInt(this.settings.manifest.getAverageWidth(a)*this.settings.adaptivePadding,10),this.viewerState.verticalPadding=parseInt(this.settings.manifest.getAverageHeight(a)*this.settings.adaptivePadding,10)}else this.viewerState.horizontalPadding=this.settings.fixedPadding,this.viewerState.verticalPadding=this.settings.fixedPadding;this.viewerState.pageTools.length&&(this.viewerState.verticalPadding=Math.max(40,this.viewerState.verticalPadding)),this.settings.manifest.paged&&(this.viewerState.options.inBookLayout=!0),this.publish("ObjectDidLoad",this.settings),this.updatePanelSize();let i,r,s=!1,o=!1;if(null==t.goDirectlyTo?(t.goDirectlyTo=this.settings.goDirectlyTo,i=r=!0):(i=null==t.horizontalOffset||isNaN(t.horizontalOffset),r=null==t.verticalOffset||isNaN(t.verticalOffset)),i&&(0===t.goDirectlyTo&&this.settings.inBookLayout&&this.settings.verticallyOriented?t.horizontalOffset=this.viewerState.horizontalPadding:(o=!0,t.horizontalOffset=this.getXOffset(t.goDirectlyTo,"center"))),r&&(s=!0,t.verticalOffset=this.getYOffset(t.goDirectlyTo,"top")),this.reloadViewer(t),this.updatePanelSize(),this.settings.enableAutoTitle){let a=document.getElementById(this.settings.selector+"title");a?a.innerHTML=this.settings.manifest.itemTitle:this.settings.parentObject.insertBefore(Ot("div",this.elemAttrs("title"),[this.settings.manifest.itemTitle]),this.settings.parentObject.firstChild)}this.settings.verticallyOriented?this.viewerState.innerElement.style.minWidth=this.settings.panelWidth+"px":this.viewerState.innerElement.style.minHeight=this.settings.panelHeight+"px",(s||o)&&(s&&(this.viewerState.verticalOffset=this.getYOffset(this.settings.activePageIndex,"top")),o&&(this.viewerState.horizontalOffset=this.getXOffset(this.settings.activePageIndex,"center")),this.viewerState.renderer.goto(this.settings.activePageIndex,this.viewerState.verticalOffset,this.viewerState.horizontalOffset)),this.viewerState.loaded=!0,this.publish("ViewerDidLoad",this.settings)}publish(e){const t=Array.prototype.slice.call(arguments,1);Ms.Events.publish(e,t,this.publicInstance)}getSettings(){return this.settings}getInternalState(){return this.viewerState}getPublicInstance(){return this.publicInstance}getPageTools(){return this.viewerState.pageTools}getCurrentLayout(){return this.viewerState.renderer?this.viewerState.renderer.layout:null}getViewport(){const e=this.viewerState.viewport;return{top:e.top,left:e.left,bottom:e.bottom,right:e.right,width:e.width,height:e.height}}addPageOverlay(e){this.viewerState.pageOverlays.addOverlay(e)}removePageOverlay(e){this.viewerState.pageOverlays.removeOverlay(e)}getPageRegion(e,t){const i=this.viewerState.renderer.layout,r=i.getPageRegion(e,t);if(t&&t.incorporateViewport){const s=this.settings.verticallyOriented?"width":"height";if(this.viewerState.viewport[s]>i.dimensions[s]){const o=(this.viewerState.viewport[s]-i.dimensions[s])/2;return this.settings.verticallyOriented?{top:r.top,bottom:r.bottom,left:r.left+o,right:r.right+o}:{top:r.top+o,bottom:r.bottom+o,left:r.left,right:r.right}}}return r}getPagePositionAtViewportOffset(e){const t_left=e.left+this.viewerState.viewport.left,t_top=e.top+this.viewerState.viewport.top,i=this.viewerState.renderer.getRenderedPages(),r=i.length;for(let o=0;o<r;o++){const a=i[o],c=this.viewerState.renderer.layout.getPageRegion(a);if(c.left<=t_left&&c.right>=t_left&&c.top<=t_top&&c.bottom>=t_top)return{anchorPage:a,offset:{left:t_left-c.left,top:t_top-c.top}}}const s=this.viewerState.renderer.layout.getPageRegion(this.settings.activePageIndex);return{anchorPage:this.settings.activePageIndex,offset:{left:t_left-s.left,top:t_top-s.top}}}setCurrentPages(e,t){!function(r,s){if(r.length!==s.length)return!1;for(let o=0,a=r.length;o<a;o++)if(r[o]!==s[o])return!1;return!0}(this.viewerState.currentPageIndices,t)?(this.viewerState.currentPageIndices=t,this.viewerState.activePageIndex!==e&&(this.viewerState.activePageIndex=e,this.publish("ActivePageDidChange",e)),this.publish("VisiblePageDidChange",t),this.viewerState.manifest.pages[e].otherImages.length>0&&this.publish("VisiblePageHasAlternateViews",e)):this.viewerState.activePageIndex!==e&&(this.viewerState.activePageIndex=e,this.publish("ActivePageDidChange",e))}getPageName(e){return this.viewerState.manifest.pages[e].f}reload(e){this.reloadViewer(e)}zoom(e,t){return this.handleZoom(e,t)}enableScrollable(){this.viewerState.isScrollable||(this.bindMouseEvents(),this.enableDragScrollable(),this.viewerState.options.enableKeyScroll=this.viewerState.initialKeyScroll,this.viewerState.options.enableSpaceScroll=this.viewerState.initialSpaceScroll,this.viewerState.viewportElement.style.overflow="auto",this.viewerState.isScrollable=!0)}enableDragScrollable(){this.viewerState.viewportObject.hasAttribute("nochilddrag")&&this.viewerState.viewportObject.removeAttribute("nochilddrag")}disableScrollable(){this.viewerState.isScrollable&&(this.disableDragScrollable(),this.viewerState.outerObject.dblclick=null,this.viewerState.outerObject.contextmenu=null,this.viewerState.viewportElement.style.overflow="hidden",this.viewerState.initialKeyScroll=this.settings.enableKeyScroll,this.viewerState.initialSpaceScroll=this.settings.enableSpaceScroll,this.viewerState.options.enableKeyScroll=!1,this.viewerState.options.enableSpaceScroll=!1,this.viewerState.isScrollable=!1)}disableDragScrollable(){this.viewerState.viewportObject.hasAttribute("nochilddrag")||this.viewerState.viewportObject.setAttribute("nochilddrag","")}clear(){this.clearViewer()}setPendingManifestRequest(e){this.viewerState.pendingManifestRequest=e}destroy(){this.publish("ViewerWillTerminate",this.settings),this.settings.pendingManifestRequest&&this.settings.pendingManifestRequest.abort(),document.body.removeClass("diva-hide-scrollbar"),this.settings.parentObject.parent().empty().removeData("diva"),this.settings.parentObject.parent().removeAttr("style").removeAttr("class"),this.publish("ViewerDidTerminate",this.settings),Ms.Events.unsubscribeAll(this.settings.ID)}}function DZ(n){let r,e=n.label,t="object"==typeof e?e[Object.keys(e)[0]][0]:e,i=n.value;return r=Array.isArray(i)?i.map(s=>s[Object.keys(s)[0]]):"object"==typeof i?i[Object.keys(i)[0]]:i,Array.isArray(r)&&(r=r.join(", ")),{label:t,value:r}}const LF=(n,e)=>{const t=Math.max(n,e);return t<128?0:Math.ceil(Math.log((t+1)/257)/Math.log(2))},hb=(n,e)=>n/Math.pow(2,e),AZ=(n,e)=>n.map(t=>{const i=t.width,r=t.height,s=VF(t),o="/"!==s.url.slice(-1)?s.url+"/":s.url,a=new Array(e+1);for(let c=0;c<e+1;c++)a[c]={h:Math.floor(hb(r,e-c)),w:Math.floor(hb(i,e-c))};return{f:s.url,url:o,il:t.label||"",d:a}});function VF(n){let e=n["@id"]||n.id;const t=/#xywh=([0-9]+,[0-9]+,[0-9]+,[0-9]+)/;let i="",r=!0;if(/\/([0-9]+,[0-9]+,[0-9]+,[0-9]+)\//.test(e)){const o=e.split("/");i=o[o.length-4]}else t.test(e)?i=t.exec(e)[1]:n.service&&(n.service["@id"]||n.service.id)&&(e=n.service["@id"]||n.service.id,r=!1);r&&(e=e.split("/").slice(0,-4).join("/"));const s={url:e};if(i.length){const o=i.split(",");s.x=parseInt(o[0],10),s.y=parseInt(o[1],10),s.w=parseInt(o[2],10),s.h=parseInt(o[3],10)}return s}class MZ{getPageImageURL(e,t,i){let r;r=!i||null==i.width&&null==i.height?"full":(null==i.width?"":i.width)+","+(null==i.height?"":i.height);const s=e.pages[t];return encodeURI(s.url+"full/"+r+"/0/"+(s.api>1.1?"default":"native")+".jpg")}getTileImageURL(e,t,i){const r=e.pages[t];let s,o;s=i.row===i.rowCount-1?r.d[i.zoomLevel].h-(i.rowCount-1)*i.tileDimensions.height:i.tileDimensions.height,o=i.col===i.colCount-1?r.d[i.zoomLevel].w-(i.colCount-1)*i.tileDimensions.width:i.tileDimensions.width;const a=Math.pow(2,e.maxZoom-i.zoomLevel);let c=i.col*i.tileDimensions.width*a,d=i.row*i.tileDimensions.height*a;r.hasOwnProperty("xoffset")&&(c+=r.xoffset,d+=r.yoffset);const f=[c,d,o*a,s*a].join(",");return encodeURI(r.url+f+"/"+o+","+s+"/0/"+(r.api>1.1?"default":"native")+".jpg")}}class qa{constructor(e,t){this.pages=e.pgs,this.maxZoom=e.max_zoom,this.maxRatio=e.dims.max_ratio,this.minRatio=e.dims.min_ratio,this.itemTitle=e.item_title,this.metadata=e.metadata,this.paged=!!e.paged,this._maxWidths=e.dims.max_w,this._maxHeights=e.dims.max_h,this._averageWidths=e.dims.a_wid,this._averageHeights=e.dims.a_hei,this._totalHeights=e.dims.t_hei,this._totalWidths=e.dims.t_wid,this._urlAdapter=t}static fromIIIF(e){const t=function(n){let e=n["@context"];if(!e)return console.error("Invalid IIIF Manifest; No @context found."),null;const t=(n=>"http://iiif.io/api/presentation/2/context.json"===n||Array.isArray(n)&&n.includes("http://iiif.io/api/presentation/2/context.json")?2:Array.isArray(n)&&n.includes("http://iiif.io/api/presentation/3/context.json")?3:2)(e),i=n.sequences?n.sequences[0]:null,r=i?i.canvases:n.items,s=r.length,o=new Array(r.length);let a,c,d,f,m,y,_,I,M,F,L,Y,re,Ee,At,Ct,un,p=[],Pt=100,yt=0,dn=100;for(let gt=0;gt<s;gt++){const Qn=r[gt],er=Qn.width,In=Qn.height,Ps=LF(er,In),jn=In/er;yt=Math.max(jn,yt),dn=Math.min(jn,dn),Pt=Math.min(Pt,Ps)}const Kn=new Array(Pt+1).fill(0),Hn=new Array(Pt+1).fill(0),xi=new Array(Pt+1).fill(0),Yn=new Array(Pt+1).fill(0);for(let gt=0;gt<s;gt++)if(a=r[gt],Y=a["@id"]||a.id,re=a.label,c=a.images?a.images[0].resource:a.items[0].items[0].body,p=[],"oa:Choice"===c["@type"]||"Choice"===c.type?(d=c.default||c.items[0],f=c.item||c.items.slice(1),p=AZ(f,Pt)):d=c,M=a.width||d.width,F=a.height||d.height,M<=0||F<=0)console.warn("Invalid width or height for canvas "+re+". Skipping");else{L=LF(M,F),Ee=d.label||null,_=VF(d),y="/"!==_.url.slice(-1)?_.url+"/":_.url,m=d.service["@context"]||d.service.type,I="http://iiif.io/api/image/2/context.json"===m||"ImageService2"===m?2:"http://library.stanford.edu/iiif/image-api/1.1/context.json"===m?1.1:1,At=new Array(Pt+1);for(let In=0;In<Pt+1;In++)Ct=Math.floor(hb(M,Pt-In)),un=Math.floor(hb(F,Pt-In)),At[In]={h:un,w:Ct},Kn[In]+=Ct,Hn[In]+=un,xi[In]=Math.max(Ct,xi[In]),Yn[In]=Math.max(un,Yn[In]);o[gt]={d:At,m:L,l:re,il:Ee,f:_.url,url:y,api:I,paged:"non-paged"!==a.viewingHint||!!a.behavior&&"non-paged"!==a.behavior[0],facingPages:"facing-pages"===a.viewingHint||!!a.behavior&&"facing-pages"===a.behavior[0],canvas:Y,otherImages:p,xoffset:_.x||null,yoffset:_.y||null}}const Ie=new Array(Pt+1),Ye=new Array(Pt+1);for(let gt=0;gt<Pt+1;gt++)Ie[gt]=Kn[gt]/s,Ye[gt]=Hn[gt]/s;const rt={a_wid:Ie,a_hei:Ye,max_w:xi,max_h:Yn,max_ratio:yt,min_ratio:dn,t_hei:Hn,t_wid:Kn};return{version:t,item_title:DZ(n).label,metadata:n.metadata||null,dims:rt,max_zoom:Pt,pgs:o,paged:"paged"===n.viewingHint||!!n.behaviour&&"paged"===n.behaviour[0]||!!i&&"paged"===i.viewingHint}}(e);return new qa(t,new MZ)}isPageValid(e,t){return!(!t&&this.paged&&!this.pages[e].paged)&&e>=0&&e<this.pages.length}getMaxPageDimensions(e){const t=this.pages[e].d[this.maxZoom];return{height:t.h,width:t.w}}getPageDimensionsAtZoomLevel(e,t){const i=this.pages[e].d[this.maxZoom],r=function(n,e){return 1/Math.pow(2,n-e)}(this.maxZoom,t);return{height:i.h*r,width:i.w*r}}getPageImageURL(e,t){return this._urlAdapter.getPageImageURL(this,e,t)}getPageImageTiles(e,t,i){const r=this.pages[e];if(!isFinite(t)||t%1!=0)throw new TypeError("Zoom level must be an integer: "+t);const s=Math.ceil(r.d[t].h/i.height),o=Math.ceil(r.d[t].w/i.width),a=[];let c,d,f;for(c=0;c<s;c++)for(d=0;d<o;d++)f=this._urlAdapter.getTileImageURL(this,e,{row:c,col:d,rowCount:s,colCount:o,zoomLevel:t,tileDimensions:i}),a.push({row:c,col:d,zoomLevel:t,dimensions:{height:i.height,width:i.width},offset:{top:c*i.height,left:d*i.width},url:f});return{zoomLevel:t,rows:s,cols:o,tiles:a}}}function kh(n){return function(e){return this[n][e]}}qa.prototype.getMaxWidth=kh("_maxWidths"),qa.prototype.getMaxHeight=kh("_maxHeights"),qa.prototype.getAverageWidth=kh("_averageWidths"),qa.prototype.getAverageHeight=kh("_averageHeights"),qa.prototype.getTotalWidth=kh("_totalWidths"),qa.prototype.getTotalHeight=kh("_totalHeights");class IZ{constructor(e){this.viewer=e,this.settings=e.settings}_elemAttrs(e,t){const i={id:this.settings.ID+e,class:"diva-"+e};return t?Object.assign(i,t):i}_subscribe(e,t){Ms.Events.subscribe(e,t,this.settings.ID)}createButton(e,t,i,r){const s=Ot("button",{type:"button",id:this.settings.ID+e,class:"diva-"+e+" diva-button",title:t});return r&&s.appendChild(r),i&&s.addEventListener("click",i),s}createLabel(e,t,i,r,s){return Ot("div",{id:this.settings.ID+t,class:e+" diva-label"},[i,Ot("span",{id:this.settings.ID+r},s)])}createZoomButtons(){let e=this._createZoomOutIcon(),t=this._createZoomInIcon(),i=[this.createButton("zoom-out-button","Zoom Out",()=>{this.viewer.setZoomLevel(this.settings.zoomLevel-1)},e),this.createButton("zoom-in-button","Zoom In",()=>{this.viewer.setZoomLevel(this.settings.zoomLevel+1)},t),this.createLabel("diva-zoom-label","zoom-label","Zoom level: ","zoom-level",this.settings.zoomLevel+1)],r=function(){document.getElementById(this.settings.ID+"zoom-level").textContent=this.settings.zoomLevel+1};return this._subscribe("ZoomLevelDidChange",r),this._subscribe("ViewerDidLoad",r),Ot("div",{id:this.settings.ID+"zoom-controls",style:"display: none"},i)}createGridControls(){let e=this._createGridMoreIcon(),t=this._createGridFewerIcon(),i=[this.createButton("grid-out-button","Fewer",()=>{this.viewer.setGridPagesPerRow(this.settings.pagesPerRow-1)},t),this.createButton("grid-in-button","More",()=>{this.viewer.setGridPagesPerRow(this.settings.pagesPerRow+1)},e),this.createLabel("diva-grid-label","grid-label","Pages per row: ","pages-per-row",this.settings.pagesPerRow)];return this._subscribe("GridRowNumberDidChange",function(){document.getElementById(this.settings.ID+"pages-per-row").textContent=this.settings.pagesPerRow}),Ot("div",{id:this.settings.ID+"grid-controls",style:"display:none"},i)}createPageLabel(){const e=Ot("span",{id:this.settings.ID+"current-page"}),t=()=>{let i=this.viewer.getCurrentPageIndices(),r=i[0],s=i[i.length-1],o=this.settings.manifest.pages[r].l;e.textContent=r!==s?this.settings.enableIndexAsLabel?r+" - "+s:o+" - "+this.settings.manifest.pages[s].l:this.settings.enableIndexAsLabel?r:o};return this._subscribe("VisiblePageDidChange",t),this._subscribe("ViewerDidLoad",t),this._subscribe("ViewDidSwitch",t),Ot("span",{class:"diva-page-label diva-label"},e)}createGotoPageForm(){const e=Ot("input",{id:this.settings.ID+"goto-page-input",class:"diva-input diva-goto-page-input",autocomplete:"off",type:"text"}),t=Ot("input",{id:this.settings.ID+"goto-page-submit",class:"diva-button diva-button-text",type:"submit",value:"Go"}),i=Ot("div",{id:this.settings.ID+"input-suggestions",class:"diva-input-suggestions"}),r=Ot("form",{id:this.settings.ID+"goto-page",class:"diva-goto-form"},e,t,i);var d;return r.addEventListener("submit",o=>{o.preventDefault();const a=e.value;if(this.settings.onGotoSubmit&&"function"==typeof this.settings.onGotoSubmit){const c=this.settings.onGotoSubmit(a);this.viewer.gotoPageByIndex(c)||window.alert("No page could be found with that label or page number")}else this.viewer.gotoPageByLabel(a)||window.alert("No page could be found with that label or page number");return i.style.display="none",!1}),["input","focus"].forEach(o=>{e.addEventListener(o,()=>{i.innerHTML="";const a=e.value;let c=0;if(this.settings.enableGotoSuggestions&&a){const d=this.settings.manifest.pages;for(let f=0,p=d.length;f<p&&c<10;f++)if(d[f].l.toLowerCase().indexOf(a.toLowerCase())>-1){const m=Ot("div",{class:"diva-input-suggestion"},d[f].l);i.appendChild(m),c++}c>0&&(i.style.display="block")}else i.style.display="none"})}),e.addEventListener("keydown",o=>{let a;if(13===o.keyCode){const c=document.getElementsByClassName("active")[0];void 0!==c&&(e.value=c.innerText)}if(38===o.keyCode){a=document.getElementsByClassName("active")[0];const c=a?a.previousSibling:void 0;if(void 0!==c)a.classList.remove("active"),null!==c&&c.classList.add("active");else{let d=document.getElementsByClassName("diva-input-suggestion").length-1;document.getElementsByClassName("diva-input-suggestion")[d].classList.add("active")}}else if(40===o.keyCode){a=document.getElementsByClassName("active")[0];const c=a?a.nextSibling:void 0;void 0!==c?(a.classList.remove("active"),null!==c&&c.classList.add("active")):document.getElementsByClassName("diva-input-suggestion")[0].classList.add("active")}}),".diva-input-suggestion",d=function(){e.value=this.textContent,i.style.display="none";let o=new Event("submit",{cancelable:!0});r.dispatchEvent(o)},i.addEventListener("mousedown",function(f){for(var p=f.target;p&&p!==this;)p.matches(".diva-input-suggestion")&&d.call(p,f),p=p.parentNode}),e.addEventListener("blur",()=>{i.style.display="none"}),r}createViewMenu(){const e=Ot("div",this._elemAttrs("view-options")),t=this._createGridViewIcon(),i=this._createBookViewIcon(),r=this._createPageViewIcon(),o=this.createButton("view-icon","Change view",()=>{e.style.display="none"===e.style.display?"block":"none"}),a=d=>{this.viewer.changeView(d),e.style.display="none"},c=()=>{const d=" diva-view-icon diva-button";this.settings.inGrid?(o.appendChild(t),o.className="diva-grid-icon"+d):this.settings.inBookLayout?(o.appendChild(i),o.className="diva-book-icon"+d):(o.appendChild(r),o.className="diva-document-icon"+d);const f=document.createDocumentFragment();for((this.settings.inGrid||this.settings.inBookLayout)&&f.appendChild(this.createButton("document-icon","Document View",a.bind(null,"document"),r)),(this.settings.inGrid||!this.settings.inBookLayout)&&f.appendChild(this.createButton("book-icon","Book View",a.bind(null,"book"),i)),this.settings.inGrid||f.appendChild(this.createButton("grid-icon","Grid View",a.bind(null,"grid"),t));e.firstChild;)e.removeChild(e.firstChild);e.appendChild(f)};return document.addEventListener("mouseup",d=>{e!==d.target&&(e.style.display="none")}),this._subscribe("ViewDidSwitch",c),this._subscribe("ObjectDidLoad",c),Ot("div",this._elemAttrs("view-menu"),o,e)}createFullscreenButton(){let e=this._createFullscreenIcon();return this.createButton("fullscreen-icon","Toggle fullscreen mode",()=>{this.viewer.toggleFullscreenMode()},e)}toggleZoomGridControls(){this.settings.inGrid?(document.getElementById(this.settings.ID+"zoom-controls").style.display="none",document.getElementById(this.settings.ID+"grid-controls").style.display="block"):(document.getElementById(this.settings.ID+"zoom-controls").style.display="block",document.getElementById(this.settings.ID+"grid-controls").style.display="none")}render(){this._subscribe("ViewDidSwitch",this.toggleZoomGridControls),this._subscribe("ObjectDidLoad",this.toggleZoomGridControls);let e=[this.createZoomButtons(),this.createGridControls()],t=[this.createPageLabel(),this.createViewMenu()];this.settings.enableFullscreen&&t.push(this.createFullscreenButton()),this.settings.enableGotoPage&&t.splice(1,0,this.createGotoPageForm());let i=this.viewer.viewerState.pluginInstances;for(let o=0,a=i.length;o<a;o++){let c=i[o];!c.toolbarSide||(c.toolbarIcon=c.createIcon(),c.toolbarIcon&&("right"===c.toolbarSide?t.splice(2,0,c.toolbarIcon):"left"===c.toolbarSide&&e.splice(2,0,c.toolbarIcon),c.toolbarIcon.addEventListener("click",r.bind(this,c))))}function r(o){o.handleClick(this.viewer)}const s=Ot("div",this._elemAttrs("tools"),Ot("div",this._elemAttrs("tools-left"),e),Ot("div",this._elemAttrs("tools-right"),t));this.settings.toolbarParentObject.insertBefore(s,this.settings.toolbarParentObject.firstChild)}_createToolbarIcon(e){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttributeNS(null,"viewBox","0 0 25 25"),t.setAttributeNS(null,"x","0px"),t.setAttributeNS(null,"y","0px"),t.setAttributeNS(null,"style","enable-background:new 0 0 48 48;");let i=document.createElementNS("http://www.w3.org/2000/svg","g");return i.setAttributeNS(null,"transform","matrix(1, 0, 0, 1, -12, -12)"),e.forEach(r=>{let s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d",r),i.appendChild(s)}),t.appendChild(i),t}_createZoomOutIcon(){return this._createToolbarIcon(["M19.5,23c-0.275,0-0.5-0.225-0.5-0.5v-1c0-0.275,0.225-0.5,0.5-0.5h7c0.275,0,0.5,0.225,0.5,0.5v1c0,0.275-0.225,0.5-0.5,0.5H19.5z","M37.219,34.257l-2.213,2.212c-0.202,0.202-0.534,0.202-0.736,0l-6.098-6.099c-1.537,0.993-3.362,1.577-5.323,1.577c-5.431,0-9.849-4.418-9.849-9.849c0-5.431,4.418-9.849,9.849-9.849c5.431,0,9.849,4.418,9.849,9.849c0,1.961-0.584,3.786-1.576,5.323l6.098,6.098C37.422,33.722,37.422,34.054,37.219,34.257z M29.568,22.099c0-3.706-3.014-6.72-6.72-6.72c-3.706,0-6.72,3.014-6.72,6.72c0,3.706,3.014,6.72,6.72,6.72C26.555,28.818,29.568,25.805,29.568,22.099z"])}_createZoomInIcon(){return this._createToolbarIcon(["M37.469,34.257l-2.213,2.212c-0.202,0.202-0.534,0.202-0.736,0l-6.098-6.099c-1.537,0.993-3.362,1.577-5.323,1.577c-5.431,0-9.849-4.418-9.849-9.849c0-5.431,4.418-9.849,9.849-9.849c5.431,0,9.849,4.418,9.849,9.849c0,1.961-0.584,3.786-1.576,5.323l6.098,6.098C37.672,33.722,37.672,34.054,37.469,34.257z M29.818,22.099c0-3.706-3.014-6.72-6.72-6.72c-3.706,0-6.72,3.014-6.72,6.72c0,3.706,3.014,6.72,6.72,6.72C26.805,28.818,29.818,25.805,29.818,22.099z M26.5,21H24v-2.5c0-0.275-0.225-0.5-0.5-0.5h-1c-0.275,0-0.5,0.225-0.5,0.5V21h-2.5c-0.275,0-0.5,0.225-0.5,0.5v1c0,0.275,0.225,0.5,0.5,0.5H22v2.5c0,0.275,0.225,0.5,0.5,0.5h1c0.275,0,0.5-0.225,0.5-0.5V23h2.5c0.275,0,0.5-0.225,0.5-0.5v-1C27,21.225,26.775,21,26.5,21z"])}_createGridMoreIcon(){return this._createToolbarIcon(["M29.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z"])}_createGridFewerIcon(){return this._createToolbarIcon(["M25.5,35c-0.275,0-0.5-0.225-0.5-0.5v-9c0-0.275,0.225-0.5,0.5-0.5h9c0.275,0,0.5,0.225,0.5,0.5v9c0,0.275-0.225,0.5-0.5,0.5H25.5z M22.5,35c0.275,0,0.5-0.225,0.5-0.5v-9c0-0.275-0.225-0.5-0.5-0.5h-9c-0.275,0-0.5,0.225-0.5,0.5v9c0,0.275,0.225,0.5,0.5,0.5H22.5z M34.5,23c0.275,0,0.5-0.225,0.5-0.5v-9c0-0.275-0.225-0.5-0.5-0.5h-9c-0.275,0-0.5,0.225-0.5,0.5v9c0,0.275,0.225,0.5,0.5,0.5H34.5z M22.5,23c0.275,0,0.5-0.225,0.5-0.5v-9c0-0.275-0.225-0.5-0.5-0.5h-9c-0.275,0-0.5,0.225-0.5,0.5v9c0,0.275,0.225,0.5,0.5,0.5H22.5z"])}_createGridViewIcon(){return this._createToolbarIcon(["M29.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z"])}_createBookViewIcon(){return this._createToolbarIcon(["M35,16.8v-1.323c0,0-2.292-1.328-5.74-1.328c-3.448,0-5.26,1.25-5.26,1.25s-1.813-1.25-5.26-1.25c-3.448,0-5.74,1.328-5.74,1.328V16.8l-1,0.531v0.021v15.687c0,0,4.531-1.578,6.999-1.578c2.468,0,5.001,0.885,5.001,0.885s2.532-0.885,5-0.885c0.306,0,0.643,0.024,1,0.066v4.325l1.531-2.016L33,35.852v-3.72c2,0.43,3,0.906,3,0.906V17.352v-0.021L35,16.8z M23,29.03c-1-0.292-2.584-0.679-3.981-0.679c-2.246,0-3.019,0.404-4.019,0.699V16.634c0,0,1.125-0.699,4.019-0.699c1.694,0,2.981,0.417,3.981,1.126V29.03z M33,29.051c-1-0.295-1.773-0.699-4.02-0.699c-1.396,0-2.981,0.387-3.98,0.679V17.06c1-0.709,2.286-1.126,3.98-1.126c2.895,0,4.02,0.699,4.02,0.699V29.051z"])}_createPageViewIcon(){return this._createToolbarIcon(["M29.425,29h4.47L29,33.934v-4.47C29,29.19,29.151,29,29.425,29z M34,14.563V28h-5.569C28.157,28,28,28.196,28,28.47V34H14.497C14.223,34,14,33.71,14,33.437V14.563C14,14.29,14.223,14,14.497,14h18.9C33.672,14,34,14.29,34,14.563z M25.497,26.497C25.497,26.223,25.275,26,25,26h-7c-0.275,0-0.497,0.223-0.497,0.497v1.006C17.503,27.777,17.725,28,18,28h7c0.275,0,0.497-0.223,0.497-0.497V26.497z M30.497,22.497C30.497,22.223,30.275,22,30,22H18c-0.275,0-0.497,0.223-0.497,0.497v1.006C17.503,23.777,17.725,24,18,24h12c0.275,0,0.497-0.223,0.497-0.497V22.497z M30.497,18.497C30.497,18.223,30.275,18,30,18H18c-0.275,0-0.497,0.223-0.497,0.497v1.006C17.503,19.777,17.725,20,18,20h12c0.275,0,0.497-0.223,0.497-0.497V18.497z"])}_createFullscreenIcon(){return this._createToolbarIcon(["M35,12H13c-0.55,0-1,0.45-1,1v22c0,0.55,0.45,1,1,1h22c0.55,0,1-0.45,1-1V13C36,12.45,35.55,12,35,12z M34,34H14V14h20V34z","M17,21.75v-4.5c0-0.138,0.112-0.25,0.25-0.25h4.5c0.138,0,0.17,0.08,0.073,0.177l-1.616,1.616l1.823,1.823c0.097,0.097,0.097,0.256,0,0.354l-1.061,1.06c-0.097,0.097-0.256,0.097-0.354,0l-1.823-1.823l-1.616,1.616C17.08,21.92,17,21.888,17,21.75z M20.97,25.97c-0.097-0.097-0.256-0.097-0.354,0l-1.823,1.823l-1.616-1.616C17.08,26.08,17,26.112,17,26.25v4.5c0,0.138,0.112,0.25,0.25,0.25h4.5c0.138,0,0.17-0.08,0.073-0.177l-1.616-1.616l1.823-1.823c0.097-0.097,0.097-0.256,0-0.354L20.97,25.97z M30.75,17h-4.5c-0.138,0-0.17,0.08-0.073,0.177l1.616,1.616l-1.823,1.823c-0.097,0.097-0.097,0.256,0,0.354l1.061,1.06c0.097,0.097,0.256,0.097,0.354,0l1.823-1.823l1.616,1.616C30.92,21.92,31,21.888,31,21.75v-4.5C31,17.112,30.888,17,30.75,17z M30.823,26.177l-1.616,1.616l-1.823-1.823c-0.097-0.097-0.256-0.097-0.354,0l-1.061,1.06c-0.097,0.097-0.097,0.256,0,0.354l1.823,1.823l-1.616,1.616C26.08,30.92,26.112,31,26.25,31h4.5c0.138,0,0.25-0.112,0.25-0.25v-4.5C31,26.112,30.92,26.08,30.823,26.177z M26,22.5c0-0.275-0.225-0.5-0.5-0.5h-3c-0.275,0-0.5,0.225-0.5,0.5v3c0,0.275,0.225,0.5,0.5,0.5h3c0.275,0,0.5-0.225,0.5-0.5V22.5z"])}}const OZ={get:BF,update:function(n,e){const t=BF(n),i=window.location.hash;if(t!==e)if("string"==typeof t){const r=i.indexOf("&"+n+"=")>0?i.indexOf("&"+n+"="):i.indexOf("#"+n+"="),s=r+n.length+2+t.length,o=0===r?"#":"&";window.location.replace(i.substring(0,r)+o+n+"="+e+i.substring(s))}else 0===i.length?window.location.replace("#"+n+"="+e):window.location.replace(i+"&"+n+"="+e)}};function BF(n){const e=window.location.hash;if(""!==e){let t=e.indexOf("&"+n+"=")>0?e.indexOf("&"+n+"="):e.indexOf("#"+n+"=");if(t>=0){t+=n.length+2;const i=e.indexOf("&",t);return i>t?decodeURIComponent(e.substring(t,i)):i<0?decodeURIComponent(e.substring(t)):""}return!1}return!1}class TS{constructor(e,t){if(!(e instanceof HTMLElement)&&(this.element=document.getElementById(e),null===this.element))throw new _F;if(!t.objectData)throw new vF("You must supply either a URL or a literal object to the `objectData` key.");this.options=Object.assign({adaptivePadding:.05,arrowScrollAmount:40,blockMobileMove:!1,objectData:"",enableAutoTitle:!0,enableFilename:!0,enableFullscreen:!0,enableGotoPage:!0,enableGotoSuggestions:!0,enableGridIcon:!0,enableGridControls:"buttons",enableImageTitles:!0,enableIndexAsLabel:!1,enableKeyScroll:!0,enableLinkIcon:!0,enableNonPagedVisibilityIcon:!0,enableSpaceScroll:!1,enableToolbar:!0,enableZoomControls:"buttons",fillParentHeight:!0,fixedPadding:10,fixedHeightGrid:!0,goDirectlyTo:0,hashParamSuffix:null,imageCrossOrigin:"anonymous",inFullscreen:!1,inBookLayout:!1,inGrid:!1,maxPagesPerRow:8,maxZoomLevel:-1,minPagesPerRow:2,minZoomLevel:0,onGotoSubmit:null,pageAliases:{},pageAliasFunction:function(){return!1},pageLoadTimeout:200,pagesPerRow:5,requestHeaders:{Accept:"application/json"},showNonPagedPages:!1,throbberTimeout:100,tileHeight:256,tileWidth:256,toolbarParentObject:null,verticallyOriented:!0,viewportMargin:200,zoomLevel:2},t);const i=Ot("div",{class:"diva-wrapper"+(this.options.fillParentHeight?" diva-wrapper-flexbox":"")});this.element.appendChild(i),this.options.toolbarParentObject=this.options.toolbarParentObject||i;const r=new EZ(i,this.options,this);this.viewerState=r.getInternalState(),this.settings=r.getSettings(),this.toolbar=this.settings.enableToolbar?new IZ(this):null,i.id=this.settings.ID+"wrapper",this.divaState={viewerCore:r,toolbar:this.toolbar};let s=Ms.Events.subscribe("ObjectDidLoad",()=>{null!==this.toolbar&&this.toolbar.render(),Ms.Events.unsubscribe(s)});this.hashState=this._getHashParamState(),this._loadOrFetchObjectData()}_loadOrFetchObjectData(){if("object"==typeof this.settings.objectData)setTimeout(()=>{this._loadObjectData(this.settings.objectData,this.hashState)},0);else{const e=fetch(this.settings.objectData,{headers:this.settings.requestHeaders}).then(t=>{if(!t.ok){Ms.Events.publish("ManifestFetchError",[t],this),this._ajaxError(t);let i=new Error(t.statusText);throw i.response=t,i}return t.json()}).then(t=>{this._loadObjectData(t,this.hashState)});this.divaState.viewerCore.setPendingManifestRequest(e)}}_showError(e){this.divaState.viewerCore.showError(e)}_ajaxError(e){const t=["Invalid objectData setting. Error code: "+e.status+" "+e.statusText];if(0===this.settings.objectData.lastIndexOf("http",0)){const r=this.settings.objectData.replace(/https?:\/\//i,"").split(/[/?#]/)[0];window.location.hostname!==r&&t.push(Ot("p","Attempted to access cross-origin data without CORS."),Ot("p","You may need to update your server configuration to support CORS. For help, see the ",Ot("a",{href:"https://github.com/DDMAL/diva.js/wiki/Installation#a-note-about-cross-site-requests",target:"_blank"},"cross-site request documentation.")))}this._showError(t)}_loadObjectData(e,t){let i;if(!e.hasOwnProperty("@context")&&(-1===e["@context"].indexOf("iiif")||-1===e["@context"].indexOf("shared-canvas")))throw new yF("This does not appear to be a IIIF Manifest.");Ms.Events.publish("ManifestDidLoad",[e],this),i=qa.fromIIIF(e);const r=t?this._getLoadOptionsForState(t,i):{};this.divaState.viewerCore.setManifest(i,r)}_getHashParamState(){const e={};return["f","v","z","n","i","p","y","x"].forEach(t=>{const i=OZ.get(t+this.settings.hashParamSuffix);!1!==i&&(e[t]=i)}),"true"===e.f?e.f=!0:"false"===e.f&&(e.f=!1),["z","n","p","x","y"].forEach(t=>{t in e&&(e[t]=parseInt(e[t],10))}),e}_getLoadOptionsForState(e,t){t=t||this.settings.manifest;const i="v"in e?this._getViewState(e.v):{};"f"in e&&(i.inFullscreen=e.f),"z"in e&&(i.zoomLevel=e.z),"n"in e&&(i.pagesPerRow=e.n);let r=this._getPageIndexForManifest(t,e.i);if(r>=0&&r<t.pages.length||(r=e.p-1,r>=0&&r<t.pages.length||(r=null)),null!==r){const s=parseInt(e.x,10),o=parseInt(e.y,10);i.goDirectlyTo=r,i.horizontalOffset=s,i.verticalOffset=o}return i}_getViewState(e){switch(e){case"d":return{inGrid:!1,inBookLayout:!1};case"b":return{inGrid:!1,inBookLayout:!0};case"g":return{inGrid:!0,inBookLayout:!1};default:return{}}}_getPageIndexForManifest(e,t){let i;const r=e.pages.length;for(i=0;i<r;i++)if(e.pages[i].f===t)return i;return-1}_getState(){let e;e=this.settings.inGrid?"g":this.settings.inBookLayout?"b":"d";const i=this.divaState.viewerCore.getCurrentLayout().getPageToViewportCenterOffset(this.settings.activePageIndex,this.viewerState.viewport);return{f:this.settings.inFullscreen,v:e,z:this.settings.zoomLevel,n:this.settings.pagesPerRow,i:!!this.settings.enableFilename&&this.settings.manifest.pages[this.settings.activePageIndex].f,p:!this.settings.enableFilename&&this.settings.activePageIndex+1,y:!!i&&i.y,x:!!i&&i.x}}_getURLHash(){const e=this._getState(),t=[];let i;for(i in e)!1!==e[i]&&t.push(i+this.settings.hashParamSuffix+"="+encodeURIComponent(e[i]));return t.join("&")}_getPageIndex(e){return this._getPageIndexForManifest(this.settings.manifest,e)}_checkLoaded(){return!!this.viewerState.loaded||(console.warn("The viewer is not completely initialized. This is likely because it is still downloading data. To fix this, only call this function if the isReady() method returns true."),!1)}_toggleFullscreen(){this._reloadViewer({inFullscreen:!this.settings.inFullscreen});let e,t=!1,i=document.getElementById(this.settings.selector+"tools");function s(){i.style.opacity=1,clearTimeout(e),!t&&this.settings.inFullscreen&&(e=setTimeout(function(){i.style.opacity=0},2e3))}this.settings.inFullscreen?(i.classList.add("diva-fullscreen-tools"),document.addEventListener("mousemove",s.bind(this)),document.getElementsByClassName("diva-viewport")[0].addEventListener("scroll",s.bind(this)),i.addEventListener("mouseenter",function(){t=!0}),i.addEventListener("mouseleave",function(){t=!1})):i.classList.remove("diva-fullscreen-tools")}_togglePageLayoutOrientation(){const e=!this.settings.verticallyOriented;return this._reloadViewer({inGrid:!1,verticallyOriented:e,goDirectlyTo:this.settings.activePageIndex,verticalOffset:this.divaState.viewerCore.getYOffset(),horizontalOffset:this.divaState.viewerCore.getXOffset()}),e}_changeView(e){switch(e){case"document":return this._reloadViewer({inGrid:!1,inBookLayout:!1});case"book":return this._reloadViewer({inGrid:!1,inBookLayout:!0});case"grid":return this._reloadViewer({inGrid:!0});default:return!1}}_gotoPageByIndex(e,t,i){let r=parseInt(e,10);if(this._isPageIndexValid(r)){const s=this.divaState.viewerCore.getXOffset(r,t),o=this.divaState.viewerCore.getYOffset(r,i);return this.viewerState.renderer.goto(r,o,s),!0}return!1}_isPageIndexValid(e){return this.settings.manifest.isPageValid(e,this.settings.showNonPagedPages)}_getPageIndexForPageXYValues(e,t){const i=this.viewerState.outerElement.getBoundingClientRect();if(e<i.left||e>i.right||t<i.top||t>i.bottom)return-1;const c=document.getElementsByClassName("diva-page");let d=c.length;for(;d--;){const f=c[d],p=f.getBoundingClientRect();if(!(e<p.left||e>p.right||t<p.top||t>p.bottom))return f.getAttribute("data-index")}return-1}_reloadViewer(e){return this.divaState.viewerCore.reload(e)}_getCurrentURL(){return location.protocol+"//"+location.host+location.pathname+location.search+"#"+this._getURLHash()}activate(){this.viewerState.isActiveDiva=!0}changeObject(e){this.viewerState.loaded=!1,this.divaState.viewerCore.clear(),this.viewerState.renderer&&this.viewerState.renderer.destroy(),this.viewerState.options.objectData=e,this._loadOrFetchObjectData()}changeView(e){this._changeView(e)}deactivate(){this.viewerState.isActiveDiva=!1}destroy(){this.divaState.viewerCore.destroy()}disableScrollable(){this.divaState.viewerCore.disableScrollable()}enableScrollable(){this.divaState.viewerCore.enableScrollable()}disableDragScrollable(){this.divaState.viewerCore.disableDragScrollable()}enableDragScrollable(){this.divaState.viewerCore.enableDragScrollable()}enterFullscreenMode(){return!this.settings.inFullscreen&&(this._toggleFullscreen(),!0)}enterGridView(){return!this.settings.inGrid&&(this._changeView("grid"),!0)}getAllPageURIs(){return this.settings.manifest.pages.map(e=>e.f)}getCurrentCanvas(){return this.settings.manifest.pages[this.settings.activePageIndex].canvas}getCurrentPageDimensionsAtCurrentZoomLevel(){return this.getPageDimensionsAtCurrentZoomLevel(this.settings.activePageIndex)}getCurrentPageFilename(){return console.warn("This method will be deprecated in the next version of Diva. Please use getCurrentPageURI instead."),this.settings.manifest.pages[this.settings.activePageIndex].f}getCurrentPageIndices(){return this.settings.currentPageIndices}getActivePageIndex(){return this.settings.activePageIndex}getCurrentPageOffset(){return this.getPageOffset(this.settings.activePageIndex)}getCurrentPageURI(){return this.settings.manifest.pages[this.settings.activePageIndex].f}getCurrentURL(){return this._getCurrentURL()}getFilenames(){return console.warn("This will be removed in the next version of Diva. Use getAllPageURIs instead."),this.settings.manifest.pages.map(e=>e.f)}getGridPagesPerRow(){return this.settings.pagesPerRow}getInstanceId(){return this.settings.ID}getInstanceSelector(){return this.divaState.viewerCore.selector}getItemTitle(){return this.settings.manifest.itemTitle}getMaxZoomLevel(){return this.settings.maxZoomLevel}getMaxZoomLevelForPage(e){return!!this._checkLoaded()&&this.settings.manifest.pages[e].m}getMinZoomLevel(){return this.settings.minZoomLevel}getNumberOfPages(){return!!this._checkLoaded()&&this.settings.numPages}getOtherImages(e){return this.settings.manifest.pages[e].otherImages}getPageDimensions(e){return this._checkLoaded()?this.divaState.viewerCore.getCurrentLayout().getPageDimensions(e):null}getPageDimensionsAtCurrentZoomLevel(e){let t=parseInt(e,10);if(!this._isPageIndexValid(t))throw new Error("Invalid Page Index");return this.divaState.viewerCore.getCurrentLayout().getPageDimensions(t)}getPageDimensionsAtZoomLevel(e,t){if(!this._checkLoaded())return!1;t>this.settings.maxZoomLevel&&(t=this.settings.maxZoomLevel);const r=this.settings.manifest.pages[parseInt(e,10)].d[parseInt(t,10)];return{width:r.w,height:r.h}}getPageImageURL(e,t){return this.settings.manifest.getPageImageURL(e,t)}getPageIndexForPageXYValues(e,t){return this._getPageIndexForPageXYValues(e,t)}getPageOffset(e,t){const i=this.divaState.viewerCore.getPageRegion(e,t);return{top:i.top,left:i.left}}getSettings(){return this.settings}getState(){return this._getState()}getZoomLevel(){return this.settings.zoomLevel}gotoPageByIndex(e,t,i){return this._gotoPageByIndex(e,t,i)}gotoPageByLabel(e,t,i){const r=this.settings.manifest.pages;let s=e.toLowerCase();for(let a=0,c=r.length;a<c;a++)if(r[a].l.toLowerCase().indexOf(s)>-1)return this._gotoPageByIndex(a,t,i);const o=parseInt(e,10)-1;return this._gotoPageByIndex(o,t,i)}gotoPageByName(e,t,i){console.warn("This method will be removed in the next version of Diva.js. Use gotoPageByURI instead.");const r=this._getPageIndex(e);return this._gotoPageByIndex(r,t,i)}gotoPageByURI(e,t,i){const r=this._getPageIndex(e);return this._gotoPageByIndex(r,t,i)}hasOtherImages(e){return!0===this.settings.manifest.pages[e].otherImages}hideNonPagedPages(){this._reloadViewer({showNonPagedPages:!1})}isInFullscreen(){return this.settings.inFullscreen}isPageIndexValid(e){return this._isPageIndexValid(e)}isPageInViewport(e){return this.viewerState.renderer.isPageVisible(e)}isReady(){return this.viewerState.loaded}isRegionInViewport(e,t,i,r,s){const o=this.divaState.viewerCore.getCurrentLayout();if(!o)return!1;const a=o.getPageOffset(e),c=a.top+i,d=a.left+t;return this.viewerState.viewport.intersectsRegion({top:c,bottom:c+s,left:d,right:d+r})}isVerticallyOriented(){return this.settings.verticallyOriented}leaveFullscreenMode(){return!!this.settings.inFullscreen&&(this._toggleFullscreen(),!0)}leaveGridView(){return!!this.settings.inGrid&&(this._reloadViewer({inGrid:!1}),!0)}setGridPagesPerRow(e){return!!this.divaState.viewerCore.isValidOption("pagesPerRow",e)&&this._reloadViewer({inGrid:!0,pagesPerRow:e})}setState(e){this._reloadViewer(this._getLoadOptionsForState(e))}setZoomLevel(e){return this.settings.inGrid&&this._reloadViewer({inGrid:!1}),this.divaState.viewerCore.zoom(e)}showNonPagedPages(){this._reloadViewer({showNonPagedPages:!0})}toggleFullscreenMode(){this._toggleFullscreen()}toggleNonPagedPagesVisibility(){this._reloadViewer({showNonPagedPages:!this.settings.showNonPagedPages})}toggleOrientation(){return this._togglePageLayoutOrientation()}translateFromMaxZoomLevel(e){return e/Math.pow(2,this.settings.maxZoomLevel-this.settings.zoomLevel)}translateToMaxZoomLevel(e){const t=this.settings.maxZoomLevel-this.settings.zoomLevel;return 0===t?e:e*Math.pow(2,t)}zoomIn(){return this.setZoomLevel(this.settings.zoomLevel+1)}zoomOut(){return this.setZoomLevel(this.settings.zoomLevel-1)}}TS.Events=Ms.Events;const Uu=TS;"undefined"!=typeof window&&function(n){n.Diva=n.Diva||TS}(window);let IS=(()=>{class n extends Je{constructor(){super(),this._selected=null}get selected(){return this._selected}set selected(t){this._selected=t,this.next(this._selected)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kZ=(()=>{class n{constructor(t,i){this.selectedSystem=t,this.stateService=i,this.creatingStaff=!1,this.firstPoint=null}ngOnInit(){this.diva=new Uu("diva-wrapper",{objectData:this.iiifManifest}),Uu.Events.subscribe("ActivePageDidChange",this.refreshOverlay.bind(this),this.diva.settings.ID),Uu.Events.subscribe("DocumentDidLoad",this.refreshOverlay.bind(this),this.diva.settings.ID),Uu.Events.subscribe("ZoomLevelDidChange",this.handleZoom.bind(this),this.diva.settings.ID),this.selectedSystem.subscribe(()=>{this.refreshOverlay(this.diva.getActivePageIndex())})}ngOnDestroy(){this.selectedSystem.selected=null;try{this.diva.deactivate(),this.diva.destroy()}catch(t){console.warn(t)}}handleKeydown(){this.diva.disableDragScrollable()}handleKeyup(){this.creatingStaff||this.diva.enableDragScrollable()}clickHandler(t){const i=t.target;if("rect"===i.tagName){Array.from(document.getElementsByClassName("selectedZone")).forEach(s=>{s.classList.remove("selectedZone")});let r=this.stateService.mei.getSystem(i.id);null!==r&&(this.selectedSystem.selected=r,i.classList.add("selectedZone"))}}mousedownHandler(t){if(t.shiftKey){this.creatingStaff=!0;const i=document.getElementById("editor-container-"+this.diva.getActivePageIndex().toString()).firstElementChild,r=i.createSVGPoint();r.x=t.clientX,r.y=t.clientY;const s=i.getScreenCTM();this.firstPoint=r.matrixTransform(s.inverse());let o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x",this.firstPoint.x.toString()),o.setAttribute("y",this.firstPoint.y.toString()),o.setAttribute("width","0"),o.setAttribute("height","0"),o.classList.add("zoneRect"),o.id="drawing-rect",i.appendChild(o)}}mousemoveHandler(t){if(this.creatingStaff){const i=document.getElementById("drawing-rect");if(null!==i){const r=i.viewportElement,s=r.createSVGPoint();s.x=t.clientX,s.y=t.clientY;const o=s.matrixTransform(r.getScreenCTM().inverse());i.setAttribute("x",Math.min(o.x,this.firstPoint.x).toString()),i.setAttribute("y",Math.min(o.y,this.firstPoint.y).toString()),i.setAttribute("width",Math.abs(o.x-this.firstPoint.x).toString()),i.setAttribute("height",Math.abs(o.y-this.firstPoint.y).toString())}}}mouseupHandler(t){if(this.creatingStaff){this.diva.enableDragScrollable(),this.creatingStaff=!1;const i=this.diva.getActivePageIndex(),r=document.getElementById("editor-container-"+i.toString()).firstElementChild,s=r.createSVGPoint();s.x=t.clientX,s.y=t.clientY;const o=r.getScreenCTM(),a=s.matrixTransform(o.inverse());let c=this.stateService.mei.getPb(i);null===c&&(c=new lF(this.diva.getCurrentCanvas()),c.index=i,c.codedVal=this.diva.settings.manifest.pages[i].l);let f,d=new wS({ulx:Math.min(this.firstPoint.x,a.x),uly:Math.min(this.firstPoint.y,a.y),lrx:Math.max(a.x,this.firstPoint.x),lry:Math.max(a.y,this.firstPoint.y)});f=null!==this.selectedSystem.selected?this.selectedSystem.selected.parent:this.stateService.mei.getOrCreatePart(Gn.triplum);const p=new ES;p.pb=c,p.sb=d,f.addSystem(p),this.selectedSystem.selected=p,this.refreshOverlay(i),this.firstPoint=null}}refreshOverlay(t){const i=this.diva.settings.innerElement,r=this.diva.getPageDimensionsAtCurrentZoomLevel(t),s=this.diva.settings.viewHandler._viewerCore.getPageRegion(t,{includePadding:!0,incorporateViewport:!0}),o=getComputedStyle(i,null).getPropertyValue("margin-left");let a=document.getElementById("editor-container-"+t.toString());null===a&&(a=document.createElement("div"),a.id="editor-container-"+t.toString(),a.classList.add("editor-container"),i.appendChild(a));const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=this.diva.getPageDimensionsAtZoomLevel(t,Number.MAX_SAFE_INTEGER);for(c.setAttribute("width",r.width.toString()),c.setAttribute("height",r.height.toString()),c.setAttribute("viewBox","0 0 "+d.width+" "+d.height),a.style.position="absolute",a.style.top=`${s.top}px`,a.style.left=s.left-parseInt(o)+"px";null!==a.firstChild;)a.firstChild.remove();let f=this.stateService.mei.getSystems().filter(p=>p.pb.index===t);for(const p of f){let m=p.sb.svg;c.appendChild(m),this.selectedSystem.selected===p&&m.classList.add("selectedZone")}a.appendChild(c)}handleZoom(){new Promise(t=>{Array.from(document.getElementsByClassName("editor-container")).forEach(i=>{i.style.display="none"}),setTimeout(t,this.diva.settings.zoomDuration+100)}).then(()=>{this.refreshOverlay(this.diva.getActivePageIndex()),Array.from(document.getElementsByClassName("editor-container")).forEach(t=>{t.style.display=""})})}}return n.\u0275fac=function(t){return new(t||n)(V(IS),V(Ql))},n.\u0275cmp=Wn({type:n,selectors:[["app-diva-view"]],hostBindings:function(t,i){1&t&&Ge("keydown.shift",function(){return i.handleKeydown()},!1,Gf)("keyup.shift",function(){return i.handleKeyup()},!1,Gf)},inputs:{iiifManifest:"iiifManifest"},decls:1,vars:0,consts:[["id","diva-wrapper",3,"mousedown","mousemove","click","mouseup"]],template:function(t,i){1&t&&(C(0,"div",0),Ge("mousedown",function(s){return i.mousedownHandler(s)})("mousemove",function(s){return i.mousemoveHandler(s)})("click",function(s){return i.clickHandler(s)})("mouseup",function(s){return i.mouseupHandler(s)}),w())},styles:['@import"https://unpkg.com/diva.js@6.0.2/build/diva.css";#diva-wrapper{height:calc(100% - 80px)}rect.zoneRect{fill:#000;fill-opacity:0;stroke:#000;stroke-dasharray:25,25;stroke-width:.25em}rect.selectedZone{stroke-dasharray:none;stroke:#000;opacity:.75;fill:none}\n\n/*# sourceMappingURL=diva-view.component.css.map*/'],encapsulation:2}),n})(),RZ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["app-general-help"]],decls:50,vars:0,consts:[["href","https://youtu.be/Z1Z_OrPhbhI","target","_blank"]],template:function(t,i){1&t&&(C(0,"h2"),D(1,"Manuscript Navigation"),w(),C(2,"ul"),C(3,"li"),D(4," To select the page of the manuscript you want to work on, either use the scrollbar to the right of the manuscript or type the folio number in the box and click the "),C(5,"code"),D(6,"Go"),w(),D(7," button. "),w(),C(8,"li"),D(9," Click the magnifying boxes for the appropriate zoom level and move around the manuscript using your mouse or the trackpad. "),w(),w(),vt(10,"mat-divider"),C(11,"h2"),D(12,"Metadata Entry"),w(),C(13,"p"),D(14," First enter basic metadata about the composition. This includes a short title for the work, composer name (if known), the notation type (selected from a drop-down menu), the siglum for the manuscript (if known). You should add your name by clicking the \u201cAdd Contributor\u201d button and selecting the appropriate role (Encoder, Proofreader, Editor) along with your name. You may add multiple contributors, and you may also add your name additional times with alternate roles (for example, if you are both encoder and editor). "),vt(15,"br"),D(16," If there is something you don't know, you can leave it as is and continue. "),vt(17,"br"),D(18," Metadata must be entered before staff input can fully begin.\n"),w(),vt(19,"mat-divider"),C(20,"h2"),D(21,"Adding Staves ("),C(22,"a",0),D(23,"Video clip"),w(),D(24,")"),w(),C(25,"ul"),C(26,"li"),D(27," To select an area for a new staff, hold "),C(28,"code"),D(29,"SHIFT"),w(),D(30," and click-and-drag an area surrounding the staff on the Diva.js viewer. When you release the mouse, a staff is added. "),w(),C(31,"li"),D(32," To select a staff, click on the bounding box on the viewer: it will appear as a solid box when you select it, and unselected staves will have bounding boxes with dashed lines. "),w(),C(33,"li"),D(34," Bounding boxes can overlap. "),w(),C(35,"li"),D(36," When a staff is selected, the voice it belongs to and mensuration of that voice can be set on the right. This information is saved automatically. It is important to set the correct voice part and mensuration for each stave so that the scoring-up process (next step) will work correctly. However, you can go back at any point and fix/update either the voice part or mensuration for any stave. "),w(),C(37,"li"),D(38," You can select as many staves as you need in this process, for all the voice parts. You can do this in any order, and can continue to the music input phase, and then later add more staves. "),w(),C(39,"li"),D(40,' To add musical components (pitches, rhythm, text), begin typing. This will add musical elements to the staff below the voice and mensuration options. Information on this process is available under the "Music Input Help" Tab. '),w(),C(41,"li"),D(42,' To delete a staff, first select it and then click the "Delete Staff" button under the "Staff Input" tab. '),w(),w(),vt(43,"mat-divider"),C(44,"h2"),D(45,"Saving Work on the Music Input Screen"),w(),C(46,"p"),D(47,' The \u201cDownload MEI File\u201d downloads any music input at this stage of the process as a parts-based MEI file. You can reload this parts-based MEI file at a later point from the home screen of the MP Editor (using the File chooser under the heading \u201cLoad an .mei file"). '),w(),C(48,"p"),D(49," You also have the option of downloading the Humdrum data by clicking on the button \u201cDownload System Humdrum.\u201d\n"),w())},directives:[ib],styles:[""]}),n})(),FZ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["app-music-input-help"]],decls:215,vars:0,consts:[["href","https://youtu.be/eo2j7Hqyhx0","target","_blank"],[1,"hi"],["href","https://youtu.be/4uG6ZD8ROYA","target","_blank"],["href","https://youtu.be/wRUgBgEa5mg","target","_blank"],[1,"hi2"],["href","https://youtu.be/5RC-x7cSotI","target","_blank"],["href","https://youtu.be/kSWEh43K4Uo","target","_blank"],["href","https://youtu.be/DJ33hipbJ9k","target","_blank"],["href","https://youtu.be/95ujvvwOGUk","target","_blank"],["href","https://youtu.be/qwvoeJCUZ5U","target","_blank"]],template:function(t,i){1&t&&(C(0,"h2"),D(1,"Music Input Instructions"),w(),C(2,"ul"),C(3,"li"),C(4,"b"),D(5," Adding clefs ("),C(6,"a",0),D(7,"Video clip"),w(),D(8,")"),w(),C(9,"ul"),C(10,"li"),D(11," Type "),C(12,"span",1),D(13,"C"),w(),D(14," to insert C3 clef, or "),C(15,"span",1),D(16,"F"),w(),D(17," to insert F4 clef."),w(),C(18,"li"),D(19," Press the up or down arrows to move the clef to another line."),w(),C(20,"li"),D(21," You can remove the clef by clicking the backspace/delete key."),w(),w(),w(),C(22,"li"),C(23,"b"),D(24," Adding key signatures ("),C(25,"a",2),D(26,"Video clip"),w(),D(27,")"),w(),C(28,"ul"),C(29,"li"),D(30," Type "),C(31,"span",1),D(32,"k"),w(),D(33," to enter key signature mode after adding a clef."),w(),C(34,"li"),D(35," Then enter the pitch name letter and accidental (either the keystroke - or #, see below) to add to key signature."),w(),C(36,"li"),D(37," To remove from a key signature, enter k, the same pitch letter, and accidental again."),w(),C(38,"li"),D(39," Example: For F-sharp, type "),C(40,"span",1),D(41,"k f #"),w(),w(),C(42,"li"),D(43," You can also remove the key signature by clicking the backspace/delete key."),w(),w(),w(),C(44,"li"),C(45,"b"),D(46," Adding pitches ("),C(47,"a",3),D(48,"Video clip"),w(),D(49,")"),w(),C(50,"ul"),C(51,"li"),D(52," Type pitch "),C(53,"span",1),D(54,"letter"),w(),D(55," name of each note to add them to the line: "),C(56,"span",1),D(57,"f.ed.efgagfgedderfag"),w(),w(),C(58,"li"),D(59,' Type "'),C(60,"span",1),D(61,"."),w(),D(62,'" to add dot after note.'),w(),C(63,"li"),D(64,' Type "'),C(65,"span",1),D(66,"r"),w(),D(67,'" to add a rest.'),w(),C(68,"li"),D(69," Type "),C(70,"span",4),D(71,"backspace"),w(),D(72," to delete a note or notes."),w(),C(73,"li"),D(74," Use capital letters to choose the larger interval for the next pitch. So if you are on `d` and want to go to the `a` a fifth above, type capital A rather than lowercase (which would give the `a` that is a fourth below)."),w(),C(75,"li"),C(76,"span",4),D(77,"Up/down"),w(),D(78," arrows transpose last pitch up/down a step."),w(),C(79,"li"),C(80,"span",4),D(81,"Shift-up/down"),w(),D(82," arrows transpose last pitch up/down an octave."),w(),w(),w(),C(83,"li"),C(84,"b"),D(85," Adding Accidentals ("),C(86,"a",5),D(87,"Video clip"),w(),D(88,")"),w(),vt(89,"br"),D(90," After adding a note: "),C(91,"ul"),C(92,"li"),D(93," press "),C(94,"code"),D(95,"-"),w(),D(96," to add a flat."),w(),C(97,"li"),D(98," press "),C(99,"code"),D(100,"#"),w(),D(101," to add a sharp."),w(),C(102,"li"),D(103," press "),C(104,"code"),D(105,"n"),w(),D(106," to add a natural."),w(),C(107,"li"),D(108," press "),C(109,"code"),D(110,"N"),w(),D(111," to clear the accidental for that note."),w(),w(),w(),C(112,"li"),C(113,"b"),D(114," Adding ligatures ("),C(115,"a",6),D(116,"Video clip"),w(),D(117,")"),w(),vt(118,"br"),D(119,"Note that while duration of pitches in ligatures can be changed after the fact (in the score editor screen), ligatures must be specified as pitches are added in the music input phase. "),C(120,"ul"),C(121,"li"),D(122," After adding a note, press "),C(123,"span",4),D(124,"["),w(),D(125," to start a ligature."),w(),C(126,"li"),D(127," After adding a note, press "),C(128,"span",4),D(129,"]"),w(),D(130," to end a ligature."),w(),w(),w(),C(131,"li"),C(132,"b"),D(133," Adding rhythm ("),C(134,"a",7),D(135,"Video clip"),w(),D(136,")"),w(),C(137,"ul"),C(138,"li"),C(139,"span",1),D(140,"1"),w(),D(141," semibreve, "),C(142,"span",1),D(143,"2"),w(),D(144," minim, "),C(145,"span",1),D(146,"4"),w(),D(147," semiminim, "),C(148,"span",1),D(149,"8"),w(),D(150," fusa, "),C(151,"span",1),D(152,"6"),w(),D(153," semifusa, "),C(154,"span",1),D(155,"0"),w(),D(156," breve, "),C(157,"span",1),D(158,"9"),w(),D(159," long, "),C(160,"span",1),D(161,"7"),w(),D(162," maxima. "),w(),C(163,"li"),C(164,"i"),D(165,"Interleaved method"),w(),D(166,": type (new) rhythm before adding a note. The default rhythm is whole note (semibreve)."),w(),C(167,"li"),C(168,"i"),D(169,"Second-pass method"),w(),D(170,": type pitches first, then select first note and type rhythms to update note rhythms."),w(),C(171,"li"),C(172,"i"),D(173,"Selective second-pass method"),w(),D(174,": type clef, then most common rhythm, then notes, then click on notes that need rhythms to fix. Typing rhythm number will change rhythm and advance to next note."),w(),C(175,"li"),D(176," left/right arrow keys or tab/shift-tab moves to next/previous note/rest/clef."),w(),w(),w(),C(177,"li"),C(178,"b"),D(179," Adding text ("),C(180,"a",8),D(181,"Video clip"),w(),D(182,")"),w(),C(183,"ul"),C(184,"li"),D(185,"Click on a note (or left/right arrows or tab/shift-tab to move to target note)."),w(),C(186,"li"),D(187,"Type text for note, then press the pace, tab, or right arrow key or click to go to next note and enter the next word/syllable."),w(),C(188,"li"),C(189,"span",4),D(190,"backspace"),w(),D(191," delete last letter."),w(),C(192,"li"),C(193,"span",4),D(194,"shift-backspace"),w(),D(195," deletes the entire syllable."),w(),C(196,"li"),D(197," Adding a dash at the end of text input for a note marks that this is part of a word that continues to the next note, and a hypphen will be seen on the screen."),w(),C(198,"li"),D(199," To correct mistyped text, click the note to highlight it and press backspace. Then type the new text that belongs to that note."),w(),w(),w(),C(200,"li"),C(201,"b"),D(202," Repeating tenor ("),C(203,"a",9),D(204,"Video clip"),w(),D(205,")"),w(),C(206,"ul"),C(207,"li"),D(208,"When a staff that belongs to the tenor part is selected, the number of statements can be indicated."),w(),C(209,"li"),D(210,"If more than one tenor statement is indicated, a repeating tenor will be generated."),w(),C(211,"li"),D(212,'Where the tenor repeats from can be set after entering that element by pressing the "Set End of Repeating Tenor" button. The ending will be highlighted in blue. '),w(),C(213,"li"),D(214,"If no end point is specified, the entire tenor will repeat by default."),w(),w(),w(),w())},styles:[""]}),n})();var Hg=Se(575);function NZ(n,e){if(1&n){const t=Js();C(0,"button",1),C(1,"a",5),Ge("click",function(r){return tn(t),Nt().saveHumdrumClick(r)}),D(2," Download System Humdrum "),w(),w()}}function LZ(n,e){if(1&n){const t=Js();C(0,"button",6),Ge("click",function(){return tn(t),Nt().deleteStaff()}),D(1," Delete Staff "),w()}}let VZ=(()=>{class n{constructor(t,i,r){this.selectedSystem=t,this.stateService=i,this.dialog=r}ngOnInit(){this.selectedSystem.subscribe(t=>{this.currentStaff=t})}saveClick(t){let i=t.target;const r=this.stateService.mei.generateXML(),o=(new XMLSerializer).serializeToString(r),a=Hg.xml('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n'+o),c=new Blob([a],{type:"application/xml"});i.setAttribute("href",window.URL.createObjectURL(c)),i.setAttribute("download","Parts_"+(0,ko.v4)()+".xml")}saveHumdrumClick(t){let i=t.target;const s=this.currentStaff.contents.getHumdrumScore({white:"mensural.white"===this.currentStaff.parent.parent.notationType}),o=new Blob([s],{type:"text/plain"});i.setAttribute("href",window.URL.createObjectURL(o))}deleteStaff(){let t=this.currentStaff;t.parent.removeSystem(t.id),this.selectedSystem.next(null)}}return n.\u0275fac=function(t){return new(t||n)(V(IS),V(Ql),V(sF))},n.\u0275cmp=Wn({type:n,selectors:[["app-toolbar"]],decls:6,vars:2,consts:[[1,"toolbar-container"],["mat-stroked-button",""],["download","","type","application/xml",3,"click"],["mat-stroked-button","",4,"ngIf"],["mat-stroked-button","",3,"click",4,"ngIf"],["download","","type","text/plain",3,"click"],["mat-stroked-button","",3,"click"]],template:function(t,i){1&t&&(C(0,"div",0),C(1,"button",1),C(2,"a",2),Ge("click",function(s){return i.saveClick(s)}),D(3," Download MEI File "),w(),w(),$n(4,NZ,3,0,"button",3),$n(5,LZ,2,0,"button",4),w()),2&t&&(Qe(4),We("ngIf",i.currentStaff),Qe(1),We("ngIf",i.currentStaff))},directives:[Ph,Eu],styles:[".toolbar-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-top:.5em;padding-bottom:.5em}\n/*# sourceMappingURL=toolbar.component.css.map*/"]}),n})();const BZ=["example"];function HZ(n,e){if(1&n&&(C(0,"option",31),D(1),w()),2&n){const t=e.$implicit;nh("value",t[0]),Qe(1),hu(t[1])}}function jZ(n,e){if(1&n&&(C(0,"option",31),D(1),w()),2&n){const t=e.$implicit;nh("value",t[1]),Qe(1),hu(t[1])}}function UZ(n,e){if(1&n){const t=Js();C(0,"form",6),C(1,"h1"),D(2,"Enter Music"),w(),C(3,"fieldset"),C(4,"label",7),D(5,"Voice:\xa0 "),C(6,"select",8),Ge("ngModelChange",function(r){return tn(t),Nt().selected.voice=r}),$n(7,HZ,2,2,"option",9),w(),w(),w(),C(8,"h3",7),D(9,"Select Initial Mensuration:"),w(),C(10,"div",10),C(11,"fieldset"),C(12,"legend",11),D(13,"modus"),w(),C(14,"input",12),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.modus=r}),w(),C(15,"label",13),D(16,"3"),w(),D(17," \xa0 "),C(18,"input",14),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.modus=r}),w(),C(19,"label",15),D(20,"2"),w(),D(21," \xa0 "),C(22,"input",16),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.modus=r}),w(),C(23,"label",17),D(24,"N/A"),w(),w(),C(25,"fieldset"),C(26,"legend",11),D(27,"tempus"),w(),C(28,"input",18),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.tempus=r}),w(),C(29,"label",19),D(30,"3"),w(),D(31," \xa0 "),C(32,"input",20),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.tempus=r}),w(),C(33,"label",21),D(34,"2"),w(),D(35," \xa0 "),C(36,"input",22),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.tempus=r}),w(),C(37,"label",23),D(38,"N/A"),w(),w(),C(39,"fieldset"),C(40,"legend",11),D(41,"prolatio"),w(),C(42,"input",24),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.prolatio=r}),w(),C(43,"label",25),D(44,"3"),w(),D(45," \xa0 "),C(46,"input",26),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.prolatio=r}),w(),C(47,"label",27),D(48,"2"),w(),D(49," \xa0 "),C(50,"input",28),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.prolatio=r}),w(),C(51,"label",29),D(52,"N/A"),w(),w(),w(),C(53,"fieldset"),C(54,"label",7),D(55,"Mensuration Sign:\xa0 "),C(56,"select",30),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.sign=r}),$n(57,jZ,2,2,"option",9),w(),w(),w(),w()}if(2&n){const t=Nt();We("formGroup",t.staffForm),Qe(6),We("ngModel",t.selected.voice),Qe(1),We("ngForOf",t.voices),Qe(7),We("ngModel",t.selected.parent.modus),Qe(4),We("ngModel",t.selected.parent.modus),Qe(4),We("ngModel",t.selected.parent.modus),Qe(6),We("ngModel",t.selected.parent.tempus),Qe(4),We("ngModel",t.selected.parent.tempus),Qe(4),We("ngModel",t.selected.parent.tempus),Qe(6),We("ngModel",t.selected.parent.prolatio),Qe(4),We("ngModel",t.selected.parent.prolatio),Qe(4),We("ngModel",t.selected.parent.prolatio),Qe(6),We("ngModel",t.selected.parent.sign),Qe(1),We("ngForOf",t.signs)}}function zZ(n,e){if(1&n&&(C(0,"option",31),D(1),w()),2&n){const t=e.$implicit;nh("value",t[1]),Qe(1),hu(t[1])}}function $Z(n,e){if(1&n){const t=Js();C(0,"div",32),C(1,"form",6),C(2,"fieldset"),C(3,"legend",11),D(4,"modus"),w(),C(5,"input",33),Ge("ngModelChange",function(r){tn(t);const s=Nt();return s.selected.contents.m_list[s.selected.contents.m_index].m_modus=r}),w(),C(6,"label",34),D(7,"3"),w(),D(8," \xa0 "),C(9,"input",35),Ge("ngModelChange",function(r){tn(t);const s=Nt();return s.selected.contents.m_list[s.selected.contents.m_index].m_modus=r}),w(),C(10,"label",36),D(11,"2"),w(),D(12," \xa0 "),C(13,"input",37),Ge("ngModelChange",function(r){tn(t);const s=Nt();return s.selected.contents.m_list[s.selected.contents.m_index].m_modus=r}),w(),C(14,"label",38),D(15,"N/A"),w(),w(),C(16,"fieldset"),C(17,"legend",11),D(18,"tempus"),w(),C(19,"input",39),Ge("ngModelChange",function(r){tn(t);const s=Nt();return s.selected.contents.m_list[s.selected.contents.m_index].m_tempus=r}),w(),C(20,"label",40),D(21,"3"),w(),D(22," \xa0 "),C(23,"input",41),Ge("ngModelChange",function(r){tn(t);const s=Nt();return s.selected.contents.m_list[s.selected.contents.m_index].m_tempus=r}),w(),C(24,"label",42),D(25,"2"),w(),D(26," \xa0 "),C(27,"input",43),Ge("ngModelChange",function(r){tn(t);const s=Nt();return s.selected.contents.m_list[s.selected.contents.m_index].m_tempus=r}),w(),C(28,"label",44),D(29,"N/A"),w(),w(),C(30,"fieldset"),C(31,"legend",11),D(32,"prolatio"),w(),C(33,"input",45),Ge("ngModelChange",function(r){tn(t);const s=Nt();return s.selected.contents.m_list[s.selected.contents.m_index].m_prolatio=r}),w(),C(34,"label",46),D(35,"3"),w(),D(36," \xa0 "),C(37,"input",47),Ge("ngModelChange",function(r){tn(t);const s=Nt();return s.selected.contents.m_list[s.selected.contents.m_index].m_prolatio=r}),w(),C(38,"label",48),D(39,"2"),w(),D(40," \xa0 "),C(41,"input",49),Ge("ngModelChange",function(r){tn(t);const s=Nt();return s.selected.contents.m_list[s.selected.contents.m_index].m_prolatio=r}),w(),C(42,"label",50),D(43,"N/A"),w(),w(),C(44,"fieldset"),C(45,"label",7),D(46,"Mensuration Sign:\xa0 "),C(47,"select",51),Ge("ngModelChange",function(r){tn(t);const s=Nt();return s.selected.contents.m_list[s.selected.contents.m_index].m_sign=r}),$n(48,zZ,2,2,"option",9),w(),w(),w(),w(),w()}if(2&n){const t=Nt();Qe(1),We("formGroup",t.mensurForm),Qe(4),We("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_modus),Qe(4),We("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_modus),Qe(4),We("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_modus),Qe(6),We("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_tempus),Qe(4),We("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_tempus),Qe(4),We("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_tempus),Qe(6),We("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_prolatio),Qe(4),We("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_prolatio),Qe(4),We("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_prolatio),Qe(6),We("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_sign),Qe(1),We("ngForOf",t.signs)}}function GZ(n,e){if(1&n){const t=Js();C(0,"div",52),C(1,"p"),D(2,' If the piece has repetitions of the tenor that are not written out in full, please specify here. See "Music Input Help" for details. '),w(),C(3,"button",53),Ge("click",function(){return tn(t),Nt().repTenorButton()}),D(4,"Set End of Repeating Tenor"),w(),D(5," \xa0 "),C(6,"label"),D(7,"Total Number of Tenor Statements:\xa0 "),C(8,"input",54),Ge("ngModelChange",function(r){return tn(t),Nt().selected.parent.repetitions=r}),w(),w(),w()}if(2&n){const t=Nt();Qe(8),We("ngModel",t.selected.parent.repetitions)}}function WZ(n,e){if(1&n){const t=Js();C(0,"button",55),Ge("click",function(){return tn(t),Nt().finishStep()}),D(1," Continue to Score Editor\n"),w()}}let qZ=(()=>{class n{constructor(t,i,r,s){this.selectedSystem=t,this.stateService=i,this.route=r,this.router=s,this.voices=Object.entries(Gn),this.signs=Object.entries(Ri),this.keySigMode=!1,this.pitchSig=null,this.accidSig=null,this.selected=null,this.staffForm=new An({voice:new yn(""),modus:new yn(""),tempus:new yn(""),prolatio:new yn(""),mensursign:new yn("")}),this.mensurForm=new An({modus2:new yn(""),tempus2:new yn(""),prolatio2:new yn(""),mensursign2:new yn("")})}ngOnInit(){this.selectedSystem.subscribe({next:t=>{if(this.selected=t,this.container.nativeElement.innerHTML="",null===t)return;let i=Wa.humdrumToSVG(t.contents.getHumdrumScore());this.container.nativeElement.appendChild(i)}})}updateSVG(){let i=Wa.humdrumToSVG(this.selectedSystem.selected.contents.getHumdrumScore({white:"mensural.white"===this.selectedSystem.selected.parent.parent.notationType}));if(this.container.nativeElement.innerHTML="",this.container.nativeElement.appendChild(i),/^[tT]enor/.test(this.selectedSystem.selected.parent.voice)){const r=this.selectedSystem.selected.parent;if(void 0!==r.endingId){let s=i.getElementById(r.endingId);null!==s&&s.setAttribute("fill","#00f")}}}handleClick(t){let i=t.target;for(;i;){if("g"===i.nodeName){let r;if(r=i.id.match(/-.*L(\d+)/)){this.selectedSystem.selected.contents.selectItemByLine(parseInt(r[1])),this.updateSVG();break}}i=i.parentNode}}finishStep(){const t=this.route.snapshot.paramMap.get("source"),i=this.route.snapshot.paramMap.get("identifier");this.router.navigate(["/score",t,i])}repTenorButton(){const t=this.stateService.mei.getPart(Gn.tenor);try{let s=this.container.nativeElement.querySelector(".layer").lastElementChild.id.match(/L(\d+)[\w\d]+$/),o=parseInt(s[1]),a=this.selectedSystem.selected.contents.m_list.filter(c=>c.m_line===o);t.endingId=a[0].m_id}catch(i){console.debug(i),t.endingId=void 0}this.updateSVG()}handleKeyPress(t){if(null==this.selectedSystem.selected)return;if(this.keySigMode)return this.handleKeySigPress(t),t.preventDefault(),void this.updateSVG();if(t.metaKey)return;let i=this.selectedSystem.selected.contents;if(i.m_index>=0&&1===t.key.length){if(t.key>="0"&&t.key<="9")return this.processDigit(Number(t.key),t),t.preventDefault(),void this.updateSVG();if(" "!==t.key&&i.addTextToCurrentItem(t.key))return t.preventDefault(),void this.updateSVG()}if(i.m_index>=0&&"Backspace"===t.key)t.shiftKey?i.clearTextOnCurrentItem():i.deleteCharacterOnCurrentItem(),t.preventDefault();else if(i.m_index<0&&"Backspace"===t.key)i.removeLastItem(),t.preventDefault();else switch(t.key){case"k":this.keySigMode=!0,console.debug("Set keySigMode"),t.preventDefault();break;case"C":i.addPitchFar(an.C),t.preventDefault();break;case"c":i.addPitchNear(an.C),t.preventDefault();break;case"D":i.addPitchFar(an.D),t.preventDefault();break;case"d":i.addPitchNear(an.D),t.preventDefault();break;case"E":i.addPitchFar(an.E),t.preventDefault();break;case"e":i.addPitchNear(an.E),t.preventDefault();break;case"F":i.addPitchFar(an.F),t.preventDefault();break;case"f":i.addPitchNear(an.F),t.preventDefault();break;case"G":i.addPitchFar(an.G),t.preventDefault();break;case"g":i.addPitchNear(an.G),t.preventDefault();break;case"A":i.addPitchFar(an.A),t.preventDefault();break;case"a":i.addPitchNear(an.A),t.preventDefault();break;case"B":i.addPitchFar(an.B),t.preventDefault();break;case"b":i.addPitchNear(an.B),t.preventDefault();break;case"m":case"M":i.hasOpenLigature()||i.addMensur(),t.preventDefault();break;case"p":case"P":this.processPlica(t.key),t.preventDefault();break;case"~":this.processColor(t.key),t.preventDefault();break;case"r":case"R":i.hasOpenLigature()?alert("Can't enter a rest in an open ligature! Please close first."):i.addRest(),t.preventDefault();break;case".":this.processDotKey(),t.preventDefault();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.processDigit(Number(t.key),t),t.preventDefault();break;case"Tab":t.shiftKey?i.selectBackward():i.selectForward(),t.preventDefault();break;case" ":case"ArrowRight":i.selectForward(),t.preventDefault();break;case"ArrowLeft":i.selectBackward(),t.preventDefault();break;case"ArrowUp":i.raisePitch(t.shiftKey?7:1),t.preventDefault();break;case"ArrowDown":i.lowerPitch(t.shiftKey?7:1),t.preventDefault();break;case"End":i.goToEndOfList(),t.preventDefault();break;case"[":i.hasOpenLigature()?alert("A ligature is already open!"):this.processLig(!0),t.preventDefault();break;case"]":i.hasOpenLigature()?this.processLig(!1):alert("No open ligature to close!"),t.preventDefault();break;case"#":case"-":case"N":case"n":this.processAccidental(t.key),t.preventDefault()}this.updateSVG()}processDigit(t,i){let r=this.selectedSystem.selected.contents;if(0===r.m_list.length)return void(3!==t&&(r.m_rhythm=t));var s=r.m_index,o=!1;s<0&&(s=r.m_list.length-1,o=!0);let a=r.m_list[s];if("clef"===a.m_type)return 3!==t&&(r.m_rhythm=t),void r.runNotationCallback();o?r.m_rhythm=t:("note"===a.m_type||"rest"===a.m_type)&&(o||(3!==t&&(a.m_rhythm=t,r.m_index+=1,r.m_rhythm=t,r.runNotationCallback()),r.m_index>=r.m_list.length&&(r.m_index=-1)))}processDotKey(){let t=this.selectedSystem.selected.contents;if(0===t.m_list.length)return;let i=t.m_index;i<0&&(i=t.m_list.length-1);let r=t.m_list[i];return"note"===r.m_type?(r.m_dot=!r.m_dot,void t.runNotationCallback()):void 0}processLig(t){let i=this.selectedSystem.selected.contents;if(0===i.m_list.length)return;let r=i.m_index;r<0&&(r=i.m_list.length-1);let s=i.m_list[r];if("note"===s.m_type){let o=s;return o.m_lig=t?o.m_lig===fr.START?fr.NONE:fr.START:o.m_lig===fr.END?fr.NONE:fr.END,void i.runNotationCallback()}}processPlica(t){let i=this.selectedSystem.selected.contents;if(0===i.m_list.length)return;let r=i.m_index;r<0&&(r=i.m_list.length-1);let s=i.m_list[r];if("note"===s.m_type){let o=s;return o.m_plica="p"===t?o.m_plica===ls.DOWN?ls.NONE:ls.DOWN:o.m_plica===ls.UP?ls.NONE:ls.UP,void i.runNotationCallback()}}processColor(t){let i=this.selectedSystem.selected.contents;if(0===i.m_list.length)return;let r=i.m_index;r<0&&(r=i.m_list.length-1);let s=i.m_list[r];if("note"===s.m_type){let o=s;return"~"===t&&(o.m_color=o.m_color===qr.COLORED?qr.NONE:qr.COLORED),void i.runNotationCallback()}if("rest"===s.m_type){let o=s;return"~"===t&&(o.m_color=o.m_color===qr.COLORED?qr.NONE:qr.COLORED),void i.runNotationCallback()}}handleKeySigPress(t){switch(t.key){case"a":case"A":case"b":case"B":case"c":case"C":case"d":case"D":case"e":case"E":case"f":case"F":case"g":case"G":null===this.pitchSig?this.pitchSig=t.key:(this.pitchSig=null,this.accidSig=null,this.keySigMode=!1,console.debug("unset keySigMode"));break;case"#":case"-":case"n":null!==this.pitchSig&&null===this.accidSig&&(this.accidSig=t.key,this.selectedSystem.selected.contents.processKeySig(this.pitchSig,this.accidSig),console.debug("Process with "+this.pitchSig+" and "+this.accidSig)),this.pitchSig=null,this.accidSig=null,this.keySigMode=!1,console.debug("unset keySigMode")}}processAccidental(t){let i=this.selectedSystem.selected.contents;if(0===i.m_list.length)return;let r=i.m_index;r<0&&(r=i.m_list.length-1);let s=i.m_list[r];if("note"===s.m_type){let o=s;switch(t){case"N":o.m_accid=co.NONE;break;case"#":o.m_accid=co.SHARP;break;case"-":o.m_accid=co.FLAT;break;case"n":o.m_accid=co.NATURAL}i.runNotationCallback()}}}return n.\u0275fac=function(t){return new(t||n)(V(IS),V(Ql),V(aa),V(dr))},n.\u0275cmp=Wn({type:n,selectors:[["app-staff-select"]],viewQuery:function(t,i){if(1&t&&zr(BZ,5),2&t){let r;Di(r=Ai())&&(i.container=r.first)}},hostBindings:function(t,i){1&t&&Ge("keydown",function(s){return i.handleKeyPress(s)},!1,Wf)},decls:6,vars:4,consts:[[3,"formGroup",4,"ngIf"],[3,"click"],["example",""],["id","mensur-change",4,"ngIf"],["id","tenor-section",4,"ngIf"],["color","primary","class","primary-button","mat-stroked-button","",3,"click",4,"ngIf"],[3,"formGroup"],[1,"music-subentry"],["formControlName","voice",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-container"],[1,"mensuration"],["type","radio","id","modus-3","formControlName","modus","value","3",3,"ngModel","ngModelChange"],["for","modus-3"],["type","radio","id","modus-2","formControlName","modus","value","2",3,"ngModel","ngModelChange"],["for","modus-2"],["type","radio","id","modus-na","formControlName","modus","value","0",3,"ngModel","ngModelChange"],["for","modus-na"],["type","radio","id","tempus-3","formControlName","tempus","value","3",3,"ngModel","ngModelChange"],["for","tempus-3"],["type","radio","id","tempus-2","formControlName","tempus","value","2",3,"ngModel","ngModelChange"],["for","tempus-2"],["type","radio","id","tempus-na","formControlName","tempus","value","0",3,"ngModel","ngModelChange"],["for","tempus-na"],["type","radio","id","prolatio-3","formControlName","prolatio","value","3",3,"ngModel","ngModelChange"],["for","prolatio-3"],["type","radio","id","prolatio-2","formControlName","prolatio","value","2",3,"ngModel","ngModelChange"],["for","prolatio-2"],["type","radio","id","prolatio-na","formControlName","prolatio","value","0",3,"ngModel","ngModelChange"],["for","prolatio-na"],["formControlName","mensursign",3,"ngModel","ngModelChange"],[3,"value"],["id","mensur-change"],["type","radio","id","modus2-3","formControlName","modus2","value","3",3,"ngModel","ngModelChange"],["for","modus2-3"],["type","radio","id","modus2-2","formControlName","modus2","value","2",3,"ngModel","ngModelChange"],["for","modus2-2"],["type","radio","id","modus2-na","formControlName","modus2","value","0",3,"ngModel","ngModelChange"],["for","modus2-na"],["type","radio","id","tempus2-3","formControlName","tempus2","value","3",3,"ngModel","ngModelChange"],["for","tempus2-3"],["type","radio","id","tempus2-2","formControlName","tempus2","value","2",3,"ngModel","ngModelChange"],["for","tempus2-2"],["type","radio","id","tempus2-na","formControlName","tempus2","value","0",3,"ngModel","ngModelChange"],["for","tempus2-na"],["type","radio","id","prolatio2-3","formControlName","prolatio2","value","3",3,"ngModel","ngModelChange"],["for","prolatio2-3"],["type","radio","id","prolatio2-2","formControlName","prolatio2","value","2",3,"ngModel","ngModelChange"],["for","prolatio2-2"],["type","radio","id","prolatio2-na","formControlName","prolatio2","value","0",3,"ngModel","ngModelChange"],["for","prolatio2-na"],["formControlName","mensursign2",3,"ngModel","ngModelChange"],["id","tenor-section"],["mat-stroked-button","",1,"primary-button",3,"click"],["type","number","min","1",3,"ngModel","ngModelChange"],["color","primary","mat-stroked-button","",1,"primary-button",3,"click"]],template:function(t,i){1&t&&($n(0,UZ,58,14,"form",0),C(1,"div",1,2),Ge("click",function(s){return i.handleClick(s)}),w(),$n(3,$Z,49,12,"div",3),$n(4,GZ,9,1,"div",4),$n(5,WZ,2,0,"button",5)),2&t&&(We("ngIf",i.selected),Qe(3),We("ngIf",i.selected&&i.selected.contents.m_index>=0&&"mensur"==i.selected.contents.m_list[i.selected.contents.m_index].m_type),Qe(1),We("ngIf",i.selected&&"tenor"===i.selected.voice),Qe(1),We("ngIf",i.selected))},directives:[Eu,fv,rv,bh,Au,ag,hg,ng,BD,yh,fg,pg,Ph,$D,VD,hv],styles:[".flex-container[_ngcontent-%COMP%]{display:flex}form[_ngcontent-%COMP%]{padding-top:.5em}.music-subentry[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:500;margin-top:.75rem}.mensuration[_ngcontent-%COMP%]{font-size:1.25rem}#tenor-section[_ngcontent-%COMP%]{background-color:#f9f0dc;border-style:solid;border-width:1px;padding-left:10px;padding-right:10px;margin-bottom:1rem}fieldset[_ngcontent-%COMP%]{padding-right:2.5em}\n/*# sourceMappingURL=staff-select.component.css.map*/"]}),n})();function ZZ(n,e){if(1&n){const t=Js();C(0,"div"),function(n,e,t){const i=de(),r=zt(),s=n+20,o=r.firstCreatePass?function(n,e,t,i,r){const s=e.consts,o=ni(s,i),a=ii(e,n,8,"ng-container",o);return null!==o&&$d(a,o,!0),vp(e,t,a,ni(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];Vs(o,!0);const a=i[s]=i[11].createComment("");Rd(r,i,a,o),qi(a,i),id(o)&&(mp(r,i,o),F_(r,o,i)),null!=t&&jd(i,o)}(1,28),C(2,"label",29),D(3,"Contributor:\xa0 "),C(4,"select",30),C(5,"option",31),D(6,"Encoder"),w(),C(7,"option",32),D(8,"Proofreader"),w(),C(9,"option",33),D(10,"Editor"),w(),w(),vt(11,"input",34),w(),D(12," \xa0 "),C(13,"button",35),Ge("click",function(){const s=tn(t).index;return Nt(3).removeContributor(s)}),D(14,"Remove"),w(),function(){let n=wi();const e=zt();ol()?va():(n=n.parent,Vs(n,!1)),e.firstCreatePass&&(Ec(e,n),Ls(n)&&e.queries.elementEnd(n))}(),w()}if(2&n){const t=e.$implicit;Qe(1),We("formGroup",t)}}function KZ(n,e){if(1&n){const t=Js();C(0,"form",9),Ge("submit",function(){return tn(t),Nt(2).onSetMetadata()}),C(1,"h1",10),D(2,"Enter Metadata"),w(),C(3,"label",11),D(4,"Short title:\xa0 "),vt(5,"input",12),w(),vt(6,"br"),C(7,"label",11),D(8,"Composer name:\xa0 "),vt(9,"input",13),w(),vt(10,"br"),C(11,"label",11),D(12,"Notation:\xa0 "),C(13,"select",14),C(14,"option",15),D(15,"Black Mensural \u2014 Ars antiqua"),w(),C(16,"option",16),D(17,"Black Mensural \u2014 Ars nova"),w(),C(18,"option",17),D(19,"White Mensural"),w(),w(),w(),vt(20,"br"),C(21,"label",11),D(22,"Manuscript Siglum:\xa0 "),vt(23,"input",18),w(),vt(24,"br"),C(25,"label",11),D(26,"Genre:\xa0 "),C(27,"select",19),C(28,"option",20),D(29,"Motet"),w(),C(30,"option",21),D(31,"Song"),w(),C(32,"option",22),D(33,"Conductus"),w(),C(34,"option",23),D(35,"Mass Movement"),w(),C(36,"option",24),D(37,"Plainchant"),w(),w(),w(),vt(38,"br"),$n(39,ZZ,15,1,"div",25),C(40,"div"),C(41,"button",26),Ge("click",function(){return tn(t),Nt(2).addContributor()}),D(42,"Add Contributor"),w(),w(),vt(43,"br"),C(44,"button",27),D(45,"Continue to Music Input"),w(),w()}if(2&n){const t=Nt(2);We("formGroup",t.metadataForm),Qe(39),We("ngForOf",t.temp.controls)}}function YZ(n,e){if(1&n&&(C(0,"mat-tab",7),$n(1,KZ,46,2,"form",8),w()),2&n){const t=Nt();Qe(1),We("ngIf",0===t.inputStep)}}function QZ(n,e){1&n&&vt(0,"app-toolbar")}function XZ(n,e){1&n&&vt(0,"app-staff-select")}function JZ(n,e){if(1&n&&(C(0,"mat-tab",36),vt(1,"mat-divider"),$n(2,QZ,1,0,"app-toolbar",37),vt(3,"mat-divider"),$n(4,XZ,1,0,"app-staff-select",37),w()),2&n){const t=Nt();Qe(2),We("ngIf",1===t.inputStep),Qe(2),We("ngIf",1===t.inputStep)}}let OS=(()=>{class n{constructor(t,i){if(this.stateService=t,this.route=i,this.metadataForm=new An({shortTitle:new yn("",[io.required]),composerName:new yn("",[io.required]),contributors:new kn([]),notationSubtype:new yn("",[io.required]),siglum:new yn("",[io.required]),genre:new yn("",[io.required])}),this.inputStep=n.InputStep.METADATA,this.source=this.route.snapshot.paramMap.get("source"),this.identifier=decodeURIComponent(this.route.snapshot.paramMap.get("identifier")),this.iiifManifest=uF(this.source,this.identifier),this.stateService.mei||(this.stateService.mei=new ab(this.iiifManifest)),null!=this.stateService.mei.metadata){this.metadataForm.controls.shortTitle.setValue(this.stateService.mei.metadata.shortTitle),this.metadataForm.controls.composerName.setValue(this.stateService.mei.metadata.composerName),this.metadataForm.controls.notationSubtype.setValue(this.stateService.mei.notationSubtype),this.metadataForm.controls.siglum.setValue(this.stateService.mei.metadata.siglum),this.metadataForm.controls.genre.setValue(this.stateService.mei.metadata.genre);let r=this.metadataForm.get("contributors");for(let s of this.stateService.mei.metadata.contributors){let o=new An({type:new yn(s.type,io.required),name:new yn(s.name,io.required)});r.push(o)}}this.temp=this.metadataForm.get("contributors"),console.debug(this.iiifManifest),console.debug(this.metadataForm.controls.contributors)}ngOnInit(){this.stateService.editorialMode=!1}onSetMetadata(){let t=this.metadataForm.value;this.stateService.mei.metadata={shortTitle:t.shortTitle,composerName:t.composerName,contributors:t.contributors.filter(i=>i.type.length>0&&i.name.length>0).map(i=>i),sourceIRI:this.iiifManifest,siglum:t.siglum,genre:t.genre},this.stateService.mei.notationSubtype=t.notationSubtype,this.inputStep=n.InputStep.INPUT}addContributor(){this.temp.push(new An({type:new yn("",[io.required]),name:new yn("",[io.required])}))}removeContributor(t){this.temp.removeAt(t)}}return n.\u0275fac=function(t){return new(t||n)(V(Ql),V(aa))},n.\u0275cmp=Wn({type:n,selectors:[["app-input"]],decls:10,vars:3,consts:[["id","editor-container"],[3,"iiifManifest"],["id","right-side"],["label","Metadata Input",4,"ngIf"],["label","Music Input",4,"ngIf"],["label","General Help"],["label","Music Input Help"],["label","Metadata Input"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["id","metadata-header"],[1,"metadataInput"],["id","shortTitle","formControlName","shortTitle","required",""],["id","composerName","formControlName","composerName","required",""],["id","notationSubtype","formControlName","notationSubtype","required",""],["value","Ars_antiqua"],["value","Ars_nova"],["value",""],["id","siglum","formControlName","siglum","required",""],["id","genre","formControlName","genre","required",""],["value","Motet"],["value","Song"],["value","Conductus"],["value","Mass Movement"],["value","Plainchant"],[4,"ngFor","ngForOf"],["color","primary","mat-stroked-button","","type","button",1,"primary-button",3,"click"],["color","primary","mat-stroked-button","","type","submit",1,"primary-button"],[3,"formGroup"],[1,"contributor"],["formControlName","type","required",""],["value","encoder"],["value","proofreader"],["value","editor"],["formControlName","name","required",""],["color","secondary","mat-stroked-button","","type","button",1,"secondary-button",3,"click"],["label","Music Input"],[4,"ngIf"]],template:function(t,i){1&t&&(C(0,"div",0),vt(1,"app-diva-view",1),C(2,"div",2),C(3,"mat-tab-group"),$n(4,YZ,2,1,"mat-tab",3),$n(5,JZ,5,2,"mat-tab",4),C(6,"mat-tab",5),vt(7,"app-general-help"),w(),C(8,"mat-tab",6),vt(9,"app-music-input-help"),w(),w(),w(),w()),2&t&&(Qe(1),We("iiifManifest",i.iiifManifest),Qe(3),We("ngIf",0===i.inputStep),Qe(1),We("ngIf",1===i.inputStep))},directives:[kZ,$R,Eu,pS,RZ,FZ,fv,rv,bh,yh,ag,hg,gv,Au,fg,pg,ng,Ph,ib,VZ,qZ],styles:["#editor-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(10,1fr)}app-diva-view[_ngcontent-%COMP%]{grid-column:1 / 7}#metadata-header[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}#right-side[_ngcontent-%COMP%]{overflow-y:scroll;grid-column:7 / 11;margin:1em 0 1em 1em}.metadataInput[_ngcontent-%COMP%]{width:30em}.metadataInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{float:right}.metadataInput[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{float:right;width:17em}.contributor[_ngcontent-%COMP%]{width:30em}.contributor[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{float:right}\n/*# sourceMappingURL=input.component.css.map*/"]}),n})();!function(n){let e;var t;(t=e=n.InputStep||(n.InputStep={}))[t.METADATA=0]="METADATA",t[t.INPUT=1]="INPUT"}(OS||(OS={}));let eK=(()=>{class n{constructor(){Wa.setup()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["app-root"]],decls:16,vars:0,consts:[["id","mainNav",1,"navbar","navbar-expand-lg","navbar-light"],["href","https://measuringpolyphony.org",1,"navbar-brand"],["src","assets/img/thumbnail.png","id","thumbnail"],["id","navTitle"],["id","navDescription"],[1,"clearfix"],["id","additionalButtons"],["href","https://measuringpolyphony.org/transcriptions.html",1,"additionalButtons"],["href","./",1,"additionalButtons"],["href","https://measuringpolyphony.org",1,"additionalButtons"]],template:function(t,i){1&t&&(C(0,"nav",0),C(1,"a",1),vt(2,"img",2),C(3,"div",3),D(4,"Measuring Polyphony"),w(),C(5,"div",4),D(6,"Digital encodings of late medieval music"),w(),vt(7,"div",5),w(),C(8,"div",6),C(9,"a",7),D(10," Browse "),w(),C(11,"a",8),D(12," Transcribe "),w(),C(13,"a",9),D(14,"About"),w(),w(),w(),vt(15,"router-outlet"))},directives:[lA],styles:['@import"https://unpkg.com/browse/startbootstrap-grayscale@4.0.0/css/grayscale.min.css";body[_ngcontent-%COMP%]{font-family:"Roboto",sans-serif;position:relative;width:100%;height:100%;color:#fff;background-color:#fff}html[_ngcontent-%COMP%]{font-family:"Roboto",sans-serif;width:100%;height:100%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:"Roboto",sans-serif;font-weight:700;margin:0 0 35px;letter-spacing:1px}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-family:"Roboto",sans-serif;border:1px solid white}p[_ngcontent-%COMP%]{font-family:"Roboto",sans-serif;font-size:12px;line-height:1.3;margin:0 0 25px}@media (min-width: 768px){p[_ngcontent-%COMP%]{font-size:14px;line-height:1.4;margin:0 0 35px}}#mainNav[_ngcontent-%COMP%]{font-family:"Merriweather",serif;margin-bottom:20px;text-transform:uppercase;border-bottom:1px solid rgba(255,255,255,.3);background-color:#9d2322;color:#fff;padding:4px 8px}#mainNav[_ngcontent-%COMP%]   #navDescription[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:12px;font-weight:normal}#mainNav[_ngcontent-%COMP%]   #navTitle[_ngcontent-%COMP%]{font-family:Merriweather,serif;margin-top:4px}#mainNav[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{font-size:14px;color:#fff;border:1px solid white;padding:8px;margin-right:10px}#mainNav[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{font-weight:bold;font-size:22px;margin-left:10px;color:#fff!important;display:block}#mainNav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{#loadOverlay {display: none};color:#fff}#mainNav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{transition:background .3s ease-in-out}#mainNav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{color:fade(white,80%);outline:none;background-color:#9d2322}#mainNav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:active, #mainNav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:focus{outline:none;background-color:transparent}.nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#fff!important}#mainNav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:12px;margin-top:28px}#additionalButtons[_ngcontent-%COMP%]{display:flex;margin-left:auto}.additionalButtons[_ngcontent-%COMP%]{color:#fff;padding-left:1rem}@media (min-width: 992px){#mainNav[_ngcontent-%COMP%]{transition:background .3s ease-in-out,padding-top .3s ease-in-out,padding-bottom .3s;letter-spacing:1px;border-bottom:none}#mainNav.navbar-shrink[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-bottom:1px solid rgba(255,255,255,.3);background:black}#mainNav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{outline:none;background-color:#ffffff4d}#mainNav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:hover{color:#fff}#mainNav[_ngcontent-%COMP%], #browse[_ngcontent-%COMP%]{font-size:20px;padding-right:50px;color:#fff!important}#mainNav[_ngcontent-%COMP%], #about[_ngcontent-%COMP%]{font-size:20px;color:#fff!important}}#thumbnail[_ngcontent-%COMP%]{margin-right:15px;float:left;vertical-align:center}@media (min-width: 768px){#mainNav[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{margin-left:20px}#mainNav[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{margin-right:20px}}\n/*# sourceMappingURL=app.component.css.map*/']}),n})();const fb="controlsError",pb="valueChangedSync",gb="rxwebValidator",mb="template-validation-config",jg="conditionalValidator",di="validatorConfig",Xl="modelInstance",RS="patch";class Ts{static functionCreator(e){for(var t=[],i=e.match(/^\s*\(?\s*([^)]*)\s*\)?\s*=>(.*)/),r=i[2].split(","),s=0;s<r.length;s++){var o=r[s].match(/^\s*\(?\s*([^)]*)\s*\)?\s*|===|!==|==|!=|>=|>|<=|<|(.*)/);null!==o?t=new Function(i[1],"return "+o.input):(o=r[s].match(/^\s*\(?\s*([^)]*)\s*\)?\s*=(.*)/),t=new Function(i[1],null===o?"return "+r.input:"return "+o.input))}return 0==r.length&&(t={accessFunction:new Function(i[1],"return "+i[2])}),t}static execute(e,t,i,r,s){let o=s?t.dynamicConfig:t.conditionalExpression,a=s?t:r;return i&&"string"==typeof o&&(o=Ts.functionCreator(o)),!i||!o||(r&&r.constructor!==Object?o.call(r,i,e,a):o(i,e,a))}static getConditionPath(e){let t="";for(var i=1;i<e.length;i++)t+=e.length-1==i?e[i].trim():`${e[i].trim()}.`;return t}static expressionParser(e,t){let r=[],s=e.toString(),o=Ts.extractArguments(s);if(o.length>0){let a=[];s.replace(/\s/g,"").replace(new RegExp(/{|}/,"g"),"").split(new RegExp(/return|===|!==|==|!=|>=|>|<=|<|&&/)).forEach(c=>{let d=c.replace(/\(|\)/g,"").split("||");for(let f of d)a.push(f)}),a.forEach(c=>{o.forEach((d,f)=>{if((c=c.trim()).startsWith(d+".")){var p=c.split(".");if(2==p.length||p.length>=2&&t)r.push(t?{propName:this.getConditionPath(p),argumentIndex:3==f?0:2==f?1:1==f?-1:f}:{propName:p[1].trim(),argumentIndex:3==f?0:2==f?1:1==f?-1:f});else{var m=p[1].split("[");let y={propName:p[p.length-1].trim(),objectPropName:m[0],arrayIndex:m.length>1?m[1].replace("]",""):void 0,argumentIndex:3===f?0:2===f?1:f};r.push(y)}}})})}return r}static extractArguments(e){let t=["this"];if("("===e[0].trim()||e.trim().startsWith("function")){let i=e.match(/\(([^)]+)\)/g);i&&i[0]&&i[0].split(",").forEach(r=>t.push(r.trim().replace("(","").replace(")","")))}else{let i=e[0].split("=>")[0];t.push(i.trim().replace("(","").replace(")",""))}return t}static expressionColumns(e,t=!1){var i=[];let r=[];return"string"==typeof e?(e.split("=>")[1].split(" && ").forEach(s=>{s.split(" || ").forEach(o=>{r.push(o.trim().split(" ")[0])})}),r.forEach(s=>{var o=s.split(".");if(2==o.length)i.push({propName:o[1].trim()});else{var a=o[1].split("[");let c={propName:o[o.length-1].trim(),objectPropName:a[0],arrayIndex:a.length>1?a[1].replace("]",""):void 0};i.push(c)}})):i=Ts.expressionParser(e,t),i}static dynamicConfigParser(e,t){let i=[],r=e.toString(),s=Ts.extractArguments(r),o=r.replace(new RegExp(/\r?\n|\r|;/g)," ").replace(/["%()\{}=\\?\ufffd`'#<>|,;:+-]+/g," ").split(/ /g);return s.length>3&&s.splice(s.length-1,1),s.forEach(a=>{o.filter(c=>c!=`${a}.${t}`&&c.startsWith(`${a}.`)).forEach(c=>{let d=c.split(".");if(2==d.length)i.push({propName:c.replace(`${a}.`,"")});else{var f=d[1].split("[");let p={propName:d[d.length-1].trim(),objectPropName:f[0],arrayIndex:f.length>1?f[1].replace("]",""):void 0};i.push(p)}})}),i}}const b={numeric:"numeric",required:"required",minLength:"minLength",maxLength:"maxLength",minNumber:"minNumber",maxNumber:"maxNumber",pattern:"pattern",password:"password",compare:"compare",minDate:"minDate",maxDate:"maxDate",alpha:"alpha",alphaNumeric:"alphaNumeric",email:"email",hexColor:"hexColor",lowerCase:"lowerCase",url:"url",upperCase:"upperCase",nested:"nested",propArray:"propArray",propObject:"propObject",contains:"contains",range:"range",custom:"custom",digit:"digit",creditCard:"creditCard",time:"time",json:"json",greaterThan:"greaterThan",greaterThanEqualTo:"greaterThanEqualTo",lessThan:"lessThan",lessThanEqualTo:"lessThanEqualTo",choice:"choice",different:"different",even:"even",odd:"odd",factor:"factor",leapYear:"leapYear",allOf:"allOf",oneOf:"oneOf",noneOf:"noneOf",mac:"mac",ascii:"ascii",dataUri:"dataUri",port:"port",latLong:"latLong",extension:"extension",fileSize:"fileSize",endsWith:"endsWith",startsWith:"startsWith",primeNumber:"primeNumber",latitude:"latitude",longitude:"longitude",compose:"compose",rule:"rule",file:"file",image:"image",unique:"unique",notEmpty:"notEmpty",ip:"ip",cusip:"cusip",grid:"grid",date:"date",and:"and",or:"or",not:"not",minTime:"minTime",maxTime:"maxTime",requiredTrue:"requiredTrue",mask:"mask",iban:"iban"},Is="objectProperty",uo="arrayProperty",UF="message",mt=new class{constructor(){this.instances=[],this.modelIncrementCount=0}get(n){return this.instances.filter(t=>t.instance===n)[0]}getInstance(n,e,t,i){let s=null!=t?n.constructor:n,o=this.instances.filter(a=>a.instance===s)[0];return o||(o=this.addInstanceContainer(s)),o}addPropsConfig(n,e){let t=this.instances.filter(i=>i.instance==n)[0];if(t)for(let i of e)for(let r of i.propNames){let s=t.properties.filter(o=>o.name==r&&o.propertyType!==Is&&o.propertyType!==uo)[0];s?this.addPropConfig(n,[s],i):":all:"===r&&this.addPropConfig(n,t.properties.filter(o=>o.propertyType!==Is&&o.propertyType!==uo),i)}else void 0===e&&this.addInstanceContainer(n)}addPropConfig(n,e,t){for(var i of e){let r=!1;if(t.excludePropNames&&(r=void 0!==t.excludePropNames.filter(s=>s==i.name)[0]),!r){if(t.validationConfig)for(let s in t.validationConfig)this.init({constructor:n},0,i.name,s,!0===t.validationConfig[s]?void 0:t.validationConfig[s],!1);t.error&&this.addDecoratorConfig({constructor:n},0,i.name,t.error,"error"),t.disable&&this.addDecoratorConfig({constructor:n},0,i.name,t.disable,"disabled"),t.elementClass&&this.addDecoratorConfig({constructor:n},0,i.name,t.elementClass,"elementClass"),t.ignore&&(i.ignore=t.ignore)}}}addSanitizer(n,e,t,i,r){let s=this.getInstance(n,e,t,i);s&&(s.sanitizers[t]||(s.sanitizers[t]=[]),s.sanitizers[t].push({name:i,config:r}))}addDecoratorConfig(n,e,t,i,r){let o=null!=t?n.constructor:n,a=this.instances.filter(d=>d.instance===o)[0];a||(a=this.addInstanceContainer(o)),a.nonValidationDecorators[r].conditionalExpressions[t]=i.conditionalExpression,Ts.expressionColumns(i.conditionalExpression,!0).forEach(d=>{if(-1!==d.argumentIndex){let f=d.objectPropName?`${d.objectPropName}.${d.propName}-rxw-${d.argumentIndex}`:`${d.propName}-rxw-${d.argumentIndex}`;a.nonValidationDecorators[r].changeDetection[f]||(a.nonValidationDecorators[r].changeDetection[f]=[]);let p=a.nonValidationDecorators[r].changeDetection[f];-1===p.indexOf(f)&&p.push(t)}else a.nonValidationDecorators[r].controlProp[t]||(a.nonValidationDecorators[r].controlProp[t]={}),a.nonValidationDecorators[r].controlProp[t][d.propName.replace(";","")]=!0})}init(n,e,t,i,r,s){this.addAnnotation(null!=t?n.constructor:n,{propertyIndex:e,propertyName:t,annotationType:i,config:r,isAsync:s})}initPropertyObject(n,e,t,i,r){mt.addProperty(i.constructor,{name:n,propertyType:e,entity:t,dataPropertyName:r?r.name:void 0,entityProvider:r?r.entityProvider:void 0})}addInstanceContainer(n){let e={instance:n,propertyAnnotations:[],properties:[],nonValidationDecorators:{disabled:{conditionalExpressions:{},changeDetection:{},controlProp:{}},error:{conditionalExpressions:{},changeDetection:{},controlProp:{}},elementClass:{conditionalExpressions:{},changeDetection:{},controlProp:{}}},sanitizers:{}};return this.instances.push(e),e}addProperty(n,e,t=!1){let i=this.instances.filter(r=>r.instance===n)[0];i?this.addPropertyInfo(i,e,!t):(i=this.addInstanceContainer(n),this.addPropertyInfo(i,e))}addPropertyInfo(n,e,t=!1){var i=this.getProperty(n,e);i?t&&this.updateProperty(i,e):n.properties.push(e)}addAnnotation(n,e){this.addProperty(n,{propertyType:"property",name:e.propertyName},!0);let t=this.instances.filter(i=>i.instance===n)[0];if(t||(t=this.addInstanceContainer(n)),t.propertyAnnotations.push(e),e.config&&e.config.conditionalExpression){let i=Ts.expressionColumns(e.config.conditionalExpression);this.addChangeValidation(t,e.propertyName,i)}if(e.config&&e.config.dynamicConfig){let i=Ts.dynamicConfigParser(e.config.dynamicConfig,e.propertyName);this.addChangeValidation(t,e.propertyName,i)}this.setConditionalColumns(t,e)}setConditionalColumns(n,e){n&&e.config&&(e.annotationType==b.and||e.annotationType==b.or||e.annotationType==b.not?Object.keys(e.config.validation).forEach(t=>{"boolean"!=typeof e.config.validation[t]&&this.setLogicalConditional(n,t,e.config.validation[t].fieldName,e.propertyName)}):this.setLogicalConditional(n,e.annotationType,e.config.fieldName,e.propertyName))}setLogicalConditional(n,e,t,i){n&&(e==b.compare||e==b.greaterThan||e==b.greaterThanEqualTo||e==b.lessThan||e==b.lessThanEqualTo||e==b.different||e==b.factor||e==b.minTime||e==b.maxTime||e==b.creditCard&&t||(e==b.minDate||e==b.maxDate)&&t)&&this.setConditionalValueProp(n,t,i)}setConditionalValueProp(n,e,t){if(e){let i=e.split?e.split("."):"";i.length<2?(n.conditionalValidationProps||(n.conditionalValidationProps={}),n.conditionalValidationProps[e]||(n.conditionalValidationProps[e]=[]),-1==n.conditionalValidationProps[e].indexOf(t)&&n.conditionalValidationProps[e].push(t)):this.addChangeValidation(n,t,[{argumentIndex:1,objectPropName:i[0],propName:i[1],referencePropName:t}])}}addChangeValidation(n,e,t){n&&(n.conditionalValidationProps||(n.conditionalValidationProps={}),t.forEach(i=>{i.propName&&!i.objectPropName?(n.conditionalValidationProps[i.propName]||(n.conditionalValidationProps[i.propName]=[]),-1==n.conditionalValidationProps[i.propName].indexOf(e)&&n.conditionalValidationProps[i.propName].push(e)):i.propName&&i.objectPropName&&(n.conditionalObjectProps||(n.conditionalObjectProps=[]),i.referencePropName=e,n.conditionalObjectProps.push(i))}))}clearInstance(n){let e=this.instances.filter(t=>t.instance===n)[0];if(e){let t=this.instances.indexOf(e);this.instances.splice(t,1)}}getProperty(n,e){return n.properties.filter(t=>t.name==e.name)[0]}updateProperty(n,e){n.dataPropertyName=e.dataPropertyName,n.defaultValue=e.defaultValue}},ln={alpha:/^[a-zA-Z]+$/,alphaExits:/[a-zA-Z]/,alphaWithSpace:/^[a-zA-Z\s]+$/,macId:/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,onlyDigit:/^[0-9]+$/,isDigitExits:/[0-9]/,lowerCase:/[a-z]/,upperCase:/[A-Z]/,specialCharacter:/[!`=+-_~;'@#$%^&*(),.?":{}|<>]/,advancedEmail:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,basicEmail:/^(([^<>()\[\]\\.,,:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,alphaNumeric:/^[0-9a-zA-Z]+$/,alphaNumericWithSpace:/^[0-9a-zA-Z\s]+$/,hexColor:/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,strictHexColor:/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,float:/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,decimal:/^[-+]?([0-9]+|\.[0-9]+|[0-9]+\.[0-9]+)$/,hexaDecimal:/^[0-9A-F]+$/i,date:/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/,time:/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/,timeWithSeconds:/^([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/,url:/^(https?:\/\/(?:www\.|(?!www)|(?!a-zA-Z))[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www)|(?!a-zA-Z))[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9]\.[^\s]{2,})$/,localhostUrl:/^(https?:\/\/localhost\:([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])|localhost\::([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])|https?:\/\/localhost\::([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5]))$/,interanetUrl:/^(https?:\/\/[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9])$/,ascii:/^[\x00-\x7F]+$/,dataUri:/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)$/i,lat:/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,long:/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,ipV4:/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,ipV6:/^((?:[a-fA-F\d]{1,4}:){7}(?:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(:[a-fA-F\d]{1,4}){1,2}|:)|(?:[a-fA-F\d]{1,4}:){4}(?:(:[a-fA-F\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(:[a-fA-F\d]{1,4}){1,3}|:)|(?:[a-fA-F\d]{1,4}:){3}(?:(:[a-fA-F\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(:[a-fA-F\d]{1,4}){1,4}|:)|(?:[a-fA-F\d]{1,4}:){2}(?:(:[a-fA-F\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(:[a-fA-F\d]{1,4}){1,5}|:)|(?:[a-fA-F\d]{1,4}:){1}(?:(:[a-fA-F\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(:[a-fA-F\d]{1,4}){1,6}|:)|(?::((?::[a-fA-F\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,7}|:)))(%[0-9a-zA-Z]{1,})?$/,cidrV4:/^(3[0-2]|[12]?[0-9])$/,cidrV6:/^(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cusip:/^[0-9A-Z]{9}$/,grid:/^[GRID:]*([0-9A-Z]{2})[-\s]*([0-9A-Z]{5})[-\s]*([0-9A-Z]{10})[-\s]*([0-9A-Z]{1})$/g},qF="alphabet",NS="contains",KF="lowerCase",YF="upperCase",QF="specialCharacter",XF="minLength",JF="maxLength";class st{static isExits(e,t){return null!=e.match(t)}static isValid(e,t){return t.test(e)}static isNotBlank(e,t=!1){return t?0===e||null!=e&&""!==String(e).trim():0===e||null!=e&&""!==e}static isValidPassword(e,t){let i=!1,s="status",o=Object.getOwnPropertyNames(e);for(let a of o){switch(a){case qF:i=st.isExits(t,ln.alphaExits),s=qF;break;case"digit":i=st.isValid(t,ln.isDigitExits),s="digit";break;case NS:i=-1!=t.indexOf(e[NS]),s=NS;break;case KF:i=st.isValid(t,ln.lowerCase),s=KF;break;case YF:i=st.isValid(t,ln.upperCase),s=YF;break;case QF:i=st.isExits(t,ln.specialCharacter),s=QF;break;case XF:i=t.length>=e[a],s=XF;break;case JF:i=t.length<=e[a],s=JF}if(!i)break}return{isValid:i,keyName:s}}static isZero(e){return 0==e}static commaRegex(){return new RegExp(",","g")}}let fe=(()=>{class n{static set(t){t&&(n.json=t)}static get(t){let i;if(n.json){let r=t.split(".");for(let s of r)if(i=i?i[s]:n.json[s],!i)break}return i}}return n.i18n={},n.number={},n.json={},n.autoInstancePush=!1,n})();function hK(n){return"[object Object]"===Object.prototype.toString.call(n)}function Ka(n){let e={};if(function(n){return!("string"==typeof n||"number"==typeof n||"boolean"==typeof n||n instanceof Date)}(n)){for(var t in n)if("formGroup"!=t)if(Array.isArray(n[t])){e[t]=[];for(let i of n[t])hK(i)?e[t].push(Ka(i)):e[t].push(i)}else e[t]="object"!=typeof n[t]||n[t]instanceof RegExp?n[t]:Ka(n[t]);return e}return n}function eN(n,e){for(var t in e)if(Array.isArray(e[t])){n[t]||(n[t]=[]);for(let i of e[t])n[t].push(Ka(i))}else n[t]="object"!=typeof n[t]||n[t]instanceof RegExp?e[t]:eN(n[t],e[t]);return n}function LS(n,e){let t=!1;for(var i in e){if(Array.isArray(n[i]))for(var r=0;r<n[i].length;r++)t=LS(n[i][r],e[i][r]);else t="object"!=typeof n[i]||n[i]instanceof RegExp?n[i]!=e[i]:LS(n[i],e[i]);if(t)break}return t}let ae=(()=>{class n{static toJson(t,i,r){n.setMessage();let o,s=i?i.message:null;!s&&i&&i.messageKey&&(o=i.messageKey);let a=s||(fe&&fe.json&&fe.json.validationMessage&&fe.json.validationMessage[o||t]?fe.json.validationMessage[o||t]:"");r.forEach((d,f)=>{d instanceof Date&&(d=this.getDateString(d)),a=a.replace(`{{${f}}}`,d)});let c={};return c[t]={message:a,refValues:r},i&&i.isAddMessageKey&&(c.messageKey=o),c}static null(){return null}static getPasswordMessage(){let t="password";return fe&&fe.json&&fe.json.validationMessage&&fe.json.validationMessage[t]?fe.json.validationMessage[t]:""}static setMessage(){fe.i18n&&fe.i18n.validationMessage&&n.language!==fe.i18n.language&&(fe.json||(fe.json={}),fe.json.validationMessage=fe.i18n.validationMessage(),n.language=fe.i18n.language)}static getDateString(t){let i=fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.seperator?fe.json.baseConfig.seperator:"/",r=fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.dateFormat?fe.json.baseConfig.dateFormat:"mdy";fe&&fe.json&&fe.json.internationalization&&fe.json.internationalization.dateFormat&&fe.json.internationalization.seperator&&(i=fe.json.internationalization.seperator,r=fe.json.internationalization.dateFormat);let s="",o=t.getFullYear().toString(),a=String(t.getMonth()+1),c=String(t.getDay());switch(r){case"ymd":s="".concat(o,i,a,i,c);break;case"dmy":s="".concat(c,i,a,i,o);break;case"mdy":s="".concat(a,i,c,i,o)}return s}}return n.language="",n})();const VS="propArray";class Ya extends kn{constructor(e,t,i,r,s){super(t,i,r),this.arrayObject=e,this.arrayConfig=s,this._isModified=!1,this._modified=[],this.cloneObject(e)}get isModified(){return this._isModified}push(e,t={isAddedInstance:!1}){let i=this.root;this.arrayObject&&e.modelInstance&&(t.isAddedInstance?this.arrayObject[this.arrayObject.length]=e.modelInstance:this.arrayObject.push(e.modelInstance)),super.push(e),i[pb]&&i.valueChangedSync(),this.patch(),this.checkValidation()}patch(){this.checkModification(),this.parent&&this.parent[RS]()}resetForm(e){if(e&&e.index>=0&&e.groupOption)this.controls[e.index].resetForm(e.groupOption);else for(var t=0;t<this._baseValue.length;t++)if(void 0!==this.controls[t])this.controls[t].resetForm({value:this._baseValue[t]});else if(e&&e.pushFunction){let i=e.pushFunction(this._baseValue[t]);this.push(i)}}commit(){this._baseValue=[];for(let e of this.controls)e.commit(),this._baseValue.push(Ka(e.value));this.patch()}removeAt(e,t={isRemovedInstance:!1}){let i=this.root;if(t.isRemovedInstance){for(var r=e;r<this.arrayObject.length-1;r++)this.arrayObject[r]=this.arrayObject[r+1];this.arrayObject.pop()}else this.arrayObject.splice(e,1);super.removeAt(e,t),i[pb]&&i.valueChangedSync(),this.patch(),this.checkValidation()}checkValidation(){setTimeout(()=>{null!=this.arrayConfig&&this.arrayConfig.allowMaxIndex&&this.length>this.arrayConfig.allowMaxIndex?this.setErrors(ae.toJson(VS,this.arrayConfig,[this.length,this.arrayConfig.allowMaxIndex])):this.errors&&this.errors[VS]&&delete this.errors[VS]})}checkModification(){if(this._isModified=this._baseValue.length!=this.controls.length,!this._isModified)for(var e=0;e<this.controls.length&&(this._isModified=LS(this._baseValue[e],this.controls[e].value),!this._isModified);e++);}cloneObject(e){this._baseValue=[];for(let t of e)this._baseValue.push(Ka(t))}}var zu=(()=>(function(n){n[n.PositiveNumber=1]="PositiveNumber",n[n.NegativeNumber=2]="NegativeNumber",n[n.Both=3]="Both"}(zu||(zu={})),zu))(),$u=(()=>(function(n){n[n.V4=1]="V4",n[n.V6=2]="V6",n[n.AnyOne=3]="AnyOne"}($u||($u={})),$u))(),Qa=(()=>(function(n){n[n.None=0]="None",n[n.OnSubmit=1]="OnSubmit",n[n.OnDirty=2]="OnDirty",n[n.OnTouched=3]="OnTouched",n[n.OnDirtyOrTouched=4]="OnDirtyOrTouched",n[n.OnDirtyOrSubmit=5]="OnDirtyOrSubmit",n[n.OnTouchedOrSubmit=6]="OnTouchedOrSubmit"}(Qa||(Qa={})),Qa))(),ho=(()=>(function(n){n[n.ControlsOnly=1]="ControlsOnly",n[n.FormGroupsOnly=2]="FormGroupsOnly",n[n.FormArraysOnly=3]="FormArraysOnly",n[n.ControlsAndFormGroupsOnly=4]="ControlsAndFormGroupsOnly",n[n.DefinedPropsOnly=5]="DefinedPropsOnly",n[n.All=6]="All"}(ho||(ho={})),ho))();class _t{static getParentObjectValue(e){return e.parent?this.parentObjectValue(e.parent).value:{}}static getParentModelInstanceValue(e){return e.parent?this.parentObjectValue(e.parent).modelInstanceValue:{}}static getRootFormGroup(e){return e.parent?this.getRootFormGroup(e.parent):e}static getParentControl(e){return e.parent?this.parentObjectValue(e.parent):e}static getFormControlName(e){let t="";if(e.parent)for(var i in e.parent.controls)if(e.parent.controls[i]==e){t=i;break}return t}static getParentFormArray(e){return e.parent&&!(e.parent instanceof kn||e.parent instanceof Ya)?this.getParentFormArray(e.parent):e.parent}static toLower(e){return e&&String(e).toLowerCase().trim()}static getControl(e,t){let i=e.split(".");if(i.length>1){var r=t;return i.forEach((s,o)=>{r=r.controls[s]}),r}return t.controls[e]}static getFormControl(e,t){let i=e.split(".");if(i.length>1&&t.parent){var r=this.getParentControl(t);return i.forEach((s,o)=>{r=r.controls[s]}),r}return t.parent?t.parent.get([e]):void 0}static parentObjectValue(e){return e.parent?e=this.parentObjectValue(e.parent):e}static isNumeric(e){return e-parseFloat(e)+1>=0}static notEqualTo(e,t){let i=null==e?"":e,r=null==t?"":t;return i instanceof Date&&r instanceof Date?+i!=+r:i!=r}static numericValidation(e,t){let i;i=fe&&fe.number?fe.json&&fe.json.allowDecimalSymbol?fe.json.allowDecimalSymbol:fe.number.decimalSymbol:".";let r=/^[0-9]+$/;switch(t=null==t?zu.PositiveNumber:t){case zu.PositiveNumber:r=e?"."==i||null==i?/^[0-9\.]+$/:/^[0-9\,]+$/:/^[0-9]+$/;break;case zu.NegativeNumber:r=e?"."==i||null==i?/^[-][0-9\.]+$/:/^[-][0-9\,]+$/:/^[-][0-9]+$/;break;case zu.Both:r=e?"."==i||null==i?/^[-|+]?[0-9\.]+$/:/^[-|+]?[0-9\,]+$/:/^[-|+]?[0-9]+$/}return r}static configureControl(e,t,i){if(e.validatorConfig)e.validatorConfig[i]=t;else{let r={};r[i]=t,Object.assign(e,{validatorConfig:r})}}static lowerCaseWithTrim(e){return"string"==typeof e?e.toLowerCase().trim():String(e).toLowerCase().trim()}static isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}static isArray(e){return Array.isArray(e)}static cloneValue(e){return _t.isObject(e)?_t.isArray(e)?[...e]:Object.assign({},e):e}}const tN=/^(?:[\+-]?\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[\.,]\d+(?!:))?)?(?:\2[0-5]\d(?:[\.,]\d+)?)?(?:[zZ]|(?:[\+-])(?:[01]\d|2[0-3]):?(?:[0-5]\d)?)?)?)?$/;class BS{isDate(e){return e instanceof Date&&!isNaN(e.valueOf())}getRegex(e){var t;switch(e){case"ymd":t="^(?:[0-9]{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$";break;case"dmy":t="^(3[01]|[12][0-9]|0?[1-9])-(1[0-2]|0?[1-9])-(?:[0-9]{2})?[0-9]{2}$";break;case"mdy":t="^(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])-(?:[0-9]{2})?[0-9]{2}$"}return new RegExp(t)}regex(e){return this.getRegex(fe&&fe.json&&fe.json.internationalization&&fe.json.internationalization.dateFormat&&fe.json.internationalization.seperator?e.dateFormat||fe.json.internationalization.dateFormat:fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.dateFormat?e.dateFormat||fe.json.baseConfig.dateFormat:e.dateFormat||"mdy")}getDate(e,t,i=!1){let r,s,o;if(this.isDate(e))return e;{let a,c;if(tN.test(e))return new Date(e);switch(a=fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.seperator?fe.json.baseConfig.seperator:"/",c=t||fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.dateFormat?fe.json.baseConfig.dateFormat:"mdy",!i&&fe&&fe.json&&fe.json.internationalization&&fe.json.internationalization.dateFormat&&fe.json.internationalization.seperator&&(a=fe.json.internationalization.seperator,c=t||fe.json.internationalization.dateFormat),c){case"ymd":[r,s,o]=e.split(a).map(d=>+d);break;case"dmy":[o,s,r]=e.split(a).map(d=>+d);break;case"mdy":[s,o,r]=e.split(a).map(d=>+d)}return new Date(r,s-1,o)}}isValid(e,t){if(t&&t.isValid)return t.isValid(e);if("string"==typeof e){if(t&&t.allowISODate&&tN.test(e))return!0;let i="/";return fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.seperator&&(i=fe.json.baseConfig.seperator),fe.json&&fe.json.internationalization&&fe.json.internationalization.seperator&&(i=fe.json.internationalization.seperator),3===e.split(i).length&&(e=e.replace(i,"-").replace(i,"-"),this.regex(t).test(e))}return this.isDate(e)}getConfigDateValue(e){let t=e.value;return e.value&&"string"==typeof e.value&&(t=this.getDate(e.value,e.dateFormat,!0)),t}getCompareDate(e,t){let i=this.getConfigDateValue(e);if(e.fieldName){let r=_t.getFormControl(e.fieldName,t);r&&r.value&&(i=this.getDate(r.value,e.dateFormat))}return i}}function Os(n){return null!=n&&""!==n}function nN(n,e){return Os(n)&&"string"==typeof n?n.replace(new RegExp("[$"+e+"]+","g"),""):n}function iN(n){if(Os(n)){var e=".";if(fe&&fe.number&&(e=fe.json&&fe.json.allowDecimalSymbol?fe.json.allowDecimalSymbol:fe.number.decimalSymbol),","==e&&"string"==typeof n&&(n=n.replace(",",".")),_t.isNumeric(n))return parseFloat(n)}return null}const rN={trim:function(n){return Os(n)&&"string"==typeof n?n.trim():n},ltrim:function(n){return Os(n)&&"string"==typeof n?n.replace(/^\s+/g,""):n},rtrim:function(n){return Os(n)&&"string"==typeof n?n.replace(/\s+$/g,""):n},blacklist:nN,stripLow:function(n,e){return nN(n,!0===e?"\0-\t\v\f\x0e-\x1f\x7f":"\0-\x1f\x7f")},toBoolean:function(n,e){return Os(n)?e?"1"===n||"true"===n:"0"!==n&&"false"!==n&&""!==n:n},toDouble:function(n){return iN(n)},toFloat:iN,toInt:function(n,e){return Os(n)&&_t.isNumeric(n)?parseInt(n,e||10):null},toString:function(n,e){return Os(n)?String(n):n},whitelist:function(n,e){return Os(n)&&"string"==typeof n?n.replace(new RegExp(`[^${e}]+`,"g"),""):n},toDate:function(n,e){var t=new BS;return Os(n)&&"string"==typeof n&&t.isValid(n,e)?n=t.getDate(n):null},escape:function(n){return Os(n)?n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;"):n},prefix:function(n,e){return Os(n)?`${e}${n}`:n},suffix:function(n,e){return Os(n)?`${n}${e}`:n},sanitize:function(n,e){return e.custom(n)}};function HS(n,e){let t=mt.get(n),i=e?e.__proto__:function(n,e){let t=Object.create(n.prototype);try{n.apply(t,e)}catch(i){t=Reflect.construct(n,e)}return t}(n,[]).__proto__;if(i.__proto__){let r=!1;do{if(r=i.__proto__.constructor!=Object,r){let s=mt.get(i.__proto__.constructor);t=eN(Ka(t),Ka(s)),i=i.__proto__}}while(r)}return t}class TK{constructor(e,t){this.decoratorType=e,this.entityObject=t}getFormGroupName(e){let t="";if(e.parent)for(var i of Object.keys(e.parent.controls))if(e.parent.controls[i]==e){t=i;break}return t}zeroArgumentProcess(e,t){let i=[];this.getDisabledColumns(e.parent,`${t}-rxw-0`,!1).forEach(a=>i.push(a));let r=this.topControlPath(e,t),s=r.split(".");if(s.length>1){let a=_t.getRootFormGroup(e);this.getDisabledColumns(a,`${r}-rxw-0`,!0).forEach(d=>i.push(d));let c="";for(var o=0;o<s.length-2;o++){let d=s[o];c=`${r.replace(`${d}.`,"")}-rxw--0`,a.controls[d]&&(this.getDisabledColumns(a.controls[d],c,!0,d).forEach(f=>i.push(f)),a=a.controls[d])}}return i}getDisabledColumns(e,t,i,r=""){if(e[Xl]){let s=HS(e[Xl].constructor,this.entityObject);return this.getChangeDetectionColumns(s,t,i,r)}return[]}getChangeDetectionColumns(e,t,i,r=""){let s=[],o=e.nonValidationDecorators[this.decoratorType].changeDetection[t];return o&&o.forEach(a=>{s.push({controlPath:r?`${r}.${a}`:a,conditionalExpression:e.nonValidationDecorators[this.decoratorType].conditionalExpressions[a],isRoot:i})}),s}topControlPath(e,t){if(e.parent){let i=this.getFormGroupName(e.parent);if(i)return this.topControlPath(e.parent,t=`${i}.${t}`)}return t}childControlDisabledExpression(e,t,i=""){let r=[];if(e[Xl]){let o=mt.get(e[Xl].constructor);o&&(this.getChangeDetectionColumns(o,t,!0,i).forEach(a=>r.push(a)),o.properties.filter(a=>a.propertyType==Is).forEach(a=>{e.controls[a.name]&&(this.getDisabledColumns(e.controls[a.name],t,!0,i?`${i}.${a.name}`:`${a.name}`).forEach(d=>r.push(d)),this.childControlDisabledExpression(e.controls[a.name],t,i?`${i}.${a.name}`:`${a.name}`).forEach(d=>r.push(d)))}))}return r}oneArgumentProcess(e,t){let i=this.topControlPath(e,t),r=_t.getRootFormGroup(e);return this.childControlDisabledExpression(r,i)}}const sN="touched",oN="untouched";class Gu extends yn{constructor(e,t,i,r,s,o,a){if(super(e,t,i),this.entityObject=r,this.baseObject=s,this._sanitizers=a,this._errorMessages=[],this._childColumns=[],this._refDisableControls=[],this._refMessageControls=[],this._refClassNameControls=[],this._isPassedExpression=!1,this._dirty=!1,this.backEndErrors={},this.defineErrorsProperty(),this._baseValue=void 0===e?null:this.getFormState(e),this._isModified=!1,this.keyName=o,this._validators=t.validators,this._asyncValidators=t.asyncValidators,this._errorMessageBindingStrategy=fe.get("reactiveForm.errorMessageBindingStrategy"),this._sanitizers&&this._sanitizers.filter(d=>"toFloat"==d.name)[0]&&this._baseValue&&fe.number&&","==fe.number.decimalSymbol){let d=String(this._baseValue);-1!=d.indexOf(".")&&(this._baseValue=d.replace(".",fe.number.decimalSymbol),super.setValue(this._baseValue))}}get errorMessages(){if(this._messageExpression){if(this._messageExpression&&!this._isPassedExpression)return[]}else 0==this._errorMessages.length&&this.errors&&this.setControlErrorMessages();return!this.errors&&this._errorMessages.length>0&&this.setControlErrorMessages(),this._language!=this.getLanguage()&&this.setControlErrorMessages(),this._errorMessages}get errorMessage(){if(this._messageExpression){if(this._messageExpression&&!this._isPassedExpression)return}else null==this._errorMessage&&this.errors&&this.setControlErrorMessages();return!this.errors&&this._errorMessage&&this.setControlErrorMessages(),this._language!=this.getLanguage()&&this.setControlErrorMessages(),this._errorMessage}defineErrorsProperty(){Object.defineProperty(this,"errors",{configurable:!0,get(){return this._language&&this._language!=this.getLanguage()&&this.validator&&(this.errors=this.validator(this)),this._errors},set(e){this._errors=e}})}getFormState(e){let t=e;return Array.isArray(e)&&(t=[],e.forEach(i=>t.push(i))),t}get isModified(){return this._isModified}getValidators(){return this.getValidatorSource(this._validators)}getAsyncValidators(){return this.getValidatorSource(this._asyncValidators)}getValidatorSource(e){return e?Array.isArray(e)?[...e]:[e]:[]}setValidators(e){this._validators=e,super.setValidators(e)}setAsyncValidators(e){this._asyncValidators=e,super.setAsyncValidators(e)}setValue(e,t){this.parent.changing=!0;let i=this.getSanitizedValue(e);t&&t.dirty&&(this.baseObject[this.keyName]=e),this.entityObject[this.keyName]=i,super.setValue(e,t),this.bindError(),this.bindClassName(),this.executeExpressions(),this.callPatch(),t&&!t.updateChanged&&this.root[pb]&&this.root[pb](),this.parent.changing=!1}getControlValue(){return this.getSanitizedValue(this.value)}bindError(){this._messageExpression&&(this._isPassedExpression=this.executeExpression(this._messageExpression,this)),this.setControlErrorMessages(),this.errors=this.errors}bindClassName(){if(this.updateOnElementClass&&"function"==typeof this.updateOnElementClass){let e=this.executeExpression(this._classNameExpression,this);this.updateOnElementClass(e)}}setBackEndErrors(e){Object.keys(e).forEach(t=>this.backEndErrors[t]=e[t]),this.setControlErrorMessages()}clearBackEndErrors(e){e?Object.keys(e).forEach(t=>delete this.backEndErrors[t]):this.backEndErrors={},this.setControlErrorMessages()}markAsTouched(e){let t=this.touched;super.markAsTouched(e),t!=this.touched&&this.runControlPropChangeExpression([sN,oN])}markAsUntouched(e){let t=this.untouched;super.markAsUntouched(e),t!=this.untouched&&this.runControlPropChangeExpression([oN,sN])}markAsDirty(e){let t=this._dirty;super.markAsDirty(e),this._dirty=!0,t!=this._dirty&&this.runControlPropChangeExpression(["dirty"])}markAsPristine(e){let t=this.pristine;super.markAsPristine(e),t!=this.pristine&&this.runControlPropChangeExpression(["pristine"])}markAsPending(e){let t=this.pending;super.markAsDirty(e),t!=this.pending&&this.runControlPropChangeExpression(["pending"])}runControlPropChangeExpression(e){e.forEach(t=>{(this._controlProp&&this._messageExpression&&this._controlProp[t]||!this._messageExpression&&this.checkErrorMessageStrategy())&&this.bindError(),this._classNameControlProp&&this._classNameControlProp[t]&&this.bindClassName()})}refresh(){this.getMessageExpression(this.parent,this.keyName),this.bindConditionalControls("disabled","_refDisableControls"),this.bindConditionalControls("error","_refMessageControls"),this.bindConditionalControls("elementClass","_refClassNameControls"),this.executeExpressions(),this.bindError()}reset(e,t={}){this.setValue(void 0!==e?e:this.getFormState(this._baseValue),t),this._dirty=!1}commit(){this._baseValue=this.value,this.callPatch()}callPatch(){this._isModified=this.getValue(this._baseValue)!=this.getValue(this.value),this.parent&&this.parent[RS]&&this.parent[RS](this.keyName)}checkErrorMessageStrategy(){let e=!0;switch(this._errorMessageBindingStrategy){case Qa.OnSubmit:e=this.parent.submitted;break;case Qa.OnDirty:e=this._dirty;break;case Qa.OnTouched:e=this.touched;break;case Qa.OnDirtyOrTouched:e=this._dirty||this.touched;break;case Qa.OnDirtyOrSubmit:e=this._dirty||this.parent.submitted;break;case Qa.OnTouchedOrSubmit:e=this.touched||this.parent.submitted;break;default:e=!0}return e}executeExpressions(){this.processExpression("_refDisableControls","disabled"),this.processExpression("_refMessageControls","bindError"),this.processExpression("_refClassNameControls","bindClassName")}getMessageExpression(e,t){if(e[Xl]){let i=mt.get(e[Xl].constructor);i&&(this._messageExpression=i.nonValidationDecorators.error.conditionalExpressions[t],this._controlProp=i.nonValidationDecorators.error.controlProp[this.keyName],this._classNameExpression=i.nonValidationDecorators.elementClass.conditionalExpressions[t],this._classNameControlProp=i.nonValidationDecorators.elementClass.controlProp[t],this._classNameExpression&&(this.updateOnElementClass=!0))}}getSanitizedValue(e){if(this._sanitizers)for(let t of this._sanitizers)e=rN[t.name](e,t.config);return e}bindConditionalControls(e,t){this._disableProvider=new TK(e,this.entityObject),this[t]=this._disableProvider.zeroArgumentProcess(this,this.keyName),this._disableProvider.oneArgumentProcess(this,`${this.keyName}-rxw-1`).forEach(i=>this[t].push(i))}setControlErrorMessages(){if(!this._messageExpression&&this.checkErrorMessageStrategy()||this._isPassedExpression){this._errorMessages=[],this.errors?Object.keys(this.errors).forEach(t=>{if(this.parent){if(this.parent[fb][this.keyName]=this._errorMessage=this.getErrorMessage(this.errors,t),!this._errorMessage){let i=ae.toJson(t,void 0,[this.errors[t][t]]);this.parent[fb][this.keyName]=this._errorMessage=this.getErrorMessage(i,t)}}else this._errorMessage=this.getErrorMessage(this.errors,t);this._errorMessages.push(this._errorMessage)}):(this._errorMessage=void 0,this.parent&&(this.parent[fb][this.keyName]=void 0,delete this.parent[fb][this.keyName]));let e=Object.keys(this.backEndErrors);e.length>0&&e.forEach(t=>{this._errorMessages.push(this._errorMessage=this.backEndErrors[t])})}else this._errorMessages=[],this._errorMessage=void 0;this._language=this.getLanguage()}getLanguage(){return fe.i18n&&fe.i18n.language?fe.i18n.language:void 0}getErrorMessage(e,t){if(e[t][UF])return e[t][UF]}processExpression(e,t){if(this[e])for(var i of this[e]){let r=i.isRoot?_t.getControl(i.controlPath,_t.getRootFormGroup(this)):_t.getFormControl(i.controlPath,this);r&&("disabled"==t?this.executeExpression(i.conditionalExpression,r)?r.disable():r.enable():"bindError"==t?r.bindError():"bindClassName"==t&&r.bindClassName())}}executeExpression(e,t){return e.call(t.parent[Xl],t,_t.getParentModelInstanceValue(this),t.parent[Xl])}getValue(e){return null!=e&&""!==e?e:""}}class RK{convertToFormData(e,t){return this.convertFormData(e,void 0,void 0,t)}convertFormData(e,t,i,r){let s=t||new FormData,o="";for(var a in e)o=i?`${i}[${a}]`:a,Array.isArray(e[a])?e[a].forEach((c,d)=>{o=`${a}[${d}]`,"object"==typeof c?this.convertFormData(c,s,o,r):this.nonObjectValueBind(c,s,o,r)}):null===e[a]||e[a]instanceof Date||"object"!=typeof e[a]||e[a]instanceof File||e[a]instanceof FileList?this.nonObjectValueBind(e[a],s,o,r):this.convertFormData(e[a],s,o,r);return s}nonObjectValueBind(e,t,i,r){if("boolean"==typeof e)t.append(i,!!e);else if(e instanceof FileList)for(var s=0;s<e.length;s++)t.append(r&&r.excludeImageIndex&&1===e.length?i:`${i}[${s}]`,e.item(s));else st.isNotBlank(e)&&t.append(i,e)}}function FK(n,e,t){let i=!0;if(t){if(i=!1,t.resetType)switch(t.resetType){case ho.ControlsOnly:i=e instanceof yn;break;case ho.ControlsAndFormGroupsOnly:i=e instanceof yn||e instanceof An;break;case ho.FormGroupsOnly:i=e instanceof An;break;case ho.FormArraysOnly:i=e instanceof kn;break;case ho.DefinedPropsOnly:i=!!t.value&&-1!=Object.keys(t.value).indexOf(n);break;default:i=!0}!i&&t.with&&(i=void 0!==t.with.filter(r=>r.split(".")[0]==n.split(".")[0])[0]),!i&&t.value&&(void 0===t.resetType||t.resetType!==ho.DefinedPropsOnly)&&(i=!0)}return i}function NK(n,e){if(e){let t={};if(e.resetType&&(t.resetType=e.resetType==ho.FormGroupsOnly||e.resetType==ho.FormArraysOnly?ho.ControlsOnly:e.resetType),e.with){let r=e.with.filter(s=>s.split(".")[0]==n).map(s=>{let o=s.split(".");return o.splice(0,1),o.join(".")});t.with=r}return e.value&&e.value[n]&&(t.value=e.value[n]),t=Object.keys(t).length>0?t:void 0,t}}class pr extends An{constructor(e,t,i,r,s){for(var o in super(i,r,s),this.model=e,this.entityObject=t,this._modified={},this._isModified=!1,this.changing=!1,this.baseObject={},this.entityObject)this.baseObject[o]=this.entityObject[o];this.formDataProvider=new RK}bindPrimaryKey(e,t){let i=mt.get(e.constructor);if(i){let r=i.properties.filter(s=>s.isPrimaryKey)[0];r&&this.modelInstance[r.name]&&(t[r.name]=this.modelInstance[r.name])}}get modifiedValue(){let e={};if(Object.keys(this._modified).length>0){for(var t in this.bindPrimaryKey(this.modelInstance,e),this._modified)if(this.controls[t]instanceof pr)e[t]=this.controls[t].modifiedValue;else if(this.controls[t]instanceof kn){let r=this.controls[t];e[t]=[];for(var i=0;i<this._modified[t].length;i++){let s=r.controls[i].modifiedValue;Object.keys(s).length>0&&e[t].push(s)}0==e[t].length&&delete e[t]}else e[t]=this._modified[t];return e}return this._modified}get isModified(){return this._isModified}patch(e){e?this.processModified(e,this.controls[e]):this.nestedFormsModification(),this._isModified=Object.keys(this._modified).length>0,this._isModified||this.nestedArrayIsModified(),this.parent&&this.parent.patch&&this.parent.patch()}isDirty(){let e=!1;for(let t in this.value){let i=this.modelInstance[t];if(this.controls[t]instanceof An||this.controls[t]instanceof kn){if(this.controls[t]instanceof pr)e=this.controls[t].isDirty();else if(this.controls[t]instanceof kn)for(let r of this.controls[t].controls)e=r.isDirty()}else e=_t.notEqualTo(this.baseObject[t],i);if(e)break}return e}resetForm(e){for(let t in this.controls)FK(t,this.controls[t],e)&&(this.controls[t]instanceof An?this.controls[t].resetForm(NK(t,e)):this.controls[t]instanceof kn?this.controls[t].resetForm(e&&e.value?e.value[t]:void 0):e&&e.value&&st.isNotBlank(e.value[t])?this.controls[t].reset(e.value[t]):this.controls[t].reset())}commit(){for(let e in this.controls)this.controls[e].commit()}patchModelValue(e,t){if(e)for(let i in this.controls)if(this.controls[i]instanceof pr&&e[i])this.controls[i].patchModelValue(e[i],t);else if(this.controls[i]instanceof kn&&Array.isArray(e[i])){let r=0;for(let s of this.controls[i].controls)e[i][r]&&s.patchModelValue(e[i][r],t),r+=1}else void 0!==e[i]&&this.controls[i].patchValue(e[i],t)}getErrorSummary(e){let t={};return Object.keys(this.controls).forEach(i=>{if(this.controls[i]instanceof An){let r=this.controls[i].getErrorSummary(!1);Object.keys(r).length>0&&(t[i]=r)}else if(this.controls[i]instanceof kn){let r=0;for(let s of this.controls[i].controls){let o=s.getErrorSummary(!1);Object.keys(o).length>0&&(o.index=r,t[i]||(t[i]=[]),t[i].push(o)),r++}}else if(this.controls[i].errors){let r=this.controls[i].errors;if(e)for(let s in r)t[i]=r[s].message;else t[i]=r}}),t}valueChangedSync(){Object.keys(this.controls).forEach(e=>{if(this.controls[e]instanceof kn||this.controls[e]instanceof Ya||this.controls[e]instanceof An||this.controls[e]instanceof pr||this.entityObject[e]instanceof yn||this.entityObject[e]instanceof Gu||!this.controls[e].getControlValue||!_t.notEqualTo(this.controls[e].getControlValue(),this.entityObject[e]))if(this.controls[e]instanceof kn||this.controls[e]instanceof Ya)for(let t of this.controls[e].controls)t.valueChangedSync();else this.controls[e]instanceof pr&&this.controls[e].valueChangedSync();else this.controls[e].setValue(this.entityObject[e],{updateChanged:!0})})}refreshDisable(){Object.keys(this.controls).forEach(e=>{this.controls[e]instanceof kn||this.controls[e]instanceof Ya||this.controls[e]instanceof An||this.controls[e]instanceof pr?this.controls[e]instanceof pr&&this.controls[e].refreshDisable():this.controls[e].refresh()})}bindErrorMessages(){Object.keys(this.controls).forEach(e=>{this.controls[e]instanceof kn||this.controls[e]instanceof Ya||this.controls[e]instanceof An||this.controls[e]instanceof pr?this.controls[e]instanceof pr&&this.controls[e].bindErrorMessages():this.controls[e].bindError()})}get submitted(){return this._submitted}set submitted(e){this._submitted=e,Object.keys(this.controls).forEach(t=>{if(this.controls[t]instanceof kn){let i=this.controls[t];for(let r of i.controls)r.submitted=e}else this.controls[t]instanceof An?this.controls[t].submitted=e:this.controls[t].bindError()})}get modelInstanceValue(){return Ka(this.entityObject)}get modelInstance(){return this.entityObject}get controlsError(){return this.getErrorSummary(!0)}toFormData(e){return this.formDataProvider.convertToFormData(this.value,e)}processModified(e,t){t.isModified?this._modified[e]=t.value:delete this._modified[e],this._isModified=Object.keys(this._modified).length>0}nestedArrayIsModified(){for(var e in this.controls)if(this.controls[e]instanceof Ya&&(this._isModified=this.controls[e].isModified),this._isModified)break}setBackEndErrors(e){Object.keys(e).forEach(t=>{this.controls[t]&&this.controls[t].setBackEndErrors(e[t])})}clearBackEndErrors(e){Object.keys(e||this.controls).forEach(i=>{this.controls[i]&&(e?this.controls[i].clearBackEndErrors(e[i]):this.controls[i].clearBackEndErrors())})}nestedFormsModification(){for(var e in this.controls)if(this.controls[e]instanceof pr)this.processModified(e,this.controls[e]);else if(this.controls[e]instanceof Ya)if(this.controls[e].isModified){let i=this.controls[e].controls;for(var t of(this._modified[e]=[],i))t.isModified&&(this._modified[e]||(this._modified[e]=[]),this._modified[e].push(t.modifiedValue));0==this._modified[e].length&&delete this._modified[e]}else this._modified[e]&&delete this._modified[e]}}class si{static ProcessRule(e,t,i=!1){if(t&&t.expressionProcessed)return!0;const r=_t.getParentObjectValue(e),s=e.parent?_t.cloneValue(e.parent.value):void 0;let o;if(e.parent&&e.parent instanceof pr&&(o=e.parent.modelInstance),s)this.updateFormControlValue(s,e.parent.controls,e,t),this.forDisableUpdate(s,t);else if(t.conditionalExpression)return!1;return Ts.execute(r,t,s,o,i)}static updateFormControlValue(e,t,i,r){for(var s in e)if(!(e[s]instanceof Object)&&t[s]===i){e[s]=i.value;break}}static forDisableUpdate(e,t){t.disableConfig&&Object.keys(t.disableConfig).forEach(i=>{e[i]=t.disableConfig[i]})}}class Sn{static pass(e,t){return!!si.ProcessRule(e,t)&&st.isNotBlank(e.value)}static passArrayValue(e,t){return!!si.ProcessRule(e,t)&&("string"==typeof e.value?st.isNotBlank(e.value):e.value instanceof Array)}}const vb="ArrayConfig",jS="FieldConfig",cN="IpConfig",zg="NumberConfig",uN="PasswordConfig",dN="PatternConfig",hN="RangeConfig",VK={[vb]:["matchValues"],[jS]:["fieldName"],[cN]:["version"],[uN]:["validation"],[zg]:["value"],[dN]:["expression"],[hN]:["minimumNumber","maximumNumber"]};function ot(n,e,t=""){return null!=n&&1!=n?function(n,e,t){if(e.dynamicConfig){let i=si.ProcessRule(n,Ka(e),!0);return"boolean"!=typeof i?(i.conditionalExpression=e.conditionalExpression,i.dynamicConfig=e.dynamicConfig,Object.keys(e).forEach(r=>{("conditionalExpression"!=r&&"dynamicConfig"!=r||void 0===i[r])&&(i[r]=e[r])}),i):e}return function(n,e){return e&&VK[e].forEach(i=>{if(void 0===n[i])throw new Error(`Pass the property of '${i}' with value in the ${e}, otherwise it won't work.`)}),n}(e,t)}(e,n,t):{}}const fN={danish:/^[A-Z\xc6\xd8\xc5]+$/,french:/^[A-Z\xc0\xc2\xc6\xc7\xc9\xc8\xca\xcb\xcf\xce\xd4\u0152\xd9\xdb\xdc\u0178]+$/,german:/^[A-Z\xc4\xd6\xdc\xdf]+$/,spanish:/^[a-z\xf1\xe1\xe9\xed\xf3\xfa\xfc]+$/i,russian:/^[\u0410-\u042f\u0401]+$/},pN={danish:/^[A-Z\xc6\xd8\xc5\s]+$/,french:/^[A-Z\xc0\xc2\xc6\xc7\xc9\xc8\xca\xcb\xcf\xce\xd4\u0152\xd9\xdb\xdc\u0178\s]+$/,german:/^[A-Z\xc4\xd6\xdc\xdf\s]+$/,spanish:/^[a-z\xf1\xe1\xe9\xed\xf3\xfa\xfc\s]+$/i,russian:/^[\u0410-\u042f\u0401\s]+$/},gN={danish:/^[0-9A-Z\xc6\xd8\xc5]+$/,french:/^[0-9A-Z\xc0\xc2\xc6\xc7\xc9\xc8\xca\xcb\xcf\xce\xd4\u0152\xd9\xdb\xdc\u0178]+$/,german:/^[0-9A-Z\xc4\xd6\xdc\xdf]+$/,spanish:/^[0-9a-z\xf1\xe1\xe9\xed\xf3\xfa\xfc]+$/i,russian:/^[0-9\u0410-\u042f\u0401]+$/},mN={danish:/^[0-9A-Z\xc6\xd8\xc5]+$/,french:/^[0-9A-Z\xc0\xc2\xc6\xc7\xc9\xc8\xca\xcb\xcf\xce\xd4\u0152\xd9\xdb\xdc\u0178]+$/,german:/^[0-9A-Z\xc4\xd6\xdc\xdf]+$/,spanish:/^[0-9a-z\xf1\xe1\xe9\xed\xf3\xfa\xfc\s]+$/i,russian:/^[0-9\u0410-\u042f\u0401]+$/};function _N(n,e,t,i){let r=ot(n,e);return Sn.pass(e,r)&&(t=function(n,e,t){switch(t.allowCharacters&&(t.allowWhiteSpace?e[1]=new RegExp(`^[0-9a-zA-Z @${t.allowCharacters}]+$`,""):e[0]=new RegExp(`^[0-9a-zA-Z @${t.allowCharacters}]+$`,"")),n){case"alpha":var i=t.locale?t.locale:fe.json&&fe.json.defaultValidationLocale&&fe.json.defaultValidationLocale.alpha?fe.json.defaultValidationLocale.alpha:"";return[i&&i in fN?fN[i]:e[0],i&&i in pN?pN[i]:e[1]];case"alphaNumeric":var r=t.locale?t.locale:fe.json&&fe.json.defaultValidationLocale&&fe.json.defaultValidationLocale.alphaNumeric?fe.json.defaultValidationLocale.alphaNumeric:"";return[r&&r in gN?gN[r]:e[0],r&&r in mN?mN[r]:e[1]]}}(i,t,r),!st.isValid(e.value,r&&r.allowWhiteSpace?t[1]:t[0]))?ae.toJson(i,r,[e.value]):ae.null()}function yN(n){return e=>_N(n,e,[ln.alpha,ln.alphaWithSpace],b.alpha)}function vN(n){return e=>_N(n,e,[ln.alphaNumeric,ln.alphaNumericWithSpace],b.alphaNumeric)}function bN(n){return e=>{let t=ot(n,e,jS);const i=_t.getFormControl(t.fieldName,e),r=e.value,s=i?i.value:"";return!st.isNotBlank(r)&&!st.isNotBlank(s)||i&&i.value===r?ae.null():ae.toJson(b.compare,t,[r,s])}}function CN(n){return e=>{let t=ot(n,e);if(Sn.pass(e,t)){let i=!1;const r=t.values?t.values:[t.value];for(let s of r)if(i=-1==e.value.indexOf(s),!i)break;if(i)return ae.toJson(b.contains,t,[e.value,t.value])}return ae.null()}}function UK(n,e){let t=!1;for(let i of e)if(t=i==n,t)break;return t}function wN(n){let e={AmericanExpress:[15],DinersClub:[14,16,19],Discover:[16,19],JCB:[16,19],Maestro:[12,16,19],MasterCard:[16],Visa:[13,16,19]};function t(r){var s=parseInt(r.substring(r.length-1,r.length));return function(n){let e=0;for(var t=0;t<n.length;t++)e+=parseInt(n.substring(t,t+1));let i=new Array(0,1,2,3,4,-4,-3,-2,-1,0);for(t=n.length-1;t>=0;t-=2)e+=i[parseInt(n.substring(t,t+1))];let r=e%10;return r=10-r,10==r&&(r=0),r}(r.substring(0,r.length-1))==parseInt(String(s))}function i(r){var s="";return/^(5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)\d+$/.test(r)?s="Maestro":/^5[1-5]/.test(r)?s="MasterCard":/^4/.test(r)?s="Visa":/^3[47]/.test(r)?s="AmericanExpress":/^(?:2131|1800|35)/.test(r)?s="JCB":/^3(?:0[0-5]|[68])/.test(r)?s="DinersClub":/^6(?:011|5)/.test(r)&&(s="Discover"),s}return r=>{const s=r.value;let o=ot(n,r);const a=r.parent?r.parent.value:void 0;if(si.ProcessRule(r,o)&&st.isNotBlank(s)){let c=!1,d=o.fieldName&&a[o.fieldName]?[a[o.fieldName]]:o.creditCardTypes,f="";for(let p of d)if(c=UK(s.length,e[p])&&i(s)==p&&t(s),f=p,c)break;if(!c)return ae.toJson(b.creditCard,o,[s,f])}return ae.null()}}function Jl(n,e,t,i){return EN(ot(n,e),e,t,i)}function EN(n,e,t,i){return Sn.pass(e,n)&&!st.isValid(e.value,t)?ae.toJson(i,n,[e.value]):ae.null()}function DN(n){return e=>Jl(n,e,ln.onlyDigit,b.digit)}function AN(n){return e=>Jl(n,e,ln.basicEmail,b.email)}function SN(n){return e=>Jl(n,e,ln.strictHexColor,b.hexColor)}function xN(n){return e=>{let t=ot(n,e);return Sn.pass(e,t)&&e.value!==e.value.toLowerCase()?ae.toJson(b.lowerCase,t,[e.value]):ae.null()}}function MN(n,e,t){let i=!1;switch(t){case"<":case">":i=n>e;break;case"<=":case">=":i=n>=e}return i}function TN(n,e,t){e=ot(e,n);var i=new BS;if(si.ProcessRule(n,e)&&st.isNotBlank(n.value)){let r=i.getCompareDate(e,n);if(!i.isDate(n.value)&&!i.isValid(n.value,e))return ae.toJson(t,e,[n.value,r]);{let s=i.getDate(n.value);if(!(t==b.minDate?MN(s,r,e.operator||">="):MN(r,s,e.operator||"<=")))return ae.toJson(t,e,[n.value,r])}}return ae.null()}function IN(n){return e=>TN(e,n,b.maxDate)}function ON(n){return e=>{let t=ot(n,e,zg);return!Sn.pass(e,t)||e.value.length<=t.value?ae.null():ae.toJson(b.maxLength,t,[e.value,t.value])}}function PN(n){return e=>{let t=ot(n,e,zg);return!Sn.pass(e,t)||parseFloat(e.value)<=t.value?ae.null():ae.toJson(b.maxNumber,t,[e.value,t.value])}}function kN(n){return e=>TN(e,n,b.minDate)}function RN(n){return e=>{let t=ot(n,e,zg);return!Sn.pass(e,t)||String(e.value).length>=t.value?ae.null():ae.toJson(b.minLength,t,[e.value,t.value])}}function FN(n){return e=>{let t=ot(n,e,zg);return!Sn.pass(e,t)||parseFloat(e.value)>=t.value?ae.null():ae.toJson(b.minNumber,t,[e.value,t.value])}}function NN(n){return t=>{let i=ot(n,t,uN),r=t.value;if(st.isNotBlank(r)){let s=st.isValidPassword(i.validation,r),o={};if(o.message=i.message&&i.message[s.keyName]?i.message[s.keyName]:"string"==typeof i.message?i.message:"",o.messageKey=i.messageKey&&i.messageKey[s.keyName]?i.messageKey[s.keyName]:"string"==typeof i.messageKey?i.messageKey:"",o=function(t,i){if(!t.message&&!t.messageKey){let r=ae.getPasswordMessage();t.message=r&&"string"==typeof r?r:_t.isObject(r)?r[i]:"",t.message||(t.message=r.password),t.messageKey=""}return t}(o,s.keyName),!s.isValid)return ae.toJson(b.password,o,[r])}return ae.null()}}function LN(n){return e=>{let t=ot(n,e,hN);return!Sn.pass(e,t)||(e.value||0===e.value)&&parseFloat(e.value)>=t.minimumNumber&&parseFloat(e.value)<=t.maximumNumber?ae.null():ae.toJson(b.range,t,[e.value,t.minimumNumber,t.maximumNumber])}}function VN(n){return e=>{let t=ot(n,e);return Sn.pass(e,t)&&e.value!==e.value.toUpperCase()?ae.toJson(b.upperCase,t,[e.value]):ae.null()}}function BN(n){return e=>{let t=ot(n,e);return si.ProcessRule(e,t)&&!st.isNotBlank(e.value)?ae.toJson(b.required,t,[]):ae.null()}}function HN(n){return e=>{let t=ot(n,e,dN);if(Sn.pass(e,t))for(var i in t.expression)if(!st.isValid(e.value,t.expression[i]))return ae.toJson(i,t,[e.value]);return ae.null()}}function jN(n){return e=>{let t=ot(n,e);return Sn.pass(e,t)&&!st.isValid(e.value,t.allowSeconds?ln.timeWithSeconds:ln.time)?ae.toJson(b.time,t,[e.value]):ae.null()}}function UN(n){return e=>function(n,e){var t=ln.url;let i=ot(n,e);if(i&&i.urlValidationType)switch(i.urlValidationType){case 1:t=ln.url;break;case 2:t=ln.localhostUrl;break;case 3:t=ln.interanetUrl}return EN(i,e,t,b.url)}(n,e)}function zN(n){return t=>{let i=ot(n,t);return Sn.pass(t,i)&&!function(t){var i=!1;try{var r=JSON.parse(t);i=!!r&&"object"==typeof r}catch(s){i=!1}return i}(t.value)?ae.toJson(b.json,i,[t.value]):ae.null()}}const WK={[b.greaterThan]:b.lessThan,[b.lessThan]:b.greaterThan,[b.greaterThanEqualTo]:b.lessThanEqualTo,[b.lessThanEqualTo]:b.greaterThanEqualTo};function bb(n,e,t){const i=(e=ot(e,n)).fieldName?_t.getFormControl(e.fieldName,n):void 0,r=i?i.value:void 0!==e.value?e.value:"";if(si.ProcessRule(n,e)){if(e.isArrayControl)return function(n,e,t){let i=_t.getParentFormArray(n),r=n.parent?n.parent:void 0,s=WK[t],o=[];if(i&&r&&i.controls.length>1){let a=i.controls.indexOf(r),c=_t.getFormControlName(n),d=!0;if(a>0&&(d=GN(i,n,a-1,c,s,t,o)),d&&i.controls.length>a+1&&(d=GN(i,n,a+1,c,t,t,o)),o.length>0&&function(n){let e=setTimeout(()=>{n.forEach(t=>{t.updateValueAndValidity()}),clearTimeout(e)},200)}(o),!1===d)return ae.toJson(t,e,[n.value])}return ae.null()}(n,e,t);if(!1===$N(n,r,t))return ae.toJson(t,e,[n.value,r])}return ae.null()}function $N(n,e,t){if(st.isNotBlank(n.value)&&st.isNotBlank(e)){let i=!1;switch(t){case b.greaterThan:i=parseFloat(n.value)>parseFloat(e);break;case b.lessThan:i=parseFloat(n.value)<parseFloat(e);break;case b.greaterThanEqualTo:i=parseFloat(n.value)>=parseFloat(e);break;case b.lessThanEqualTo:i=parseFloat(n.value)<=parseFloat(e)}return i}return null}function GN(n,e,t,i,r,s,o){let a=!1,c=n.controls[t];if(c&&c.controls){let d=c.controls[i];a=$N(e,d.value,r),a&&d.errors&&d.errors[s]&&o.push(d)}return a}function WN(n){return e=>bb(e,n,b.greaterThan)}function qN(n){return e=>bb(e,n,b.greaterThanEqualTo)}function ZN(n){return e=>bb(e,n,b.lessThanEqualTo)}function KN(n){return e=>bb(e,n,b.lessThan)}function YN(n){return e=>{let t=ot(n,e);return si.ProcessRule(e,t)&&e.value instanceof Array&&(t.minLength=null==t.minLength?0:t.minLength,t.maxLength=null==t.maxLength?0:t.maxLength,e.value.length<t.minLength||0!==t.maxLength&&e.value.length>t.maxLength)?ae.toJson(b.choice,t,[e.value]):ae.null()}}function QN(n){return e=>{let t=ot(n,e,jS);if(Sn.pass(e,t)){const i=_t.getFormControl(t.fieldName,e),r=i?i.value:"";if(!i||i.value==e.value)return ae.toJson(b.different,t,[e.value,r])}return ae.null()}}function XN(n){return e=>{n&&(!e[di]||!e[di][b.numeric])&&_t.configureControl(e,n,b.numeric);let t=ot(n,e);return Sn.pass(e,t)&&!st.isValid(e.value,_t.numericValidation(t.allowDecimal,t.acceptValue))?ae.toJson(b.numeric,t,[e.value]):ae.null()}}function JN(n){return e=>{let t=ot(n,e);return Sn.pass(e,t)&&e.value%2!=0?ae.toJson(b.even,t,[e.value]):ae.null()}}function e2(n){return e=>{let t=ot(n,e);return!Sn.pass(e,t)||e.value%2!=0&&_t.isNumeric(e.value)?ae.null():ae.toJson(b.odd,t,[e.value])}}function t2(n){return t=>{let i=ot(n,t);const r=t.parent&&i.fieldName?_t.getFormControl(i.fieldName,t):void 0,s=i.fieldName&&r?r.value:i.dividend;return!(si.ProcessRule(t,i)&&st.isNotBlank(t.value)&&s>0)||st.isValid(t.value,ln.onlyDigit)&&function(t,i){let r=!1;for(var s=1;s<=Math.floor(Math.sqrt(t))&&(t%s!=0||(s==i&&(r=!0),t/s!==s&&t/s==i&&(r=!0),!r));s+=1);return r}(s,parseInt(t.value))?ae.null():ae.toJson(b.factor,i,[t.value])}}function n2(n){return e=>{let t=ot(n,e);return Sn.pass(e,t)&&!(e.value%100==0?e.value%400==0:e.value%4==0)?ae.toJson(b.leapYear,t,[e.value]):ae.null()}}function r2(n){return e=>{let t=ot(n,e,vb);if(Sn.passArrayValue(e,t)){var i=!1;for(let r of t.matchValues)if(!(i=e.value.some(s=>s==r)))break;if(!i)return ae.toJson(b.allOf,t,[e.value])}return ae.null()}}function s2(n){return e=>{let t=ot(n,e,vb);if(Sn.passArrayValue(e,t)){var i=!1;for(let r of t.matchValues){let s=_t.lowerCaseWithTrim(r);if(i=Array.isArray(e.value)?e.value.some(o=>_t.lowerCaseWithTrim(o)===s):_t.lowerCaseWithTrim(e.value)===s)break}if(!i)return ae.toJson(b.oneOf,t,[e.value])}return ae.null()}}function o2(n){return e=>{let t=ot(n,e,vb);if(si.ProcessRule(e,t)){var i=!1;for(let r of t.matchValues){let s=_t.lowerCaseWithTrim(r);if(i=Array.isArray(e.value)?e.value.some(o=>_t.lowerCaseWithTrim(o)===s):_t.lowerCaseWithTrim(e.value)===s)break}if(i)return ae.toJson(b.noneOf,t,[e.value])}return ae.null()}}function a2(n){return e=>Jl(n,e,ln.macId,b.mac)}function l2(n){return e=>Jl(n,e,ln.ascii,b.ascii)}function c2(n){return e=>Jl(n,e,ln.dataUri,b.dataUri)}function u2(n){return e=>{let t=ot(n,e);return!Sn.pass(e,t)||st.isValid(e.value,ln.onlyDigit)&&e.value>=0&&e.value<=65535?ae.null():ae.toJson(b.port,t,[e.value])}}function d2(n){return e=>{let t=ot(n,e);if(Sn.pass(e,t)){let i=e.value.split(",");if(!(i.length>1&&st.isValid(i[0],ln.lat)&&st.isValid(i[1],ln.long)))return ae.toJson(b.latLong,t,[e.value])}return ae.null()}}function h2(n){return e=>{let t=ot(n,e);if(Sn.pass(e,t)){let r=!1,s=t.values?t.values:[t.value];for(let o of s)if(r=String(e.value).substr(e.value.length-o.length,o.length)!=o,!r)break;if(r)return ae.toJson(b.endsWith,t,[e.value,t.value])}return ae.null()}}function f2(n){return e=>{let t=ot(n,e);if(Sn.pass(e,t)){let i=!1,r=t.values?t.values:[t.value];for(let s of r){let o=String(e.value).substr(0,s.length);if(i=t.isRestrict&&String(o).toLowerCase()==String(s).toLowerCase()||!t.isRestrict&&o!=s,!i)break}if(i)return ae.toJson(b.startsWith,t,[e.value,t.value])}return ae.null()}}function p2(n){return t=>{let i=ot(n,t);return!Sn.pass(t,i)||_t.isNumeric(t.value)&&function(t){let i=1!=t;for(var r=2;r<t;r++)if(t%r==0){i=!1;break}return i}(t.value)?ae.null():ae.toJson(b.primeNumber,i,[t.value])}}function g2(n){return e=>Jl(n,e,ln.lat,b.latitude)}function m2(n){return e=>Jl(n,e,ln.long,b.longitude)}function _2(n){return e=>{let t=ot(n,e);if(si.ProcessRule(e,t)&&t.validators){let i;for(let r of t.validators)if(i=r(e),i)break;if(i)return t.messageKey||t.message?ae.toJson(t.messageKey||b.compose,t,[e.value]):i}return ae.null()}}function y2(n){return i=>{let r=ot(n,i);if(si.ProcessRule(i,r)&&st.isNotBlank(i.value)){let o=_t.getParentFormArray(i),a=i.parent?i.parent:void 0,c=[],d=[];if(o&&a){let f=i.value,p=_t.getFormControlName(i),m=!1;for(let _ of o.controls)if(_!=a&&(m=_t.toLower(_.controls[p].value)==_t.toLower(f)&&!(_.controls[p].errors&&_.controls[p].errors[b.unique]),_.controls[p].errors&&_.controls[p].errors[b.unique]?o.controls.filter(I=>I.controls[p]!=_.controls[p]&&_t.toLower(I.controls[p].value)==_t.toLower(_.controls[p].value))[0]||c.push(_.controls[p]):d.push(_.controls[p].value)),m)break;c.length>0&&((i,r)=>{let s=setTimeout(()=>{i.forEach(o=>{r.filter(c=>c==o.value)[0]||o.updateValueAndValidity()}),clearTimeout(s)},200)})(c,d);let y=!1;if(r.additionalValidation&&(y=((i,r,s,o,a)=>{let c=o.controls.indexOf(s),d=[];return-1!=c&&(o.value.forEach((f,p)=>{c!=p&&d.push(f)}),i.additionalValidation(a,c,r,s.value,d))})(r,p,a,o,f)),m&&!y)return ae.toJson(b.unique,r,[i.value])}}return ae.null()}}function v2(n){return e=>{let t=ot(n,e);return si.ProcessRule(e,t)&&!st.isNotBlank(e.value,!0)?ae.toJson(b.notEmpty,t,[]):ae.null()}}function b2(n){let e=st.isValid(n,ln.ipV4);if(e){const t=n.split(".");for(let i of t)if(e=i<=255,!e)break}return e}function C2(n){return st.isValid(n,ln.ipV6)}function w2(n){return e=>{let t=ot(n,e,cN);if(Sn.pass(e,t)){let r=t.isCidr?e.value.split("/"):[e.value];var i=t.version==$u.V4?b2(r[0]):t.version==$u.V6?C2(r[0]):b2(r[0])||C2(r[0]);if(t.isCidr&&i&&(i=r.length>1&&(t.version==$u.V4?st.isValid(r[1],ln.cidrV4):t.version==$u.V6?st.isValid(r[1],ln.cidrV6):st.isValid(r[1],ln.cidrV4)||st.isValid(r[1],ln.cidrV6))),!i)return ae.toJson(b.ip,t,[e.value])}return ae.null()}}function E2(n){return e=>{let t=ot(n,e);if(Sn.pass(e,t)){var i=e.value.toUpperCase();let o=st.isValid(i,ln.cusip);if(o){let a=i.split("").map(d=>{var f=d.charCodeAt(0);return f>="A".charCodeAt(0)&&f<="Z".charCodeAt(0)?f-"A".charCodeAt(0)+10:d}),c=0;for(var r=0;r<a.length-1;r++){var s=parseInt(a[r],10);r%2!=0&&(s*=2),s>9&&(s-=9),c+=s}c=(10-c%10)%10,o=c==a[a.length-1]}if(!o)return ae.toJson(b.cusip,t,[e.value])}return ae.null()}}function D2(n){return e=>{let t=ot(n,e);if(Sn.pass(e,t)){let c=e.value.toUpperCase();var i=st.isValid(c,ln.grid);if(i){c=c.replace(/\s/g,"").replace(/-/g,""),"GRID:"===c.substr(0,5)&&(c=c.substr(5));let d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var r=d.length,s=c.length,o=Math.floor(r/2),a=0;a<s;a++)o=(2*(o||r)%(r+1)+d.indexOf(c.charAt(a)))%r;i=1===o}if(!i)return ae.toJson(b.grid,t,[e.value])}return ae.null()}}function A2(n){return e=>function(n,e,t){e=ot(e,n);var i=new BS;return si.ProcessRule(n,e)&&st.isNotBlank(n.value)&&!i.isDate(n.value)&&!i.isValid(n.value,e)?ae.toJson(t,e,[n.value]):ae.null()}(e,n,b.date)}function S2(n,e,t){let i=!1;switch(t){case"<":case">":i=n>e;break;case"<=":case">=":i=n>=e}return i}function US(n){let e=n?n.split(":"):[];return new Date(1970,0,1,e[0]?e[0]:0,e[1]?e[1]:0,e[2]?e[2]:0).getTime()}function x2(n,e,t){if(e=ot(e,n),si.ProcessRule(n,e)&&st.isNotBlank(n.value)){if(!function(n,e){return st.isValid(n.value,e.allowSeconds?ln.timeWithSeconds:ln.time)}(n,e))return ae.toJson(t,e,[n.value]);{let i=e.fieldName?_t.getFormControl(e.fieldName,n):void 0,r=US(i?i.value:e.value),s=US(n.value);if(!(t==b.minTime?S2(s,r,e.operator||">="):S2(r,s,e.operator||"<=")))return ae.toJson(t,e,[n.value])}}return ae.null()}function M2(n){return e=>x2(e,n,b.minTime)}function T2(n){return e=>x2(e,n,b.maxTime)}function I2(n){return e=>{let t=ot(n,e);return si.ProcessRule(e,t)&&!0!==e.value?ae.toJson(b.requiredTrue,t,[]):ae.null()}}function O2(n){return e=>{let t=ot(n,e);return(!e[di]||!e[di][b.mask])&&_t.configureControl(e,t,b.mask),null}}const P2={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z0-9]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z0-9]{4}\d{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z0-9]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};function k2(n){return e=>{let t=ot(n,e);return!Sn.pass(e,t)||function(n,e){const t=n.replace(/[\s\-]+/gi,"").toUpperCase(),i=e||t.slice(0,2).toUpperCase();return i in P2&&P2[i].test(t)}(e.value,t.countryCode)&&function(n){const e=n.replace(/[^A-Z0-9]+/gi,"").toUpperCase();return 1===(e.slice(4)+e.slice(0,4)).replace(/[A-Z]/g,s=>s.charCodeAt(0)-55).match(/\d{1,7}/g).reduce((s,o)=>Number(s+o)%97,"")}(e.value)?ae.null():ae.toJson(b.iban,t,[e.value,t.countryCode])}}const cs={alphaNumeric:vN,alpha:yN,compare:bN,email:AN,hexColor:SN,lowerCase:xN,maxDate:IN,maxNumber:PN,minDate:kN,minNumber:FN,contains:CN,upperCase:VN,maxLength:ON,minLength:RN,password:NN,range:LN,required:BN,creditCard:wN,digit:DN,pattern:HN,time:jN,url:UN,json:zN,greaterThan:WN,greaterThanEqualTo:qN,lessThan:KN,lessThanEqualTo:ZN,choice:YN,different:QN,numeric:XN,even:JN,odd:e2,factor:t2,leapYear:n2,allOf:r2,oneOf:s2,noneOf:o2,mac:a2,ascii:l2,dataUri:c2,port:u2,latLong:d2,extension:function(n){return(e,t)=>{let i=ot(n,e);if((!e[di]||!e[di][b.extension])&&_t.configureControl(e,i,b.extension),t&&si.ProcessRule(e,i)&&st.isNotBlank(e.value)){let s=!0,o="";for(var r=0;r<t.length;r++){let c=t.item(r).name.split(".");o=c[c.length-1];let d=i.extensions.filter(f=>o.toLowerCase()==f.toLowerCase())[0];if(!d&&!n.isExcludeExtensions){s=!1;break}if(d&&n.isExcludeExtensions){s=!1;break}}if(!s)return ae.toJson(b.extension,i,[o,i.extensions.join(",")])}return ae.null()}},fileSize:function(n){return(e,t)=>{let i=ot(n,e);if((!e[di]||!e[di][b.fileSize])&&_t.configureControl(e,i,b.fileSize),t&&si.ProcessRule(e,i)&&st.isNotBlank(e.value)){let s=i.minSize?i.minSize:0,o=!1,a=0;for(var r=0;r<t.length&&(a=t.item(r).size,o=!(a>=s&&a<=i.maxSize),!o);r++);if(o)return ae.toJson(b.fileSize,i,[a,s,i.maxSize])}return ae.null()}},endsWith:h2,startsWith:f2,primeNumber:p2,latitude:g2,longitude:m2,compose:_2,rule:function(n,e){return t=>{let i=ot(n,t);if(si.ProcessRule(t,i)){let r=null;for(let s of i.customRules)if(r=s(e),r)break;if(r)return r}return ae.null()}},file:function(n){return(e,t)=>{let i=ot(n,e);if((!e[di]||!e[di][b.file])&&_t.configureControl(e,i,b.file),t&&si.ProcessRule(e,i)&&st.isNotBlank(e.value)){let r=i.minFiles?i.minFiles:0,s=i.maxFiles?i.maxFiles:t.length;if(!(t.length>0&&t[0]instanceof File&&t.length>=r&&t.length<=s))return ae.toJson(b.file,i,[t.length,r,s])}return ae.null()}},unique:y2,image:function(n){return(e,t)=>{let i=ot(n,e);return(!e[di]||!e[di][b.image])&&_t.configureControl(e,i,b.image),t?new Promise((r,s)=>{if(si.ProcessRule(e,i)&&st.isNotBlank(e.value)){let a=!1;for(var o=0;o<t.length;o++){let c=t.item(o),d=c.type?c.type.split("/"):[];if(a=d.length>1&&"image"==d[0],!a)break;let f=new Image;i.minWidth=i.minWidth?i.minWidth:0,i.minHeight=i.minHeight?i.minHeight:0,f.onload=()=>{a=f.width>=i.minWidth&&f.height>=i.minHeight&&f.width<=i.maxWidth&&f.height<=i.maxHeight,r(a?ae.null():ae.toJson(b.image,i,[f.width,f.height]))},f.onerror=()=>{r(ae.toJson(b.image,i,[]))},f.src=URL.createObjectURL(c)}a||r(ae.toJson(b.image,i,[]))}return ae.null()}):ae.null()}},notEmpty:v2,ip:w2,cusip:E2,grid:D2,date:A2,minTime:M2,maxTime:T2,requiredTrue:I2,mask:O2,iban:k2};let B2=(()=>{class n{constructor(t,i){this.decimalPipe=t,this.localeId=i,this.decimalSeperator=".",this.groupSeperator=",",this.isSetConfig=!1,this.decimalSeperator=os(i,pt.Decimal),this.groupSeperator=os(i,pt.Group),this.setSymbolInConfig()}replacer(t){t=String(t),this.isSetConfig||this.bindConfig(),t=t.split(this.groupSeperator).join(""),this.allowDecimalSymbol&&(t=t.replace(this.decimalSeperator,this.allowDecimalSymbol));var i=t.split(this.decimalSeperator);return i.length>1&&i[1]&&st.isZero(i[1])?i[0]:t}transFormDecimal(t,i,r){if(!(t=String(t)))return t;let s=this.decimalPipe.transform(t.replace(fe.number.groupSymbol,"").replace(this.decimalSeperator,"."),i,this.localeId);if(r&&t.indexOf(this.decimalSeperator)){let o=s.split("."),a=i?i.split("-"):[],c=a.length>1?parseInt(a[a.length-1]):0;if(o.length>1&&a.length>0&&0!==c&&o[1].length!==c){let d=c-o[1].length;for(let f=0;f<d;f++)s+="0"}}return s}setSymbolInConfig(){fe.number={decimalSymbol:this.decimalSeperator,groupSymbol:this.groupSeperator}}bindConfig(){fe.json&&(fe.json.localeId&&(this.localeId=fe.json.localeId),fe.json.allowDecimalSymbol&&(this.allowDecimalSymbol=fe.json.allowDecimalSymbol)),this.isSetConfig=!0}}return n.\u0275fac=function(t){return new(t||n)(X(dD),X(na))},n.\u0275prov=Ne({token:n,factory:n.\u0275fac}),n})(),aY=(()=>{class n{constructor(){this.controlConfig={},this.isProcessed=!1}setModelConfig(t){this.isProcessed=!0,this.controlConfig&&this.controlConfig.validatorConfig&&(t[di]=this.controlConfig.validatorConfig,this.controlConfig=void 0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ke({type:n,inputs:{name:"name",formControlName:"formControlName"}}),n})(),lY=(()=>{class n extends aY{constructor(){super(...arguments),this.validators=[]}validation(t){let i=null;for(let r of this.validators)if(i=r(t),i)break;return!i&&this.maskProvider&&(i=this.maskProvider.validate()),i}setEventName(){var t="";switch(this.element.tagName){case"INPUT":case"textarea":t="checkbox"==this.element.type||"radio"==this.element.type||"file"==this.element.type?"change":"INPUT";break;case"SELECT":t="change"}this.eventName=t.toLowerCase()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Wi(n)))(i||n)}}(),n.\u0275dir=ke({type:n,inputs:{formControl:"formControl"},features:[$t]}),n})();class cY{constructor(e,t,i,r,s){this.input=e,this.mask=t,this.renderer=i,this.formControl=r,this.config=s,this.eventListeners=[],this.oldValue="",this.type="text",this.slotChar="_",this.autoClear=!1,this.isInvalid=!1,this.internalProcess=!1,this.bind()}bind(){st.isNotBlank(this.formControl.value)&&(this.input.value=this.formControl.value),this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},this.androidChrome=!1;let e=this.mask.split("");for(let t=0;t<e.length;t++){let i=e[t];"?"==i?(this.len--,this.partialPosition=t):this.defs[i]?(this.tests.push(new RegExp(this.defs[i])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1),t<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.minLength=this.config.minLength?this.lastRequiredNonMaskPos-(this.lastRequiredNonMaskPos-this.config.minLength):this.lastRequiredNonMaskPos,this.buffer=[];for(let t=0;t<e.length;t++){let i=e[t];"?"!=i&&this.buffer.push(this.defs[i]?this.getPlaceholder(t):i)}this.defaultBuffer=this.buffer.join(""),this.focusText=this.input.value,this.bindEvents(),this.checkVal()}bindEvents(){this.eventListeners.push(this.renderer.listen(this.input,"focus",this.onFocus.bind(this))),this.eventListeners.push(this.renderer.listen(this.input,"blur",this.onBlur.bind(this))),this.eventListeners.push(this.renderer.listen(this.input,"keydown",this.onKeyDown.bind(this))),this.eventListeners.push(this.renderer.listen(this.input,"keypress",this.onKeyPress.bind(this))),this.eventListeners.push(this.renderer.listen(this.input,"input",this.onInput.bind(this))),this.eventListeners.push(this.renderer.listen(this.input,"paste",this.handleInputChange.bind(this)))}validate(){this.input.value&&this.oldValue!=this.input.value&&(this.checkVal(!0),this.isCompleted(null,!0),this.oldValue=this.input.value);let e=ot(this.config,this.formControl);return st.isNotBlank(this.getUnmaskedValue())&&si.ProcessRule(this.formControl,e)&&this.isInvalid?ae.toJson(b.mask,e,[this.formControl.value]):ae.null()}writeValue(e){this.value=e,this.input&&((null==this.value||null==this.value)&&(this.input.value=""),this.checkVal()),this.updateFilledState()}caret(e,t){let i,r,s;if(this.input.offsetParent&&this.input===document.activeElement){if("number"!=typeof e)return this.input.setSelectionRange?(r=this.input.selectionStart,s=this.input.selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),r=0-i.duplicate().moveStart("character",-1e5),s=r+i.text.length),{begin:r,end:s};r=e,s="number"==typeof t?t:r,this.input.setSelectionRange?this.input.setSelectionRange(r,s):this.input.createTextRange&&(i=this.input.createTextRange(),i.collapse(!0),i.moveEnd("character",s),i.moveStart("character",r),i.select())}}isCompleted(e,t){e=e||this.lastRequiredNonMaskPos;for(let r=this.firstNonMaskPos;r<=e;r++)if(this.tests[r]&&this.buffer[r]===this.getPlaceholder(r))return!1;return this.isInvalid=!1,t||this.formControl.updateValueAndValidity(),!0}getPlaceholder(e){return this.slotChar.charAt(e<this.slotChar.length?e:0)}seekNext(e){for(;++e<this.len&&!this.tests[e];);return e}seekPrev(e){for(;--e>=0&&!this.tests[e];);return e}shiftL(e,t){let i,r;if(!(e<0)){for(i=e,r=this.seekNext(t);i<this.len;i++)if(this.tests[i]){if(!(r<this.len&&this.tests[i].test(this.buffer[r])))break;this.buffer[i]=this.buffer[r],this.buffer[r]=this.getPlaceholder(r),r=this.seekNext(r)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,e))}}shiftR(e){let t,i,r,s;for(t=e,i=this.getPlaceholder(e);t<this.len;t++)if(this.tests[t]){if(r=this.seekNext(t),s=this.buffer[t],this.buffer[t]=i,!(r<this.len&&this.tests[r].test(s)))break;i=s}}handleAndroidInput(e){var t=this.input.value,i=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>t.length){for(this.checkVal(!0);i.begin>0&&!this.tests[i.begin-1];)i.begin--;if(0===i.begin)for(;i.begin<this.firstNonMaskPos&&!this.tests[i.begin];)i.begin++;this.caret(i.begin,i.begin)}else{for(this.checkVal(!0);i.begin<this.len&&!this.tests[i.begin];)i.begin++;this.caret(i.begin,i.begin)}this.isCompleted()?this.isInvalid=!1:(this.isInvalid=!0,this.formControl.updateValueAndValidity())}onBlur(e){if(this.focus=!1,this.checkVal(),this.updateModel(e),this.updateFilledState(),this.input.value!=this.focusText){let t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.input.dispatchEvent(t);let i=this.input.value;this.formControl.setValue(this.config.valueWithMask?i:this.getUnmaskedValue()),this.input.value=i}}onKeyDown(e){let i,r,s,t=e.which||e.keyCode;this.oldVal=this.input.value;let a=!!this.config.minLength&&this.isCompleted(this.minLength+1);8===t||46===t?(i=this.caret(),r=i.begin,s=i.end,s-r==0&&(r=46!==t?this.seekPrev(r):s=this.seekNext(r-1),s=46===t?this.seekNext(s):s),this.clearBuffer(r,s),this.shiftL(r,s-1),this.setControlValue(e,!1,a),this.updateModel(e),e.preventDefault()):13===t?(this.onBlur(e),this.setControlValue(e,!1,a),this.updateModel(e)):27===t&&(this.input.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(e),this.setControlValue(e,!1,a),e.preventDefault())}onKeyPress(e){var r,s,o,a,t=e.which||e.keyCode,i=this.caret();e.ctrlKey||e.altKey||e.metaKey||t<32||(t&&13!==t&&(i.end-i.begin!=0&&(this.clearBuffer(i.begin,i.end),this.shiftL(i.begin,i.end-1)),(r=this.seekNext(i.begin-1))<this.len&&(s=String.fromCharCode(t),this.tests[r].test(s)&&(this.shiftR(r),this.buffer[r]=s,this.writeBuffer(),o=this.seekNext(r),this.caret(o),i.begin<=this.lastRequiredNonMaskPos&&(a=this.isCompleted()))),e.preventDefault()),this.updateModel(e),void 0===a&&(a=this.isCompleted()),this.setControlValue(e,a,!!this.config.minLength&&this.isCompleted(this.minLength)))}clearBuffer(e,t){let i;for(i=e;i<t&&i<this.len;i++)this.tests[i]&&(this.buffer[i]=this.getPlaceholder(i))}writeBuffer(){this.input.value=this.buffer.join("")}checkVal(e){let r,s,o,t=this.input.value,i=-1;for(r=0,o=0;r<this.len;r++)if(this.tests[r]){for(this.buffer[r]=this.getPlaceholder(r);o++<t.length;)if(s=t.charAt(o-1),this.tests[r].test(s)){this.buffer[r]=s,i=r;break}if(o>t.length){this.clearBuffer(r+1,this.len);break}}else this.buffer[r]===t.charAt(o)&&o++,r<this.partialPosition&&(i=r);return e?this.writeBuffer():!(i+1<this.partialPosition)||this.config.minLength&&i>=this.minLength?(this.writeBuffer(),this.input.value=this.input.value.substring(0,i+1)):this.autoClear||this.buffer.join("")===this.defaultBuffer?this.isInvalid=!0:(this.isInvalid=!0,this.writeBuffer()),this.partialPosition?r:this.firstNonMaskPos}onFocus(e){let t;this.focus=!0,clearTimeout(this.caretTimeoutId),this.focusText=this.input.value,t=this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.input===document.activeElement&&(this.writeBuffer(),t==this.mask.replace("?","").length?this.caret(0,t):this.caret(t),this.updateFilledState())},10)}onInput(e){this.androidChrome?this.handleAndroidInput(e):this.handleInputChange(e)}setControlValue(e,t,i){this.isInvalid=i?!i:!t;let r=this.input.value,s="";this.isInvalid||(s=this.config.valueWithMask?r:this.getUnmaskedValue()),this.formControl.setValue(s),this.oldValue=this.input.value=r,t||this.onFocus(e)}handleInputChange(e){setTimeout(()=>{var t=this.checkVal(!0);this.caret(t),this.updateModel(e),this.setControlValue(e,this.isCompleted())},0)}getUnmaskedValue(){let e=[];for(let t=0;t<this.buffer.length;t++){let i=this.buffer[t];this.tests[t]&&i!=this.getPlaceholder(t)&&e.push(i)}return e.join("")}updateModel(e){}updateFilledState(){this.filled=this.input&&""!=this.input.value}onDestroy(){let e=this.eventListeners.length;for(var t=0;t<e;t++)this.eventListeners[0](),this.eventListeners.splice(0,1);this.eventListeners=[]}}const uY={provide:Ji,useExisting:fn(()=>pY),multi:!0},dY=["required","notEmpty","alpha","alphaNumeric","ascii","dataUri","digit","email","even","hexColor","json","latitude","latLong","leapYear","longitude","lowerCase","mac","odd","port","primeNumber","time","upperCase","url","unique","cusip","gird"],Cb="numeric";let pY=(()=>{class n extends lY{constructor(t,i,r){super(),this.elementRef=t,this.renderer=i,this.decimalProvider=r,this.eventListeners=[],this.isNumericSubscribed=!1,this.isFocusCalled=!1,this.isMasked=!1,this.element=t.nativeElement,this.setEventName()}set validationControls(t){this.controls=t}get validationControls(){return this.controls}ngOnInit(){let t=[];Object.keys(cs).forEach(i=>{(this[`rx${i}`]||-1!=dY.indexOf(i)&&""==this[`rx${i}`])&&(t.push(cs[i](this[`rx${i}`])),this.name&&(!this.formControlName||!this.formControl)&&_t.configureControl(this.controlConfig,this[`rx${i}`],i))}),t.length>0&&(this.validators=t),this.rxnumeric&&(this.rxnumeric.isFormat||this.rxnumeric.digitsInfo)&&this.bindNumericElementEvent()}blurEvent(){if(!(this.formControl&&this.formControl.errors&&this.formControl.errors.numeric)){if(null!=this.formControl.value){let t=this.decimalProvider.transFormDecimal(this.formControl.value,this.rxnumeric.digitsInfo,this.rxnumeric.persistZero);t=this.rxnumeric.isFormat?t:this.decimalProvider.replacer(t),this.setValueOnElement(t)}this.isFocusCalled=!1}}bindNumericElementEvent(t){t&&(this.rxnumeric=t);let i=this.renderer.listen(this.element,"blur",this.blurEvent.bind(this));this.eventListeners.push(i),i=this.renderer.listen(this.element,"focus",r=>{if(this.isFocusCalled=!0,!(this.formControl&&this.formControl.errors&&this.formControl.errors.numeric)&&null!=this.formControl.value){let s=this.decimalProvider.replacer(this.element.value);this.setValueOnElement(s)}}),this.eventListeners.push(i)}bindValueChangeEvent(){if(""!=this.eventName){let t=this.renderer.listen(this.element,this.eventName,()=>{Object.keys(this.validationControls).forEach(i=>{this.validationControls[i].updateValueAndValidity()})});this.eventListeners.push(t)}}subscribeNumericFormatter(){this.formControl[di]&&this.formControl[di][Cb]&&(this.formControl[di][Cb].isFormat||this.formControl[di][Cb].digitsInfo)&&(this.isNumericSubscribed||(this.bindNumericElementEvent(this.formControl[di][Cb]),this.isNumericSubscribed=!0),!this.isFocusCalled&&st.isNotBlank(this.formControl.value)&&this.blurEvent())}subscribeMaskValidator(){if(this.formControl[di]&&this.formControl[di].mask&&!this.isMasked){let t=this.formControl[di].mask;this.maskProvider=new cY(this.element,t.mask,this.renderer,this.formControl,t),this.isMasked=!0}}setValueOnElement(t){this.renderer.setProperty(this.element,"value",t)}setTemplateValidators(t){for(let i in t[di])this[i]=t[di][i];delete t[mb],delete t[di],this.ngOnInit()}updateOnElementClass(t){var i="";return function(r){i&&t.classList.remove(i),r&&t.classList.add(r),i=r}}setValidatorConfig(t){if(!this.formControl){this.formControl=t;let i=this.formControl;i.updateOnElementClass&&(i.updateOnElementClass=this.updateOnElementClass(this.element))}this.subscribeMaskValidator(),this.subscribeNumericFormatter(),t[mb]&&this.setTemplateValidators(t),t[jg]&&(this.conditionalValidator=t[jg],delete t[jg])}validate(t){return this.setValidatorConfig(t),this.conditionalValidator&&this.conditionalValidator(t),this.isProcessed||this.setModelConfig(t),this.validators&&this.validators.length>0||this.maskProvider?this.validation(t):null}ngOnDestroy(){this.controls=void 0;let t=this.eventListeners.length;for(var i=0;i<t;i++)this.eventListeners[0](),this.eventListeners.splice(0,1);this.eventListeners=[],this.maskProvider&&this.maskProvider.onDestroy()}}return n.\u0275fac=function(t){return new(t||n)(V(Xt),V(ea),V(B2))},n.\u0275dir=ke({type:n,selectors:[["","ngModel",""],["","formControlName",""],["","formControl",""]],inputs:{rxnumeric:"rxnumeric",rxalpha:"rxalpha",rxalphaNumeric:"rxalphaNumeric",rxascii:"rxascii",rxcompare:"rxcompare",rxcompose:"rxcompose",rxcontains:"rxcontains",rxcreditCard:"rxcreditCard",rxdataUri:"rxdataUri",rxdifferent:"rxdifferent",rxdigit:"rxdigit",rxemail:"rxemail",rxendsWith:"rxendsWith",rxeven:"rxeven",rxextension:"rxextension",rxfactor:"rxfactor",rxfileSize:"rxfileSize",rxgreaterThanEqualTo:"rxgreaterThanEqualTo",rxgreaterThan:"rxgreaterThan",rxhexColor:"rxhexColor",rxjson:"rxjson",rxlatitude:"rxlatitude",rxlatLong:"rxlatLong",rxleapYear:"rxleapYear",rxlessThan:"rxlessThan",rxlessThanEqualTo:"rxlessThanEqualTo",rxlongitude:"rxlongitude",rxlowerCase:"rxlowerCase",rxmac:"rxmac",rxmaxDate:"rxmaxDate",rxmaxLength:"rxmaxLength",rxmaxNumber:"rxmaxNumber",rxminDate:"rxminDate",rxminLength:"rxminLength",rxminNumber:"rxminNumber",rxodd:"rxodd",rxpassword:"rxpassword",rxport:"rxport",rxprimeNumber:"rxprimeNumber",rxrequired:"rxrequired",rxrange:"rxrange",rxrule:"rxrule",rxstartsWith:"rxstartsWith",rxtime:"rxtime",rxupperCase:"rxupperCase",rxurl:"rxurl",rxunique:"rxunique",rxnotEmpty:"rxnotEmpty",rxcusip:"rxcusip",rxgrid:"rxgrid",rxdate:"rxdate"},features:[On([uY]),$t]}),n})();function Be(n,e){return t=>(n=n||{}).validatorConfig?si.ProcessRule(t,n)?n.validatorConfig.pipe(Bt(j2(n,e,t))):bt(null):bt(j2(n,e,t)(n))}function j2(n,e,t){return i=>{let r=Object.assign(Object.assign(Object.assign({},n),i),{expressionProcessed:!0});return cs[e](r)(t)}}function qe(n,e,t){var i=(r,s)=>"string"!=typeof r?(n&&(!r.validatorConfig||!r.validatorConfig[e])&&_t.configureControl(r,n,e),t(r)):(mt.init(s,0,r,e,n,!1),null);return Object.defineProperty(i,"name",{value:gb}),i}function cn(n,e,t){var i=(r,s)=>"string"!=typeof r?(n&&(!r.validatorConfig||!r.validatorConfig[e])&&_t.configureControl(r,n,e),t(r)):(mt.init(s,0,r,e,n,!0),null);return Object.defineProperty(i,"name",{value:gb}),i}function mY(n){return qe(n,b.alpha,yN(n))}function _Y(n){return cn(n,b.alpha,Be(n,b.alpha))}function yY(n){return qe(n,b.allOf,r2(n))}function vY(n){return cn(n,b.allOf,Be(n,b.allOf))}function bY(n){return qe(n,b.alphaNumeric,vN(n))}function CY(n){return cn(n,b.alphaNumeric,Be(n,b.alphaNumeric))}function wY(n){return qe(n,b.choice,YN(n))}function EY(n){return cn(n,b.choice,Be(n,b.choice))}function DY(n){return qe(n,b.compare,bN(n))}function AY(n){return qe(n,b.contains,CN(n))}function SY(n){return cn(n,b.contains,Be(n,b.contains))}function xY(n){return qe(n,b.creditCard,wN(n))}function MY(n){return cn(n,b.creditCard,Be(n,b.creditCard))}function TY(n){return qe(n,b.different,QN(n))}function IY(n){return qe(n,b.digit,DN(n))}function OY(n){return qe(n,b.email,AN(n))}function PY(n){return qe(n,b.even,JN(n))}function kY(n){return qe(n,b.factor,t2(n))}function RY(n){return cn(n,b.factor,Be(n,b.factor))}function FY(n){return qe(n,b.greaterThanEqualTo,qN(n))}function NY(n){return cn(n,b.greaterThanEqualTo,Be(n,b.greaterThanEqualTo))}function LY(n){return qe(n,b.greaterThan,WN(n))}function VY(n){return cn(n,b.greaterThan,Be(n,b.greaterThan))}function BY(n){return qe(n,b.hexColor,SN(n))}function HY(n){return qe(n,b.json,zN(n))}function jY(n){return qe(n,b.leapYear,n2(n))}function UY(n){return qe(n,b.lessThanEqualTo,ZN(n))}function zY(n){return cn(n,b.lessThanEqualTo,Be(n,b.lessThanEqualTo))}function $Y(n){return qe(n,b.lessThan,KN(n))}function GY(n){return cn(n,b.lessThan,Be(n,b.lessThan))}function WY(n){return qe(n,b.lowerCase,xN(n))}function qY(n){return qe(n,b.mac,a2(n))}function ZY(n){return qe(n,b.maxDate,IN(n))}function KY(n){return cn(n,b.maxDate,Be(n,b.maxDate))}function YY(n){return qe(n,b.maxLength,ON(n))}function QY(n){return cn(n,b.maxLength,Be(n,b.maxLength))}function XY(n){return qe(n,b.maxNumber,PN(n))}function JY(n){return cn(n,b.maxNumber,Be(n,b.maxNumber))}function eQ(n){return qe(n,b.minDate,kN(n))}function tQ(n){return cn(n,b.minDate,Be(n,b.minDate))}function nQ(n){return qe(n,b.minLength,RN(n))}function iQ(n){return cn(n,b.minLength,Be(n,b.minLength))}function rQ(n){return qe(n,b.minNumber,FN(n))}function sQ(n){return cn(n,b.minNumber,Be(n,b.minNumber))}function oQ(n){return qe(n,b.noneOf,o2(n))}function aQ(n){return cn(n,b.noneOf,Be(n,b.noneOf))}function lQ(n){return qe(n,b.numeric,XN(n))}function cQ(n){return cn(n,b.numeric,Be(n,b.numeric))}function uQ(n){return qe(n,b.odd,e2(n))}function dQ(n){return qe(n,b.oneOf,s2(n))}function hQ(n){return cn(n,b.oneOf,Be(n,b.oneOf))}function fQ(n){return qe(n,b.password,NN(n))}function pQ(n){return cn(n,b.password,Be(n,b.password))}function gQ(n){return qe(n,b.pattern,HN(n))}function mQ(n){return cn(n,b.pattern,Be(n,b.pattern))}function _Q(n){return qe(n,b.range,LN(n))}function yQ(n){return cn(n,b.range,Be(n,b.range))}function vQ(n){return qe(n,b.required,BN(n))}function bQ(n){return qe(n,b.time,jN(n))}function CQ(n){return cn(n,b.time,Be(n,b.time))}function wQ(n){return qe(n,b.upperCase,VN(n))}function EQ(n){return qe(n,b.url,UN(n))}function DQ(n){return cn(n,b.url,Be(n,b.url))}function AQ(n){return qe(n,b.ascii,l2(n))}function SQ(n){return qe(n,b.dataUri,c2(n))}function xQ(n){return qe(n,b.port,u2(n))}function MQ(n){return qe(n,b.latLong,d2(n))}function TQ(n){return qe(n,b.extension,e=>null)}function IQ(n){return cn(n,b.extension,Be(n,b.extension))}function OQ(n){return qe(n,b.fileSize,e=>null)}function PQ(n){return cn(n,b.fileSize,Be(n,b.fileSize))}function kQ(n){return qe(n,b.endsWith,h2(n))}function RQ(n){return cn(n,b.endsWith,Be(n,b.endsWith))}function FQ(n){return qe(n,b.startsWithWith,f2(n))}function NQ(n){return cn(n,b.startsWithWith,Be(n,b.startsWith))}function LQ(n){return qe(n,b.primeNumber,p2(n))}function VQ(n){return qe(n,b.latitude,g2(n))}function BQ(n){return qe(n,b.longitude,m2(n))}function HQ(n){return qe(n,b.compose,_2(n))}function jQ(n){return qe(n,b.file,e=>null)}function UQ(n){return cn(n,b.file,Be(n,b.file))}function zQ(n){return qe(n,b.custom,function(n){return e=>{let t=ot(n,e);if(si.ProcessRule(e,t)){const i=_t.getParentObjectValue(e),r=e.parent?e.parent.value:void 0;let s=null;for(let o of t.customRules)if(s=o(i,r,t.additionalValue),s)break;if(s)return s}return ae.null()}}(n))}function $Q(n){return cn(n,b.custom,Be(n,b.custom))}function GQ(n){return qe(n,b.unique,y2(n))}function WQ(n){return qe(n,b.image,e=>null)}function qQ(n){return cn(n,b.image,Be(n,b.image))}function ZQ(n){return qe(n,b.notEmpty,v2(n))}function KQ(n){return qe(n,b.ip,w2(n))}function YQ(n){return cn(n,b.ip,Be(n,b.ip))}function QQ(n){return qe(n,b.cusip,E2(n))}function XQ(n){return qe(n,b.grid,D2(n))}function JQ(n){return qe(n,b.date,A2(n))}function eX(n){return cn(n,b.date,Be(n,b.date))}function tX(n){return qe(n,b.and,function(n){return e=>{let t=ot(n,e);if(Sn.pass(e,t)){let r=Object.keys(t.validation),s=!1;for(var i of r)if(s="boolean"==typeof t.validation[i]?cs[i]()(e):cs[i](t.validation[i])(e),s)break;if(s)return ae.toJson(b.and,t,[e.value])}return ae.null()}}(n))}function nX(n){return qe(n,b.or,function(n){return e=>{let t=ot(n,e);if(Sn.pass(e,t)){let r=Object.keys(t.validation),s=!1;for(var i of r)if(s="boolean"==typeof t.validation[i]?cs[i]()(e):cs[i](t.validation[i])(e),!s)break;if(s)return ae.toJson(b.or,t,[e.value])}return ae.null()}}(n))}function iX(n){return qe(n,b.not,function(n){return e=>{let t=ot(n,e);if(Sn.pass(e,t)){let r=Object.keys(t.validation),s=!1;for(var i of r)if(s="boolean"==typeof t.validation[i]?cs[i]()(e):cs[i](t.validation[i])(e),!s)break;if(!s)return ae.toJson(b.not,t,[e.value])}return ae.null()}}(n))}function rX(n){return qe(n,b.minTime,M2(n))}function sX(n){return cn(n,b.minTime,Be(n,b.minTime))}function oX(n){return qe(n,b.maxTime,T2(n))}function aX(n){return cn(n,b.maxTime,Be(n,b.maxTime))}function lX(n){return qe(n,b.requiredTrue,I2(n))}function cX(n){return qe(n,b.mask,O2(n))}function uX(n){return qe(n,b.iban,k2(n))}function dX(n){return cn(n,b.iban,Be(n,b.iban))}let hX=(()=>{class n{}return n.alpha=mY,n.allOf=yY,n.alphaNumeric=bY,n.choice=wY,n.compare=DY,n.contains=AY,n.creditCard=xY,n.different=TY,n.digit=IY,n.email=OY,n.even=PY,n.factor=kY,n.greaterThanEqualTo=FY,n.greaterThan=LY,n.hexColor=BY,n.json=HY,n.leapYear=jY,n.lessThanEqualTo=UY,n.lessThan=$Y,n.lowerCase=WY,n.mac=qY,n.maxDate=ZY,n.maxLength=YY,n.maxNumber=XY,n.minDate=eQ,n.minLength=nQ,n.minNumber=rQ,n.noneOf=oQ,n.numeric=lQ,n.odd=uQ,n.oneOf=dQ,n.password=fQ,n.pattern=gQ,n.range=_Q,n.required=vQ,n.time=bQ,n.upperCase=wQ,n.url=EQ,n.ascii=AQ,n.dataUri=SQ,n.port=xQ,n.latLong=MQ,n.extension=TQ,n.fileSize=OQ,n.endsWith=kQ,n.startsWith=FQ,n.primeNumber=LQ,n.latitude=VQ,n.longitude=BQ,n.compose=HQ,n.file=jQ,n.custom=zQ,n.unique=GQ,n.image=WQ,n.notEmpty=ZQ,n.ip=KQ,n.cusip=QQ,n.grid=XQ,n.date=JQ,n.and=tX,n.or=nX,n.not=iX,n.minTime=rX,n.maxTime=oX,n.requiredTrue=lX,n.mask=cX,n.iban=uX,n.alphaAsync=_Y,n.alphaNumericAsync=CY,n.allOfAsync=vY,n.choiceAsync=EY,n.containsAsync=SY,n.creditCardAsync=MY,n.customAsync=$Q,n.dateAsync=eX,n.endsWithAsync=RQ,n.extensionAsync=IQ,n.factorAsync=RY,n.fileSizeAsync=PQ,n.fileAsync=UQ,n.greaterThanEqualToAsync=NY,n.greaterThanAsync=VY,n.imageAsync=qQ,n.ipAsync=YQ,n.lessThanEqualToAsync=zY,n.lessThanAsync=GY,n.maxDateAsync=KY,n.maxLengthAsync=QY,n.maxNumberAsync=JY,n.maxTimeAsync=aX,n.minDateAsync=tQ,n.minLengthAsync=iQ,n.minNumberAsync=sQ,n.minTimeAsync=sX,n.noneOfAsync=aQ,n.numericAsync=cQ,n.oneOfAsync=hQ,n.passwordAsync=pQ,n.patternAsync=mQ,n.rangeAsync=yQ,n.startsWithAsync=NQ,n.timeAsync=CQ,n.urlAsync=DQ,n.ibanAsync=dX,n})();function fX(n,e){1&n&&(C(0,"small"),D(1,"URL is unexpected for this source!"),w())}let pX=(()=>{class n{constructor(t,i){this.router=t,this.stateService=i,this.type="gallica",this.identifier="12148/btv1b8454675g",this.file=null,this.invalid=!1,this.selectionForm=new An({source:new yn("gallica",io.required),resourceURL:new yn("",[io.required,hX.url()])}),this.loadMEIForm=new An({fileInput:new yn("",io.required)})}ngOnInit(){}submit(){console.debug("Submit");let r,t=this.selectionForm.controls.source.value,i=this.selectionForm.controls.resourceURL.value;switch(this.invalid=!1,t){case"gallica":if(console.debug("gallica"),!dF.test(i))return console.debug("false"),void(this.invalid=!0);console.debug("true"),r=i.match(dF)[1];break;case"ecodices":if(fF.test(i)){console.debug("Regular ecodices");let s=i.match(fF);r=s[1]+"-"+s[2]}else{if(!lb.test(i))return void(this.invalid=!0);console.debug("IIIF ecodices"),r=i.match(lb)[1]}break;case"iiif":console.debug("iiif case"),pF.test(i)&&(console.debug("generic iiif"),r=encodeURIComponent(i));break;default:return console.debug(t),void(this.invalid=!0)}console.debug(r),this.router.navigate(["/input",t,encodeURIComponent(r)])}meiSubmit(){if(console.debug("MEI Submit"),console.debug(this.file),null===this.file)return;let t=new FileReader;t.addEventListener("load",()=>{let i=t.result,s=(new DOMParser).parseFromString(i,"application/xml"),o=ab.fromXML(s);console.debug(o);let c,d,a=o.metadata.sourceIRI;if(hF.test(a))c="gallica",d=a.match(hF)[1];else if(lb.test(a))c="ecodices",d=a.match(lb)[1];else{if(!pF.test(a))return void window.alert("Sorry! This seems to be a valid file, but this IIIF manifest cannot be loaded.");c="iiif",d=encodeURIComponent(a)}this.stateService.mei=o,this.router.navigate(["/input",c,encodeURIComponent(d)])}),t.readAsText(this.file)}onFileChange(t){this.file=t.target.files[0]}get encodedIdSample(){return encodeURIComponent(this.identifier)}}return n.\u0275fac=function(t){return new(t||n)(V(dr),V(Ql))},n.\u0275cmp=Wn({type:n,selectors:[["app-select-document"]],decls:148,vars:5,consts:[["id","document-select"],["id","load-manuscript"],[3,"formGroup","submit"],[2,"display","block"],[1,"label"],["formControlName","source"],["value","gallica","selected",""],["value","ecodices"],["value","diamm","disabled",""],["value","iiif"],["type","url","formControlName","resourceURL"],[4,"ngIf"],["type","submit","mat-stroked-button","",3,"disabled"],["id","load-mei"],["type","file","formControlName","fileInput","accept","application/mei+xml, application/xml, .mei, .xml",3,"change"],["id","prototype-message"],["href","https://www.neh.gov","target","_blank"],["href","https://drive.google.com/file/d/1GfVzleT_NtvJMOXMv5OYib4a6W1LAUlQ/view?usp=sharing"],["href","https://measuringpolyphony.org","target","_blank"],["href","https://www.youtube.com/channel/UCWB5WRs4LjKpYB_-J2Sb03Q/videos","target","_blank"],["href","https://www.youtube.com/playlist?list=PLLVDNsvw7fOdM3O7nsTR4rVXKLhmQLxkn","target","_blank"],["href","https://www.youtube.com/playlist?list=PLLVDNsvw7fOdFLZz6c7dOvmD3YSUHdRWm","target","_blank"],["href","https://www.youtube.com/playlist?list=PLLVDNsvw7fOd-zYNODauvioZ_45ocwk1Y","target","_blank"],["href","https://drive.google.com/file/d/1y86g5-ESfeeyFyCXsyfpI_oTgF8rF_9_/view?usp=sharing","target","_blank"],["href","https://bit.ly/3cBnyrk","target","_blank"]],template:function(t,i){1&t&&(C(0,"div",0),C(1,"div",1),C(2,"h1"),D(3,"Load a manuscript"),w(),C(4,"form",2),Ge("submit",function(){return i.submit()}),C(5,"div",3),C(6,"label",4),D(7,"Manuscript Repository:\xa0 "),C(8,"select",5),C(9,"option",6),D(10,"Gallica"),w(),C(11,"option",7),D(12,"eCodices"),w(),C(13,"option",8),D(14,"DIAMM"),w(),C(15,"option",9),D(16,"Generic IIIF"),w(),w(),w(),D(17," \xa0 "),C(18,"label",4),D(19,"URL:\xa0 "),vt(20,"input",10),w(),$n(21,fX,2,0,"small",11),w(),C(22,"div"),C(23,"button",12),D(24,"Submit"),w(),w(),w(),vt(25,"br"),C(26,"p"),D(27," For example, to transcribe a piece from the famous "),C(28,"em"),D(29,"Roman de Fauvel"),w(),D(30," manuscript, choose "),C(31,"em"),D(32,"Gallica"),w(),D(33," in the dropdown and paste this URL: "),vt(34,"br"),C(35,"code"),D(36,"https://gallica.bnf.fr/ark:/12148/btv1b8454675g"),w(),w(),w(),C(37,"div",13),C(38,"h1"),D(39,"Load an .mei file"),w(),C(40,"form",2),Ge("submit",function(){return i.meiSubmit()}),C(41,"div",3),C(42,"label",4),D(43,"Compatible Parts-MEI File:\xa0 "),C(44,"input",14),Ge("change",function(s){return i.onFileChange(s)}),w(),w(),w(),C(45,"div"),C(46,"button",12),D(47,"Load File"),w(),w(),w(),w(),w(),C(48,"div",15),C(49,"p"),D(50," The Measuring Polyphony Music Editor (the MP Editor), funded by the "),C(51,"a",16),D(52,"National Endowment for the Humanities"),w(),D(53,", is a prototype web application that allows users with no expertise in music encoding to transcribe and digitally encode transcriptions of polyphony in mensural notation, and create links between these music transcriptions to zones of the digital images of the original medieval manuscripts. To download a White Paper on the MP Editor, click "),C(54,"a",17),D(55,"here"),w(),D(56,". For more information about the Measuring Polyphony project, click "),C(57,"a",18),D(58,"here"),w(),D(59,". "),w(),C(60,"h2"),D(61,"Project Team"),w(),C(62,"ul"),C(63,"li"),D(64,"Karen Desmond, Brandeis University, Massachusetts, USA: Principal Investigator & Project Director"),w(),C(65,"li"),D(66,"Juliette Regimbal, McGill University, Canada: Prototype developer"),w(),C(67,"li"),D(68,"Martha Thomae, McGill University, Canada: Prototype developer"),w(),C(69,"li"),D(70,"Andrew Hankinson, RISM, Switzerland: Consultant on diva.js, MEI"),w(),C(71,"li"),D(72,"Laurent Pugin, University of Bern & RISM, Switzerland: Consultant on Verovio, MEI"),w(),C(73,"li"),D(74,"Craig Sapp, Stanford University, California, USA: Consultant on Humdrum, MEI"),w(),w(),C(75,"h2"),D(76,"Student Research Assistants"),w(),C(77,"ul"),C(78,"li"),D(79,"Caelan Gadweh-Meaden, Brandeis University, USA"),w(),C(80,"li"),D(81,"Zen Kuriyama, Brandeis University, USA"),w(),C(82,"li"),D(83,"Daniel Shapiro, Brandeis University, USA"),w(),w(),C(84,"p"),D(85,"With thanks also to Julie Cumming and her music palaeography students at McGill University - Christina Colanduoni, Mayu Egan, Genevi\xe8ve Gates-Panneton, Namgon Lee, and Celia Morin - for testing the MP Editor in December 2020."),w(),C(86,"h2"),D(87,"Advisory Board"),w(),C(88,"ul"),C(89,"li"),D(90,"Julie Cumming, McGill University, Canada"),w(),C(91,"li"),D(92,"Julia Craig McFeely, University of Oxford, UK"),w(),C(93,"li"),D(94,"Giuliano DiBacco, Indiana University, USA"),w(),C(95,"li"),D(96,"Ichiro Fujinaga, McGill University, Canada"),w(),C(97,"li"),D(98,"Richard Freedman, Haverford College, USA"),w(),C(99,"li"),D(100,"David Lewis, Goldsmiths University of London, UK"),w(),C(101,"li"),D(102,"Anna Zayaruznaya, Yale University, USA"),w(),w(),vt(103,"p"),vt(104,"p"),C(105,"h2"),D(106,"Help and Training Materials"),w(),C(107,"p"),D(108,"The "),C(109,"a",19),D(110,"Measuring Polyphony YouTube channel"),w(),D(111," has in-depth informational videos on using the MP Editor as well as short videos explaining individual functions of the editor. The Measuring Polyphony YouTube channel is organized into playlists that contain comprehensive training videos on how to use the MP editor:"),w(),C(112,"ul"),C(113,"li"),D(114,"(1) "),C(115,"a",20),D(116,"Video summaries"),w(),D(117," (1-3 mins) of how to use the MP Editor"),w(),C(118,"li"),D(119,"(2) "),C(120,"a",21),D(121,"Short videos"),w(),D(122," (10-20 seconds) on specific features"),w(),C(123,"li"),D(124,"(3) "),C(125,"a",22),D(126,"A video series"),w(),D(127," that takes you step-by-step through a transcription of the song "),C(128,"i"),D(129,"Dous viaire gracieus"),w(),D(130," by the fourteenth-century composer Guillaume de Machaut, and which can be used along with this PDF training document ("),C(131,"a",23),D(132,"download PDF"),w(),D(133,")"),w(),w(),C(134,"p"),D(135,"There are also detailed help pages within the MP Editor that also link to short videos with examples. These help pages are located within the tabs at the top of the Music Input and Score Editor interfaces:"),w(),C(136,"ul"),C(137,"li"),D(138,"General Help (Navigation, Metadata, Staves, Saving)"),w(),C(139,"li"),D(140,"Music Input Help (Information on inputting notation, e.g., clefs, rhythm, pitches, Etc.)"),w(),C(141,"li"),D(142,"Score Editor Help (Small edits of pitch and rhythm, Score display preferences, Editorial Mode, Downloading your work)"),w(),w(),C(143,"p"),D(144,"To report bugs, please use this "),C(145,"a",24),D(146,"form (https://bit.ly/3cBnyrk)"),w(),D(147,". Thank you. "),w(),w()),2&t&&(Qe(4),We("formGroup",i.selectionForm),Qe(17),We("ngIf",i.invalid),Qe(2),We("disabled",!i.selectionForm.valid),Qe(17),We("formGroup",i.loadMEIForm),Qe(6),We("disabled",!i.loadMEIForm.valid))},directives:[fv,rv,bh,Au,ag,hg,fg,pg,yh,Eu,Ph],styles:["#document-select[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}#document-select[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{grid-column:2;display:grid;padding-bottom:5em}#document-select[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{justify-self:center}#prototype-message[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr)}#prototype-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{grid-column:2 / 4;text-align:center}#prototype-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{grid-column:2 / 4;text-align:center;font-size:1.625rem}#prototype-message[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{grid-column:2 / 4;text-align:center;list-style-type:none}#prototype-message[_ngcontent-%COMP%]   #funder-logos[_ngcontent-%COMP%]{grid-column:4;display:flex;margin-left:auto;padding-right:1rem}#load-manuscript[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}form[_ngcontent-%COMP%]{display:grid}form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{justify-self:center}a[_ngcontent-%COMP%]{margin-top:2em}h1[_ngcontent-%COMP%]{font-size:1.625rem}.funder-logo[_ngcontent-%COMP%]{height:4rem}\n/*# sourceMappingURL=select-document.component.css.map*/"]}),n})(),gX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n}),n.\u0275inj=Qt({imports:[[Ha,Ch,mS,_S,gS]]}),n})(),U2=(()=>{class n{constructor(){this._staffLoc=new Je}getStaffLocation(){return this._staffLoc}set staffLocation(t){this._staffLoc.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mX=(()=>{class n{constructor(t){this.staffService=t,this.pageToCanvasMap=new Map}ngOnInit(){this.diva=new Uu("diva-score-wrapper",{objectData:this.iiifManifest}),Uu.Events.subscribe("ManifestDidLoad",this.parseCanvases.bind(this),this.diva.settings.ID),Uu.Events.subscribe("ZoomLevelDidChange",this.handleZoom.bind(this),this.diva.settings.ID),this.staffService.getStaffLocation().subscribe(([t,i])=>{this.iri=t,this.bbox=i,console.debug(t),console.debug(i),this.redraw()})}handleZoom(){new Promise(t=>{document.getElementById("score-editor-container").style.display="none",setTimeout(t,this.diva.settings.zoomDuration+100)}).then(()=>{this.redraw(),document.getElementById("score-editor-container").style.display=""})}redraw(){const t=this.pageToCanvasMap.get(this.iri);if(void 0===t)return;this.diva.getCurrentPageIndices().includes(t)||this.diva.gotoPageByIndex(t);const i=this.diva.settings.innerElement,r=this.diva.getPageDimensionsAtCurrentZoomLevel(t),s=this.diva.settings.viewHandler._viewerCore.getPageRegion(t,{includePadding:!0,incorporateViewport:!0}),o=getComputedStyle(i,null).getPropertyValue("margin-left");let a=document.getElementById("score-editor-container");null===a&&(a=document.createElement("div"),a.id="score-editor-container",i.appendChild(a));const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=this.diva.getPageDimensionsAtZoomLevel(t,Number.MAX_SAFE_INTEGER);for(c.setAttribute("width",r.width.toString()),c.setAttribute("height",r.height.toString()),c.setAttribute("viewBox","0 0 "+d.width+" "+d.height),a.style.position="absolute",a.style.top=`${s.top}px`,a.style.left=s.left-parseInt(o)+"px";null!==a.firstChild;)a.firstChild.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.setAttribute("x",this.bbox.ulx),f.setAttribute("y",this.bbox.uly),f.setAttribute("width",(Number(this.bbox.lrx)-Number(this.bbox.ulx)).toString()),f.setAttribute("height",(Number(this.bbox.lry)-Number(this.bbox.uly)).toString()),f.classList.add("zoneRect"),c.appendChild(f),a.appendChild(c)}parseCanvases(t){for(const i of t.sequences)for(const r of i.canvases)this.pageToCanvasMap.set(r["@id"],i.canvases.indexOf(r))}ngOnDestroy(){try{this.diva.deactivate(),this.diva.destroy()}catch(t){console.warn(t)}}}return n.\u0275fac=function(t){return new(t||n)(V(U2))},n.\u0275cmp=Wn({type:n,selectors:[["app-score-diva-view"]],inputs:{iiifManifest:"iiifManifest"},decls:1,vars:0,consts:[["id","diva-score-wrapper"]],template:function(t,i){1&t&&vt(0,"div",0)},styles:['@import"https://unpkg.com/diva.js@6.0.2/build/diva.css";rect.selectedZone[_ngcontent-%COMP%]{stroke-dasharray:none;fill-opacity:0;stroke-width:.45em;stroke:#000;opacity:.75;fill:none}\n/*# sourceMappingURL=score-diva-view.component.css.map*/']}),n})(),z2=(()=>{class n{constructor(){this._parts=null,this._score=null,this._partsSubject=new Je,this._scoreSubject=new Je}get parts(){return this._parts}set parts(t){this._parts=t,this._partsSubject.next(this._parts)}get score(){return this._score}set score(t){this._score=t,this._scoreSubject.next(this._score)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_X=(()=>{class n{constructor(t,i,r,s){this.stateService=t,this.route=i,this.router=r,this.doc=s,this.currentDoc=null}ngOnInit(){this.doc._scoreSubject.subscribe(t=>{this.currentDoc=t})}saveFiles(t){if(null!==this.currentDoc){const i=t.target,s=(new XMLSerializer).serializeToString(this.currentDoc),o=Hg.xml('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n'+s),a=new Blob([o],{type:"application/xml"});i.setAttribute("href",URL.createObjectURL(a)),i.setAttribute("download",(this.stateService.mei.metadata.shortTitle.length>0?this.stateService.mei.metadata.shortTitle:"Untitled")+"_MENSURAL_SCORE.xml")}if(null!=this.stateService.mei&&!this.stateService.editorialMode){const i=document.createElement("a"),s=(new XMLSerializer).serializeToString(this.doc.parts),o=Hg.xml('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n'+s),a=new Blob([o],{type:"application/xml"});i.setAttribute("href",URL.createObjectURL(a)),i.setAttribute("download",(this.stateService.mei.metadata.shortTitle.length>0?this.stateService.mei.metadata.shortTitle:"Untitled")+"_MENSURAL_PARTS.xml"),i.click()}}goToInputEditor(){if(confirm("Warning: Edits made on this page will be lost. Return to input editor?")){let t=this.route.snapshot.paramMap.get("source"),i=this.route.snapshot.paramMap.get("identifier");this.router.navigate(["/input",t,i])}}copyToClipboard(){if(null!==this.currentDoc){const t=new XMLSerializer,i=Hg.xml('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n'+t.serializeToString(this.currentDoc));navigator.clipboard.writeText(i).then(()=>{alert("MEI Score Copied!")}).catch(r=>{console.debug(r),alert("Copy failed :(")})}}}return n.\u0275fac=function(t){return new(t||n)(V(Ql),V(aa),V(dr),V(z2))},n.\u0275cmp=Wn({type:n,selectors:[["app-score-toolbar"]],decls:8,vars:0,consts:[[1,"toolbar-container"],["mat-stroked-button","",3,"click"],["mat-stroked-button",""],["download","","type","application/xml",3,"click"]],template:function(t,i){1&t&&(C(0,"div",0),C(1,"button",1),Ge("click",function(){return i.goToInputEditor()}),D(2," Return to Music Input "),w(),C(3,"button",2),C(4,"a",3),Ge("click",function(s){return i.saveFiles(s)}),D(5," Download MEI File(s) "),w(),w(),C(6,"button",1),Ge("click",function(){return i.copyToClipboard()}),D(7," Copy MEI Score to Clipboard "),w(),w())},directives:[Ph],styles:[".toolbar-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-top:.5em;padding-bottom:.5em}\n/*# sourceMappingURL=score-toolbar.component.css.map*/"]}),n})();var $g=Se(307);const yX=["verovio"];function vX(n,e){if(1&n&&(C(0,"option",6),D(1),w()),2&n){const t=e.$implicit;nh("value",t[1]),Qe(1),hu(t[0].toLowerCase())}}function bX(n,e){if(1&n){const t=Js();C(0,"button",7),Ge("click",function(){return tn(t),Nt().setEditorialMode()}),D(1," Continue in Editorial Mode "),w()}}const ec=["c","d","e","f","g","a","b"];function Wu(n){n.hasAttribute("xml:id")&&n.setAttribute("xml:id","m-"+(0,ko.v4)());for(let e=0;e<n.children.length;e++)Wu(n.children[e])}let CX=(()=>{class n{constructor(t,i,r){this.stateService=t,this.staffService=i,this.doc=r,this.selectedId=null,this.corrToSicMap=new Map,this.barOptions=Object.entries(Vg),this.dissonanceLabels=!1}ngOnInit(){this.doc.parts=this.stateService.mei.generateXML(),this.doc._scoreSubject.subscribe(t=>{this.update(t)})}update(t){let i;if(this.container.nativeElement.innerHTML="",this.dissonanceLabels)try{let r=Wa.meiToHumdrum(t);r=Wa.dissonanceInfo(r);const s=this.getDissonantInfo(r);console.debug(s);const o=t.cloneNode(!0),a=o.createNSResolver(null==o.ownerDocument?o.documentElement:o.ownerDocument.documentElement);for(const[d,f]of Object.entries(s)){const p=o.evaluate("//*[@xml:id='"+d+"']",o,a,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;console.debug(p);const m=o.createElementNS(xe,"verse");m.setAttribute("n","2"),["L","X","Y","Z"].includes(f.toUpperCase())?m.setAttribute("color","#E66200"):m.setAttribute("color","#0000CD");const y=o.createElementNS(xe,"syl");y.textContent=f,m.appendChild(y),p.appendChild(m)}i=Wa.meiToSVG(o,!this.stateService.editorialMode)}catch(r){console.error(r),i=Wa.meiToSVG(t,!this.stateService.editorialMode)}else i=Wa.meiToSVG(t,!this.stateService.editorialMode);this.container.nativeElement.appendChild(i),this.setSelected()}setEditorialMode(){if(confirm("Edits in editorial mode reflect cases where there is a problem with the manuscript. You cannot exit editorial mode and changes from editorial mode cannot be loaded back into the editor from MEI. A parts file that can be loaded will be downloaded before entering. Do you want to continue?")&&(this.stateService.editorialMode=!0,null!=this.stateService.mei)){const i=(new XMLSerializer).serializeToString(this.doc.parts),r=Hg.xml('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n'+i),s=new Blob([r],{type:"application/xml"}),o=document.createElement("a");o.setAttribute("href",URL.createObjectURL(s)),o.setAttribute("download",(this.stateService.mei.metadata.shortTitle.length>0?this.stateService.mei.metadata.shortTitle:"Untitled")+"_MENSURAL_PARTS.xml"),document.body.appendChild(o),o.click(),o.remove()}}setSelected(){if(null!==this.selectedId){Array.from(document.getElementsByClassName("selected")).forEach(t=>{t.classList.remove("selected"),t.setAttribute("fill","")});try{document.getElementById(this.selectedId).classList.add("selected"),document.getElementById(this.selectedId).setAttribute("fill","#d00")}catch(t){return console.debug(t),void(this.selectedId=null)}try{let t=this.selectedId;this.corrToSicMap.has(t)&&(t=this.corrToSicMap.get(t));const i=this.doc.parts.createNSResolver(null==this.doc.parts.ownerDocument?this.doc.parts.documentElement:this.doc.parts.ownerDocument.documentElement),r=()=>"http://www.music-encoding.org/ns/mei",s=this.doc.parts.evaluate("//*[@xml:id='"+t+"']",this.doc.parts,i,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;let o=this.doc.parts.evaluate("./preceding::mei:pb",s,r,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);const a=o.snapshotItem(o.snapshotLength-1);o=this.doc.parts.evaluate("./preceding::mei:sb",s,r,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);const c=o.snapshotItem(o.snapshotLength-1),d="#"===a.getAttribute("facs")[0]?a.getAttribute("facs").substring(1):a.getAttribute("facs"),f="#"===c.getAttribute("facs")[0]?c.getAttribute("facs").substring(1):c.getAttribute("facs");console.debug(f);const p=Array.from(this.doc.parts.getElementsByTagName("surface")).filter(I=>I.getAttribute("xml:id")===d).pop().querySelector("graphic"),m=Array.from(p.children).filter(I=>I.getAttribute("xml:id")===f).pop(),y=p.getAttribute("target"),_={ulx:m.getAttribute("ulx"),uly:m.getAttribute("uly"),lrx:m.getAttribute("lrx"),lry:m.getAttribute("lry")};console.debug(y),this.staffService.staffLocation=[y,_]}catch(t){console.debug(t)}}}ngAfterViewInit(){this.doc.score=this.runScoringUp(this.doc.parts)}handleClick(t){let i=t.target;for(;i;){if("g"===i.nodeName&&(i.classList.contains("note")||i.classList.contains("rest"))){this.selectedId=i.id,this.setSelected();break}i=i.parentElement}}handleKeyPress(t){if(null!==this.selectedId){const r=this.doc.parts.createNSResolver(null==this.doc.parts.ownerDocument?this.doc.parts.documentElement:this.doc.parts.ownerDocument.documentElement),s=this.doc.parts.evaluate("//*[@xml:id='"+this.selectedId+"']",this.doc.parts,r,XPathResult.FIRST_ORDERED_NODE_TYPE,null);if(!s.singleNodeValue)return;let o=s.singleNodeValue;if(this.stateService.editorialMode&&(o=this.ensureCorrElement(o,this.doc.parts)),"note"===o.tagName)switch(t.key){case".":let a=o.nextElementSibling;if(null!==a&&"dot"===a.tagName)o.nextSibling.remove(),o.hasAttribute("dots")&&o.setAttribute("dots","0");else{let p=this.doc.parts.createElementNS("http://www.music-encoding.org/ns/mei","dot");p.setAttribute("xml:id","m-"+(0,ko.v4)()),o.insertAdjacentElement("afterend",p)}break;case"ArrowUp":if(o.hasAttribute("pname")){let p=o.getAttribute("pname"),m=ec.indexOf(p);m+1<ec.length?o.setAttribute("pname",ec[m+1]):(o.setAttribute("pname",ec[0]),o.setAttribute("oct",(parseInt(o.getAttribute("oct"))+1).toString()))}break;case"ArrowDown":if(o.hasAttribute("pname")){let p=o.getAttribute("pname"),m=ec.indexOf(p);m-1>0?o.setAttribute("pname",ec[m-1]):(o.setAttribute("pname",ec[ec.length-1]),o.setAttribute("oct",(parseInt(o.getAttribute("oct"))-1).toString()))}break;case"1":o.setAttribute("dur","semibrevis");break;case"2":o.setAttribute("dur","minima");break;case"4":o.setAttribute("dur","semiminima");break;case"8":o.setAttribute("dur","fusa");break;case"6":o.setAttribute("dur","semifusa");break;case"7":o.setAttribute("dur","maxima");break;case"9":o.setAttribute("dur","longa");break;case"0":o.setAttribute("dur","brevis");break;case"#":o.setAttribute("accid","s");break;case"-":o.setAttribute("accid","f");break;case"n":o.setAttribute("accid","n");break;case"N":o.removeAttribute("accid");break;case"I":const c=o.cloneNode(!0);if(Wu(c),o.nextElementSibling&&"dot"===o.nextElementSibling.tagName){const p=o.nextElementSibling.cloneNode(!0);Wu(p),o.nextElementSibling.insertAdjacentElement("afterend",c),c.insertAdjacentElement("afterend",p)}else o.insertAdjacentElement("beforebegin",c);break;case"p":case"P":let d;o.querySelector("plica")?d=o.querySelector("plica"):(d=this.doc.parts.createElementNS(xe,"plica"),o.appendChild(d)),"P"===t.key?"down"===d.getAttribute("dir")?d.remove():d.setAttribute("dir","down"):"up"===d.getAttribute("dir")?d.remove():d.setAttribute("dir","up");break;case"r":case"R":null!==o.nextElementSibling&&"dot"===o.nextElementSibling.tagName&&(o=o.nextElementSibling);let f=this.doc.parts.createElementNS("http://www.music-encoding.org/ns/mei","rest");Wu(f),f.setAttribute("dur","brevis"),o.insertAdjacentElement("afterend",f);break;case"Backspace":o.nextElementSibling&&"dot"===o.nextElementSibling.tagName&&o.nextElementSibling.remove(),o.remove();break;default:return}else if("rest"===o.tagName)switch(t.key){case"1":o.setAttribute("dur","semibrevis");break;case"2":o.setAttribute("dur","minima");break;case"4":o.setAttribute("dur","semiminima");break;case"8":o.setAttribute("dur","fusa");break;case"6":o.setAttribute("dur","semifusa");break;case"7":o.setAttribute("dur","maxima");break;case"9":o.setAttribute("dur","longa");break;case"0":o.setAttribute("dur","brevis");break;case"I":const a=o.cloneNode(!0);Wu(a),o.insertAdjacentElement("beforebegin",a);break;case"Backspace":o.remove();break;default:return}t.preventDefault(),this.doc.score=this.runScoringUp(this.doc.parts)}}runScoringUp(t){let i=null;try{const r=t.getElementsByTagName("staffDef")[0];let s;switch(s=$g.merge(t.cloneNode(!0)),r.getAttribute("notationtype")){case"mensural.white":i=$g.ArsNova.lining_up(s);break;case"mensural.black":switch(r.getAttribute("notationsubtype")){case"Ars_antiqua":i=$g.ArsAntiqua.lining_up(s);break;case"Ars_nova":i=$g.ArsNova.lining_up(s);break;default:console.warn("Only 'Ars antiqua' and 'Ars nova' are supported!")}break;default:console.warn("Only mensural notation types are supported.")}null!==i&&$g.PostProcessing.refine_score(i,this.stateService.scoreOptions.modernClefs,this.stateService.scoreOptions.barlines)}catch(r){console.error(r),alert("Error in scoring up tool! "+r),i=null}finally{return i}}ensureCorrElement(t,i){if(t.closest("corr"))return t;const r=i.createElementNS("http://www.music-encoding.org/ns/mei","choice"),s=i.createElementNS("http://www.music-encoding.org/ns/mei","corr"),o=i.createElementNS("http://www.music-encoding.org/ns/mei","sic"),a=t.nextElementSibling;t.insertAdjacentElement("beforebegin",r),r.appendChild(s),r.appendChild(o),o.appendChild(t);const c=t.cloneNode(!0);if(Wu(c),s.appendChild(c),this.corrToSicMap.set(c.getAttribute("xml:id"),t.getAttribute("xml:id")),null!==a&&"dot"===a.tagName){o.appendChild(a);const d=a.cloneNode(!0);Wu(d),s.appendChild(d)}return c}onRefinementChange(){this.doc.score=this.runScoringUp(this.doc.parts)}getDissonantInfo(t){let i=t.split(/\n/),r=-1;for(let y=0;y<i.length;y++)if(i[y].match(/^\*\*/)){r=y;break}if(r<0)return{};let s=i[r].split(/\t+/),o=-1,a=-1,c=[],d={};for(let y=0;y<s.length;y++)if("**xmlid"===s[y])o=y;else if("**cdata"===s[y]){if(o<0)continue;a=y,c.push(a),d[a]=o,o=-1,a=-1}let f=s.length,p={},m=[];for(let y=r+1;y<i.length;y++){if(i[y].match(/^\*/)||i[y].match(/^\!/)||i[y].match(/^=/)||i[y].match(/^\s*$/))continue;let _=i[y].split(/\t+/);if(_.length==f){if("*-"===_[0])break;for(let I=0;I<c.length;I++){let M=c[I];if("."===_[M])continue;let F=d[M],L=_[M],Y=_[F];if("."===Y){if(!L.match(/^s$/i)){console.log("ERROR: dissonance is not a sustain");continue}Y=m[F]}p[Y]=void 0===p[Y]?L:p[Y]+" "+L}for(let I=0;I<_.length;I++)"."!==_[I]&&(m[I]=_[I])}else console.log("WARNING: no spine manipulations allowed")}return p}}return n.\u0275fac=function(t){return new(t||n)(V(Ql),V(U2),V(z2))},n.\u0275cmp=Wn({type:n,selectors:[["app-score-verovio-view"]],viewQuery:function(t,i){if(1&t&&zr(yX,5),2&t){let r;Di(r=Ai())&&(i.container=r.first)}},hostBindings:function(t,i){1&t&&Ge("keydown",function(s){return i.handleKeyPress(s)},!1,Wf)},decls:17,vars:5,consts:[["id","verovio",3,"click"],["verovio",""],[3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","change","ngModelChange"],["color","primary","class","primary-button","mat-stroked-button","",3,"click",4,"ngIf"],[3,"value"],["color","primary","mat-stroked-button","",1,"primary-button",3,"click"]],template:function(t,i){1&t&&(C(0,"div",0,1),Ge("click",function(s){return i.handleClick(s)}),w(),C(2,"div"),C(3,"label"),D(4," Bar by:\xa0 "),C(5,"select",2),Ge("change",function(){return i.onRefinementChange()})("ngModelChange",function(s){return i.stateService.scoreOptions.barlines=s}),$n(6,vX,2,2,"option",3),w(),w(),D(7," \xa0 "),C(8,"label"),D(9," Switch to Modern Clefs "),C(10,"input",4),Ge("change",function(){return i.onRefinementChange()})("ngModelChange",function(s){return i.stateService.scoreOptions.modernClefs=s}),w(),w(),D(11," \xa0 "),C(12,"label"),D(13," Add Dissonance Labels "),C(14,"input",4),Ge("change",function(){return i.update(i.doc._score)})("ngModelChange",function(s){return i.dissonanceLabels=s}),w(),w(),w(),C(15,"div"),$n(16,bX,2,0,"button",5),w()),2&t&&(Qe(5),We("ngModel",i.stateService.scoreOptions.barlines),Qe(1),We("ngForOf",i.barOptions),Qe(4),We("ngModel",i.stateService.scoreOptions.modernClefs),Qe(4),We("ngModel",i.dissonanceLabels),Qe(2),We("ngIf",!i.stateService.editorialMode))},directives:[Au,ag,hv,ng,DD,Eu,fg,pg,Ph],styles:["#verovio[_ngcontent-%COMP%]{overflow-x:scroll;margin-bottom:1em}\n/*# sourceMappingURL=score-verovio-view.component.css.map*/"]}),n})(),wX=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["app-score-editor-help"]],decls:140,vars:0,consts:[["href","https://verovio.humdrum.org","target","_blank"],["href","https://editor.verovio.org","target","_blank"]],template:function(t,i){1&t&&(C(0,"h2"),D(1,"About the Score Editor"),w(),C(2,"p"),D(3," The "),C(4,"strong"),D(5,"Score Editor"),w(),D(6," is for making simple edits, including to pitches and rhythms. If you made mistakes in your initial entry of the music on the previous screen (the "),C(7,"strong"),D(8,"Music Input"),w(),D(9," screen) the score will not align properly and you may need to make adjustments to the note durations or add dots in order to get the proper alignment.\n"),w(),vt(10,"mat-divider"),C(11,"h2"),D(12,"Making Simple Edits"),w(),C(13,"p"),D(14," When you click on a pitch, the staff to which that pitch belongs will be highlighted with a dashed box in the manuscript image in the left of the screen. This is to help you check the accuracy of the edits you make.\n"),w(),C(15,"p"),D(16," You can make simple edits in the "),C(17,"strong"),D(18,"Score Editor"),w(),D(19," directly as follows. By clicking on a pitch to highlight it you can edit:\n"),w(),C(20,"ul"),C(21,"li"),C(22,"strong"),D(23,"Pitch: "),w(),D(24," Use up/down arrow keys to change pitch. "),w(),C(25,"li"),C(26,"strong"),D(27,"Rhythm: "),w(),D(28," Type a number key to alter its rhythm (1 semibreve, 2 minim, 4 semiminim, 8 fusa, 6 semifusa, 0 breve, 9 long, 7 maxima). Scoring-up will rerun after a rhythmic value changes. "),w(),C(29,"li"),C(30,"strong"),D(31,"Dots: "),w(),D(32," Typing a period will add or remove the dot from the highlighted pitch. Scoring-up will automatically rerun. "),w(),C(33,"li"),C(34,"strong"),D(35,"Accidentals: "),w(),D(36," To add a flat, press "),C(37,"code"),D(38,"-"),w(),D(39,". To add a sharp, press "),C(40,"code"),D(41,"#"),w(),D(42,". To add a natural, press "),C(43,"code"),D(44,"n"),w(),D(45,". To clear accidentals, press "),C(46,"code"),D(47,"N"),w(),D(48,". "),w(),C(49,"li"),C(50,"strong"),D(51,"Cloning and Deleting Elements: "),w(),D(52," While it is not possible to insert extensive new musical elements at the score editing phase, a simple way of adding elements can be to utilize the clone feature. Elements can be cloned by selecting one and pressing the "),C(53,"code"),D(54,"I"),w(),D(55," key. Elements can be deleted by pressing "),C(56,"code"),D(57,"Backspace"),w(),D(58,". "),w(),C(59,"li"),C(60,"strong"),D(61,"Text:"),w(),D(62," Unfortunately at this time you cannot make any edits to the underlaid text (lyrics) in the "),C(63,"strong"),D(64,"Score Editor"),w(),D(65,". Texts can be edited at the "),C(66,"strong"),D(67,"Music Input"),w(),D(68," screen. "),w(),w(),C(69,"p"),D(70,' You can also use the "Return to Music Input" button to return to the '),C(71,"strong"),D(72,"Music Input"),w(),D(73," screen at any time to make more significant edits, such as deleting entire staves and re-entering thme, but any changes made in the "),C(74,"strong"),D(75,"Score Editor"),w(),D(76," thus far will be lost!\n"),w(),vt(77,"mat-divider"),C(78,"h2"),D(79,"Changing the Appearance of your Scores"),w(),C(80,"ul"),C(81,"li"),D(82," If you would like to add barlines, you can select to add barlines following the semibreve (prolation), breve (tempus), or long (modus) mensuration. If you intend to create to work with your MEI score file in Verovio to display on a web page or to save as a PDF file, it is recommended that you add barlines so that automatic system breaks can be generated. "),w(),C(83,"li"),D(84," You may also prefer to \u201cSwitch to Modern Clefs\u201d by checking this box. "),w(),w(),vt(85,"mat-divider"),C(86,"h2"),D(87,"Moving to Editorial Mode"),w(),C(88,"p"),D(89," When making corrections in the "),C(90,"strong"),D(91,"Score Editor"),w(),D(92," it is assumed that you are correcting mistakes "),C(93,"em"),D(94,"you"),w(),D(95," made, and both the MEI Parts and MEI Score files will be updated with these changes. However, once you move to "),C(96,"strong"),D(97,"Editorial Mode"),w(),D(98,", the MEI Parts file will no longer be updated since this is a record of the music "),C(99,"em"),D(100,"exactly"),w(),D(101," as it was recorded in the original manuscript. Any further corrections made in "),C(102,"strong"),D(103,"Editorial Mode"),w(),D(104," will be encoded in the MEI Score file as "),C(105,"strong"),D(106,"editorial"),w(),D(107," corrections. For example, when a dot is added in "),C(108,"strong"),D(109,"Editorial Mode"),w(),D(110,":\n"),w(),C(111,"pre"),C(112,"code"),D(113,'\n    <choice>\n        <corr>\n            <note dur="semibrevis" oct="3" pname="a" dur.quality="minor"/>\n            <dot form="div"/>\n        </corr>\n        <sic>\n            <note dur="semibrevis" oct="3" pname="a"/>\n        </sic>\n    </choice>\n'),w(),w(),vt(114,"mat-divider"),C(115,"p"),D(116," The purpose of the "),C(117,"strong"),D(118,"Score Editor"),w(),D(119," is to do enough editing to enable the correct alignment of the score and edit while viewing the manuscript. For more fine-grained editing, it is recommended to download the MEI file and open it in a tool that allows direct editing of the MEI file such as "),C(120,"a",0),D(121," the Verovio Humdrum Viewer"),w(),D(122," or "),C(123,"a",1),D(124,"the Verovio Editor"),w(),D(125,".\n"),w(),C(126,"p"),D(127," Once you click the button \u201cContinue in Editorial Mode\u201d you will receive a prompt that the parts-based MEI file will be downloaded locally.\n"),w(),vt(128,"mat-divider"),C(129,"h2"),D(130,"Saving your Work"),w(),C(131,"p"),D(132," To download MEI files of your work, click the \u201cDownload MEI File(s)\u201d button. This action will download two files:\n"),w(),C(133,"ul"),C(134,"li"),D(135," a part-based MEI file that you can use to open in the MP Editor at a later stage to continue your music input or editing work "),w(),C(136,"li"),D(137," A score-based MEI that you can display on a web page or to save as a PDF file, using Verovio for example. "),w(),w(),C(138,"p"),D(139," You can also simply copy the coding of the score-based MEI from the score editor screen by clicking the \u201cCopy MEI Score to Clipboard\u201d button.\n"),w())},directives:[ib],styles:[""]}),n})();const EX=[{path:"input/:source/:identifier",component:OS},{path:"score/:source/:identifier",component:(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.stateService=r,this.source=this.route.snapshot.paramMap.get("source"),this.identifier=decodeURIComponent(this.route.snapshot.paramMap.get("identifier")),this.iiifManifest=uF(this.source,this.identifier),this.meiDoc=this.stateService.mei,null===this.meiDoc&&this.router.navigate(["/input",this.source,this.identifier])}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(V(dr),V(aa),V(Ql))},n.\u0275cmp=Wn({type:n,selectors:[["app-score-editor"]],decls:10,vars:1,consts:[["id","score-container"],[3,"iiifManifest"],["id","right"],["label","Score Editor"],["label","Score Editor Help"]],template:function(t,i){1&t&&(C(0,"div",0),vt(1,"app-score-diva-view",1),C(2,"div",2),C(3,"mat-tab-group"),C(4,"mat-tab",3),vt(5,"app-score-toolbar"),vt(6,"mat-divider"),vt(7,"app-score-verovio-view"),w(),C(8,"mat-tab",4),vt(9,"app-score-editor-help"),w(),w(),w(),w()),2&t&&(Qe(1),We("iiifManifest",i.iiifManifest))},directives:[mX,$R,pS,_X,ib,CX,wX],styles:["#score-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}app-score-diva-view[_ngcontent-%COMP%]{grid-column:1 / 2}app-score-verovio-view[_ngcontent-%COMP%]{display:block;width:100%}#right[_ngcontent-%COMP%]{grid-column:2 / 4;padding:1em;width:100%}\n/*# sourceMappingURL=score-editor.component.css.map*/"]}),n})()},{path:"",component:pX,pathMatch:"full"}];let DX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=pn({type:n,bootstrap:[eK]}),n.\u0275inj=Qt({providers:[],imports:[[L9.forRoot(EX,{useHash:!0,relativeLinkResolution:"legacy"}),aO,Ch,Su,gS,mS,_S,yS,nF,Iq,gX]]}),n})();(function(){if(IT)throw new Error("Cannot enable prod mode after platform setup.");TT=!1})(),function(){return function(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(f){try{d(i.next(f))}catch(p){o(p)}}function c(f){try{d(i.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):function(s){return s instanceof t?s:new t(function(o){o(s)})}(f.value).then(a,c)}d((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){for(console.debug("check");!verovioReady;)console.debug("wait"),yield new Promise(n=>{setTimeout(n,250)});console.debug("done")})}().then(()=>{f8().bootstrapModule(DX).catch(n=>console.error(n))})}},lt=>{lt(lt.s=879)}]);
//# sourceMappingURL=main.abc380a0c7c9fee6.js.map