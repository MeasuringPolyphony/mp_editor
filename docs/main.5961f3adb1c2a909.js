(self.webpackChunkeditor=self.webpackChunkeditor||[]).push([[179],{63:(Ft,et,Ve)=>{"use strict";function he(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(f){try{d(i.next(f))}catch(p){o(p)}}function c(f){try{d(i.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(f.value).then(a,c)}d((i=i.apply(n,e||[])).next())})}function it(n){return"function"==typeof n}"function"==typeof SuppressedError&&SuppressedError;let wt=!1;const at={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else wt&&console.log("RxJS: Back to a better error behavior. Thank you. <3");wt=n},get useDeprecatedSynchronousErrorHandling(){return wt}};function Gt(n){setTimeout(()=>{throw n},0)}const It={closed:!0,next(n){},error(n){if(at.useDeprecatedSynchronousErrorHandling)throw n;Gt(n)},complete(){}},Rn=Array.isArray||(n=>n&&"number"==typeof n.length);function Ot(n){return null!==n&&"object"==typeof n}const st=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class Te{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof Te)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(it(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof st?hn(o.errors):[o]}}if(Rn(s)){let o=-1,a=s.length;for(;++o<a;){const c=s[o];if(Ot(c))try{c.unsubscribe()}catch(d){e=e||[],d instanceof st?e=e.concat(hn(d.errors)):e.push(d)}}}if(e)throw new st(e)}add(e){let t=e;if(!e)return Te.EMPTY;switch(typeof e){case"function":t=new Te(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof Te)){const s=t;t=new Te,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof Te){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function hn(n){return n.reduce((e,t)=>e.concat(t instanceof st?t.errors:t),[])}Te.EMPTY=((n=new Te).closed=!0,n);const jn="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Dt extends Te{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=It;break;case 1:if(!e){this.destination=It;break}if("object"==typeof e){e instanceof Dt?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new Xt(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new Xt(this,e,t,i)}}[jn](){return this}static create(e,t,i){const r=new Dt(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class Xt extends Dt{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;it(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==It&&(o=Object.create(t),it(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;at.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=at;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):Gt(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;Gt(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);at.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),at.useDeprecatedSynchronousErrorHandling)throw i;Gt(i)}}__tryOrSetError(e,t,i){if(!at.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return at.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Gt(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const vi="function"==typeof Symbol&&Symbol.observable||"@@observable";function ms(n){return n}let wn=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function Gn(n,e,t){if(n){if(n instanceof Dt)return n;if(n[jn])return n[jn]()}return n||e||t?new Dt(n,e,t):new Dt(It)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||at.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),at.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){at.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function gt(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof Dt?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=vc(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(c){s(c),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[vi](){return this}pipe(...t){return 0===t.length?this:function gl(n){return 0===n.length?ms:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=vc(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function vc(n){if(n||(n=at.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const _l=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class bc extends Te{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class Sa extends Dt{constructor(e){super(e),this.destination=e}}let qt=(()=>{class n extends wn{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[jn](){return new Sa(this)}lift(t){const i=new Hu(this,this);return i.operator=t,i}next(t){if(this.closed)throw new _l;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new _l;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new _l;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new _l;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new _l;return this.hasError?(t.error(this.thrownError),Te.EMPTY):this.isStopped?(t.complete(),Te.EMPTY):(this.observers.push(t),new bc(this,t))}asObservable(){const t=new wn;return t.source=this,t}}return n.create=(e,t)=>new Hu(e,t),n})();class Hu extends qt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):Te.EMPTY}}function zo(n){return n&&"function"==typeof n.schedule}function mn(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new Gh(n,e))}}class Gh{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new Wh(e,this.project,this.thisArg))}}class Wh extends Dt{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const Uu=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},$u=function Zh(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Kh=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function vm(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Yh=n=>{if(n&&"function"==typeof n[vi])return(n=>e=>{const t=n[vi]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Kh(n))return Uu(n);if(vm(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Gt),e))(n);if(n&&"function"==typeof n[$u])return(n=>e=>{const t=n[$u]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${Ot(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function zu(n,e){return new wn(t=>{const i=new Te;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function Qi(n,e){return e?function Qh(n,e){if(null!=n){if(function f0(n){return n&&"function"==typeof n[vi]}(n))return function u0(n,e){return new wn(t=>{const i=new Te;return i.add(e.schedule(()=>{const r=n[vi]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(vm(n))return function d0(n,e){return new wn(t=>{const i=new Te;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(Kh(n))return zu(n,e);if(function p0(n){return n&&"function"==typeof n[$u]}(n)||"string"==typeof n)return function h0(n,e){if(!n)throw new Error("Iterable cannot be null");return new wn(t=>{const i=new Te;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[$u](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof wn?n:new wn(Yh(n))}class Aa extends Dt{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class yc extends Dt{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function wc(n,e){if(e.closed)return;if(n instanceof wn)return n.subscribe(e);let t;try{t=Yh(n)(e)}catch(i){e.error(i)}return t}function zi(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(zi((r,s)=>Qi(n(r,s)).pipe(mn((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new g0(n,t)))}class g0{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new m0(e,this.project,this.concurrent))}}class m0 extends yc{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new Aa(this),i=this.destination;i.add(t);const r=wc(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function vl(n=Number.POSITIVE_INFINITY){return zi(ms,n)}function Xh(n,e){return e?zu(n,e):new wn(Uu(n))}function Cc(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return zo(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof wn?n[0]:vl(e)(Xh(n,t))}function Jh(){return function(e){return e.lift(new _0(e))}}class _0{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new v0(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class v0 extends Dt{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class bm extends wn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new Te,e.add(this.source.subscribe(new b0(this.getSubject(),this))),e.closed&&(this._connection=null,e=Te.EMPTY)),e}refCount(){return Jh()(this)}}const Gu=(()=>{const n=bm.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class b0 extends Sa{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class C0{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function ym(){return new qt}function Fn(n){for(let e in n)if(n[e]===Fn)return e;throw Error("Could not find renamed property on target object.")}function tf(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Mn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function nf(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const E0=Fn({__forward_ref__:Fn});function _n(n){return n.__forward_ref__=_n,n.toString=function(){return Mn(this())},n}function Nt(n){return rf(n)?n():n}function rf(n){return"function"==typeof n&&n.hasOwnProperty(E0)&&n.__forward_ref__===_n}class Ue extends Error{constructor(e,t){super(function Wu(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Ct(n){return"string"==typeof n?n:null==n?"":String(n)}function Ri(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ct(n)}function bl(n,e){const t=e?` in ${e}`:"";throw new Ue(-201,`No provider for ${Ri(n)} found${t}`)}function Rr(n,e){null==n&&function Tn(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Ge(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Jt(n){return{providers:n.providers||[],imports:n.imports||[]}}function af(n){return Am(n,Nn)||Am(n,Mm)}function Am(n,e){return n.hasOwnProperty(e)?n[e]:null}function xm(n){return n&&(n.hasOwnProperty(Ln)||n.hasOwnProperty(F0))?n[Ln]:null}const Nn=Fn({\u0275prov:Fn}),Ln=Fn({\u0275inj:Fn}),Mm=Fn({ngInjectableDef:Fn}),F0=Fn({ngInjectorDef:Fn});var St=(()=>((St=St||{})[St.Default=0]="Default",St[St.Host=1]="Host",St[St.Self=2]="Self",St[St.SkipSelf=4]="SkipSelf",St[St.Optional=8]="Optional",St))();let lf;function Go(n){const e=lf;return lf=n,e}function cf(n,e,t){const i=af(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&St.Optional?null:void 0!==e?e:void bl(Mn(n),"Injector")}function Xn(n){return{toString:n}.toString()}var Xr=(()=>((Xr=Xr||{})[Xr.OnPush=0]="OnPush",Xr[Xr.Default=1]="Default",Xr))(),Fr=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(Fr||(Fr={})),Fr))();const Jr="undefined"!=typeof globalThis&&globalThis,Tm="undefined"!=typeof window&&window,Im="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,In=Jr||"undefined"!=typeof global&&global||Tm||Im,Fi={},Hn=[],lr=Fn({\u0275cmp:Fn}),uf=Fn({\u0275dir:Fn}),Zu=Fn({\u0275pipe:Fn}),mo=Fn({\u0275mod:Fn}),es=Fn({\u0275fac:Fn}),xa=Fn({__NG_ELEMENT_ID__:Fn});let Jn=0;function Cn(n){return Xn(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Xr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Hn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Fr.Emulated,id:"c",styles:n.styles||Hn,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=Jn++,i.inputs=hf(n.inputs,t),i.outputs=hf(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(Om):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ku):null,i})}function Om(n){return Gi(n)||function _o(n){return n[uf]||null}(n)}function Ku(n){return function Wo(n){return n[Zu]||null}(n)}const Pm={};function vn(n){return Xn(()=>{const e={type:n.type,bootstrap:n.bootstrap||Hn,declarations:n.declarations||Hn,imports:n.imports||Hn,exports:n.exports||Hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Pm[n.id]=n.type),e})}function hf(n,e){if(null==n)return Fi;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const Ne=Cn;function Si(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Gi(n){return n[lr]||null}function yr(n,e){const t=n[mo]||null;if(!t&&!0===e)throw new Error(`Type ${Mn(n)} does not have '\u0275mod' property.`);return t}function js(n){return Array.isArray(n)&&"object"==typeof n[1]}function ws(n){return Array.isArray(n)&&!0===n[1]}function ff(n){return 0!=(8&n.flags)}function Ju(n){return 2==(2&n.flags)}function ed(n){return 1==(1&n.flags)}function Cr(n){return null!==n.template}function U(n){return 0!=(512&n[2])}function Hs(n,e){return n.hasOwnProperty(es)?n[es]:null}class Zo{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Ji(){return vf}function vf(n){return n.type.prototype.ngOnChanges&&(n.setInput=Nm),td}function td(){const n=xc(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Fi)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Nm(n,e,t,i){const r=xc(n)||function Lm(n,e){return n[bf]=e}(n,{previous:Fi,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],c=o[a];s[a]=new Zo(c&&c.currentValue,e,o===Fi),n[i]=e}Ji.ngInherit=!0;const bf="__ngSimpleChanges__";function xc(n){return n[bf]||null}let Mc;function ci(n){return!!n.listen}const bi={createRenderer:(n,e)=>function rd(){return void 0!==Mc?Mc:"undefined"!=typeof document?document:void 0}()};function yi(n){for(;Array.isArray(n);)n=n[0];return n}function sd(n,e){return yi(e[n])}function ur(n,e){return yi(e[n.index])}function Ic(n,e){return n.data[e]}function Wi(n,e){const t=e[n];return js(t)?t:t[0]}function Dl(n){return 4==(4&n[2])}function Sl(n){return 128==(128&n[2])}function Ko(n,e){return null==e?null:n[e]}function Vm(n){n[18]=0}function Cf(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const xt={lFrame:Wm(null),bindingsEnabled:!0};function Pa(){return xt.bindingsEnabled}function X(){return xt.lFrame.lView}function ln(){return xt.lFrame.tView}function en(n){return xt.lFrame.contextLView=n,n[8]}function Ai(){let n=Yo();for(;null!==n&&64===n.type;)n=n.parent;return n}function Yo(){return xt.lFrame.currentTNode}function Us(n,e){const t=xt.lFrame;t.currentTNode=n,t.isParent=e}function Df(){return xt.lFrame.isParent}function Sf(){xt.lFrame.isParent=!1}function dr(){const n=xt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Er(){return xt.lFrame.bindingIndex++}function q0(n,e){const t=xt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Co(e)}function Co(n){xt.lFrame.currentDirectiveIndex=n}function Af(n){const e=xt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function $m(){return xt.lFrame.currentQueryIndex}function Lr(n){xt.lFrame.currentQueryIndex=n}function K0(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function zm(n,e,t){if(t&St.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&St.Host||(r=K0(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=xt.lFrame=Gm();return i.currentTNode=e,i.lView=n,!0}function ld(n){const e=Gm(),t=n[1];xt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Gm(){const n=xt.lFrame,e=null===n?null:n.child;return null===e?Wm(n):e}function Wm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function xf(){const n=xt.lFrame;return xt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Mf=xf;function cd(){const n=xf();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function xi(){return xt.lFrame.selectedIndex}function Ds(n){xt.lFrame.selectedIndex=n}function ii(){const n=xt.lFrame;return Ic(n.tView,n.selectedIndex)}function ud(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),d&&((n.viewHooks||(n.viewHooks=[])).push(t,d),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,d)),null!=f&&(n.destroyHooks||(n.destroyHooks=[])).push(t,f)}}function kc(n,e,t){Do(n,e,3,t)}function Rc(n,e,t,i){(3&n[2])===t&&Do(n,e,t,i)}function Ra(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Do(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(Zm(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function Zm(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Xo{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function zs(n,e,t){const i=ci(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],c=t[r++];i?n.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=s,a=t[++r];qi(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function Pf(n){return 3===n||4===n||6===n}function qi(n){return 64===n.charCodeAt(0)}function xl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Xm(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Xm(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function Jm(n){return-1!==n}function Ml(n){return 32767&n}function Tl(n,e){let t=function kf(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Fa=!0;function Nc(n){const e=Fa;return Fa=n,e}let J0=0;function Na(n,e){const t=Rf(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,dd(i.data,n),dd(e,null),dd(i.blueprint,null));const r=hd(n,e),s=n.injectorIndex;if(Jm(r)){const o=Ml(r),a=Tl(r,e),c=a[1].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=r,s}function dd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Rf(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function hd(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function fd(n,e,t){!function ew(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(xa)&&(i=t[xa]),null==i&&(i=t[xa]=J0++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function pd(n,e,t){if(t&St.Optional)return n;bl(e,"NodeInjector")}function n_(n,e,t,i){if(t&St.Optional&&void 0===i&&(i=null),0==(t&(St.Self|St.Host))){const r=n[9],s=Go(void 0);try{return r?r.get(e,i,t&St.Optional):cf(e,i,t&St.Optional)}finally{Go(s)}}return pd(i,e,t)}function gd(n,e,t,i=St.Default,r){if(null!==n){const s=function s_(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(xa)?n[xa]:void 0;return"number"==typeof e?e>=0?255&e:i_:e}(t);if("function"==typeof s){if(!zm(e,n,i))return i&St.Host?pd(r,t,i):n_(e,t,i,r);try{const o=s(i);if(null!=o||i&St.Optional)return o;bl(t)}finally{Mf()}}else if("number"==typeof s){let o=null,a=Rf(n,e),c=-1,d=i&St.Host?e[16][6]:null;for((-1===a||i&St.SkipSelf)&&(c=-1===a?hd(n,e):e[a+8],-1!==c&&o_(i,!1)?(o=e[1],a=Ml(c),e=Tl(c,e)):a=-1);-1!==a;){const f=e[1];if(Nf(s,a,f.data)){const p=r_(a,e,t,o,i,d);if(p!==Ff)return p}c=e[a+8],-1!==c&&o_(i,e[1].data[a+8]===d)&&Nf(s,a,e)?(o=f,a=Ml(c),e=Tl(c,e)):a=-1}}}return n_(e,t,i,r)}const Ff={};function i_(){return new Va(Ai(),X())}function r_(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],f=La(a,o,t,null==i?Ju(a)&&Fa:i!=o&&0!=(3&a.type),r&St.Host&&s===a);return null!==f?Lc(e,o,f,a):Ff}function La(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,_=r?a+f:n.directiveEnd;for(let y=i?a:a+f;y<_;y++){const w=o[y];if(y<c&&t===w||y>=c&&w.type===t)return y}if(r){const y=o[c];if(y&&Cr(y)&&y.type===t)return c}return null}function Lc(n,e,t,i){let r=n[t];const s=e.data;if(function X0(n){return n instanceof Xo}(r)){const o=r;o.resolving&&function D0(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${n}${t}`)}(Ri(s[t]));const a=Nc(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Go(o.injectImpl):null;zm(n,i,St.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function ns(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=vf(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&Go(c),Nc(a),o.resolving=!1,Mf()}}return r}function Nf(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function o_(n,e){return!(n&St.Self||n&St.Host&&e)}class Va{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return gd(this._tNode,this._lView,e,i,t)}}function Mi(n){return Xn(()=>{const e=n.prototype.constructor,t=e[es]||Vc(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[es]||Vc(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Vc(n){return rf(n)?()=>{const e=Vc(Nt(n));return e&&e()}:Hs(n)}const Pl="__parameters__";function kl(n,e,t){return Xn(()=>{const i=function Lf(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,d,f){const p=c.hasOwnProperty(Pl)?c[Pl]:Object.defineProperty(c,Pl,{value:[]})[Pl];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class ke{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ge({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tw=new ke("AnalyzeForEntryComponents");function Vr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),Vr(i,e)):e!==n&&e.push(i)}return e}function is(n,e){n.forEach(t=>Array.isArray(t)?is(t,e):e(t))}function vd(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function As(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Bc(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Br(n,e,t){let i=ja(n,e);return i>=0?n[1|i]=t:(i=~i,function u_(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function bd(n,e){const t=ja(n,e);if(t>=0)return n[1|t]}function ja(n,e){return function jf(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Uc={},yd="__NG_DI_FLAG__",Ao="ngTempTokenPath",lw=/\n/gm,Hf="__source",wd=Fn({provide:String,useValue:Fn});let Rl;function zc(n){const e=Rl;return Rl=n,e}function Uf(n,e=St.Default){if(void 0===Rl)throw new Ue(203,"");return null===Rl?cf(n,void 0,e):Rl.get(n,e&St.Optional?null:void 0,e)}function ne(n,e=St.Default){return(function N0(){return lf}()||Uf)(Nt(n),e)}const Cd=ne;function Fl(n){const e=[];for(let t=0;t<n.length;t++){const i=Nt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Ue(900,"");let r,s=St.Default;for(let o=0;o<i.length;o++){const a=i[o],c=$f(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(ne(r,s))}else e.push(ne(i))}return e}function Nl(n,e){return n[yd]=e,n.prototype[yd]=e,n}function $f(n){return n[yd]}const rs=Nl(kl("Inject",n=>({token:n})),-1),xo=Nl(kl("Optional"),8),Gc=Nl(kl("SkipSelf"),4);var Sr=(()=>((Sr=Sr||{})[Sr.Important=1]="Important",Sr[Sr.DashCase=2]="DashCase",Sr))();const Sd="__ngContext__";function ir(n,e){n[Sd]=e}function Yf(n){const e=function Ua(n){return n[Sd]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Xf(n,e){return undefined(n,e)}function To(n){const e=n[3];return ws(e)?e[3]:e}function Md(n){return np(n[13])}function Ll(n){return np(n[4])}function np(n){for(;null!==n&&!ws(n);)n=n[4];return n}function os(n,e,t,i,r){if(null!=i){let s,o=!1;ws(i)?s=i:js(i)&&(o=!0,i=i[0]);const a=yi(i);0===n&&null!==t?null==r?ap(e,t,a):$a(e,t,a,r||null,!0):1===n&&null!==t?$a(e,t,a,r||null,!0):2===n?function up(n,e,t){const i=Id(n,e);i&&function Ew(n,e,t,i){ci(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Aw(n,e,t,i,r){const s=t[7];s!==yi(t)&&os(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];za(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function sp(n,e,t){if(ci(n))return n.createElement(e,t);{const i=null!==t?function id(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===i?n.createElement(e):n.createElementNS(i,e)}}function A_(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,Cf(r,-1)),t.splice(i,1)}function op(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&A_(r,i),e>0&&(n[t-1][4]=i[4]);const s=As(n,10+e);!function _w(n,e){za(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function x_(n,e){if(!(256&e[2])){const t=e[11];ci(t)&&t.destroyNode&&za(n,e,t,3,null,null),function yw(n){let e=n[13];if(!e)return Td(n[1],n);for(;e;){let t=null;if(js(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)js(e)&&Td(e[1],e),e=e[3];null===e&&(e=n),js(e)&&Td(e[1],e),t=e&&e[4]}e=t}}(e)}}function Td(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function T_(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Xo)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function M_(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):yi(e[o]),c=i[r=t[s+2]],d=t[s+3];"boolean"==typeof d?a.removeEventListener(t[s],c,d):d>=0?i[r=d]():i[r=-d].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&ci(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&ws(e[3])){t!==e[3]&&A_(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function I_(n,e,t){return function O_(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Fr.None||r===Fr.Emulated)return null}return ur(i,t)}(n,e.parent,t)}function $a(n,e,t,i,r){ci(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function ap(n,e,t){ci(n)?n.appendChild(e,t):e.appendChild(t)}function P_(n,e,t,i,r){null!==i?$a(n,e,t,i,r):ap(n,e,t)}function Id(n,e){return ci(n)?n.parentNode(e):e.parentNode}function k_(n,e,t){return jr(n,e,t)}let jr=function R_(n,e,t){return 40&n.type?ur(n,t):null};function Od(n,e,t,i){const r=I_(n,i,e),s=e[11],a=k_(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)P_(s,r,t[c],a,!1);else P_(s,r,t,a,!1)}function qc(n,e){if(null!==e){const t=e.type;if(3&t)return ur(e,n);if(4&t)return cp(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return qc(n,i);{const r=n[e.index];return ws(r)?cp(-1,r):yi(r)}}if(32&t)return Xf(e,n)()||yi(n[e.index]);{const i=N_(n,e);return null!==i?Array.isArray(i)?i[0]:qc(To(n[16]),i):qc(n,e.next)}}return null}function N_(n,e){return null!==e?n[16][6].projection[e.projection]:null}function cp(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return qc(i,r)}return e[7]}function dp(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&ir(yi(a),i),t.flags|=4),64!=(64&t.flags))if(8&c)dp(n,e,t.child,i,r,s,!1),os(e,n,r,a,s);else if(32&c){const d=Xf(t,i);let f;for(;f=d();)os(e,n,r,f,s);os(e,n,r,a,s)}else 16&c?L_(n,e,i,t,r,s):os(e,n,r,a,s);t=o?t.projectionNext:t.next}}function za(n,e,t,i,r,s){dp(t,i,n.firstChild,e,r,s,!1)}function L_(n,e,t,i,r,s){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)os(e,n,r,c[d],s);else dp(n,e,c,o[3],r,s,!0)}function V_(n,e,t){ci(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function hp(n,e,t){ci(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Bl(n){return n.ngOriginalError}function Xw(n,...e){n.error(...e)}class Wa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=function Qw(n){return n&&n.ngErrorLogger||Xw}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Bl(e);for(;t&&Bl(t);)t=Bl(t);return t||null}}const rC=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(In))();function yp(n){return n.ownerDocument.defaultView}function wp(n){return n.ownerDocument}function Zs(n){return n instanceof Function?n():n}function ra(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const iv="ng-template";function Ar(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==ra(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function ui(n){return 4===n.type&&n.value!==iv}function oC(n,e,t){return e===(4!==n.type||t?n.value:iv)}function sa(n,e,t){let i=4;const r=n.attrs||[],s=function cC(n){for(let e=0;e<n.length;e++)if(Pf(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!oC(n,c,t)||""===c&&1===e.length){if(Ms(i))return!1;o=!0}}else{const d=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!Ar(n.attrs,d,t)){if(Ms(i))return!1;o=!0}continue}const p=aC(8&i?"class":c,r,ui(n),t);if(-1===p){if(Ms(i))return!1;o=!0;continue}if(""!==d){let _;_=p>s?"":r[p+1].toLowerCase();const y=8&i?_:null;if(y&&-1!==ra(y,d,0)||2&i&&d!==_){if(Ms(i))return!1;o=!0}}}}else{if(!o&&!Ms(i)&&!Ms(c))return!1;if(o&&Ms(c))continue;o=!1,i=c|1&i}}return Ms(i)||o}function Ms(n){return 0==(1&n)}function aC(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Cp(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function rv(n,e,t=!1){for(let i=0;i<e.length;i++)if(sa(n,e[i],t))return!0;return!1}function uC(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Ys(n,e){return n?":not("+e.trim()+")":e}function sv(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ms(o)&&(e+=Ys(s,r),r=""),i=o,s=s||!Ms(i);t++}return""!==r&&(e+=Ys(s,r)),e}const qe={};function Xe(n){ov(ln(),X(),xi()+n,!1)}function ov(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&kc(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Rc(e,s,0,t)}Ds(t)}function Hd(n,e){return n<<17|e<<2}function Ts(n){return n>>17&32767}function Ud(n){return 2|n}function Hr(n){return(131068&n)>>2}function Xc(n,e){return-131069&n|e<<2}function $d(n){return 1|n}function pv(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];Lr(r),o.contentQueries(2,e[s],s)}}}function Hl(n,e,t,i,r,s,o,a,c,d){const f=e.blueprint.slice();return f[0]=r,f[2]=140|i,Vm(f),f[3]=f[15]=n,f[8]=t,f[10]=o||n&&n[10],f[11]=a||n&&n[11],f[12]=c||n&&n[12]||null,f[9]=d||n&&n[9]||null,f[6]=s,f[16]=2==e.type?n[16]:f,f}function Ul(n,e,t,i,r){let s=n.data[e];if(null===s)s=function kp(n,e,t,i,r){const s=Yo(),o=Df(),c=n.data[e]=function yC(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,i,r),function W0(){return xt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Pc(){const n=xt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Us(s,!0),s}function $l(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function zl(n,e,t){ld(e);try{const i=n.viewQuery;null!==i&&$p(1,i,t);const r=n.template;null!==r&&gv(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&pv(n,e),n.staticViewQueries&&$p(2,n.viewQuery,t);const s=n.components;null!==s&&function _C(n,e){for(let t=0;t<e.length;t++)Mr(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,cd()}}function qa(n,e,t,i){const r=e[2];if(256!=(256&r)){ld(e);try{Vm(e),function Hm(n){return xt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&gv(n,e,t,2,i);const o=3==(3&r);if(o){const d=n.preOrderCheckHooks;null!==d&&kc(e,d,null)}else{const d=n.preOrderHooks;null!==d&&Rc(e,d,0,null),Ra(e,0)}if(function RC(n){for(let e=Md(n);null!==e;e=Ll(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&Cf(s,1),r[2]|=1024}}}(e),function Vp(n){for(let e=Md(n);null!==e;e=Ll(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Sl(i)&&qa(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&pv(n,e),o){const d=n.contentCheckHooks;null!==d&&kc(e,d)}else{const d=n.contentHooks;null!==d&&Rc(e,d,1),Ra(e,1)}!function fv(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Ds(~r);else{const s=r,o=t[++i],a=t[++i];q0(o,s),a(2,e[s])}}}finally{Ds(-1)}}(n,e);const a=n.components;null!==a&&function mC(n,e){for(let t=0;t<e.length;t++)FC(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&$p(2,c,i),o){const d=n.viewCheckHooks;null!==d&&kc(e,d)}else{const d=n.viewHooks;null!==d&&Rc(e,d,2),Ra(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-73,1024&e[2]&&(e[2]&=-1025,Cf(e[3],-1))}finally{cd()}}}function vC(n,e,t,i){const r=e[10],o=Dl(e);try{!o&&r.begin&&r.begin(),o&&zl(n,e,i),qa(n,e,t,i)}finally{!o&&r.end&&r.end()}}function gv(n,e,t,i,r){const s=xi(),o=2&i;try{Ds(-1),o&&e.length>20&&ov(n,e,20,!1),t(i,r)}finally{Ds(s)}}function mv(n,e,t){if(ff(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function Rp(n,e,t){!Pa()||(function xC(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Na(t,e),ir(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],d=Cr(c);d&&PC(e,t,c);const f=Lc(e,n,a,t);ir(f,e),null!==o&&Av(0,a-r,f,c,0,o),d&&(Wi(t.index,e)[8]=f)}}(n,e,t,ur(t,e)),128==(128&t.flags)&&function MC(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=function Z0(){return xt.lFrame.currentDirectiveIndex}();try{Ds(o);for(let c=i;c<r;c++){const d=n.data[c],f=e[c];Co(c),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&Cv(d,f)}}finally{Ds(-1),Co(a)}}(n,e,t))}function aa(n,e,t=ur){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function _v(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=qd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function qd(n,e,t,i,r,s,o,a,c,d){const f=20+i,p=f+r,_=function bC(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:qe);return t}(f,p),y="function"==typeof d?d():d;return _[1]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1}}function Np(n,e,t,i){const r=zp(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&Iv(n).push(i,r.length-1))}function bv(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function Ur(n,e,t,i,r,s,o,a){const c=ur(e,t);let f,d=e.inputs;!a&&null!=d&&(f=d[i])?(Yd(n,t,f,i,r),Ju(e)&&function EC(n,e){const t=Wi(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function CC(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,ci(s)?s.setProperty(c,i,r):qi(i)||(c.setProperty?c.setProperty(i,r):c[i]=r))}function Lp(n,e,t,i){let r=!1;if(Pa()){const s=function TC(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];rv(t,o.selectors,!1)&&(r||(r=[]),fd(Na(t,e),n,o.type),Cr(o)?(Ev(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,Dv(t,n.data.length,s.length);for(let f=0;f<s.length;f++){const p=s[f];p.providersResolver&&p.providersResolver(p)}let a=!1,c=!1,d=$l(n,e,s.length,null);for(let f=0;f<s.length;f++){const p=s[f];t.mergedAttrs=xl(t.mergedAttrs,p.hostAttrs),Sv(n,t,e,d,p),OC(d,p,o),null!==p.contentQueries&&(t.flags|=8),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=128);const _=p.type.prototype;!a&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),d++}!function wC(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,c=null;for(let d=e.directiveStart;d<i;d++){const f=r[d],p=f.inputs,_=null===s||ui(e)?null:kC(p,s);o.push(_),a=bv(p,d,a),c=bv(f.outputs,d,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}(n,t)}o&&function IC(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Ue(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=xl(t.mergedAttrs,t.attrs),r}function wv(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function AC(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(i,r,o)}}function Cv(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ev(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function OC(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Cr(e)&&(t[""]=n)}}function Dv(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Sv(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Hs(r.type)),o=new Xo(s,Cr(r),null);n.blueprint[i]=o,t[i]=o,wv(n,e,0,i,$l(n,t,r.hostVars,qe),r)}function PC(n,e,t){const i=ur(e,n),r=_v(t),s=n[10],o=Kd(n,Hl(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function ls(n,e,t,i,r,s){const o=ur(n,e);!function Zd(n,e,t,i,r,s,o){if(null==s)ci(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?Ct(s):o(s,i||"",r);ci(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function Av(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const d=o[c++],f=o[c++],p=o[c++];null!==a?i.setInput(t,p,d,f):t[f]=p}}}function kC(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function xv(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function FC(n,e){const t=Wi(e,n);if(Sl(t)){const i=t[1];80&t[2]?qa(i,t,i.template,t[8]):t[5]>0&&Bp(t)}}function Bp(n){for(let i=Md(n);null!==i;i=Ll(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];qa(o,s,o.template,s[8])}else s[5]>0&&Bp(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Wi(t[i],n);Sl(r)&&r[5]>0&&Bp(r)}}function Mr(n,e){const t=Wi(e,n),i=t[1];(function jp(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),zl(i,t,t[8])}function Kd(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Hp(n){for(;n;){n[2]|=64;const e=To(n);if(U(n)&&!e)return n;n=e}return null}function Mv(n){!function Up(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=Yf(t),r=i[1];vC(r,i,r.template,t)}}(n[8])}function $p(n,e,t){Lr(0),e(n,t)}const LC=(()=>Promise.resolve(null))();function zp(n){return n[7]||(n[7]=[])}function Iv(n){return n.cleanup||(n.cleanup=[])}function Ov(n,e,t){return(null===n||Cr(n))&&(t=function z0(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function Pv(n,e){const t=n[9],i=t?t.get(Wa,null):null;i&&i.handleError(e)}function Yd(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],d=n.data[o];null!==d.setInput?d.setInput(c,r,i,a):c[a]=r}}function Is(n,e,t){const i=sd(e,n);!function rp(n,e,t){ci(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function Qd(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=nf(r,a):2==s&&(i=nf(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const Gp=new ke("INJECTOR",-1);class kv{get(e,t=Uc){if(t===Uc){const i=new Error(`NullInjectorError: No provider for ${Mn(e)}!`);throw i.name="NullInjectorError",i}return t}}const Wp=new ke("Set Injector scope."),iu={},jC={};let qp;function Rv(){return void 0===qp&&(qp=new kv),qp}function Fv(n,e=null,t=null,i){const r=Nv(n,e,t,i);return r._resolveInjectorDefTypes(),r}function Nv(n,e=null,t=null,i){return new HC(n,t,e||Rv(),i)}class HC{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&is(t,a=>this.processProvider(a,e,t)),is([e],a=>this.processInjectorType(a,[],s)),this.records.set(Gp,Gl(void 0,this));const o=this.records.get(Wp);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:Mn(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Uc,i=St.Default){this.assertNotDestroyed();const r=zc(this),s=Go(void 0);try{if(!(i&St.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function x(n){return"function"==typeof n||"object"==typeof n&&n instanceof ke}(e)&&af(e);a=c&&this.injectableDefInScope(c)?Gl(Zp(e),iu):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&St.Self?Rv():this.parent).get(e,t=i&St.Optional&&t===Uc?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Ao]=o[Ao]||[]).unshift(Mn(e)),r)throw o;return function cw(n,e,t,i){const r=n[Ao];throw e[Hf]&&r.unshift(e[Hf]),n.message=function m_(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=Mn(e);if(Array.isArray(e))r=e.map(Mn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Mn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(lw,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Ao]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Go(s),zc(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(Mn(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processInjectorType(e,t,i){if(!(e=Nt(e)))return!1;let r=xm(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=xm(s)),null==r)return!1;if(null!=r.imports&&!a){let f;i.push(o);try{is(r.imports,p=>{this.processInjectorType(p,t,i)&&(void 0===f&&(f=[]),f.push(p))})}finally{}if(void 0!==f)for(let p=0;p<f.length;p++){const{ngModule:_,providers:y}=f[p];is(y,w=>this.processProvider(w,_,y||Hn))}}this.injectorDefTypes.add(o);const c=Hs(o)||(()=>new o);this.records.set(o,Gl(c,iu));const d=r.providers;if(null!=d&&!a){const f=e;is(d,p=>this.processProvider(p,f,d))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=u(e=Nt(e))?e:Nt(e&&e.provide);const s=function $C(n,e,t){return Vv(n)?Gl(void 0,n.useValue):Gl(Lv(n),iu)}(e);if(u(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Gl(void 0,iu,!0),o.factory=()=>Fl(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===iu&&(t.value=jC,t.value=t.factory()),"object"==typeof t.value&&t.value&&function v(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Nt(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Zp(n){const e=af(n),t=null!==e?e.factory:Hs(n);if(null!==t)return t;if(n instanceof ke)throw new Ue(204,!1);if(n instanceof Function)return function UC(n){const e=n.length;if(e>0)throw Bc(e,"?"),new Ue(204,!1);const t=function k0(n){const e=n&&(n[Nn]||n[Mm]);if(e){const t=function R0(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Ue(204,!1)}function Lv(n,e,t){let i;if(u(n)){const r=Nt(n);return Hs(r)||Zp(r)}if(Vv(n))i=()=>Nt(n.useValue);else if(function l(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Fl(n.deps||[]));else if(function zC(n){return!(!n||!n.useExisting)}(n))i=()=>ne(Nt(n.useExisting));else{const r=Nt(n&&(n.useClass||n.provide));if(!function g(n){return!!n.deps}(n))return Hs(r)||Zp(r);i=()=>new r(...Fl(n.deps))}return i}function Gl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Vv(n){return null!==n&&"object"==typeof n&&wd in n}function u(n){return"function"==typeof n}let T=(()=>{class n{static create(t,i){var r;if(Array.isArray(t))return Fv({name:""},i,t,"");{const s=null!==(r=t.name)&&void 0!==r?r:"";return Fv({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=Uc,n.NULL=new kv,n.\u0275prov=Ge({token:n,providedIn:"any",factory:()=>ne(Gp)}),n.__NG_ELEMENT_ID__=-1,n})();function AL(n,e){ud(Yf(n)[1],Ai())}function jt(n){let e=function c1(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Cr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ue(903,"");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=GC(n.inputs),o.declaredInputs=GC(n.declaredInputs),o.outputs=GC(n.outputs);const a=r.hostBindings;a&&IL(n,a);const c=r.viewQuery,d=r.contentQueries;if(c&&ML(n,c),d&&TL(n,d),tf(n.inputs,r.inputs),tf(n.declaredInputs,r.declaredInputs),tf(n.outputs,r.outputs),Cr(r)&&r.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===jt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function xL(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=xl(r.hostAttrs,t=xl(t,r.hostAttrs))}}(i)}function GC(n){return n===Fi?{}:n===Hn?[]:n}function ML(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function TL(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function IL(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let Bv=null;function Xd(){if(!Bv){const n=In.Symbol;if(n&&n.iterator)Bv=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Bv=i)}}}return Bv}function Yp(n){return!!WC(n)&&(Array.isArray(n)||!(n instanceof Map)&&Xd()in n)}function WC(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function la(n,e,t){return n[e]=t}function Tr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ir(n,e,t,i){const r=X();return Tr(r,Er(),e)&&(ln(),ls(ii(),r,n,e,t,i)),Ir}function eh(n,e,t,i){return Tr(n,Er(),t)?e+Ct(t)+i:qe}function Yn(n,e,t,i,r,s,o,a){const c=X(),d=ln(),f=n+20,p=d.firstCreatePass?function LL(n,e,t,i,r,s,o,a,c){const d=e.consts,f=Ul(e,n,4,o||null,Ko(d,a));Lp(e,t,f,Ko(d,c)),ud(e,f);const p=f.tViews=qd(2,f,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d);return null!==e.queries&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}(f,d,c,e,t,i,r,s,o):d.data[f];Us(p,!1);const _=c[11].createComment("");Od(d,c,_,p),ir(_,c),Kd(c,c[f]=xv(_,c,_,p)),ed(p)&&Rp(d,c,p),null!=o&&aa(c,p,a)}function qC(n){return function Es(n,e){return n[e]}(function bo(){return xt.lFrame.contextLView}(),20+n)}function L(n,e=St.Default){const t=X();return null===t?ne(n,e):gd(Ai(),t,Nt(n),e)}function Uv(){throw new Error("invalid")}function Ye(n,e,t){const i=X();return Tr(i,Er(),e)&&Ur(ln(),ii(),i,n,e,i[11],t,!1),Ye}function XC(n,e,t,i,r){const o=r?"class":"style";Yd(n,t,e.inputs[o],o,i)}function D(n,e,t,i){const r=X(),s=ln(),o=20+n,a=r[11],c=r[o]=sp(a,e,function ka(){return xt.lFrame.currentNamespace}()),d=s.firstCreatePass?function rV(n,e,t,i,r,s,o){const a=e.consts,d=Ul(e,n,2,r,Ko(a,s));return Lp(e,t,d,Ko(a,o)),null!==d.attrs&&Qd(d,d.attrs,!1),null!==d.mergedAttrs&&Qd(d,d.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,d),d}(o,s,r,0,e,t,i):s.data[o];Us(d,!0);const f=d.mergedAttrs;null!==f&&zs(a,c,f);const p=d.classes;null!==p&&hp(a,c,p);const _=d.styles;return null!==_&&V_(a,c,_),64!=(64&d.flags)&&Od(s,r,c,d),0===function Oc(){return xt.lFrame.elementDepthCount}()&&ir(c,r),function jm(){xt.lFrame.elementDepthCount++}(),ed(d)&&(Rp(s,r,d),mv(s,d,r)),null!==i&&aa(r,d),D}function S(){let n=Ai();Df()?Sf():(n=n.parent,Us(n,!1));const e=n;!function E(){xt.lFrame.elementDepthCount--}();const t=ln();return t.firstCreatePass&&(ud(t,n),ff(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Ym(n){return 0!=(16&n.flags)}(e)&&XC(t,e,X(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function $s(n){return 0!=(32&n.flags)}(e)&&XC(t,e,X(),e.stylesWithoutHost,!1),S}function At(n,e,t,i){return D(n,e,t,i),S(),At}function $v(n,e,t){const i=X(),r=ln(),s=n+20,o=r.firstCreatePass?function sV(n,e,t,i,r){const s=e.consts,o=Ko(s,i),a=Ul(e,n,8,"ng-container",o);return null!==o&&Qd(a,o,!0),Lp(e,t,a,Ko(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];Us(o,!0);const a=i[s]=i[11].createComment("");return Od(r,i,a,o),ir(a,i),ed(o)&&(Rp(r,i,o),mv(r,o,i)),null!=t&&aa(i,o),$v}function zv(){let n=Ai();const e=ln();return Df()?Sf():(n=n.parent,Us(n,!1)),e.firstCreatePass&&(ud(e,n),ff(n)&&e.queries.elementEnd(n)),zv}function Xs(){return X()}function Xp(n){return!!n&&"function"==typeof n.then}const JC=function I1(n){return!!n&&"function"==typeof n.subscribe};function We(n,e,t,i){const r=X(),s=ln(),o=Ai();return O1(s,r,r[11],o,n,e,!!t,i),We}function eE(n,e){const t=Ai(),i=X(),r=ln();return O1(r,i,Ov(Af(r.data),t,i),t,n,e,!1),eE}function O1(n,e,t,i,r,s,o,a){const c=ed(i),f=n.firstCreatePass&&Iv(n),p=e[8],_=zp(e);let y=!0;if(3&i.type||a){const k=ur(i,e),j=a?a(k):k,B=_.length,J=a?pe=>a(yi(pe[i.index])):i.index;if(ci(t)){let pe=null;if(!a&&c&&(pe=function oV(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==pe)(pe.__ngLastListenerFn__||pe).__ngNextListenerFn__=s,pe.__ngLastListenerFn__=s,y=!1;else{s=tE(i,e,p,s,!1);const De=t.listen(j,r,s);_.push(s,De),f&&f.push(r,J,B,B+1)}}else s=tE(i,e,p,s,!0),j.addEventListener(r,s,o),_.push(s),f&&f.push(r,J,B,o)}else s=tE(i,e,p,s,!1);const w=i.outputs;let I;if(y&&null!==w&&(I=w[r])){const k=I.length;if(k)for(let j=0;j<k;j+=2){const zt=e[I[j]][I[j+1]].subscribe(s),bt=_.length;_.push(s,zt),f&&f.push(r,i.index,bt,-(bt+1))}}}function P1(n,e,t,i){try{return!1!==t(i)}catch(r){return Pv(n,r),!1}}function tE(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?Wi(n.index,e):e;0==(32&e[2])&&Hp(a);let c=P1(e,0,i,o),d=s.__ngNextListenerFn__;for(;d;)c=P1(e,0,d,o)&&c,d=d.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function kt(n=1){return function Y0(n){return(xt.lFrame.contextLView=function Tf(n,e){for(;n>0;)e=e[15],n--;return e}(n,xt.lFrame.contextLView))[8]}(n)}function aV(n,e){let t=null;const i=function lC(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?rv(n,s,!0):uC(i,s))return r}else t=r}return t}function Gv(n){const e=X()[16][6];if(!e.projection){const i=e.projection=Bc(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?aV(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Wv(n,e=0,t){const i=X(),r=ln(),s=Ul(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),Sf(),64!=(64&s.flags)&&function Sw(n,e,t){L_(e[11],0,e,t,I_(n,t,e),k_(t.parent||e[6],t,e))}(r,i,s)}function ch(n,e,t){return nE(n,"",e,"",t),ch}function nE(n,e,t,i,r){const s=X(),o=eh(s,e,t,i);return o!==qe&&Ur(ln(),ii(),s,n,o,s[11],r,!1),nE}function H1(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Ts(s):Hr(s),c=!1;for(;0!==a&&(!1===c||o);){const f=n[a+1];uV(n[a],e)&&(c=!0,n[a+1]=i?$d(f):Ud(f)),a=i?Ts(f):Hr(f)}c&&(n[t+1]=i?Ud(s):$d(s))}function uV(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ja(n,e)>=0}function rr(n,e){return function Ro(n,e,t,i){const r=X(),s=ln(),o=function wo(n){const e=xt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function Y1(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[xi()],o=function K1(n,e){return e>=n.expandoStartIndex}(n,t);(function eM(n,e){return 0!=(n.flags&(e?16:32))})(s,i)&&null===e&&!o&&(e=!1),e=function bV(n,e,t,i){const r=Af(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Jp(t=iE(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=iE(r,n,e,t,i),null===s){let c=function yV(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Hr(i))return n[Ts(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=iE(null,n,e,c[1],i),c=Jp(c,e.attrs,i),function wV(n,e,t,i){n[Ts(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function CV(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Jp(i,n[s].hostAttrs,t);return Jp(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function lV(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Ts(o),c=Hr(o);n[i]=t;let f,d=!1;if(Array.isArray(t)){const p=t;f=p[1],(null===f||ja(p,f)>0)&&(d=!0)}else f=t;if(r)if(0!==c){const _=Ts(n[a+1]);n[i+1]=Hd(_,a),0!==_&&(n[_+1]=Xc(n[_+1],i)),n[a+1]=function dC(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Hd(a,0),0!==a&&(n[a+1]=Xc(n[a+1],i)),a=i;else n[i+1]=Hd(c,0),0===a?a=i:n[c+1]=Xc(n[c+1],i),c=i;d&&(n[i+1]=Ud(n[i+1])),H1(n,f,i,!0),H1(n,f,i,!1),function cV(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ja(s,e)>=0&&(t[i+1]=$d(t[i+1]))}(e,f,n,i,s),o=Hd(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==qe&&Tr(r,o,e)&&function X1(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,d=c[a+1];qv(function cv(n){return 1==(1&n)}(d)?J1(c,e,t,r,Hr(d),o):void 0)||(qv(s)||function lv(n){return 2==(2&n)}(d)&&(s=J1(c,null,t,r,a,o)),function xw(n,e,t,i,r){const s=ci(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Sr.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Sr.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,sd(xi(),t),r,s))}(s,s.data[xi()],r,r[11],n,r[o+1]=function SV(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Mn(function ia(n){return n instanceof class U_{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(e,t),i,o)}(n,e,null,!0),rr}function iE(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Jp(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Jp(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Br(n,o,!!t||e[++s]))}return void 0===n?null:n}function J1(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],d=Array.isArray(c),f=d?c[1]:c,p=null===f;let _=t[r+1];_===qe&&(_=p?Hn:void 0);let y=p?bd(_,i):f===i?_:void 0;if(d&&!qv(y)&&(y=bd(c,i)),qv(y)&&(a=y,o))return a;const w=n[r+1];r=o?Ts(w):Hr(w)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=bd(c,i))}return a}function qv(n){return void 0!==n}function C(n,e=""){const t=X(),i=ln(),r=n+20,s=i.firstCreatePass?Ul(i,r,1,e,null):i.data[r],o=t[r]=function ip(n,e){return ci(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Od(i,t,o,s),Us(s,!1)}function su(n){return rE("",n,""),su}function rE(n,e,t){const i=X(),r=eh(i,n,e,t);return r!==qe&&Is(i,xi(),r),rE}function sE(n,e,t){const i=X();return Tr(i,Er(),e)&&Ur(ln(),ii(),i,n,e,i[11],t,!0),sE}function oE(n,e,t){const i=X();if(Tr(i,Er(),e)){const s=ln(),o=ii();Ur(s,o,i,n,e,Ov(Af(s.data),o,i),t,!0)}return oE}const ou=void 0;var GV=["en",[["a","p"],["AM","PM"],ou],[["AM","PM"],ou,ou],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ou,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ou,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ou,"{1} 'at' {0}",ou],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zV(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let dh={};function Gr(n){const e=function WV(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=bM(e);if(t)return t;const i=e.split("-")[0];if(t=bM(i),t)return t;if("en"===i)return GV;throw new Error(`Missing locale data for the locale "${n}".`)}function bM(n){return n in dh||(dh[n]=In.ng&&In.ng.common&&In.ng.common.locales&&In.ng.common.locales[n]),dh[n]}var je=(()=>((je=je||{})[je.LocaleId=0]="LocaleId",je[je.DayPeriodsFormat=1]="DayPeriodsFormat",je[je.DayPeriodsStandalone=2]="DayPeriodsStandalone",je[je.DaysFormat=3]="DaysFormat",je[je.DaysStandalone=4]="DaysStandalone",je[je.MonthsFormat=5]="MonthsFormat",je[je.MonthsStandalone=6]="MonthsStandalone",je[je.Eras=7]="Eras",je[je.FirstDayOfWeek=8]="FirstDayOfWeek",je[je.WeekendRange=9]="WeekendRange",je[je.DateFormat=10]="DateFormat",je[je.TimeFormat=11]="TimeFormat",je[je.DateTimeFormat=12]="DateTimeFormat",je[je.NumberSymbols=13]="NumberSymbols",je[je.NumberFormats=14]="NumberFormats",je[je.CurrencyCode=15]="CurrencyCode",je[je.CurrencySymbol=16]="CurrencySymbol",je[je.CurrencyName=17]="CurrencyName",je[je.Currencies=18]="Currencies",je[je.Directionality=19]="Directionality",je[je.PluralCase=20]="PluralCase",je[je.ExtraData=21]="ExtraData",je))();const Zv="en-US";let yM=Zv;function cE(n,e,t,i,r){if(n=Nt(n),Array.isArray(n))for(let s=0;s<n.length;s++)cE(n[s],e,t,i,r);else{const s=ln(),o=X();let a=u(n)?n:Nt(n.provide),c=Lv(n);const d=Ai(),f=1048575&d.providerIndexes,p=d.directiveStart,_=d.providerIndexes>>20;if(u(n)||!n.multi){const y=new Xo(c,r,L),w=dE(a,e,r?f:f+_,p);-1===w?(fd(Na(d,o),s,a),uE(s,n,e.length),e.push(a),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),t.push(y),o.push(y)):(t[w]=y,o[w]=y)}else{const y=dE(a,e,f+_,p),w=dE(a,e,f,f+_),I=y>=0&&t[y],k=w>=0&&t[w];if(r&&!k||!r&&!I){fd(Na(d,o),s,a);const j=function zB(n,e,t,i,r){const s=new Xo(n,t,L);return s.multi=[],s.index=e,s.componentProviders=0,zM(s,r,i&&!t),s}(r?$B:UB,t.length,r,i,c);!r&&k&&(t[w].providerFactory=j),uE(s,n,e.length,0),e.push(a),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),t.push(j),o.push(j)}else uE(s,n,y>-1?y:w,zM(t[r?w:y],c,!r&&i));!r&&i&&k&&t[w].componentProviders++}}}function uE(n,e,t,i){const r=u(e),s=function h(n){return!!n.useClass}(e);if(r||s){const c=(s?Nt(e.useClass):e).prototype.ngOnDestroy;if(c){const d=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const f=d.indexOf(t);-1===f?d.push(t,[i,c]):d[f+1].push(i,c)}else d.push(t,c)}}}function zM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function dE(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function UB(n,e,t,i){return hE(this.multi,[])}function $B(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Lc(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),hE(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],hE(r,s);return s}function hE(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Bn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function HB(n,e,t){const i=ln();if(i.firstCreatePass){const r=Cr(n);cE(t,i.data,i.blueprint,r,!0),cE(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class GM{}class qB{resolveComponentFactory(e){throw function WB(n){const e=Error(`No component factory found for ${Mn(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Wl=(()=>{class n{}return n.NULL=new qB,n})();function ZB(){return fh(Ai(),X())}function fh(n,e){return new yn(ur(n,e))}let yn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=ZB,n})();function KB(n){return n instanceof yn?n.nativeElement:n}class rg{}let da=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function QB(){const n=X(),t=Wi(Ai().index,n);return function YB(n){return n[11]}(js(t)?t:n)}(),n})(),XB=(()=>{class n{}return n.\u0275prov=Ge({token:n,providedIn:"root",factory:()=>null}),n})();class au{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const JB=new au("13.4.0"),fE={};function Jv(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(yi(s)),ws(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1].firstChild;null!==d&&Jv(c[1],c,d,i)}const o=t.type;if(8&o)Jv(n,e,t.child,i);else if(32&o){const a=Xf(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=N_(e,t);if(Array.isArray(a))i.push(...a);else{const c=To(e[16]);Jv(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class sg{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Jv(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ws(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(op(e,i),As(t,i))}this._attachedToViewContainer=!1}x_(this._lView[1],this._lView)}onDestroy(e){Np(this._lView[1],this._lView,null,e)}markForCheck(){Hp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function nu(n,e,t){const i=e[10];i.begin&&i.begin();try{qa(n,e,n.template,t)}catch(r){throw Pv(e,r),r}finally{i.end&&i.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bw(n,e){za(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ue(902,"");this._appRef=e}}class e5 extends sg{constructor(e){super(e),this._view=e}detectChanges(){Mv(this._view)}checkNoChanges(){}get context(){return null}}class qM extends Wl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Gi(e);return new pE(t,this.ngModule)}}function ZM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class pE extends GM{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function jd(n){return n.map(sv).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return ZM(this.componentDef.inputs)}get outputs(){return ZM(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function n5(n,e){return{get:(t,i,r)=>{const s=n.get(t,fE,r);return s!==fE||i===fE?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(rg,bi),a=s.get(XB,null),c=o.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",f=i?function Fp(n,e,t){if(ci(n))return n.selectRootElement(e,t===Fr.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(c,i,this.componentDef.encapsulation):sp(o.createRenderer(null,this.componentDef),d,function t5(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(d)),p=this.componentDef.onPush?576:528,_=function l1(n,e){return{components:[],scheduler:n||rC,clean:LC,playerHandler:e||null,flags:0}}(),y=qd(0,null,null,1,0,null,null,null,null,null),w=Hl(null,y,_,p,null,null,o,c,a,s);let I,k;ld(w);try{const j=function o1(n,e,t,i,r,s){const o=t[1];t[20]=n;const c=Ul(o,20,2,"#host",null),d=c.mergedAttrs=e.hostAttrs;null!==d&&(Qd(c,d,!0),null!==n&&(zs(r,n,d),null!==c.classes&&hp(r,n,c.classes),null!==c.styles&&V_(r,n,c.styles)));const f=i.createRenderer(n,e),p=Hl(t,_v(e),null,e.onPush?64:16,t[20],c,i,f,s||null,null);return o.firstCreatePass&&(fd(Na(c,t),o,e.type),Ev(o,c),Dv(c,t.length,1)),Kd(t,p),t[20]=p}(f,this.componentDef,w,o,c);if(f)if(i)zs(c,f,["ng-version",JB.full]);else{const{attrs:B,classes:J}=function ri(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Ms(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);B&&zs(c,f,B),J&&J.length>0&&hp(c,f,J.join(" "))}if(k=Ic(y,20),void 0!==t){const B=k.projection=[];for(let J=0;J<this.ngContentSelectors.length;J++){const pe=t[J];B.push(null!=pe?Array.from(pe):null)}}I=function a1(n,e,t,i,r){const s=t[1],o=function SC(n,e,t){const i=Ai();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Sv(n,i,e,$l(n,e,1,null),t));const r=Lc(e,n,i.directiveStart,i);ir(r,e);const s=ur(i,e);return s&&ir(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(c=>c(o,e)),e.contentQueries){const c=Ai();e.contentQueries(1,o,c.directiveStart)}const a=Ai();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ds(a.index),wv(t[1],a,0,a.directiveStart,a.directiveEnd,e),Cv(e,o)),o}(j,this.componentDef,w,_,[AL]),zl(y,w,null)}finally{cd()}return new s5(this.componentType,I,fh(k,w),w,k)}}class s5 extends class GB{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new e5(r),this.componentType=e}get injector(){return new Va(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Za{}class KM{}const ph=new Map;class XM extends Za{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new qM(this);const i=yr(e);this._bootstrapComponents=Zs(i.bootstrap),this._r3Injector=Nv(e,t,[{provide:Za,useValue:this},{provide:Wl,useValue:this.componentFactoryResolver}],Mn(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=T.THROW_IF_NOT_FOUND,i=St.Default){return e===T||e===Za||e===Gp?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class gE extends KM{constructor(e){super(),this.moduleType=e,null!==yr(e)&&function a5(n){const e=new Set;!function t(i){const r=yr(i,!0),s=r.id;null!==s&&(function YM(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Mn(e)} vs ${Mn(e.name)}`)}(s,ph.get(s),i),ph.set(s,i));const o=Zs(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new XM(this.moduleType,e)}}function JM(n,e,t,i){return function tT(n,e,t,i,r,s){const o=e+t;return Tr(n,o,r)?la(n,o+1,s?i.call(s,r):i(r)):og(n,o+1)}(X(),dr(),n,e,t,i)}function eT(n,e,t,i,r){return function nT(n,e,t,i,r,s,o){const a=e+t;return function ru(n,e,t,i){const r=Tr(n,e,t);return Tr(n,e+1,i)||r}(n,a,r,s)?la(n,a+2,o?i.call(o,r,s):i(r,s)):og(n,a+2)}(X(),dr(),n,e,t,i,r)}function og(n,e){const t=n[e];return t===qe?void 0:t}function mE(n){return e=>{setTimeout(n,void 0,e)}}const tn=class E5 extends qt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,c=t||(()=>null),d=i;if(e&&"object"==typeof e){const p=e;a=null===(r=p.next)||void 0===r?void 0:r.bind(p),c=null===(s=p.error)||void 0===s?void 0:s.bind(p),d=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}this.__isAsync&&(c=mE(c),a&&(a=mE(a)),d&&(d=mE(d)));const f=super.subscribe({next:a,error:c,complete:d});return e instanceof Te&&e.add(f),f}};function D5(){return this._results[Xd()]()}class gh{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Xd(),i=gh.prototype;i[t]||(i[t]=D5)}get changes(){return this._changes||(this._changes=new tn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=Vr(e);(this._changesDetected=!function Bf(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Os=(()=>{class n{}return n.__NG_ELEMENT_ID__=x5,n})();const S5=Os,A5=class extends S5{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=Hl(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),zl(t,i,e),new sg(i)}};function x5(){return eb(Ai(),X())}function eb(n,e){return 4&n.type?new A5(e,n,fh(n,e)):null}let Wr=(()=>{class n{}return n.__NG_ELEMENT_ID__=M5,n})();function M5(){return lT(Ai(),X())}const T5=Wr,oT=class extends T5{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return fh(this._hostTNode,this._hostLView)}get injector(){return new Va(this._hostTNode,this._hostLView)}get parentInjector(){const e=hd(this._hostTNode,this._hostLView);if(Jm(e)){const t=Tl(e,this._hostLView),i=Ml(e);return new Va(t[1].data[i+8],t)}return new Va(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=aT(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=e&&!function ta(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.ngModuleRef}const c=o?e:new pE(Gi(e)),d=i||this.parentInjector;if(!s&&null==c.ngModule){const _=(o?d:this.parentInjector).get(Za,null);_&&(s=_)}const f=c.create(d,r,void 0,s);return this.insert(f.hostView,a),f}insert(e,t){const i=e._lView,r=i[1];if(function Al(n){return ws(n[3])}(i)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const p=i[3],_=new oT(p,p[6],p[3]);_.detach(_.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function ww(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],vd(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function Cw(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=cp(s,o),c=i[11],d=Id(c,o[7]);return null!==d&&function vw(n,e,t,i,r,s){i[0]=r,i[6]=e,za(n,i,t,1,r,s)}(r,o[6],c,i,d,a),e.attachToViewContainerRef(),vd(_E(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=aT(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=op(this._lContainer,t);i&&(As(_E(this._lContainer),t),x_(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=op(this._lContainer,t);return i&&null!=As(_E(this._lContainer),t)?new sg(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function aT(n){return n[8]}function _E(n){return n[8]||(n[8]=[])}function lT(n,e){let t;const i=e[n.index];if(ws(i))t=i;else{let r;if(8&n.type)r=yi(i);else{const s=e[11];r=s.createComment("");const o=ur(n,e);$a(s,Id(s,o),r,function Dw(n,e){return ci(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=xv(i,e,r,n),Kd(e,t)}return new oT(t,n,e)}class vE{constructor(e){this.queryList=e,this.matches=null}clone(){return new vE(this.queryList)}setDirty(){this.queryList.setDirty()}}class bE{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new bE(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==fT(e,t).matches&&this.queries[t].setDirty()}}class cT{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class yE{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new yE(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class wE{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new wE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,P5(t,s)),this.matchTNodeWithReadOption(e,t,La(t,e,s,!1,!1))}else i===Os?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,La(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===yn||r===Wr||r===Os&&4&t.type)this.addMatch(t.index,-2);else{const s=La(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function P5(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function R5(n,e,t,i){return-1===t?function k5(n,e){return 11&n.type?fh(n,e):4&n.type?eb(n,e):null}(e,n):-2===t?function F5(n,e,t){return t===yn?fh(e,n):t===Os?eb(e,n):t===Wr?lT(e,n):void 0}(n,e,i):Lc(n,n[1],t,e)}function uT(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const d=o[c];a.push(d<0?null:R5(e,s[d],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function CE(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=uT(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const d=s[a+1],f=e[-c];for(let p=10;p<f.length;p++){const _=f[p];_[17]===_[3]&&CE(_[1],_,d,i)}if(null!==f[9]){const p=f[9];for(let _=0;_<p.length;_++){const y=p[_];CE(y[1],y,d,i)}}}}}return i}function Ti(n){const e=X(),t=ln(),i=$m();Lr(i+1);const r=fT(t,i);if(n.dirty&&Dl(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?CE(t,e,i,[]):uT(t,e,r,i);n.reset(s,KB),n.notifyOnChanges()}return!0}return!1}function qr(n,e,t){const i=ln();i.firstCreatePass&&(hT(i,new cT(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),dT(i,X(),e)}function lu(n,e,t,i){const r=ln();if(r.firstCreatePass){const s=Ai();hT(r,new cT(e,t,i),s.index),function L5(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}dT(r,X(),t)}function Ii(){return function N5(n,e){return n[19].queries[e].queryList}(X(),$m())}function dT(n,e,t){const i=new gh(4==(4&t));Np(n,e,i,i.destroy),null===e[19]&&(e[19]=new bE),e[19].queries.push(new vE(i))}function hT(n,e,t){null===n.queries&&(n.queries=new yE),n.queries.track(new wE(e,t))}function fT(n,e){return n.queries.getByIndex(e)}function pT(n,e){return eb(n,e)}function ib(...n){}const ME=new ke("Application Initializer");let TE=(()=>{class n{constructor(t){this.appInits=t,this.resolve=ib,this.reject=ib,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Xp(s))t.push(s);else if(JC(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ne(ME,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cg=new ke("AppId",{providedIn:"root",factory:function OT(){return`${IE()}${IE()}${IE()}`}});function IE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const PT=new ke("Platform Initializer"),OE=new ke("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kT=new ke("appBootstrapListener");let e3=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ha=new ke("LocaleId",{providedIn:"root",factory:()=>Cd(ha,St.Optional|St.SkipSelf)||function t3(){return"undefined"!=typeof $localize&&$localize.locale||Zv}()});class r3{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let RT=(()=>{class n{compileModuleSync(t){return new gE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Zs(yr(t).declarations).reduce((o,a)=>{const c=Gi(a);return c&&o.push(new pE(c)),o},[]);return new r3(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const o3=(()=>Promise.resolve(0))();function PE(n){"undefined"==typeof Zone?o3.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class fn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tn(!1),this.onMicrotaskEmpty=new tn(!1),this.onStable=new tn(!1),this.onError=new tn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function a3(){let n=In.requestAnimationFrame,e=In.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function u3(n){const e=()=>{!function c3(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(In,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,RE(n),n.isCheckStableRunning=!0,kE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),RE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return FT(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),NT(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return FT(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),NT(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,RE(n),kE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,l3,ib,ib);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const l3={};function kE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function RE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function FT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function NT(n){n._nesting--,kE(n)}class d3{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tn,this.onMicrotaskEmpty=new tn,this.onStable=new tn,this.onError=new tn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let FE=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fn.assertNotInAngularZone(),PE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())PE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(ne(fn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),h3=(()=>{class n{constructor(){this._applications=new Map,NE.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return NE.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class f3{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let NE=new f3,cu=null;const LT=new ke("AllowMultipleToken"),VT=new ke("PlatformOnDestroy");class BT{constructor(e,t){this.name=e,this.token=t}}function jT(n,e,t=[]){const i=`Platform: ${e}`,r=new ke(i);return(s=[])=>{let o=LE();if(!o||o.injector.get(LT,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function _3(n){if(cu&&!cu.get(LT,!1))throw new Ue(400,"");cu=n;const e=n.get(HT),t=n.get(PT,null);t&&t.forEach(i=>i())}(function b3(n=[],e){return T.create({name:e,providers:[{provide:Wp,useValue:"platform"},{provide:VT,useValue:()=>cu=null},...n]})}(a,i))}return function v3(n){const e=LE();if(!e)throw new Ue(401,"");return e}()}}function LE(){var n;return null!==(n=null==cu?void 0:cu.get(HT))&&void 0!==n?n:null}let HT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function y3(n,e){let t;return t="noop"===n?new d3:("zone.js"===n?void 0:n)||new fn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),c=[{provide:fn,useValue:a}];return a.run(()=>{const d=T.create({providers:c,parent:this.injector,name:t.moduleType.name}),f=t.create(d),p=f.injector.get(Wa,null);if(!p)throw new Ue(402,"");return a.runOutsideAngular(()=>{const _=a.onError.subscribe({next:y=>{p.handleError(y)}});f.onDestroy(()=>{VE(this._modules,f),_.unsubscribe()})}),function w3(n,e,t){try{const i=t();return Xp(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(p,a,()=>{const _=f.injector.get(TE);return _.runInitializers(),_.donePromise.then(()=>(function YV(n){Rr(n,"Expected localeId to be defined"),"string"==typeof n&&(yM=n.toLowerCase().replace(/_/g,"-"))}(f.injector.get(ha,Zv)||Zv),this._moduleDoBootstrap(f),f))})})}bootstrapModule(t,i=[]){const r=UT({},i);return function g3(n,e,t){const i=new gE(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(rb);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Ue(403,"");t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,"");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(VT,null);null==t||t(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ne(T))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function UT(n,e){return Array.isArray(e)?e.reduce(UT,n):Object.assign(Object.assign({},n),e)}let rb=(()=>{class n{constructor(t,i,r,s){this._zone=t,this._injector=i,this._exceptionHandler=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new wn(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),a=new wn(c=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{fn.assertNotInAngularZone(),PE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{fn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),f.unsubscribe()}});this.isStable=Cc(o,a.pipe(function wm(){return n=>Jh()(function w0(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new C0(r,e));const s=Object.create(i,Gu);return s.source=i,s.subjectFactory=r,s}}(ym)(n))}()))}bootstrap(t,i){if(!this._initStatus.done)throw new Ue(405,"");let r;r=t instanceof GM?t:this._injector.get(Wl).resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function m3(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Za),a=r.create(T.NULL,[],i||r.selector,s),c=a.location.nativeElement,d=a.injector.get(FE,null),f=d&&a.injector.get(h3);return d&&f&&f.registerApplication(c,d),a.onDestroy(()=>{this.detachView(a.hostView),VE(this.components,a),f&&f.unregisterApplication(c)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Ue(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;VE(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(kT,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(ne(fn),ne(T),ne(Wa),ne(TE))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function VE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let zT=!0,Js=(()=>{class n{}return n.__NG_ELEMENT_ID__=D3,n})();function D3(n){return function S3(n,e,t){if(Ju(n)&&!t){const i=Wi(n.index,e);return new sg(i,i)}return 47&n.type?new sg(e[16],e):null}(Ai(),X(),16==(16&n))}class KT{constructor(){}supports(e){return Yp(e)}create(e){return new O3(e)}}const I3=(n,e)=>e;class O3{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||I3}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<QT(i,r,s)?t:i,a=QT(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const d=a-r,f=c-r;if(d!=f){for(let _=0;_<d;_++){const y=_<s.length?s[_]:s[_]=0,w=y+_;f<=w&&w<d&&(s[_]=y+1)}s[o.previousIndex]=f-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Yp(e))throw new Ue(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function NL(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Xd()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new P3(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new YT),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new YT),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class P3{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class k3{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class YT{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new k3,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function QT(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class XT{constructor(){}supports(e){return e instanceof Map||WC(e)}create(){return new R3}}class R3{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||WC(e)))throw new Ue(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new F3(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class F3{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function JT(){return new ab([new KT])}let ab=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||JT()),deps:[[n,new Gc,new xo]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Ue(901,"")}}return n.\u0275prov=Ge({token:n,providedIn:"root",factory:JT}),n})();function eI(){return new ug([new XT])}let ug=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||eI()),deps:[[n,new Gc,new xo]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(i)return i;throw new Ue(901,"")}}return n.\u0275prov=Ge({token:n,providedIn:"root",factory:eI}),n})();const V3=jT(null,"core",[]);let B3=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ne(rb))},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({}),n})(),lb=null;function fa(){return lb}const Sn=new ke("DocumentToken");let du=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:function(){return function $3(){return ne(tI)}()},providedIn:"platform"}),n})();const z3=new ke("Location Initialized");let tI=(()=>{class n extends du{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fa().getBaseHref(this._doc)}onPopState(t){const i=fa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=fa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){nI()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){nI()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ne(Sn))},n.\u0275prov=Ge({token:n,factory:function(){return function G3(){return new tI(ne(Sn))}()},providedIn:"platform"}),n})();function nI(){return!!window.history.pushState}function $E(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function iI(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ka(n){return n&&"?"!==n[0]?"?"+n:n}let _h=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:function(){return function W3(n){const e=ne(Sn).location;return new rI(ne(du),e&&e.origin||"")}()},providedIn:"root"}),n})();const zE=new ke("appBaseHref");let rI=(()=>{class n extends _h{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $E(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ka(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Ka(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Ka(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(ne(du),ne(zE,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),q3=(()=>{class n extends _h{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=$E(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Ka(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Ka(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(ne(du),ne(zE,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),dg=(()=>{class n{constructor(t,i){this._subject=new tn,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=iI(sI(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ka(i))}normalize(t){return n.stripTrailingSlash(function K3(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,sI(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ka(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ka(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Ka,n.joinWithSlash=$E,n.stripTrailingSlash=iI,n.\u0275fac=function(t){return new(t||n)(ne(_h),ne(du))},n.\u0275prov=Ge({token:n,factory:function(){return function Z3(){return new dg(ne(_h),ne(du))}()},providedIn:"root"}),n})();function sI(n){return n.replace(/\/index.html$/,"")}var us=(()=>((us=us||{})[us.Decimal=0]="Decimal",us[us.Percent=1]="Percent",us[us.Currency=2]="Currency",us[us.Scientific=3]="Scientific",us))(),ht=(()=>((ht=ht||{})[ht.Decimal=0]="Decimal",ht[ht.Group=1]="Group",ht[ht.List=2]="List",ht[ht.PercentSign=3]="PercentSign",ht[ht.PlusSign=4]="PlusSign",ht[ht.MinusSign=5]="MinusSign",ht[ht.Exponential=6]="Exponential",ht[ht.SuperscriptingExponent=7]="SuperscriptingExponent",ht[ht.PerMille=8]="PerMille",ht[ht.Infinity=9]="Infinity",ht[ht.NaN=10]="NaN",ht[ht.TimeSeparator=11]="TimeSeparator",ht[ht.CurrencyDecimal=12]="CurrencyDecimal",ht[ht.CurrencyGroup=13]="CurrencyGroup",ht))();function ds(n,e){const t=Gr(n),i=t[je.NumberSymbols][e];if(void 0===i){if(e===ht.CurrencyDecimal)return t[je.NumberSymbols][ht.Decimal];if(e===ht.CurrencyGroup)return t[je.NumberSymbols][ht.Group]}return i}const wj=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function XE(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}let pI=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Yp(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Mn(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(L(ab),L(ug),L(yn),L(da))},n.\u0275dir=Ne({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Rj{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pg=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Rj(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),gI(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{gI(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(L(Wr),L(Os),L(ab))},n.\u0275dir=Ne({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function gI(n,e){n.context.$implicit=e.item}let hu=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Fj,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(L(Wr),L(Os))},n.\u0275dir=Ne({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Fj{constructor(){this.$implicit=null,this.ngIf=null}}function mI(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Mn(e)}'.`)}const _I="browser";let rD=(()=>{class n{constructor(t){this._locale=t}transform(t,i,r){if(!function sD(n){return!(null==n||""===n||n!=n)}(t))return null;r=r||this._locale;try{return function xj(n,e,t){return function YE(n,e,t,i,r,s,o=!1){let a="",c=!1;if(isFinite(n)){let d=function Tj(n){let i,r,s,o,a,e=Math.abs(n)+"",t=0;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))i=[0],r=1;else{for(a--;"0"===e.charAt(a);)a--;for(r-=s,i=[],o=0;s<=a;s++,o++)i[o]=Number(e.charAt(s))}return r>22&&(i=i.splice(0,21),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}(n);o&&(d=function Mj(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(d));let f=e.minInt,p=e.minFrac,_=e.maxFrac;if(s){const B=s.match(wj);if(null===B)throw new Error(`${s} is not a valid digit info`);const J=B[1],pe=B[3],De=B[5];null!=J&&(f=XE(J)),null!=pe&&(p=XE(pe)),null!=De?_=XE(De):null!=pe&&p>_&&(_=p)}!function Ij(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+n.integerLen,a=i[o];if(o>0){i.splice(Math.max(n.integerLen,o));for(let p=o;p<i.length;p++)i[p]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let p=1;p<o;p++)i[p]=0}if(a>=5)if(o-1<0){for(let p=0;p>o;p--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let c=0!==s;const d=e+n.integerLen,f=i.reduceRight(function(p,_,y,w){return w[y]=(_+=p)<10?_:_-10,c&&(0===w[y]&&y>=d?w.pop():c=!1),_>=10?1:0},0);f&&(i.unshift(f),n.integerLen++)}(d,p,_);let y=d.digits,w=d.integerLen;const I=d.exponent;let k=[];for(c=y.every(B=>!B);w<f;w++)y.unshift(0);for(;w<0;w++)y.unshift(0);w>0?k=y.splice(w,y.length):(k=y,y=[0]);const j=[];for(y.length>=e.lgSize&&j.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)j.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&j.unshift(y.join("")),a=j.join(ds(t,i)),k.length&&(a+=ds(t,r)+k.join("")),I&&(a+=ds(t,ht.Exponential)+"+"+I)}else a=ds(t,ht.Infinity);return a=n<0&&!c?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function QE(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(";"),r=i[0],s=i[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],a=o[0],c=o[1]||"";t.posPre=a.substr(0,a.indexOf("#"));for(let f=0;f<c.length;f++){const p=c.charAt(f);"0"===p?t.minFrac=t.maxFrac=f+1:"#"===p?t.maxFrac=f+1:t.posSuf+=p}const d=a.split(",");if(t.gSize=d[1]?d[1].length:0,t.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,s){const f=r.length-t.posPre.length-t.posSuf.length,p=s.indexOf("#");t.negPre=s.substr(0,p).replace(/'/g,""),t.negSuf=s.substr(p+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function GE(n,e){return Gr(n)[je.NumberFormats][e]}(e,us.Decimal),ds(e,ht.MinusSign)),e,ht.Group,ht.Decimal,t)}(function oD(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),r,i)}catch(s){throw function Lo(n,e){return new Ue(2100,"")}()}}}return n.\u0275fac=function(t){return new(t||n)(L(ha,16))},n.\u0275pipe=Si({name:"number",type:n,pure:!0}),n})();let Qa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({}),n})(),NH=(()=>{class n{}return n.\u0275prov=Ge({token:n,providedIn:"root",factory:()=>new LH(ne(Sn),window)}),n})();class LH{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function VH(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=DI(this.window.history)||DI(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function DI(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class aD extends class HH extends class U3{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function H3(n){lb||(lb=n)}(new aD)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function UH(){return mg=mg||document.querySelector("base"),mg?mg.getAttribute("href"):null}();return null==t?null:function $H(n){yb=yb||document.createElement("a"),yb.setAttribute("href",n);const e=yb.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){mg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Pj(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let yb,mg=null;const SI=new ke("TRANSITION_ID"),GH=[{provide:ME,useFactory:function zH(n,e,t){return()=>{t.get(TE).donePromise.then(()=>{const i=fa(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[SI,Sn,T],multi:!0}];class lD{static init(){!function p3(n){NE=n}(new lD)}addToWindow(e){In.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},In.getAllAngularTestabilities=()=>e.getAllTestabilities(),In.getAllAngularRootElements=()=>e.getAllRootElements(),In.frameworkStabilizers||(In.frameworkStabilizers=[]),In.frameworkStabilizers.push(i=>{const r=In.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?fa().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let WH=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();const wb=new ke("EventManagerPlugins");let Cb=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ne(wb),ne(fn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();class AI{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=fa().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let xI=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),_g=(()=>{class n extends xI{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(MI),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(MI))}}return n.\u0275fac=function(t){return new(t||n)(ne(Sn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();function MI(n){fa().remove(n)}const cD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},uD=/%COMP%/g;function Eb(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Eb(n,r,t):(r=r.replace(uD,n),t.push(r))}return t}function OI(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Db=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new dD(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Fr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new XH(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Fr.ShadowDom:return new JH(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Eb(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ne(Cb),ne(_g),ne(cg))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();class dD{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(cD[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=cD[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=cD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Sr.DashCase|Sr.Important)?e.style.setProperty(t,i,r&Sr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Sr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,OI(i)):this.eventManager.addEventListener(e,t,OI(i))}}class XH extends dD{constructor(e,t,i,r){super(e),this.component=i;const s=Eb(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function KH(n){return"_ngcontent-%COMP%".replace(uD,n)}(r+"-"+i.id),this.hostAttr=function YH(n){return"_nghost-%COMP%".replace(uD,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class JH extends dD{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Eb(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let e4=(()=>{class n extends AI{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(ne(Sn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();const kI=["alt","control","meta","shift"],n4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},RI={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},r4={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let s4=(()=>{class n extends AI{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fa().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(kI.forEach(c=>{const d=i.indexOf(c);d>-1&&(i.splice(d,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function o4(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&RI.hasOwnProperty(e)&&(e=RI[e]))}return n4[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),kI.forEach(s=>{s!=r&&r4[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(ne(Sn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();const u4=jT(V3,"browser",[{provide:OE,useValue:_I},{provide:PT,useValue:function a4(){aD.makeCurrent(),lD.init()},multi:!0},{provide:Sn,useFactory:function c4(){return function $0(n){Mc=n}(document),document},deps:[]}]),d4=[{provide:Wp,useValue:"root"},{provide:Wa,useFactory:function l4(){return new Wa},deps:[]},{provide:wb,useClass:e4,multi:!0,deps:[Sn,fn,OE]},{provide:wb,useClass:s4,multi:!0,deps:[Sn]},{provide:Db,useClass:Db,deps:[Cb,_g,cg]},{provide:rg,useExisting:Db},{provide:xI,useExisting:_g},{provide:_g,useClass:_g,deps:[Sn]},{provide:FE,useClass:FE,deps:[fn]},{provide:Cb,useClass:Cb,deps:[wb,fn]},{provide:class BH{},useClass:WH,deps:[]}];let FI=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:cg,useValue:t.appId},{provide:SI,useExisting:cg},GH]}}}return n.\u0275fac=function(t){return new(t||n)(ne(n,12))},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({providers:d4,imports:[Qa,B3]}),n})();function Sb(n,e){return new wn(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const c=Qi(n[a]);let d=!1;t.add(c.subscribe({next:f=>{d||(d=!0,o++),r[a]=f},error:f=>t.error(f),complete:()=>{s++,(s===i||!d)&&(o===i&&t.next(e?e.reduce((f,p,_)=>(f[p]=r[_],f),{}):r),t.complete())}}))}})}"undefined"!=typeof window&&window;let VI=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(L(da),L(yn))},n.\u0275dir=Ne({type:n}),n})(),fu=(()=>{class n extends VI{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ne({type:n,features:[jt]}),n})();const Vo=new ke("NgValueAccessor"),E4={provide:Vo,useExisting:_n(()=>fD),multi:!0};let fD=(()=>{class n extends fu{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ne({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,i){1&t&&We("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[Bn([E4]),jt]}),n})();const D4={provide:Vo,useExisting:_n(()=>vh),multi:!0},A4=new ke("CompositionEventMode");let vh=(()=>{class n extends VI{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function S4(){const n=fa()?fa().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(L(da),L(yn),L(A4,8))},n.\u0275dir=Ne({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&We("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Bn([D4]),jt]}),n})();function Zl(n){return null==n||0===n.length}function BI(n){return null!=n&&"number"==typeof n.length}const sr=new ke("NgValidators"),pa=new ke("NgAsyncValidators"),x4=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class to{static min(e){return jI(e)}static max(e){return function HI(n){return e=>{if(Zl(e.value)||Zl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return UI(e)}static requiredTrue(e){return function $I(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function zI(n){return Zl(n.value)||x4.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function GI(n){return e=>Zl(e.value)||!BI(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function WI(n){return e=>BI(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function qI(n){if(!n)return Ab;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Zl(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return JI(e)}static composeAsync(e){return eO(e)}}function jI(n){return e=>{if(Zl(e.value)||Zl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function UI(n){return Zl(n.value)?{required:!0}:null}function Ab(n){return null}function ZI(n){return null!=n}function KI(n){const e=Xp(n)?Qi(n):n;return JC(e),e}function YI(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function QI(n,e){return e.map(t=>t(n))}function XI(n){return n.map(e=>function M4(n){return!n.validate}(e)?e:t=>e.validate(t))}function JI(n){if(!n)return null;const e=n.filter(ZI);return 0==e.length?null:function(t){return YI(QI(t,e))}}function pD(n){return null!=n?JI(XI(n)):null}function eO(n){if(!n)return null;const e=n.filter(ZI);return 0==e.length?null:function(t){return function C4(...n){if(1===n.length){const e=n[0];if(Rn(e))return Sb(e,null);if(Ot(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Sb(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Sb(n=1===n.length&&Rn(n[0])?n[0]:n,null).pipe(mn(t=>e(...t)))}return Sb(n,null)}(QI(t,e).map(KI)).pipe(mn(YI))}}function gD(n){return null!=n?eO(XI(n)):null}function tO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nO(n){return n._rawValidators}function iO(n){return n._rawAsyncValidators}function mD(n){return n?Array.isArray(n)?n:[n]:[]}function xb(n,e){return Array.isArray(n)?n.includes(e):n===e}function rO(n,e){const t=mD(e);return mD(n).forEach(r=>{xb(t,r)||t.push(r)}),t}function sO(n,e){return mD(e).filter(t=>!xb(n,t))}class oO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Kl extends oO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Kr extends oO{get formDirective(){return null}get path(){return null}}class aO{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}let vg=(()=>{class n extends aO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(L(Kl,2))},n.\u0275dir=Ne({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&rr("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[jt]}),n})(),Mb=(()=>{class n extends aO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(L(Kr,10))},n.\u0275dir=Ne({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&rr("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[jt]}),n})();function Ib(n,e){return[...e.path,n]}function bg(n,e){bD(n,e),e.valueAccessor.writeValue(n.value),function N4(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&cO(n,e)})}(n,e),function V4(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function L4(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&cO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function F4(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ob(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),kb(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Pb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bD(n,e){const t=nO(n);null!==e.validator?n.setValidators(tO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=iO(n);null!==e.asyncValidator?n.setAsyncValidators(tO(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Pb(e._rawValidators,r),Pb(e._rawAsyncValidators,r)}function kb(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=nO(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=iO(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return Pb(e._rawValidators,i),Pb(e._rawAsyncValidators,i),t}function cO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function wD(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===vh?t=s:function H4(n){return Object.getPrototypeOf(n.constructor)===fu}(s)?i=s:r=s}),r||i||t||null}function CD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const yg="VALID",Rb="INVALID",bh="PENDING",wg="DISABLED";function DD(n){return(Fb(n)?n.validators:n)||null}function fO(n){return Array.isArray(n)?pD(n):n||null}function SD(n,e){return(Fb(e)?e.asyncValidators:n)||null}function pO(n){return Array.isArray(n)?gD(n):n||null}function Fb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const AD=n=>n instanceof An,Nb=n=>n instanceof On;function mO(n){return AD(n)?n.value:n.getRawValue()}function _O(n,e){const t=Nb(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new Ue(1e3,"");if(!i[e])throw new Ue(1001,"")}function vO(n,e){Nb(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new Ue(1002,"")})}class xD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=fO(this._rawValidators),this._composedAsyncValidatorFn=pO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yg}get invalid(){return this.status===Rb}get pending(){return this.status==bh}get disabled(){return this.status===wg}get enabled(){return this.status!==wg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=fO(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=pO(e)}addValidators(e){this.setValidators(rO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sO(e,this._rawAsyncValidators))}hasValidator(e){return xb(this._rawValidators,e)}hasAsyncValidator(e){return xb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=bh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=wg,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yg,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yg||this.status===bh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wg:yg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=bh,this._hasOwnPendingAsyncValidator=!0;const t=KI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function U4(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=Nb(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof Un)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new tn,this.statusChanges=new tn}_calculateStatus(){return this._allControlsDisabled()?wg:this.errors?Rb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bh)?bh:this._anyControlsHaveStatus(Rb)?Rb:yg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class An extends xD{constructor(e=null,t,i){super(DD(t),SD(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fb(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){CD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){CD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class On extends xD{constructor(e,t,i){super(DD(t),SD(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){vO(this,e),Object.keys(e).forEach(i=>{_O(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=mO(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Un extends xD{constructor(e,t,i){super(DD(t),SD(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){vO(this,e),e.forEach((i,r)=>{_O(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>mO(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const G4={provide:Kl,useExisting:_n(()=>Lb)},wO=(()=>Promise.resolve(null))();let Lb=(()=>{class n extends Kl{constructor(t,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new An,this._registered=!1,this.update=new tn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=wD(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),yD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){wO.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;wO.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?Ib(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(L(Kr,9),L(sr,10),L(pa,10),L(Vo,10),L(Js,8))},n.\u0275dir=Ne({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Bn([G4]),jt,Ji]}),n})(),Vb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ne({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const W4={provide:Vo,useExisting:_n(()=>TD),multi:!0};let TD=(()=>{class n extends fu{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ne({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&We("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Bn([W4]),jt]}),n})();const q4={provide:Vo,useExisting:_n(()=>ID),multi:!0};let CO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({}),n})(),Z4=(()=>{class n{constructor(){this._accessors=[]}add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t)return void this._accessors.splice(i,1)}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return!!t[0].control&&t[0]._parent===i._control._parent&&t[1].name===i.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:CO}),n})(),ID=(()=>{class n extends fu{constructor(t,i,r,s){super(t,i),this._registry=r,this._injector=s,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Kl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(L(da),L(yn),L(Z4),L(T))},n.\u0275dir=Ne({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,i){1&t&&We("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Bn([q4]),jt]}),n})();const OD=new ke("NgModelWithFormControlWarning"),Q4={provide:Kr,useExisting:_n(()=>yh)};let yh=(()=>{class n extends Kr{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new tn,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kb(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return bg(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Ob(t.control||null,t,!1),CD(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function hO(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(Ob(i||null,t),AD(r)&&(bg(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function uO(n,e){bD(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function B4(n,e){return kb(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bD(this.form,this),this._oldForm&&kb(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(L(sr,10),L(pa,10))},n.\u0275dir=Ne({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&We("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Bn([Q4]),jt,Ji]}),n})();const eU={provide:Kl,useExisting:_n(()=>Eg)};let Eg=(()=>{class n extends Kl{constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new tn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=wD(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),yD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Ib(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(L(Kr,13),L(sr,10),L(pa,10),L(Vo,10),L(OD,8))},n.\u0275dir=Ne({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Bn([eU]),jt,Ji]}),n})();const tU={provide:Vo,useExisting:_n(()=>pu),multi:!0};function AO(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let pu=(()=>{class n extends fu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=AO(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function nU(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ne({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&We("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bn([tU]),jt]}),n})(),Dg=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(AO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(da),L(pu,9))},n.\u0275dir=Ne({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const iU={provide:Vo,useExisting:_n(()=>RD),multi:!0};function xO(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let RD=(()=>{class n extends fu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const d=this._getOptionValue(o[a].value);r.push(d)}}else{const o=i.options;for(let a=0;a<o.length;a++){const c=o[a];if(c.selected){const d=this._getOptionValue(c.value);r.push(d)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function rU(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ne({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&We("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bn([iU]),jt]}),n})(),Sg=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(xO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(xO(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(da),L(RD,9))},n.\u0275dir=Ne({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let gu=(()=>{class n{constructor(){this._validator=Ab}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Ab,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ne({type:n,features:[Ji]}),n})();const aU={provide:sr,useExisting:_n(()=>FD),multi:!0};let FD=(()=>{class n extends gu{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function TO(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>jI(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ne({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&Ir("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Bn([aU]),jt]}),n})();const lU={provide:sr,useExisting:_n(()=>Bb),multi:!0};let Bb=(()=>{class n extends gu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function sU(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>UI}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ne({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&Ir("required",i._enabled?"":null)},inputs:{required:"required"},features:[Bn([lU]),jt]}),n})(),NO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[CO]]}),n})(),wh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[NO]}),n})(),mu=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:OD,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[NO]}),n})();function yt(...n){let e=n[n.length-1];return zo(e)?(n.pop(),zu(n,e)):Xh(n)}class no extends qt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _l;return this._value}next(e){super.next(this._value=e)}}class gU extends Dt{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class mU extends Dt{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function _U(n,e,t,i,r=new mU(n,t,i)){if(!r.closed)return e instanceof wn?e.subscribe(r):Yh(e)(r)}const LO={};class bU{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new yU(e,this.resultSelector))}}class yU extends gU{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(LO),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(_U(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===LO?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}function jb(n,e){return new wn(e?t=>e.schedule(wU,0,{error:n,subscriber:t}):t=>t.error(n))}function wU({error:n,subscriber:e}){e.error(n)}const Hb=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function LD(...n){return function CU(){return vl(1)}()(yt(...n))}const _u=new wn(n=>n.complete());function VD(n){return n?function EU(n){return new wn(e=>n.schedule(()=>e.complete()))}(n):_u}function BD(n){return new wn(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?Qi(t):VD()).subscribe(e)})}function Xa(n,e){return"function"==typeof e?t=>t.pipe(Xa((i,r)=>Qi(n(i,r)).pipe(mn((s,o)=>e(i,s,r,o))))):t=>t.lift(new DU(n))}class DU{constructor(e){this.project=e}call(e,t){return t.subscribe(new SU(e,this.project))}}class SU extends yc{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new Aa(this),r=this.destination;r.add(i),this.innerSubscription=wc(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const VO=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function ga(n){return e=>0===n?VD():e.lift(new AU(n))}class AU{constructor(e){if(this.total=e,this.total<0)throw new VO}call(e,t){return t.subscribe(new xU(e,this.total))}}class xU extends Dt{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function Ag(...n){const e=n[n.length-1];return zo(e)?(n.pop(),t=>LD(n,t,e)):t=>LD(n,t)}function BO(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new MU(n,e,t))}}class MU{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new TU(e,this.accumulator,this.seed,this.hasSeed))}}class TU extends Dt{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function io(n,e){return function(i){return i.lift(new IU(n,e))}}class IU{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new OU(e,this.predicate,this.thisArg))}}class OU extends Dt{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function vu(n){return function(t){const i=new PU(n),r=t.lift(i);return i.caught=r}}class PU{constructor(e){this.selector=e}call(e,t){return t.subscribe(new kU(e,this.selector,this.caught))}}class kU extends yc{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new Aa(this);this.add(i);const r=wc(t,i);r!==i&&this.add(r)}}}function xg(n,e){return zi(n,e,1)}function jD(n){return function(t){return 0===n?VD():t.lift(new RU(n))}}class RU{constructor(e){if(this.total=e,this.total<0)throw new VO}call(e,t){return t.subscribe(new FU(e,this.total))}}class FU extends Dt{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<i;s++){const o=t++%i;e.next(r[o])}}e.complete()}}function jO(n=VU){return e=>e.lift(new NU(n))}class NU{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new LU(e,this.errorFactory))}}class LU extends Dt{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function VU(){return new Hb}function HO(n=null){return e=>e.lift(new BU(n))}class BU{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new jU(e,this.defaultValue))}}class jU extends Dt{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Ch(n,e){const t=arguments.length>=2;return i=>i.pipe(n?io((r,s)=>n(r,s,i)):ms,ga(1),t?HO(e):jO(()=>new Hb))}function Yl(){}function hs(n,e,t){return function(r){return r.lift(new UU(n,e,t))}}class UU{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new $U(e,this.nextOrObserver,this.error,this.complete))}}class $U extends Dt{constructor(e,t,i,r){super(e),this._tapNext=Yl,this._tapError=Yl,this._tapComplete=Yl,this._tapError=i||Yl,this._tapComplete=r||Yl,it(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Yl,this._tapError=t.error||Yl,this._tapComplete=t.complete||Yl)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class GU{constructor(e){this.callback=e}call(e,t){return t.subscribe(new WU(e,this.callback))}}class WU extends Dt{constructor(e,t){super(e),this.add(new Te(t))}}class Ja{constructor(e,t){this.id=e,this.url=t}}class HD extends Ja{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mg extends Ja{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class UO extends Ja{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qU extends Ja{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ZU extends Ja{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KU extends Ja{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YU extends Ja{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class QU extends Ja{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XU extends Ja{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $O{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zO{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class JU{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e${constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t${constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n${constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GO{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qt="primary";class i${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Eh(n){return new i$(n)}const WO="ngNavigationCancelingError";function UD(n){const e=Error("NavigationCancelingError: "+n);return e[WO]=!0,e}function s$(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ma(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!qO(n[r],e[r]))return!1;return!0}function qO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function ZO(n){return Array.prototype.concat.apply([],n)}function KO(n){return n.length>0?n[n.length-1]:null}function pr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _a(n){return JC(n)?n:Xp(n)?Qi(Promise.resolve(n)):yt(n)}const l$={exact:function XO(n,e,t){if(!yu(n.segments,e.segments)||!Ub(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!XO(n.children[i],e.children[i],t))return!1;return!0},subset:JO},YO={exact:function c$(n,e){return ma(n,e)},subset:function u$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qO(n[t],e[t]))},ignored:()=>!0};function QO(n,e,t){return l$[t.paths](n.root,e.root,t.matrixParams)&&YO[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function JO(n,e,t){return eP(n,e,e.segments,t)}function eP(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!yu(r,t)||e.hasChildren()||!Ub(r,t,i))}if(n.segments.length===t.length){if(!yu(n.segments,t)||!Ub(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!JO(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(yu(n.segments,r)&&Ub(n.segments,r,i)&&n.children[Qt])&&eP(n.children[Qt],e,s,i)}}function Ub(n,e,t){return e.every((i,r)=>YO[t](n[r].parameters,i.parameters))}class bu{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Eh(this.queryParams)),this._queryParamMap}toString(){return f$.serialize(this)}}class cn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,pr(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $b(this)}}class Tg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Eh(this.parameters)),this._parameterMap}toString(){return sP(this)}}function yu(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class tP{}class nP{parse(e){const t=new C$(e);return new bu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ig(e.root,!0)}`,i=function m$(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${zb(t)}=${zb(r)}`).join("&"):`${zb(t)}=${zb(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function p$(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const f$=new nP;function $b(n){return n.segments.map(e=>sP(e)).join("/")}function Ig(n,e){if(!n.hasChildren())return $b(n);if(e){const t=n.children[Qt]?Ig(n.children[Qt],!1):"",i=[];return pr(n.children,(r,s)=>{s!==Qt&&i.push(`${s}:${Ig(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function h$(n,e){let t=[];return pr(n.children,(i,r)=>{r===Qt&&(t=t.concat(e(i,r)))}),pr(n.children,(i,r)=>{r!==Qt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Qt?[Ig(n.children[Qt],!1)]:[`${r}:${Ig(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${$b(n)}/${t[0]}`:`${$b(n)}/(${t.join("//")})`}}function iP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zb(n){return iP(n).replace(/%3B/gi,";")}function $D(n){return iP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gb(n){return decodeURIComponent(n)}function rP(n){return Gb(n.replace(/\+/g,"%20"))}function sP(n){return`${$D(n.path)}${function g$(n){return Object.keys(n).map(e=>`;${$D(e)}=${$D(n[e])}`).join("")}(n.parameters)}`}const _$=/^[^\/()?;=#]+/;function Wb(n){const e=n.match(_$);return e?e[0]:""}const v$=/^[^=?&#]+/,y$=/^[^&#]+/;class C${constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Qt]=new cn(e,t)),i}parseSegment(){const e=Wb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Tg(Gb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Wb(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Wb(this.remaining);r&&(i=r,this.capture(i))}e[Gb(t)]=Gb(i)}parseQueryParam(e){const t=function b$(n){const e=n.match(v$);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function w$(n){const e=n.match(y$);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=rP(t),s=rP(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Wb(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Qt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Qt]:new cn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class oP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=zD(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=zD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=GD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return GD(e,this._root).map(t=>t.value)}}function zD(n,e){if(n===e.value)return e;for(const t of e.children){const i=zD(n,t);if(i)return i}return null}function GD(n,e){if(n===e.value)return[e];for(const t of e.children){const i=GD(n,t);if(i.length)return i.unshift(e),i}return[]}class el{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Dh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class aP extends oP{constructor(e,t){super(e),this.snapshot=t,WD(this,e)}toString(){return this.snapshot.toString()}}function lP(n,e){const t=function E$(n,e){const o=new qb([],{},{},"",{},Qt,e,null,n.root,-1,{});return new uP("",new el(o,[]))}(n,e),i=new no([new Tg("",{})]),r=new no({}),s=new no({}),o=new no({}),a=new no(""),c=new va(i,r,o,a,s,Qt,e,t.root);return c.snapshot=t.root,new aP(new el(c,[]),t)}class va{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(mn(e=>Eh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(mn(e=>Eh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cP(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function D$(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class qb{constructor(e,t,i,r,s,o,a,c,d,f,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=d,this._lastPathIndex=f,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Eh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Eh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uP extends oP{constructor(e,t){super(t),this.url=e,WD(this,t)}toString(){return dP(this._root)}}function WD(n,e){e.value._routerState=n,e.children.forEach(t=>WD(n,t))}function dP(n){const e=n.children.length>0?` { ${n.children.map(dP).join(", ")} } `:"";return`${n.value}${e}`}function qD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ma(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ma(e.params,t.params)||n.params.next(t.params),function o$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ma(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ma(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ZD(n,e){const t=ma(n.params,e.params)&&function d$(n,e){return yu(n,e)&&n.every((t,i)=>ma(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ZD(n.parent,e.parent))}function Og(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function A$(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Og(n,i,r);return Og(n,i)})}(n,e,t);return new el(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Og(n,a)),o}}const i=function x$(n){return new va(new no(n.url),new no(n.params),new no(n.queryParams),new no(n.fragment),new no(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Og(n,s));return new el(i,r)}}function Zb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Pg(n){return"object"==typeof n&&null!=n&&n.outlets}function KD(n,e,t,i,r){let s={};if(i&&pr(i,(a,c)=>{s[c]=Array.isArray(a)?a.map(d=>`${d}`):`${a}`}),n===e)return new bu(t,s,r);const o=hP(n,e,t);return new bu(o,s,r)}function hP(n,e,t){const i={};return pr(n.children,(r,s)=>{i[s]=r===e?t:hP(r,e,t)}),new cn(n.segments,i)}class fP{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Zb(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Pg);if(r&&r!==KO(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class YD{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function pP(n,e,t){if(n||(n=new cn([],{})),0===n.segments.length&&n.hasChildren())return Kb(n,e,t);const i=function k$(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Pg(a))break;const c=`${a}`,d=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&d&&"object"==typeof d&&void 0===d.outlets){if(!mP(c,d,o))return s;i+=2}else{if(!mP(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new cn(n.segments.slice(0,i.pathIndex),{});return s.children[Qt]=new cn(n.segments.slice(i.pathIndex),n.children),Kb(s,0,r)}return i.match&&0===r.length?new cn(n.segments,{}):i.match&&!n.hasChildren()?QD(n,e,t):i.match?Kb(n,0,r):QD(n,e,t)}function Kb(n,e,t){if(0===t.length)return new cn(n.segments,{});{const i=function P$(n){return Pg(n[0])?n[0].outlets:{[Qt]:n}}(t),r={};return pr(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=pP(n.children[o],e,s))}),pr(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new cn(n.segments,r)}}function QD(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Pg(s)){const c=R$(s.outlets);return new cn(i,c)}if(0===r&&Zb(t[0])){i.push(new Tg(n.segments[e].path,gP(t[0]))),r++;continue}const o=Pg(s)?s.outlets[Qt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Zb(a)?(i.push(new Tg(o,gP(a))),r+=2):(i.push(new Tg(o,{})),r++)}return new cn(i,{})}function R$(n){const e={};return pr(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=QD(new cn([],{}),0,t))}),e}function gP(n){const e={};return pr(n,(t,i)=>e[i]=`${t}`),e}function mP(n,e,t){return n==t.path&&ma(e,t.parameters)}class N${constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),qD(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Dh(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),pr(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Dh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Dh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Dh(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new n$(s.value.snapshot))}),e.children.length&&this.forwardEvent(new e$(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(qD(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),qD(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function L$(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),c=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=c,o.outlet&&o.outlet.activateWith(r,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class XD{constructor(e,t){this.routes=e,this.module=t}}function Ql(n){return"function"==typeof n}function wu(n){return n instanceof bu}const kg=Symbol("INITIAL_VALUE");function Rg(){return Xa(n=>function vU(...n){let e,t;return zo(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&Rn(n[0])&&(n=n[0]),Xh(n,t).lift(new bU(e))}(n.map(e=>e.pipe(ga(1),Ag(kg)))).pipe(BO((e,t)=>{let i=!1;return t.reduce((r,s,o)=>r!==kg?r:(s===kg&&(i=!0),i||!1!==s&&o!==t.length-1&&!wu(s)?r:s),e)},kg),io(e=>e!==kg),mn(e=>wu(e)?e:!0===e),ga(1)))}class $${constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Fg,this.attachRef=null}}class Fg{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new $$,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let JD=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new tn,this.deactivateEvents=new tn,this.attachEvents=new tn,this.detachEvents=new tn,this.name=s||Qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,c=new z$(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,c),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(L(Fg),L(Wr),L(Wl),function Ol(n){return function t_(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(Pf(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Ai(),n)}("name"),L(Js))},n.\u0275dir=Ne({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class z${constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===va?this.route:e===Fg?this.childContexts:this.parent.get(e,t)}}let _P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Cn({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&At(0,"router-outlet")},directives:[JD],encapsulation:2}),n})();function vP(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];G$(i,W$(e,i))}}function G$(n,e){n.children&&vP(n.children,e)}function W$(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function eS(n){const e=n.children&&n.children.map(eS),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=_P),t}function ro(n){return n.outlet||Qt}function bP(n,e){const t=n.filter(i=>ro(i)===e);return t.push(...n.filter(i=>ro(i)!==e)),t}const yP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yb(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},yP):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||s$)(t,n,e);if(!s)return Object.assign({},yP);const o={};pr(s.posParams,(c,d)=>{o[d]=c.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function Qb(n,e,t,i,r="corrected"){if(t.length>0&&function K$(n,e,t){return t.some(i=>Xb(n,e,i)&&ro(i)!==Qt)}(n,t,i)){const o=new cn(e,function Z$(n,e,t,i){const r={};r[Qt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ro(s)!==Qt){const o=new cn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[ro(s)]=o}return r}(n,e,i,new cn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function Y$(n,e,t){return t.some(i=>Xb(n,e,i))}(n,t,i)){const o=new cn(n.segments,function q$(n,e,t,i,r,s){const o={};for(const a of i)if(Xb(n,t,a)&&!r[ro(a)]){const c=new cn([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[ro(a)]=c}return Object.assign(Object.assign({},r),o)}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new cn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Xb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function wP(n,e,t,i){return!!(ro(n)===i||i!==Qt&&Xb(e,t,n))&&("**"===n.path||Yb(e,n,t).matched)}function CP(n,e,t){return 0===e.length&&!n.children[t]}class Jb{constructor(e){this.segmentGroup=e||null}}class EP{constructor(e){this.urlTree=e}}function Ng(n){return jb(new Jb(n))}function DP(n){return jb(new EP(n))}function Q$(n){return jb(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class ez{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Za)}apply(){const e=Qb(this.urlTree.root,[],[],this.config).segmentGroup,t=new cn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Qt).pipe(mn(s=>this.createUrlTree(tS(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vu(s=>{if(s instanceof EP)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Jb?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Qt).pipe(mn(r=>this.createUrlTree(tS(r),e.queryParams,e.fragment))).pipe(vu(r=>{throw r instanceof Jb?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new cn([],{[Qt]:e}):e;return new bu(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(mn(s=>new cn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Qi(r).pipe(xg(s=>{const o=i.children[s],a=bP(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(mn(c=>({segment:c,outlet:s})))}),BO((s,o)=>(s[o.outlet]=o.segment,s),{}),function HU(n,e){const t=arguments.length>=2;return i=>i.pipe(n?io((r,s)=>n(r,s,i)):ms,jD(1),t?HO(e):jO(()=>new Hb))}())}expandSegment(e,t,i,r,s,o){return Qi(i).pipe(xg(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(vu(d=>{if(d instanceof Jb)return yt(null);throw d}))),Ch(a=>!!a),vu((a,c)=>{if(a instanceof Hb||"EmptyError"===a.name)return CP(t,r,s)?yt(new cn([],{})):Ng(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return wP(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):Ng(t):Ng(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?DP(s):this.lineralizeSegments(i,s).pipe(zi(o=>{const a=new cn(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:d,positionalParamSegments:f}=Yb(t,r,s);if(!a)return Ng(t);const p=this.applyRedirectCommands(c,r.redirectTo,f);return r.redirectTo.startsWith("/")?DP(p):this.lineralizeSegments(r,p).pipe(zi(_=>this.expandSegment(e,t,i,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?yt(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(mn(p=>(i._loadedConfig=p,new cn(r,{})))):yt(new cn(r,{}));const{matched:o,consumedSegments:a,remainingSegments:c}=Yb(t,i,r);return o?this.getChildConfig(e,i,r).pipe(zi(f=>{const p=f.module,_=f.routes,{segmentGroup:y,slicedSegments:w}=Qb(t,a,c,_),I=new cn(y.segments,y.children);if(0===w.length&&I.hasChildren())return this.expandChildren(p,_,I).pipe(mn(J=>new cn(a,J)));if(0===_.length&&0===w.length)return yt(new cn(a,{}));const k=ro(i)===s;return this.expandSegment(p,I,_,w,k?Qt:s,!0).pipe(mn(B=>new cn(a.concat(B.segments),B.children)))})):Ng(t)}getChildConfig(e,t,i){return t.children?yt(new XD(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?yt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(zi(r=>r?this.configLoader.load(e.injector,t).pipe(mn(s=>(t._loadedConfig=s,s))):function X$(n){return jb(UD(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):yt(new XD([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;if(!r||0===r.length)return yt(!0);const s=r.map(o=>{const a=e.get(o);let c;if(function B$(n){return n&&Ql(n.canLoad)}(a))c=a.canLoad(t,i);else{if(!Ql(a))throw new Error("Invalid CanLoad guard");c=a(t,i)}return _a(c)});return yt(s).pipe(Rg(),hs(o=>{if(!wu(o))return;const a=UD(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),mn(o=>!0===o))}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return yt(i);if(r.numberOfChildren>1||!r.children[Qt])return Q$(e.redirectTo);r=r.children[Qt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new bu(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return pr(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return pr(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new cn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function tS(n){const e={};for(const i of Object.keys(n.children)){const s=tS(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function tz(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new cn(n.segments.concat(e.segments),e.children)}return n}(new cn(n.segments,e))}class SP{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ey{constructor(e,t){this.component=e,this.route=t}}function iz(n,e,t){const i=n._root;return Lg(i,e?e._root:null,t,[i.value])}function ty(n,e,t){const i=function sz(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function Lg(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Dh(e);return n.children.forEach(o=>{(function oz(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function az(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!yu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yu(n.url,e.url)||!ma(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ZD(n,e)||!ma(n.queryParams,e.queryParams);default:return!ZD(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new SP(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Lg(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ey(a.outlet.component,o))}else o&&Vg(e,a,r),r.canActivateChecks.push(new SP(i)),Lg(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),pr(s,(o,a)=>Vg(o,t.getContext(a),r)),r}function Vg(n,e,t){const i=Dh(n),r=n.value;pr(i,(s,o)=>{Vg(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new ey(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class mz{}function AP(n){return new wn(e=>e.error(n))}class vz{constructor(e,t,i,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Qb(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Qt);if(null===t)return null;const i=new qb([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new el(i,t),s=new uP(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=cP(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=bP(e,s),c=this.processSegmentGroup(a,o,s);if(null===c)return null;i.push(...c)}const r=xP(i);return function bz(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,i,r);if(null!==o)return o}return CP(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!wP(e,t,i,r))return null;let s,o=[],a=[];if("**"===e.path){const y=i.length>0?KO(i).parameters:{};s=new qb(i,y,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,IP(e),ro(e),e.component,e,MP(t),TP(t)+i.length,OP(e))}else{const y=Yb(t,e,i);if(!y.matched)return null;o=y.consumedSegments,a=y.remainingSegments,s=new qb(o,y.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,IP(e),ro(e),e.component,e,MP(t),TP(t)+o.length,OP(e))}const c=function yz(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:d,slicedSegments:f}=Qb(t,o,a,c.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution);if(0===f.length&&d.hasChildren()){const y=this.processChildren(c,d);return null===y?null:[new el(s,y)]}if(0===c.length&&0===f.length)return[new el(s,[])];const p=ro(e)===r,_=this.processSegment(c,d,f,p?Qt:r);return null===_?null:[new el(s,_)]}}function wz(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xP(n){const e=[],t=new Set;for(const i of n){if(!wz(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=xP(i.children);e.push(new el(i.value,r))}return e.filter(i=>!t.has(i))}function MP(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function TP(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function IP(n){return n.data||{}}function OP(n){return n.resolve||{}}function PP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nS(n){return Xa(e=>{const t=n(e);return t?Qi(t).pipe(mn(()=>e)):yt(e)})}class Tz extends class Mz{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const iS=new ke("ROUTES");class kP{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(mn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new XD(ZO(o.injector.get(iS,void 0,St.Self|St.Optional)).map(eS),o)}),vu(s=>{throw t._loader$=void 0,s}));return t._loader$=new bm(r,()=>new qt).pipe(Jh()),t._loader$}loadModuleFactory(e){return _a(e()).pipe(zi(t=>t instanceof KM?yt(t):Qi(this.compiler.compileModuleAsync(t))))}}class Oz{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Pz(n){throw n}function kz(n,e,t){return e.parse("/")}function RP(n,e){return yt(null)}const Rz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gr=(()=>{class n{constructor(t,i,r,s,o,a,c){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new qt,this.errorHandler=Pz,this.malformedUriErrorHandler=kz,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:RP,afterPreactivation:RP},this.urlHandlingStrategy=new Oz,this.routeReuseStrategy=new Tz,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Za),this.console=o.get(e3);const p=o.get(fn);this.isNgZoneEnabled=p instanceof fn&&fn.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function a$(){return new bu(new cn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new kP(o,a,_=>this.triggerEvent(new $O(_)),_=>this.triggerEvent(new zO(_))),this.routerState=lP(this.currentUrlTree,this.rootComponentType),this.transitions=new no({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(io(r=>0!==r.id),mn(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Xa(r=>{let s=!1,o=!1;return yt(r).pipe(hs(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Xa(a=>{const c=this.browserUrlTree.toString(),d=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return FP(a.source)&&(this.browserUrlTree=a.extractedUrl),yt(a).pipe(Xa(p=>{const _=this.transitions.getValue();return i.next(new HD(p.id,this.serializeUrl(p.extractedUrl),p.source,p.restoredState)),_!==this.transitions.getValue()?_u:Promise.resolve(p)}),function nz(n,e,t,i){return Xa(r=>function J$(n,e,t,i,r){return new ez(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(mn(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),hs(p=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:p.urlAfterRedirects})}),function Cz(n,e,t,i,r){return zi(s=>function _z(n,e,t,i,r="emptyOnly",s="legacy"){try{const o=new vz(n,e,t,i,r,s).recognize();return null===o?AP(new mz):yt(o)}catch(o){return AP(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe(mn(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,p=>this.serializeUrl(p),this.paramsInheritanceStrategy,this.relativeLinkResolution),hs(p=>{if("eager"===this.urlUpdateStrategy){if(!p.extras.skipLocationChange){const y=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);this.setBrowserUrl(y,p)}this.browserUrlTree=p.urlAfterRedirects}const _=new ZU(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);i.next(_)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_,extractedUrl:y,source:w,restoredState:I,extras:k}=a,j=new HD(_,this.serializeUrl(y),w,I);i.next(j);const B=lP(y,this.rootComponentType).snapshot;return yt(Object.assign(Object.assign({},a),{targetSnapshot:B,urlAfterRedirects:y,extras:Object.assign(Object.assign({},k),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),_u}),nS(a=>{const{targetSnapshot:c,id:d,extractedUrl:f,rawUrl:p,extras:{skipLocationChange:_,replaceUrl:y}}=a;return this.hooks.beforePreactivation(c,{navigationId:d,appliedUrlTree:f,rawUrlTree:p,skipLocationChange:!!_,replaceUrl:!!y})}),hs(a=>{const c=new KU(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),mn(a=>Object.assign(Object.assign({},a),{guards:iz(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function lz(n,e){return zi(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?yt(Object.assign(Object.assign({},t),{guardsResult:!0})):function cz(n,e,t,i){return Qi(n).pipe(zi(r=>function gz(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?yt(s.map(a=>{const c=ty(a,e,r);let d;if(function U$(n){return n&&Ql(n.canDeactivate)}(c))d=_a(c.canDeactivate(n,e,t,i));else{if(!Ql(c))throw new Error("Invalid CanDeactivate guard");d=_a(c(n,e,t,i))}return d.pipe(Ch())})).pipe(Rg()):yt(!0)}(r.component,r.route,t,e,i)),Ch(r=>!0!==r,!0))}(o,i,r,n).pipe(zi(a=>a&&function V$(n){return"boolean"==typeof n}(a)?function uz(n,e,t,i){return Qi(e).pipe(xg(r=>LD(function hz(n,e){return null!==n&&e&&e(new JU(n)),yt(!0)}(r.route.parent,i),function dz(n,e){return null!==n&&e&&e(new t$(n)),yt(!0)}(r.route,i),function pz(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function rz(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>BD(()=>yt(o.guards.map(c=>{const d=ty(c,o.node,t);let f;if(function H$(n){return n&&Ql(n.canActivateChild)}(d))f=_a(d.canActivateChild(i,n));else{if(!Ql(d))throw new Error("Invalid CanActivateChild guard");f=_a(d(i,n))}return f.pipe(Ch())})).pipe(Rg())));return yt(s).pipe(Rg())}(n,r.path,t),function fz(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return yt(!0);const r=i.map(s=>BD(()=>{const o=ty(s,e,t);let a;if(function j$(n){return n&&Ql(n.canActivate)}(o))a=_a(o.canActivate(e,n));else{if(!Ql(o))throw new Error("Invalid CanActivate guard");a=_a(o(e,n))}return a.pipe(Ch())}));return yt(r).pipe(Rg())}(n,r.route,t))),Ch(r=>!0!==r,!0))}(i,s,n,e):yt(a)),mn(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),hs(a=>{if(wu(a.guardsResult)){const d=UD(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw d.url=a.guardsResult,d}const c=new YU(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),io(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),nS(a=>{if(a.guards.canActivateChecks.length)return yt(a).pipe(hs(c=>{const d=new QU(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}),Xa(c=>{let d=!1;return yt(c).pipe(function Ez(n,e){return zi(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return yt(t);let s=0;return Qi(r).pipe(xg(o=>function Dz(n,e,t,i){return function Sz(n,e,t,i){const r=PP(n);if(0===r.length)return yt({});const s={};return Qi(r).pipe(zi(o=>function Az(n,e,t,i){const r=ty(n,e,i);return _a(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(hs(a=>{s[o]=a}))),jD(1),zi(()=>PP(s).length===r.length?yt(s):_u))}(n._resolve,n,e,i).pipe(mn(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),cP(n,t).resolve),null)))}(o.route,i,n,e)),hs(()=>s++),jD(1),zi(o=>s===r.length?yt(t):_u))})}(this.paramsInheritanceStrategy,this.ngModule.injector),hs({next:()=>d=!0,complete:()=>{d||(this.restoreHistory(c),this.cancelNavigationTransition(c,"At least one route resolver didn't emit any value."))}}))}),hs(c=>{const d=new XU(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}))}),nS(a=>{const{targetSnapshot:c,id:d,extractedUrl:f,rawUrl:p,extras:{skipLocationChange:_,replaceUrl:y}}=a;return this.hooks.afterPreactivation(c,{navigationId:d,appliedUrlTree:f,rawUrlTree:p,skipLocationChange:!!_,replaceUrl:!!y})}),mn(a=>{const c=function S$(n,e,t){const i=Og(n,e._root,t?t._root:void 0);return new aP(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:c})}),hs(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>mn(i=>(new N$(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),hs({next(){s=!0},complete(){s=!0}}),function zU(n){return e=>e.lift(new GU(n))}(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),vu(a=>{if(o=!0,function r$(n){return n&&n[WO]}(a)){const c=wu(a.url);c||(this.navigated=!0,this.restoreHistory(r,!0));const d=new UO(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(d),c?setTimeout(()=>{const f=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),p={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||FP(r.source)};this.scheduleNavigation(f,"imperative",null,p,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const c=new qU(r.id,this.serializeUrl(r.extractedUrl),a);i.next(c);try{r.resolve(this.errorHandler(a))}catch(d){r.reject(d)}}return _u}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(o){const c=Object.assign({},o);delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){vP(t),this.config=t.map(eS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,d=r||this.routerState.root,f=c?this.currentUrlTree.fragment:o;let p=null;switch(a){case"merge":p=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}return null!==p&&(p=this.removeEmptyProps(p)),function M$(n,e,t,i,r){if(0===t.length)return KD(e.root,e.root,e.root,i,r);const s=function T$(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new fP(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return pr(s.outlets,(c,d)=>{a[d]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new fP(t,e,i)}(t);if(s.toRoot())return KD(e.root,e.root,new cn([],{}),i,r);const o=function I$(n,e,t){if(n.isAbsolute)return new YD(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new YD(s,s===e.root,0)}const i=Zb(n.commands[0])?0:1;return function O$(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new YD(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?Kb(o.segmentGroup,o.index,s.commands):pP(o.segmentGroup,o.index,s.commands);return KD(e.root,o.segmentGroup,a,i,r)}(d,this.currentUrlTree,t,p,null!=f?f:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=wu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Nz(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},Rz):!1===i?Object.assign({},Fz):i,wu(t))return QO(this.currentUrlTree,t,r);const s=this.parseUrl(t);return QO(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Mg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){var a,c;if(this.disposed)return Promise.resolve(!1);let d,f,p;o?(d=o.resolve,f=o.reject,p=o.promise):p=new Promise((w,I)=>{d=w,f=I});const _=++this.navigationId;let y;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),y=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):y=0,this.setTransition({id:_,targetPageId:y,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:d,reject:f,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(w=>Promise.reject(w))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new UO(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){Uv()},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();function FP(n){return"imperative"!==n}class NP{}class LP{preload(e,t){return yt(null)}}let VP=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new kP(r,i,c=>t.triggerEvent(new $O(c)),c=>t.triggerEvent(new zO(c)))}setUpPreloading(){this.subscription=this.router.events.pipe(io(t=>t instanceof Mg),xg(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Za);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return Qi(r).pipe(vl(),mn(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?yt(i._loadedConfig):this.loader.load(t.injector,i)).pipe(zi(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(ne(gr),ne(RT),ne(T),ne(NP))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),oS=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof HD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof GO&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new GO(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Uv()},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();const Cu=new ke("ROUTER_CONFIGURATION"),BP=new ke("ROUTER_FORROOT_GUARD"),jz=[dg,{provide:tP,useClass:nP},{provide:gr,useFactory:function Wz(n,e,t,i,r,s,o={},a,c){const d=new gr(null,n,e,t,i,r,ZO(s));return a&&(d.urlHandlingStrategy=a),c&&(d.routeReuseStrategy=c),function qz(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,d),o.enableTracing&&d.events.subscribe(f=>{var p,_;null===(p=console.group)||void 0===p||p.call(console,`Router Event: ${f.constructor.name}`),console.log(f.toString()),console.log(f),null===(_=console.groupEnd)||void 0===_||_.call(console)}),d},deps:[tP,Fg,dg,T,RT,iS,Cu,[class Iz{},new xo],[class xz{},new xo]]},Fg,{provide:va,useFactory:function Zz(n){return n.routerState.root},deps:[gr]},VP,LP,class Bz{preload(e,t){return t().pipe(vu(()=>yt(null)))}},{provide:Cu,useValue:{enableTracing:!1}}];function Hz(){return new BT("Router",gr)}let Uz=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[jz,jP(t),{provide:BP,useFactory:Gz,deps:[[gr,new xo,new Gc]]},{provide:Cu,useValue:i||{}},{provide:_h,useFactory:zz,deps:[du,[new rs(zE),new xo],Cu]},{provide:oS,useFactory:$z,deps:[gr,NH,Cu]},{provide:NP,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:LP},{provide:BT,multi:!0,useFactory:Hz},[aS,{provide:ME,multi:!0,useFactory:Kz,deps:[aS]},{provide:HP,useFactory:Yz,deps:[aS]},{provide:kT,multi:!0,useExisting:HP}]]}}static forChild(t){return{ngModule:n,providers:[jP(t)]}}}return n.\u0275fac=function(t){return new(t||n)(ne(BP,8),ne(gr,8))},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({}),n})();function $z(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new oS(n,e,t)}function zz(n,e,t={}){return t.useHash?new q3(n,e):new rI(n,e)}function Gz(n){return"guarded"}function jP(n){return[{provide:tw,multi:!0,useValue:n},{provide:iS,multi:!0,useValue:n}]}let aS=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new qt}appInitializer(){return this.injector.get(z3,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(gr),o=this.injector.get(Cu);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?yt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Cu),r=this.injector.get(VP),s=this.injector.get(oS),o=this.injector.get(gr),a=this.injector.get(rb);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(ne(T))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();function Kz(n){return n.appInitializer.bind(n)}function Yz(n){return n.bootstrapListener.bind(n)}const HP=new ke("Router Initializer");let lS;try{lS="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){lS=!1}let Bg,Eu,cS,Ps=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Bj(n){return n===_I}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!lS)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(ne(OE))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ny(n){return function Xz(){if(null==Bg&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Bg=!0}))}finally{Bg=Bg||!1}return Bg}()?n:!!n.capture}function Jz(){if(null==Eu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Eu=!1,Eu;if("scrollBehavior"in document.documentElement.style)Eu=!0;else{const n=Element.prototype.scrollTo;Eu=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Eu}function uS(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Du(n){return n.composedPath?n.composedPath()[0]:n.target}function dS(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function hS(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class w9 extends Te{constructor(e,t){super()}schedule(e,t=0){return this}}class fS extends w9{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let $P=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class ba extends $P{constructor(e,t=$P.now){super(e,()=>ba.delegate&&ba.delegate!==this?ba.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return ba.delegate&&ba.delegate!==this?ba.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const pS=new ba(fS);function zP(n,e=pS){return t=>t.lift(new C9(n,e))}class C9{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new E9(e,this.dueTime,this.scheduler))}}class E9 extends Dt{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(D9,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function D9(n){n.debouncedNext()}function GP(n){return e=>e.lift(new S9(n))}class S9{constructor(e){this.total=e}call(e,t){return t.subscribe(new A9(e,this.total))}}class A9 extends Dt{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function WP(n,e){return t=>t.lift(new x9(n,e))}class x9{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new M9(e,this.compare,this.keySelector))}}class M9 extends Dt{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}function Xl(n){return e=>e.lift(new T9(n))}class T9{constructor(e){this.notifier=e}call(e,t){const i=new I9(e),r=wc(this.notifier,new Aa(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class I9 extends yc{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Su(n){return null!=n&&"false"!=`${n}`}function ry(n,e=0){return function O9(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function qP(n){return Array.isArray(n)?n:[n]}function Ui(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Au(n){return n instanceof yn?n.nativeElement:n}let ZP=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P9=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=Au(t);return new wn(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new qt,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(ne(ZP))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k9=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new tn,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Su(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=ry(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(zP(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(L(P9),L(yn),L(fn))},n.\u0275dir=Ne({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),gS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({providers:[ZP]}),n})();class L9 extends class N9{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new qt,this._typeaheadSubscription=Te.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new qt,this.change=new qt,e instanceof gh&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(hs(t=>this._pressedLetters.push(t)),zP(e),io(()=>this._pressedLetters.length>0),mn(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||hS(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof gh?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let QP=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function B9(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function V9(n){try{return n.frameElement}catch(e){return null}}(function q9(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===JP(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=JP(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function G9(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function W9(n){return!function H9(n){return function $9(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function j9(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function U9(n){return function z9(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||XP(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(ne(Ps))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XP(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function JP(n){if(!XP(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Z9{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(ga(1)).subscribe(e)}}let K9=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Z9(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(ne(QP),ne(fn),ne(Sn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ek(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function tk(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Y9=new ke("cdk-input-modality-detector-options"),Q9={ignoreKeys:[18,17,224,91,16]},xh=ny({passive:!0,capture:!0});let X9=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new no(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,c;(null===(c=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===c?void 0:c.some(d=>d===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Du(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(ek(o)?"keyboard":"mouse"),this._mostRecentTarget=Du(o))},this._onTouchstart=o=>{tk(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Du(o))},this._options=Object.assign(Object.assign({},Q9),s),this.modalityDetected=this._modality.pipe(GP(1)),this.modalityChanged=this.modalityDetected.pipe(WP()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,xh),r.addEventListener("mousedown",this._onMousedown,xh),r.addEventListener("touchstart",this._onTouchstart,xh)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,xh),document.removeEventListener("mousedown",this._onMousedown,xh),document.removeEventListener("touchstart",this._onTouchstart,xh))}}return n.\u0275fac=function(t){return new(t||n)(ne(Ps),ne(fn),ne(Sn),ne(Y9,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const e8=new ke("cdk-focus-monitor-default-options"),sy=ny({passive:!0,capture:!0});let mS=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new qt,this._rootNodeFocusAndBlurListener=a=>{const c=Du(a),d="focus"===a.type?this._onFocus:this._onBlur;for(let f=c;f;f=f.parentElement)d.call(this,a,f)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=Au(t);if(!this._platform.isBrowser||1!==r.nodeType)return yt(null);const s=function t9(n){if(function e9(){if(null==cS){const n="undefined"!=typeof document?document.head:null;cS=!(!n||!n.createShadowRoot&&!n.attachShadow)}return cS}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new qt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Au(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Au(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Du(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,sy),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,sy)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Xl(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,sy),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,sy),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(ne(fn),ne(Ps),ne(X9),ne(Sn,8),ne(e8,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t8=(()=>{class n{constructor(t,i){this._elementRef=t,this._focusMonitor=i,this.cdkFocusChange=new tn}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>this.cdkFocusChange.emit(i))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(mS))},n.\u0275dir=Ne({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),n})();const ik="cdk-high-contrast-black-on-white",rk="cdk-high-contrast-white-on-black",_S="cdk-high-contrast-active";let sk=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(_S),t.remove(ik),t.remove(rk),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(_S),t.add(ik)):2===i&&(t.add(_S),t.add(rk))}}}return n.\u0275fac=function(t){return new(t||n)(ne(Ps),ne(Sn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),n8=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(ne(sk))},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[gS]]}),n})();class vS{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class bS extends vS{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class yS extends vS{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class r8 extends vS{constructor(e){super(),this.element=e instanceof yn?e.nativeElement:e}}class wS{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof bS?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof yS?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof r8?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class s8 extends wS{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||T.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let jg=(()=>{class n extends wS{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new tn,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(L(Wl),L(Wr),L(Sn))},n.\u0275dir=Ne({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[jt]}),n})(),CS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({}),n})();const o8=new ke("cdk-dir-doc",{providedIn:"root",factory:function a8(){return Cd(Sn)}}),l8=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Jl=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new tn,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function c8(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?l8.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(ne(o8,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({}),n})();class ak{}const tl="*";function Ug(n,e){return{type:7,name:n,definitions:e,options:{}}}function ec(n,e=null){return{type:4,styles:e,timings:n}}function lk(n,e=null){return{type:3,steps:n,options:e}}function ck(n,e=null){return{type:2,steps:n,options:e}}function mr(n){return{type:6,styles:n,offset:null}}function nl(n,e,t){return{type:0,name:n,styles:e,options:t}}function il(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function ES(n=null){return{type:9,options:n}}function DS(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function uk(n){Promise.resolve(null).then(n)}class $g{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){uk(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class dk{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?uk(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const un=!1;function hk(n){return new Ue(3e3,un)}function z8(){return"undefined"!=typeof window&&void 0!==window.document}function AS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function tc(n){switch(n.length){case 0:return new $g;case 1:return n[0];default:return new dk(n)}}function fk(n,e,t,i,r={},s={}){const o=[],a=[];let c=-1,d=null;if(i.forEach(f=>{const p=f.offset,_=p==c,y=_&&d||{};Object.keys(f).forEach(w=>{let I=w,k=f[w];if("offset"!==w)switch(I=e.normalizePropertyName(I,o),k){case"!":k=r[w];break;case tl:k=s[w];break;default:k=e.normalizeStyleValue(w,I,k,o)}y[I]=k}),_||a.push(y),d=y,c=p}),o.length)throw function k8(n){return new Ue(3502,un)}();return a}function xS(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&MS(t,"start",n)));break;case"done":n.onDone(()=>i(t&&MS(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&MS(t,"destroy",n)))}}function MS(n,e,t){const i=t.totalTime,s=TS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function TS(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function ks(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function pk(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let IS=(n,e)=>!1,gk=(n,e,t)=>[],mk=null;function OS(n){const e=n.parentNode||n.host;return e===mk?null:e}(AS()||"undefined"!=typeof Element)&&(z8()?(mk=(()=>document.documentElement)(),IS=(n,e)=>{for(;e;){if(e===n)return!0;e=OS(e)}return!1}):IS=(n,e)=>n.contains(e),gk=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let xu=null,_k=!1;function vk(n){xu||(xu=function W8(){return"undefined"!=typeof document?document.body:null}()||{},_k=!!xu.style&&"WebkitAppearance"in xu.style);let e=!0;return xu.style&&!function G8(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in xu.style,!e&&_k&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in xu.style)),e}const bk=IS,yk=gk;let wk=(()=>{class n{validateStyleProperty(t){return vk(t)}matchesElement(t,i){return!1}containsElement(t,i){return bk(t,i)}getParentElement(t){return OS(t)}query(t,i,r){return yk(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],c){return new $g(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),PS=(()=>{class n{}return n.NOOP=new wk,n})();const kS="ng-enter",ay="ng-leave",ly="ng-trigger",cy=".ng-trigger",Ek="ng-animating",RS=".ng-animating";function Mu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:FS(parseFloat(e[1]),e[2])}function FS(n,e){return"s"===e?1e3*n:n}function uy(n,e,t){return n.hasOwnProperty("duration")?n:function K8(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(hk()),{duration:0,delay:0,easing:""};r=FS(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=FS(parseFloat(c),a[4]));const d=a[5];d&&(o=d)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(function d8(){return new Ue(3100,un)}()),a=!0),s<0&&(e.push(function h8(){return new Ue(3101,un)}()),a=!0),a&&e.splice(c,0,hk())}return{duration:r,delay:s,easing:o}}(n,e,t)}function Mh(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function nc(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Mh(n,t);return t}function Sk(n,e,t){return t?e+":"+t+";":""}function Ak(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=Sk(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Sk(0,X8(t),n.style[t]));n.setAttribute("style",e)}function ya(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=LS(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),AS()&&Ak(n))}function Tu(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=LS(t);n.style[i]=""}),AS()&&Ak(n))}function zg(n){return Array.isArray(n)?1==n.length?n[0]:ck(n):n}const NS=new RegExp("{{\\s*(.+?)\\s*}}","g");function xk(n){let e=[];if("string"==typeof n){let t;for(;t=NS.exec(n);)e.push(t[1]);NS.lastIndex=0}return e}function dy(n,e,t){const i=n.toString(),r=i.replace(NS,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function p8(n){return new Ue(3003,un)}()),a=""),a.toString()});return r==i?n:r}function hy(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Q8=/-+([a-z0-9])/g;function LS(n){return n.replace(Q8,(...e)=>e[1].toUpperCase())}function X8(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Rs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function g8(n){return new Ue(3004,un)}()}}function Mk(n,e){return window.getComputedStyle(n)[e]}function r6(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function s6(n,e,t){if(":"==n[0]){const c=function o6(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function T8(n){return new Ue(3016,un)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function M8(n){return new Ue(3015,un)}()),e;const r=i[1],s=i[2],o=i[3];e.push(Tk(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(Tk(o,r))}(i,t,e)):t.push(n),t}const my=new Set(["true","1"]),_y=new Set(["false","0"]);function Tk(n,e){const t=my.has(n)||_y.has(n),i=my.has(e)||_y.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?my.has(n):_y.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?my.has(e):_y.has(e)),o&&a}}const a6=new RegExp("s*:selfs*,?","g");function VS(n,e,t,i){return new l6(n).build(e,t,i)}class l6{constructor(e){this._driver=e}build(e,t,i){const r=new d6(t);this._resetContextStyleTimingState(r);const s=Rs(this,zg(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function _8(){return new Ue(3006,un)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,s.push(this.visitState(c,t))}),c.name=d}else if(1==a.type){const c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push(function v8(){return new Ue(3007,un)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{if(vy(a)){const c=a;Object.keys(c).forEach(d=>{xk(c[d]).forEach(f=>{o.hasOwnProperty(f)||s.add(f)})})}}),s.size&&(hy(s.values()),t.errors.push(function b8(n,e){return new Ue(3008,un)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Rs(this,zg(e.animation),t);return{type:1,matchers:r6(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Iu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Rs(this,i,t)),options:Iu(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Rs(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Iu(e.options)}}visitAnimate(e,t){const i=function f6(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return BS(uy(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=BS(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=uy(t,e);return BS(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:mr({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const d={};i.easing&&(d.easing=i.easing),o=mr(d)}t.currentTime+=i.duration+i.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==tl?i.push(o):t.errors.push(function y8(n){return new Ue(3002,un)}()):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(vy(o)){const a=o,c=a.easing;if(c&&(s=c,delete a.easing),!r)for(let d in a)if(a[d].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void t.unsupportedCSSPropertiesFound.add(a);const c=t.collectedStyles[t.currentQuerySelector],d=c[a];let f=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(t.errors.push(function w8(n,e,t,i,r){return new Ue(3010,un)}()),f=!1),s=d.startTime),f&&(c[a]={startTime:s,endTime:r}),t.options&&function Y8(n,e,t){const i=e.params||{},r=xk(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function f8(n){return new Ue(3001,un)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function C8(){return new Ue(3011,un)}()),i;let s=0;const o=[];let a=!1,c=!1,d=0;const f=e.steps.map(j=>{const B=this._makeStyleAst(j,t);let J=null!=B.offset?B.offset:function h6(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(vy(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(vy(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(B.styles),pe=0;return null!=J&&(s++,pe=B.offset=J),c=c||pe<0||pe>1,a=a||pe<d,d=pe,o.push(pe),B});c&&t.errors.push(function E8(){return new Ue(3012,un)}()),a&&t.errors.push(function D8(){return new Ue(3200,un)}());const p=e.steps.length;let _=0;s>0&&s<p?t.errors.push(function S8(){return new Ue(3202,un)}()):0==s&&(_=1/(p-1));const y=p-1,w=t.currentTime,I=t.currentAnimateTimings,k=I.duration;return f.forEach((j,B)=>{const J=_>0?B==y?1:_*B:o[B],pe=J*k;t.currentTime=w+I.delay+pe,I.duration=pe,this._validateStyleAst(j,t),j.offset=J,i.styles.push(j)}),i}visitReference(e,t){return{type:8,animation:Rs(this,zg(e.animation),t),options:Iu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Iu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Iu(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function c6(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(a6,"")),n=n.replace(/@\*/g,cy).replace(/@\w+/g,t=>cy+"-"+t.substr(1)).replace(/:animating/g,RS),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,ks(t.collectedStyles,t.currentQuerySelector,{});const a=Rs(this,zg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Iu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function A8(){return new Ue(3013,un)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:uy(e.timings,t.errors,!0);return{type:12,animation:Rs(this,zg(e.animation),t),timings:i,options:null}}}class d6{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vy(n){return!Array.isArray(n)&&"object"==typeof n}function Iu(n){return n?(n=Mh(n)).params&&(n.params=function u6(n){return n?Mh(n):null}(n.params)):n={},n}function BS(n,e,t){return{duration:n,delay:e,easing:t}}function jS(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class by{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const m6=new RegExp(":enter","g"),v6=new RegExp(":leave","g");function HS(n,e,t,i,r,s={},o={},a,c,d=[]){return(new b6).buildKeyframes(n,e,t,i,r,s,o,a,c,d)}class b6{buildKeyframes(e,t,i,r,s,o,a,c,d,f=[]){d=d||new by;const p=new US(e,t,d,r,s,f,[]);p.options=c,p.currentTimeline.setStyles([o],null,p.errors,c),Rs(this,i,p);const _=p.timelines.filter(y=>y.containsAnimation());if(Object.keys(a).length){let y;for(let w=_.length-1;w>=0;w--){const I=_[w];if(I.element===t){y=I;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([a],null,p.errors,c)}return _.length?_.map(y=>y.buildKeyframes()):[jS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Mu(i.duration):null,a=null!=i.delay?Mu(i.delay):null;return 0!==o&&e.forEach(c=>{const d=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,d.duration+d.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Rs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=yy);const o=Mu(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Rs(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Mu(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Rs(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return uy(t.params?dy(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Mu(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=yy);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((d,f)=>{t.currentQueryIndex=f;const p=t.createSubContext(e.options,d);s&&p.delayNextStep(s),d===t.element&&(c=p.currentTimeline),Rs(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,p.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const f=t.currentTimeline;c&&f.delayNextStep(c);const p=f.currentTime;Rs(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-p+(r.startTime-i.currentTimeline.startTime)}}const yy={};class US{constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=yy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new wy(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Mu(i.duration)),null!=i.delay&&(r.delay=Mu(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=dy(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new US(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=yy,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new y6(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(m6,"."+this._enterClassName)).replace(v6,"."+this._leaveClassName);let d=this._driver.query(this.element,e,1!=i);0!==i&&(d=i<0?d.slice(d.length+i,d.length):d.slice(0,i)),a.push(...d)}return!s&&0==a.length&&o.push(function x8(n){return new Ue(3014,un)}()),a}}class wy{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new wy(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||tl,this._currentKeyframe[t]=tl}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function w6(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=tl})):nc(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const c=dy(o[a],s,i);this._pendingStyles[a]=c,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:tl),this._updateStyle(a,c)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,c)=>{const d=nc(a,!0);Object.keys(d).forEach(f=>{const p=d[f];"!"==p?e.add(f):p==tl&&t.add(f)}),i||(d.offset=c/this.duration),r.push(d)});const s=e.size?hy(e.values()):[],o=t.size?hy(t.values()):[];if(i){const a=r[0],c=Mh(a);a.offset=0,c.offset=1,r=[a,c]}return jS(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class y6 extends wy{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,c=nc(e[0],!1);c.offset=0,s.push(c);const d=nc(e[0],!1);d.offset=Pk(a),s.push(d);const f=e.length-1;for(let p=1;p<=f;p++){let _=nc(e[p],!1);_.offset=Pk((t+_.offset*i)/o),s.push(_)}i=o,t=0,r="",e=s}return jS(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function Pk(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class $S{}class C6 extends $S{normalizePropertyName(e,t){return LS(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(E6[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function m8(n,e){return new Ue(3005,un)}())}return o+s}}const E6=(()=>function D6(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function kk(n,e,t,i,r,s,o,a,c,d,f,p,_){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:f,totalTime:p,errors:_}}const zS={};class Rk{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function S6(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,c,d,f){const p=[],_=this.ast.options&&this.ast.options.params||zS,w=this.buildStyles(i,a&&a.params||zS,p),I=c&&c.params||zS,k=this.buildStyles(r,I,p),j=new Set,B=new Map,J=new Map,pe="void"===r,De={params:Object.assign(Object.assign({},_),I)},zt=f?[]:HS(e,t,this.ast.animation,s,o,w,k,De,d,p);let bt=0;if(zt.forEach(Tt=>{bt=Math.max(Tt.duration+Tt.delay,bt)}),p.length)return kk(t,this._triggerName,i,r,pe,w,k,[],[],B,J,bt,p);zt.forEach(Tt=>{const ft=Tt.element,an=ks(B,ft,{});Tt.preStyleProps.forEach(Pn=>an[Pn]=!0);const qn=ks(J,ft,{});Tt.postStyleProps.forEach(Pn=>qn[Pn]=!0),ft!==t&&j.add(ft)});const Rt=hy(j.values());return kk(t,this._triggerName,i,r,pe,w,k,zt,Rt,B,J,bt)}}class A6{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Mh(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let c=o[a];c.length>1&&(c=dy(c,r,t));const d=this.normalizer.normalizePropertyName(a,t);c=this.normalizer.normalizeStyleValue(a,d,c,t),i[d]=c})}}),i}}class M6{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new A6(r.style,r.options&&r.options.params||{},i)}),Fk(this.states,"true","1"),Fk(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Rk(e,r,this.states))}),this.fallbackTransition=function T6(n,e,t){return new Rk(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function Fk(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const I6=new by;class O6{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=VS(this._driver,t,i,[]);if(i.length)throw function R8(n){return new Ue(3503,un)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=fk(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=HS(this._driver,t,s,kS,ay,{},{},i,I6,r),o.forEach(f=>{const p=ks(a,f.element,{});f.postStyleProps.forEach(_=>p[_]=null)})):(r.push(function F8(){return new Ue(3300,un)}()),o=[]),r.length)throw function N8(n){return new Ue(3504,un)}();a.forEach((f,p)=>{Object.keys(f).forEach(_=>{f[_]=this._driver.computeStyle(p,_,tl)})});const d=tc(o.map(f=>{const p=a.get(f.element);return this._buildPlayer(f,{},p)}));return this._playersById[e]=d,d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function L8(n){return new Ue(3301,un)}();return t}listen(e,t,i,r){const s=TS(t,"","","");return xS(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Nk="ng-animate-queued",GS="ng-animate-disabled",N6=[],Lk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},L6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},so="__ng_removed";class WS{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function H6(n){return null!=n?n:null}(i?e.value:e),i){const s=Mh(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Gg="void",qS=new WS(Gg);class V6{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,oo(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function V8(n,e){return new Ue(3302,un)}();if(null==i||0==i.length)throw function B8(n){return new Ue(3303,un)}();if(!function U6(n){return"start"==n||"done"==n}(i))throw function j8(n,e){return new Ue(3400,un)}();const s=ks(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=ks(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(oo(e,ly),oo(e,ly+"-"+t),a[t]=qS),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function H8(n){return new Ue(3401,un)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new ZS(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(oo(e,ly),oo(e,ly+"-"+t),this._engine.statesByElement.set(e,a={}));let c=a[t];const d=new WS(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a[t]=d,c||(c=qS),d.value!==Gg&&c.value===d.value){if(!function G6(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,d.params)){const I=[],k=s.matchStyles(c.value,c.params,I),j=s.matchStyles(d.value,d.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(()=>{Tu(e,k),ya(e,j)})}return}const _=ks(this._engine.playersByElement,e,[]);_.forEach(I=>{I.namespaceId==this.id&&I.triggerName==t&&I.queued&&I.destroy()});let y=s.matchTransition(c.value,d.value,e,d.params),w=!1;if(!y){if(!r)return;y=s.fallbackTransition,w=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:c,toState:d,player:o,isFallbackTransition:w}),w||(oo(e,Nk),o.onStart(()=>{Th(e,Nk)})),o.onDone(()=>{let I=this.players.indexOf(o);I>=0&&this.players.splice(I,1);const k=this._engine.playersByElement.get(e);if(k){let j=k.indexOf(o);j>=0&&k.splice(j,1)}}),this.players.push(o),_.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,cy,!0);i.forEach(r=>{if(r[so])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(c=>{if(o.set(c,s[c].value),this._triggers[c]){const d=this.trigger(e,c,Gg,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&tc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const c=this._triggers[o].fallbackTransition,d=i[o]||qS,f=new WS(Gg),p=new ZS(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:d,toState:f,player:p,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[so];(!s||s===Lk)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){oo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const c=TS(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,xS(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class B6{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new V6(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(t);for(;a;){const c=r.get(a);if(c){const d=i.indexOf(c);i.splice(d+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(i[a].hostElement,t)){i.splice(a+1,0,e),o=!0;break}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(Cy(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Cy(t))return;const s=t[so];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),oo(e,GS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Th(e,GS))}removeNode(e,t,i,r){if(Cy(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[so]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return Cy(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,cy,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,RS,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return tc(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[so];if(i&&i.setForRemoval){if(e[so]=Lk,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(GS))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)oo(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?tc(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function U8(n){return new Ue(3402,un)}()}_flushAnimations(e,t){const i=new by,r=[],s=new Map,o=[],a=new Map,c=new Map,d=new Map,f=new Set;this.disabledNodes.forEach(Oe=>{f.add(Oe);const ze=this.driver.query(Oe,".ng-animate-queued",!0);for(let Qe=0;Qe<ze.length;Qe++)f.add(ze[Qe])});const p=this.bodyNode,_=Array.from(this.statesByElement.keys()),y=jk(_,this.collectedEnterElements),w=new Map;let I=0;y.forEach((Oe,ze)=>{const Qe=kS+I++;w.set(ze,Qe),Oe.forEach(pt=>oo(pt,Qe))});const k=[],j=new Set,B=new Set;for(let Oe=0;Oe<this.collectedLeaveElements.length;Oe++){const ze=this.collectedLeaveElements[Oe],Qe=ze[so];Qe&&Qe.setForRemoval&&(k.push(ze),j.add(ze),Qe.hasAnimation?this.driver.query(ze,".ng-star-inserted",!0).forEach(pt=>j.add(pt)):B.add(ze))}const J=new Map,pe=jk(_,Array.from(j));pe.forEach((Oe,ze)=>{const Qe=ay+I++;J.set(ze,Qe),Oe.forEach(pt=>oo(pt,Qe))}),e.push(()=>{y.forEach((Oe,ze)=>{const Qe=w.get(ze);Oe.forEach(pt=>Th(pt,Qe))}),pe.forEach((Oe,ze)=>{const Qe=J.get(ze);Oe.forEach(pt=>Th(pt,Qe))}),k.forEach(Oe=>{this.processLeaveNode(Oe)})});const De=[],zt=[];for(let Oe=this._namespaceList.length-1;Oe>=0;Oe--)this._namespaceList[Oe].drainQueuedTransitions(t).forEach(Qe=>{const pt=Qe.player,ni=Qe.element;if(De.push(pt),this.collectedEnterElements.length){const ar=ni[so];if(ar&&ar.setForMove){if(ar.previousTriggersValues&&ar.previousTriggersValues.has(Qe.triggerName)){const Ea=ar.previousTriggersValues.get(Qe.triggerName),$o=this.statesByElement.get(Qe.element);$o&&$o[Qe.triggerName]&&($o[Qe.triggerName].value=Ea)}return void pt.destroy()}}const or=!p||!this.driver.containsElement(p,ni),kn=J.get(ni),Bs=w.get(ni),$n=this._buildInstruction(Qe,i,Bs,kn,or);if($n.errors&&$n.errors.length)return void zt.push($n);if(or)return pt.onStart(()=>Tu(ni,$n.fromStyles)),pt.onDestroy(()=>ya(ni,$n.toStyles)),void r.push(pt);if(Qe.isFallbackTransition)return pt.onStart(()=>Tu(ni,$n.fromStyles)),pt.onDestroy(()=>ya(ni,$n.toStyles)),void r.push(pt);const gm=[];$n.timelines.forEach(ar=>{ar.stretchStartingKeyframe=!0,this.disabledNodes.has(ar.element)||gm.push(ar)}),$n.timelines=gm,i.append(ni,$n.timelines),o.push({instruction:$n,player:pt,element:ni}),$n.queriedElements.forEach(ar=>ks(a,ar,[]).push(pt)),$n.preStyleProps.forEach((ar,Ea)=>{const $o=Object.keys(ar);if($o.length){let Da=c.get(Ea);Da||c.set(Ea,Da=new Set),$o.forEach($h=>Da.add($h))}}),$n.postStyleProps.forEach((ar,Ea)=>{const $o=Object.keys(ar);let Da=d.get(Ea);Da||d.set(Ea,Da=new Set),$o.forEach($h=>Da.add($h))})});if(zt.length){const Oe=[];zt.forEach(ze=>{Oe.push(function $8(n,e){return new Ue(3505,un)}())}),De.forEach(ze=>ze.destroy()),this.reportError(Oe)}const bt=new Map,Rt=new Map;o.forEach(Oe=>{const ze=Oe.element;i.has(ze)&&(Rt.set(ze,ze),this._beforeAnimationBuild(Oe.player.namespaceId,Oe.instruction,bt))}),r.forEach(Oe=>{const ze=Oe.element;this._getPreviousPlayers(ze,!1,Oe.namespaceId,Oe.triggerName,null).forEach(pt=>{ks(bt,ze,[]).push(pt),pt.destroy()})});const Tt=k.filter(Oe=>Uk(Oe,c,d)),ft=new Map;Bk(ft,this.driver,B,d,tl).forEach(Oe=>{Uk(Oe,c,d)&&Tt.push(Oe)});const qn=new Map;y.forEach((Oe,ze)=>{Bk(qn,this.driver,new Set(Oe),c,"!")}),Tt.forEach(Oe=>{const ze=ft.get(Oe),Qe=qn.get(Oe);ft.set(Oe,Object.assign(Object.assign({},ze),Qe))});const Pn=[],_i=[],Zn={};o.forEach(Oe=>{const{element:ze,player:Qe,instruction:pt}=Oe;if(i.has(ze)){if(f.has(ze))return Qe.onDestroy(()=>ya(ze,pt.toStyles)),Qe.disabled=!0,Qe.overrideTotalTime(pt.totalTime),void r.push(Qe);let ni=Zn;if(Rt.size>1){let kn=ze;const Bs=[];for(;kn=kn.parentNode;){const $n=Rt.get(kn);if($n){ni=$n;break}Bs.push(kn)}Bs.forEach($n=>Rt.set($n,ni))}const or=this._buildAnimation(Qe.namespaceId,pt,bt,s,qn,ft);if(Qe.setRealPlayer(or),ni===Zn)Pn.push(Qe);else{const kn=this.playersByElement.get(ni);kn&&kn.length&&(Qe.parentPlayer=tc(kn)),r.push(Qe)}}else Tu(ze,pt.fromStyles),Qe.onDestroy(()=>ya(ze,pt.toStyles)),_i.push(Qe),f.has(ze)&&r.push(Qe)}),_i.forEach(Oe=>{const ze=s.get(Oe.element);if(ze&&ze.length){const Qe=tc(ze);Oe.setRealPlayer(Qe)}}),r.forEach(Oe=>{Oe.parentPlayer?Oe.syncPlayerEvents(Oe.parentPlayer):Oe.destroy()});for(let Oe=0;Oe<k.length;Oe++){const ze=k[Oe],Qe=ze[so];if(Th(ze,ay),Qe&&Qe.hasAnimation)continue;let pt=[];if(a.size){let or=a.get(ze);or&&or.length&&pt.push(...or);let kn=this.driver.query(ze,RS,!0);for(let Bs=0;Bs<kn.length;Bs++){let $n=a.get(kn[Bs]);$n&&$n.length&&pt.push(...$n)}}const ni=pt.filter(or=>!or.destroyed);ni.length?$6(this,ze,ni):this.processLeaveNode(ze)}return k.length=0,Pn.forEach(Oe=>{this.players.push(Oe),Oe.onDone(()=>{Oe.destroy();const ze=this.players.indexOf(Oe);this.players.splice(ze,1)}),Oe.play()}),Pn}elementContainsData(e,t){let i=!1;const r=t[so];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==Gg;a.forEach(d=>{d.queued||!c&&d.triggerName!=r||o.push(d)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const d=c.element,f=d!==s,p=ks(i,d,[]);this._getPreviousPlayers(d,f,o,a,t.toState).forEach(y=>{const w=y.getRealPlayer();w.beforeDestroy&&w.beforeDestroy(),y.destroy(),p.push(y)})}Tu(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,c=t.element,d=[],f=new Set,p=new Set,_=t.timelines.map(w=>{const I=w.element;f.add(I);const k=I[so];if(k&&k.removedBeforeQueried)return new $g(w.duration,w.delay);const j=I!==c,B=function z6(n){const e=[];return Hk(n,e),e}((i.get(I)||N6).map(bt=>bt.getRealPlayer())).filter(bt=>!!bt.element&&bt.element===I),J=s.get(I),pe=o.get(I),De=fk(0,this._normalizer,0,w.keyframes,J,pe),zt=this._buildPlayer(w,De,B);if(w.subTimeline&&r&&p.add(I),j){const bt=new ZS(e,a,I);bt.setRealPlayer(zt),d.push(bt)}return zt});d.forEach(w=>{ks(this.playersByQueriedElement,w.element,[]).push(w),w.onDone(()=>function j6(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,w.element,w))}),f.forEach(w=>oo(w,Ek));const y=tc(_);return y.onDestroy(()=>{f.forEach(w=>Th(w,Ek)),ya(c,t.toStyles)}),p.forEach(w=>{ks(r,w,[]).push(y)}),y}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new $g(e.duration,e.delay)}}class ZS{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new $g,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>xS(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ks(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Cy(n){return n&&1===n.nodeType}function Vk(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function Bk(n,e,t,i,r){const s=[];t.forEach(c=>s.push(Vk(c)));const o=[];i.forEach((c,d)=>{const f={};c.forEach(p=>{const _=f[p]=e.computeStyle(d,p,r);(!_||0==_.length)&&(d[so]=L6,o.push(d))}),n.set(d,f)});let a=0;return t.forEach(c=>Vk(c,s[a++])),o}function jk(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const d=a.parentNode;return c=t.has(d)?d:r.has(d)?1:o(d),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function oo(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Th(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function $6(n,e,t){tc(t).onDone(()=>n.processLeaveNode(e))}function Hk(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof dk?Hk(i.players,e):e.push(i)}}function Uk(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Ey{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new B6(e,t,i),this._timelineEngine=new O6(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const c=[],f=VS(this._driver,s,c,[]);if(c.length)throw function P8(n,e){return new Ue(3404,un)}();a=function x6(n,e,t){return new M6(n,e,t)}(r,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=pk(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=pk(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let q6=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ya(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ya(this._element,this._initialStyles),this._endStyles&&(ya(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Tu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Tu(this._element,this._endStyles),this._endStyles=null),ya(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function KS(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];Z6(r)&&(e=e||{},e[r]=n[r])}return e}function Z6(n){return"display"===n||"position"===n}class $k{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:Mk(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class K6{validateStyleProperty(e){return vk(e)}matchesElement(e,t){return!1}containsElement(e,t){return bk(e,t)}getParentElement(e){return OS(e)}query(e,t,i){return yk(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const c={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(c.easing=s);const d={},f=o.filter(_=>_ instanceof $k);(function J8(n,e){return 0===n||0===e})(i,r)&&f.forEach(_=>{let y=_.currentSnapshot;Object.keys(y).forEach(w=>d[w]=y[w])}),t=function e6(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(c){a[c]=Mk(n,c)})}}return e}(e,t=t.map(_=>nc(_,!1)),d);const p=function W6(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=KS(e[0]),e.length>1&&(i=KS(e[e.length-1]))):e&&(t=KS(e)),t||i?new q6(n,t,i):null}(e,t);return new $k(e,t,c,p)}}let Y6=(()=>{class n extends ak{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Fr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?ck(t):t;return zk(this._renderer,null,i,"register",[r]),new Q6(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(ne(rg),ne(Sn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();class Q6 extends class u8{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new X6(this._id,e,t||{},this._renderer)}}class X6{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return zk(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function zk(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const Gk="@.disabled";let J6=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let f=this._rendererCache.get(s);return f||(f=new Wk("",s,this.engine),this._rendererCache.set(s,f)),f}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=f=>{Array.isArray(f)?f.forEach(c):this.engine.registerTrigger(o,a,t,f.name,f)};return i.data.animation.forEach(c),new e7(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(ne(rg),ne(Ey),ne(fn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();class Wk{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==Gk?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class e7 extends Wk{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Gk?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function t7(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function n7(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let r7=(()=>{class n extends Ey{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(ne(Sn),ne(PS),ne($S))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();const Bo=new ke("AnimationModuleType"),qk=[{provide:ak,useClass:Y6},{provide:$S,useFactory:function s7(){return new C6}},{provide:Ey,useClass:r7},{provide:rg,useFactory:function o7(n,e,t){return new J6(n,e,t)},deps:[Db,Ey,fn]}],Zk=[{provide:PS,useFactory:()=>new K6},{provide:Bo,useValue:"BrowserAnimations"},...qk],a7=[{provide:PS,useClass:wk},{provide:Bo,useValue:"NoopAnimations"},...qk];let l7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?a7:Zk}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({providers:Zk,imports:[FI]}),n})();const u7=new ke("mat-sanity-checks",{providedIn:"root",factory:function c7(){return!0}});let Or=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!dS()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(ne(sk),ne(u7,8),ne(Sn))},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[Hg],Hg]}),n})();function YS(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Su(e)}}}function Yk(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Qk(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Su(e)}}}class h7{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Xk={enterDuration:225,exitDuration:150},QS=ny({passive:!0}),Jk=["mousedown","touchstart"],eR=["mouseup","mouseleave","touchend","touchcancel"];class p7{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Au(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Xk),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function m7(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,d=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=a-o+"px",f.style.top=c-o+"px",f.style.height=2*o+"px",f.style.width=2*o+"px",null!=i.color&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f),function g7(n){window.getComputedStyle(n).getPropertyValue("opacity")}(f),f.style.transform="scale(1)";const p=new h7(this,f,i);return p.state=0,this._activeRipples.add(p),i.persistent||(this._mostRecentTransientRipple=p),this._runTimeoutOutsideZone(()=>{const _=p===this._mostRecentTransientRipple;p.state=1,!i.persistent&&(!_||!this._isPointerDown)&&p.fadeOut()},d),p}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},Xk),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Au(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Jk))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(eR),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=ek(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!tk(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,QS)})})}_removeTriggerEvents(){this._triggerElement&&(Jk.forEach(e=>{this._triggerElement.removeEventListener(e,this,QS)}),this._pointerUpEventsRegistered&&eR.forEach(e=>{this._triggerElement.removeEventListener(e,this,QS)}))}}const _7=new ke("mat-ripple-global-options");let Sy=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new p7(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(fn),L(Ps),L(_7,8),L(Bo,8))},n.\u0275dir=Ne({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&rr("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),XS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[Or],Or]}),n})(),v7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[Or]]}),n})(),tR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[XS,Qa,Or,v7]]}),n})();function qg(n,e,t,i){return it(t)&&(i=t,t=void 0),i?qg(n,e,t).pipe(mn(r=>Rn(r)?i(...r):i(r))):new wn(r=>{nR(n,e,function s(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function nR(n,e,t,i,r){let s;if(function w7(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function y7(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function b7(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)nR(n[o],e,t,i,r)}i.add(s)}function iR(n){return!Rn(n)&&n-parseFloat(n)+1>=0}function rR(n=0,e,t){let i=-1;return iR(e)?i=Number(e)<1?1:Number(e):zo(e)&&(t=e),zo(t)||(t=pS),new wn(r=>{const s=iR(n)?n:+n-t.now();return t.schedule(C7,s,{index:0,period:i,subscriber:r})})}function C7(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}new class D7 extends ba{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class E7 extends fS{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let A7=1;const x7=Promise.resolve(),Ay={};function sR(n){return n in Ay&&(delete Ay[n],!0)}const oR={setImmediate(n){const e=A7++;return Ay[e]=!0,x7.then(()=>sR(e)&&n()),e},clearImmediate(n){sR(n)}};new class T7 extends ba{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class M7 extends fS{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=oR.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(oR.clearImmediate(t),e.scheduled=void 0)}});class P7{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new k7(e,this.durationSelector))}}class k7 extends yc{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:r}=this;t=r(e)}catch(r){return this.destination.error(r)}const i=wc(t,new Aa(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function aR(n,e=pS){return function O7(n){return function(t){return t.lift(new P7(n))}}(()=>rR(n,e))}let F7=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new qt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new wn(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(aR(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):yt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(io(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Au(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>qg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(ne(fn),ne(Ps),ne(Sn,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zg=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new qt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(aR(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(ne(Ps),ne(fn),ne(Sn,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({}),n})(),lR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[Hg,JS],Hg,JS]}),n})();function L7(n,e){1&n&&Wv(0)}const cR=["*"];function V7(n,e){}const B7=function(n){return{animationDuration:n}},j7=function(n,e){return{value:n,params:e}},H7=["tabListContainer"],U7=["tabList"],$7=["tabListInner"],z7=["nextPaginator"],G7=["previousPaginator"],W7=["tabBodyWrapper"],q7=["tabHeader"];function Z7(n,e){}function K7(n,e){1&n&&Yn(0,Z7,0,0,"ng-template",10),2&n&&Ye("cdkPortalOutlet",kt().$implicit.templateLabel)}function Y7(n,e){1&n&&C(0),2&n&&su(kt().$implicit.textLabel)}function Q7(n,e){if(1&n){const t=Xs();D(0,"div",6),We("click",function(){const r=en(t),s=r.$implicit,o=r.index,a=kt(),c=qC(1);return a._handleClick(s,c,o)})("cdkFocusChange",function(r){const o=en(t).index;return kt()._tabFocusChanged(r,o)}),D(1,"div",7),Yn(2,K7,1,1,"ng-template",8),Yn(3,Y7,1,1,"ng-template",null,9,pT),S()()}if(2&n){const t=e.$implicit,i=e.index,r=qC(4),s=kt();rr("mat-tab-label-active",s.selectedIndex===i),Ye("id",s._getTabLabelId(i))("ngClass",t.labelClass)("disabled",t.disabled)("matRippleDisabled",t.disabled||s.disableRipple),Ir("tabIndex",s._getTabIndex(t,i))("aria-posinset",i+1)("aria-setsize",s._tabs.length)("aria-controls",s._getTabContentId(i))("aria-selected",s.selectedIndex===i)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),Xe(2),Ye("ngIf",t.templateLabel)("ngIfElse",r)}}function X7(n,e){if(1&n){const t=Xs();D(0,"mat-tab-body",11),We("_onCentered",function(){return en(t),kt()._removeTabBodyWrapperHeight()})("_onCentering",function(r){return en(t),kt()._setTabBodyWrapperHeight(r)}),S()}if(2&n){const t=e.$implicit,i=e.index,r=kt();rr("mat-tab-body-active",r.selectedIndex===i),Ye("id",r._getTabContentId(i))("ngClass",t.bodyClass)("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",r.animationDuration),Ir("tabindex",null!=r.contentTabIndex&&r.selectedIndex===i?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(i))}}const J7=new ke("MatInkBarPositioner",{providedIn:"root",factory:function eG(){return e=>({left:e?(e.offsetLeft||0)+"px":"0",width:e?(e.offsetWidth||0)+"px":"0"})}});let uR=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._inkBarPositioner=r,this._animationMode=s}alignToElement(t){this.show(),this._ngZone.onStable.pipe(ga(1)).subscribe(()=>{const i=this._inkBarPositioner(t),r=this._elementRef.nativeElement;r.style.left=i.left,r.style.width=i.width})}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(fn),L(J7),L(Bo,8))},n.\u0275dir=Ne({type:n,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,i){2&t&&rr("_mat-animation-noopable","NoopAnimations"===i._animationMode)}}),n})();const tG=new ke("MatTabContent"),nG=new ke("MatTabLabel"),iG=new ke("MAT_TAB"),rG=YS(class{}),dR=new ke("MAT_TAB_GROUP");let eA=(()=>{class n extends rG{constructor(t,i){super(),this._viewContainerRef=t,this._closestTabGroup=i,this.textLabel="",this._contentPortal=null,this._stateChanges=new qt,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new yS(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return n.\u0275fac=function(t){return new(t||n)(L(Wr),L(dR,8))},n.\u0275cmp=Cn({type:n,selectors:[["mat-tab"]],contentQueries:function(t,i,r){if(1&t&&(lu(r,nG,5),lu(r,tG,7,Os)),2&t){let s;Ti(s=Ii())&&(i.templateLabel=s.first),Ti(s=Ii())&&(i._explicitContent=s.first)}},viewQuery:function(t,i){if(1&t&&qr(Os,7),2&t){let r;Ti(r=Ii())&&(i._implicitContent=r.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[Bn([{provide:iG,useExisting:n}]),jt,Ji],ngContentSelectors:cR,decls:1,vars:0,template:function(t,i){1&t&&(Gv(),Yn(0,L7,1,0,"ng-template"))},encapsulation:2}),n})();const sG={translateTab:Ug("translateTab",[nl("center, void, left-origin-center, right-origin-center",mr({transform:"none"})),nl("left",mr({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),nl("right",mr({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),il("* => left, * => right, left => center, right => center",ec("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),il("void => left-origin-center",[mr({transform:"translate3d(-100%, 0, 0)"}),ec("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),il("void => right-origin-center",[mr({transform:"translate3d(100%, 0, 0)"}),ec("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let oG=(()=>{class n extends jg{constructor(t,i,r,s){super(t,i,s),this._host=r,this._centeringSub=Te.EMPTY,this._leavingSub=Te.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Ag(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(L(Wl),L(Wr),L(_n(()=>hR)),L(Sn))},n.\u0275dir=Ne({type:n,selectors:[["","matTabBodyHost",""]],features:[jt]}),n})(),aG=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._dir=i,this._dirChangeSubscription=Te.EMPTY,this._translateTabComplete=new qt,this._onCentering=new tn,this._beforeCentering=new tn,this._afterLeavingCenter=new tn,this._onCentered=new tn(!0),this.animationDuration="500ms",i&&(this._dirChangeSubscription=i.change.subscribe(s=>{this._computePositionAnimationState(s),r.markForCheck()})),this._translateTabComplete.pipe(WP((s,o)=>s.fromState===o.fromState&&s.toState===o.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const i=this._isCenterPosition(t.toState);this._beforeCentering.emit(i),i&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const i=this._getLayoutDirection();return"ltr"==i&&t<=0||"rtl"==i&&t>0?"left-origin-center":"right-origin-center"}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(Jl,8),L(Js))},n.\u0275dir=Ne({type:n,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),n})(),hR=(()=>{class n extends aG{constructor(t,i,r){super(t,i,r)}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(Jl,8),L(Js))},n.\u0275cmp=Cn({type:n,selectors:[["mat-tab-body"]],viewQuery:function(t,i){if(1&t&&qr(jg,5),2&t){let r;Ti(r=Ii())&&(i._portalHost=r.first)}},hostAttrs:[1,"mat-tab-body"],features:[jt],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,i){1&t&&(D(0,"div",0,1),We("@translateTab.start",function(s){return i._onTranslateTabStarted(s)})("@translateTab.done",function(s){return i._translateTabComplete.next(s)}),Yn(2,V7,0,0,"ng-template",2),S()),2&t&&Ye("@translateTab",eT(3,j7,i._position,JM(1,B7,i.animationDuration)))},directives:[oG],styles:['.mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}.mat-tab-body-content[style*="visibility: hidden"]{display:none}\n'],encapsulation:2,data:{animation:[sG.translateTab]}}),n})();const fR=new ke("MAT_TABS_CONFIG"),lG=YS(class{});let pR=(()=>{class n extends lG{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return n.\u0275fac=function(t){return new(t||n)(L(yn))},n.\u0275dir=Ne({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,i){2&t&&(Ir("aria-disabled",!!i.disabled),rr("mat-tab-disabled",i.disabled))},inputs:{disabled:"disabled"},features:[jt]}),n})();const gR=ny({passive:!0});let dG=(()=>{class n{constructor(t,i,r,s,o,a,c){this._elementRef=t,this._changeDetectorRef=i,this._viewportRuler=r,this._dir=s,this._ngZone=o,this._platform=a,this._animationMode=c,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new qt,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new qt,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new tn,this.indexFocused=new tn,o.runOutsideAngular(()=>{qg(t.nativeElement,"mouseleave").pipe(Xl(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=ry(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){qg(this._previousPaginator.nativeElement,"touchstart",gR).pipe(Xl(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),qg(this._nextPaginator.nativeElement,"touchstart",gR).pipe(Xl(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:yt("ltr"),i=this._viewportRuler.change(150),r=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new L9(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(ga(1)).subscribe(r),Cc(t,i,this._items.changes,this._itemsResized()).pipe(Xl(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),r()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Xl(this._destroyed)).subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return"function"!=typeof ResizeObserver?_u:this._items.changes.pipe(Ag(this._items),Xa(t=>new wn(i=>this._ngZone.runOutsideAngular(()=>{const r=new ResizeObserver(()=>{i.next()});return t.forEach(s=>{r.observe(s.elementRef.nativeElement)}),()=>{r.disconnect()}}))),GP(1))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!hS(t))switch(t.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const i=this._items?this._items.toArray()[t]:null;return!!i&&!i.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const i=this._tabListContainer.nativeElement;i.scrollLeft="ltr"==this._getLayoutDirection()?0:i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,i="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const i=this._items?this._items.toArray()[t]:null;if(!i)return;const r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:o}=i.elementRef.nativeElement;let a,c;"ltr"==this._getLayoutDirection()?(a=s,c=a+o):(c=this._tabListInner.nativeElement.offsetWidth-s,a=c-o);const d=this.scrollDistance,f=this.scrollDistance+r;a<d?this.scrollDistance-=d-a+60:c>f&&(this.scrollDistance+=c-f+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=t?t.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,i){i&&null!=i.button&&0!==i.button||(this._stopInterval(),rR(650,100).pipe(Xl(Cc(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:r,distance:s}=this._scrollHeader(t);(0===s||s>=r)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(Js),L(Zg),L(Jl,8),L(fn),L(Ps),L(Bo,8))},n.\u0275dir=Ne({type:n,inputs:{disablePagination:"disablePagination"}}),n})(),hG=(()=>{class n extends dG{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Su(t)}_itemSelected(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(Js),L(Zg),L(Jl,8),L(fn),L(Ps),L(Bo,8))},n.\u0275dir=Ne({type:n,inputs:{disableRipple:"disableRipple"},features:[jt]}),n})(),fG=(()=>{class n extends hG{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c)}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(Js),L(Zg),L(Jl,8),L(fn),L(Ps),L(Bo,8))},n.\u0275cmp=Cn({type:n,selectors:[["mat-tab-header"]],contentQueries:function(t,i,r){if(1&t&&lu(r,pR,4),2&t){let s;Ti(s=Ii())&&(i._items=s)}},viewQuery:function(t,i){if(1&t&&(qr(uR,7),qr(H7,7),qr(U7,7),qr($7,7),qr(z7,5),qr(G7,5)),2&t){let r;Ti(r=Ii())&&(i._inkBar=r.first),Ti(r=Ii())&&(i._tabListContainer=r.first),Ti(r=Ii())&&(i._tabList=r.first),Ti(r=Ii())&&(i._tabListInner=r.first),Ti(r=Ii())&&(i._nextPaginator=r.first),Ti(r=Ii())&&(i._previousPaginator=r.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,i){2&t&&rr("mat-tab-header-pagination-controls-enabled",i._showPaginationControls)("mat-tab-header-rtl","rtl"==i._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[jt],ngContentSelectors:cR,decls:14,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,i){1&t&&(Gv(),D(0,"button",0,1),We("click",function(){return i._handlePaginatorClick("before")})("mousedown",function(s){return i._handlePaginatorPress("before",s)})("touchend",function(){return i._stopInterval()}),At(2,"div",2),S(),D(3,"div",3,4),We("keydown",function(s){return i._handleKeydown(s)}),D(5,"div",5,6),We("cdkObserveContent",function(){return i._onContentChanges()}),D(7,"div",7,8),Wv(9),S(),At(10,"mat-ink-bar"),S()(),D(11,"button",9,10),We("mousedown",function(s){return i._handlePaginatorPress("after",s)})("click",function(){return i._handlePaginatorClick("after")})("touchend",function(){return i._stopInterval()}),At(13,"div",2),S()),2&t&&(rr("mat-tab-header-pagination-disabled",i._disableScrollBefore),Ye("matRippleDisabled",i._disableScrollBefore||i.disableRipple)("disabled",i._disableScrollBefore||null),Xe(5),rr("_mat-animation-noopable","NoopAnimations"===i._animationMode),Xe(6),rr("mat-tab-header-pagination-disabled",i._disableScrollAfter),Ye("matRippleDisabled",i._disableScrollAfter||i.disableRipple)("disabled",i._disableScrollAfter||null))},directives:[Sy,k9,uR],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-tab-header-pagination::-moz-focus-inner{border:0}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n"],encapsulation:2}),n})(),pG=0;class gG{}const mG=Yk(Qk(class{constructor(n){this._elementRef=n}}),"primary");let _G=(()=>{class n extends mG{constructor(t,i,r,s){var o;super(t),this._changeDetectorRef=i,this._animationMode=s,this._tabs=new gh,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=Te.EMPTY,this._tabLabelSubscription=Te.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new tn,this.focusChange=new tn,this.animationDone=new tn,this.selectedTabChange=new tn(!0),this._groupId=pG++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=!(!r||null==r.disablePagination)&&r.disablePagination,this.dynamicHeight=!(!r||null==r.dynamicHeight)&&r.dynamicHeight,this.contentTabIndex=null!==(o=null==r?void 0:r.contentTabIndex)&&void 0!==o?o:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=Su(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=ry(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t+"")?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=ry(t,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const i=this._elementRef.nativeElement;i.classList.remove(`mat-background-${this.backgroundColor}`),t&&i.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const i=null==this._selectedIndex;if(!i){this.selectedTabChange.emit(this._createChangeEvent(t));const r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,s)=>r.isActive=s===t),i||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,r)=>{i.position=r-t,null!=this._selectedIndex&&0==i.position&&!i.origin&&(i.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const i=this._tabs.toArray();let r;for(let s=0;s<i.length;s++)if(i[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,r=i[s];break}!r&&i[t]&&Promise.resolve().then(()=>{i[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Ag(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const i=this._tabHeader;i&&(i.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const i=new gG;return i.index=t,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[t]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Cc(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,i,r){t.disabled||(this.selectedIndex=i.focusIndex=r)}_getTabIndex(t,i){var r;return t.disabled?null:i===(null!==(r=this._lastFocusedTabIndex)&&void 0!==r?r:this.selectedIndex)?0:-1}_tabFocusChanged(t,i){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=i)}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(Js),L(fR,8),L(Bo,8))},n.\u0275dir=Ne({type:n,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[jt]}),n})(),_R=(()=>{class n extends _G{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(Js),L(fR,8),L(Bo,8))},n.\u0275cmp=Cn({type:n,selectors:[["mat-tab-group"]],contentQueries:function(t,i,r){if(1&t&&lu(r,eA,5),2&t){let s;Ti(s=Ii())&&(i._allTabs=s)}},viewQuery:function(t,i){if(1&t&&(qr(W7,5),qr(q7,5)),2&t){let r;Ti(r=Ii())&&(i._tabBodyWrapper=r.first),Ti(r=Ii())&&(i._tabHeader=r.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,i){2&t&&rr("mat-tab-group-dynamic-height",i.dynamicHeight)("mat-tab-group-inverted-header","below"===i.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[Bn([{provide:dR,useExisting:n}]),jt],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","ngClass","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","ngClass","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","ngClass","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(t,i){1&t&&(D(0,"mat-tab-header",0,1),We("indexFocused",function(s){return i._focusChanged(s)})("selectFocusedIndex",function(s){return i.selectedIndex=s}),Yn(2,Q7,5,15,"div",2),S(),D(3,"div",3,4),Yn(5,X7,1,10,"mat-tab-body",5),S()),2&t&&(Ye("selectedIndex",i.selectedIndex||0)("disableRipple",i.disableRipple)("disablePagination",i.disablePagination),Xe(2),Ye("ngForOf",i._tabs),Xe(1),rr("_mat-animation-noopable","NoopAnimations"===i._animationMode),Xe(2),Ye("ngForOf",i._tabs))},directives:[fG,hR,pg,pR,Sy,t8,pI,hu,jg],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),n})(),tA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[Qa,Or,CS,XS,gS,n8],Or]}),n})();const vG=["mat-button",""],bG=["*"],wG=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],CG=Yk(YS(Qk(class{constructor(n){this._elementRef=n}})));let Ih=(()=>{class n extends CG{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of wG)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(mS),L(Bo,8))},n.\u0275cmp=Cn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&qr(Sy,5),2&t){let r;Ti(r=Ii())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(Ir("disabled",i.disabled||null),rr("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[jt],attrs:vG,ngContentSelectors:bG,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Gv(),D(0,"span",0),Wv(1),S(),At(2,"span",1)(3,"span",2)),2&t&&(Xe(2),rr("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Ye("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Sy],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),nA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[XS,Or],Or]}),n})(),xy=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Su(t)}get inset(){return this._inset}set inset(t){this._inset=Su(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Cn({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,i){2&t&&(Ir("aria-orientation",i.vertical?"vertical":"horizontal"),rr("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),n})(),iA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[Or],Or]}),n})(),rA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[Qa,Or,gS],Or]}),n})();const vR=Jz();class xG{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ui(-this._previousScrollPosition.left),e.style.top=Ui(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),vR&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),vR&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class MG{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class bR{enable(){}disable(){}attach(){}}function sA(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function yR(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class TG{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();sA(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let IG=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new bR,this.close=o=>new MG(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new xG(this._viewportRuler,this._document),this.reposition=o=>new TG(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(ne(F7),ne(Zg),ne(fn),ne(Sn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wR{constructor(e){if(this.scrollStrategy=new bR,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class OG{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class PG{constructor(e,t,i,r,s,o,a,c,d){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=d,this._backdropElement=null,this._backdropClick=new qt,this._attachments=new qt,this._detachments=new qt,this._locationChanges=Te.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new qt,this._outsidePointerEvents=new qt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ga(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ui(this._config.width),e.height=Ui(this._config.height),e.minWidth=Ui(this._config.minWidth),e.minHeight=Ui(this._config.minHeight),e.maxWidth=Ui(this._config.maxWidth),e.maxHeight=Ui(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=qP(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Xl(Cc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let oA=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||dS()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),dS()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(ne(Sn),ne(Ps))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CR="cdk-overlay-connected-position-bounding-box",kG=/([A-Za-z%]+)$/;class RG{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new qt,this._resizeSubscription=Te.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(CR),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),d=this._getOverlayPoint(c,t,a),f=this._getOverlayFit(d,t,i,a);if(f.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(f,d,i)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<f.visibleArea)&&(o={overlayFit:f,overlayPoint:d,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const d of s){const f=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);f>c&&(c=f,a=d)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ou(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(CR),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=DR(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),d=this._getOffset(r,"y");c&&(o+=c),d&&(a+=d);let _=0-a,y=a+s.height-i.height,w=this._subtractOverflows(s.width,0-o,o+s.width-i.width),I=this._subtractOverflows(s.height,_,y),k=w*I;return{visibleArea:k,isCompletelyWithinViewport:s.width*s.height===k,fitsInViewportVertically:I===s.height,fitsInViewportHorizontally:w==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=ER(this._overlayRef.getConfig().minHeight),a=ER(this._overlayRef.getConfig().minWidth),d=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&d}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=DR(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),d=Math.max(s.left-i.left-e.x,0);let f=0,p=0;return f=r.width<=s.width?d||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,p=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:f,y:p},{x:e.x+f,y:e.y+p}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new OG(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,f,p,_;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const y=Math.min(i.bottom-e.y+i.top,e.y),w=this._lastBoundingBoxSize.height;s=2*y,o=e.y-y,s>w&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-w/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)_=i.width-e.x+this._viewportMargin,f=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)p=e.x,f=i.right-e.x;else{const y=Math.min(i.right-e.x+i.left,e.x),w=this._lastBoundingBoxSize.width;f=2*y,p=e.x-y,f>w&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-w/2)}return{top:o,left:p,bottom:a,right:_,width:f,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Ui(i.height),r.top=Ui(i.top),r.bottom=Ui(i.bottom),r.width=Ui(i.width),r.left=Ui(i.left),r.right=Ui(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Ui(s)),o&&(r.maxWidth=Ui(o))}this._lastBoundingBoxSize=i,Ou(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ou(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ou(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const f=this._viewportRuler.getViewportScrollPosition();Ou(i,this._getExactOverlayY(t,e,f)),Ou(i,this._getExactOverlayX(t,e,f))}else i.position="static";let a="",c=this._getOffset(t,"x"),d=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),d&&(a+=`translateY(${d}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Ui(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Ui(o.maxWidth):s&&(i.maxWidth="")),Ou(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Ui(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Ui(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:yR(e,i),isOriginOutsideView:sA(e,i),isOverlayClipped:yR(t,i),isOverlayOutsideView:sA(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&qP(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof yn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Ou(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function ER(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(kG);return t&&"px"!==t?null:parseFloat(e)}return n||null}function DR(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const SR="cdk-global-overlay-wrapper";class FG{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(SR),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),d=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=c?"0":this._leftOffset,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,c?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(SR),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let NG=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new FG}flexibleConnectedTo(t){return new RG(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(ne(Zg),ne(Sn),ne(Ps),ne(oA))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AR=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(ne(Sn))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LG=(()=>{class n extends AR{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(ne(Sn),ne(fn,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VG=(()=>{class n extends AR{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Du(s)},this._clickListener=s=>{const o=Du(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let d=c.length-1;d>-1;d--){const f=c[d];if(f._outsidePointerEvents.observers.length<1||!f.hasAttached())continue;if(f.overlayElement.contains(o)||f.overlayElement.contains(a))break;const p=f._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(s)):p.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(ne(Sn),ne(Ps),ne(fn,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BG=0,Kg=(()=>{class n{constructor(t,i,r,s,o,a,c,d,f,p,_){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=d,this._directionality=f,this._location=p,this._outsideClickDispatcher=_}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new wR(t);return o.direction=o.direction||this._directionality.value,new PG(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+BG++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(rb)),new s8(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(ne(IG),ne(oA),ne(Wl),ne(NG),ne(LG),ne(T),ne(fn),ne(Sn),ne(Jl),ne(dg),ne(VG))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();const UG={provide:new ke("cdk-connected-overlay-scroll-strategy"),deps:[Kg],useFactory:function HG(n){return()=>n.scrollStrategies.reposition()}};let xR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({providers:[Kg,UG],imports:[[Hg,CS,lR],lR]}),n})();const qG={provide:new ke("mat-select-scroll-strategy"),deps:[Kg],useFactory:function WG(n){return()=>n.scrollStrategies.reposition()}};let TR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({providers:[qG],imports:[[Qa,xR,tR,Or],JS,rA,tR,Or]}),n})();function ZG(n,e){}class aA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const KG={dialogContainer:Ug("dialogContainer",[nl("void, exit",mr({opacity:0,transform:"scale(0.7)"})),nl("enter",mr({transform:"none"})),il("* => enter",lk([ec("150ms cubic-bezier(0, 0, 0.2, 1)",mr({transform:"none",opacity:1})),DS("@*",ES(),{optional:!0})])),il("* => void, * => exit",lk([ec("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",mr({opacity:0})),DS("@*",ES(),{optional:!0})]))])};let YG=(()=>{class n extends wS{constructor(t,i,r,s,o,a,c,d){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._focusMonitor=d,this._animationStateChanged=new tn,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=f=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(f)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=uS())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=uS(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=uS();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(K9),L(Js),L(Sn,8),L(aA),L(QP),L(fn),L(mS))},n.\u0275dir=Ne({type:n,viewQuery:function(t,i){if(1&t&&qr(jg,7),2&t){let r;Ti(r=Ii())&&(i._portalOutlet=r.first)}},features:[jt]}),n})(),QG=(()=>{class n extends YG{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275cmp=Cn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&eE("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(sE("id",i._id),Ir("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),oE("@dialogContainer",i._state))},features:[jt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Yn(0,ZG,0,0,"ng-template",0)},directives:[jg],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[KG.dialogContainer]}}),n})(),XG=0;class JG{constructor(e,t,i="mat-dialog-"+XG++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new qt,this._afterClosed=new qt,this._beforeClosed=new qt,this._state=0,t._id=i,t._animationStateChanged.pipe(io(r=>"opened"===r.state),ga(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(io(r=>"closed"===r.state),ga(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(io(r=>27===r.keyCode&&!this.disableClose&&!hS(r))).subscribe(r=>{r.preventDefault(),IR(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():IR(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(io(t=>"closing"===t.state),ga(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function IR(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const eW=new ke("MatDialogData"),tW=new ke("mat-dialog-default-options"),OR=new ke("mat-dialog-scroll-strategy"),iW={provide:OR,deps:[Kg],useFactory:function nW(n){return()=>n.scrollStrategies.block()}};let rW=(()=>{class n{constructor(t,i,r,s,o,a,c,d,f,p){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=c,this._dialogContainerType=d,this._dialogDataToken=f,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new qt,this._afterOpenedAtThisLevel=new qt,this._ariaHiddenElements=new Map,this.afterAllClosed=BD(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ag(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){i=function sW(n,e){return Object.assign(Object.assign({},e),n)}(i,this._defaultOptions||new aA),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),o=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new wR({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=T.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:aA,useValue:i}]}),o=new bS(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(t instanceof Os)i.attachTemplatePortal(new yS(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,i),c=i.attachComponentPortal(new bS(t,s.viewContainerRef,a,s.componentFactoryResolver));o.componentInstance=c.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(Jl,null,St.Optional))&&o.push({provide:Jl,useValue:{value:t.direction,change:yt()}}),T.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){Uv()},n.\u0275dir=Ne({type:n}),n})(),PR=(()=>{class n extends rW{constructor(t,i,r,s,o,a,c,d){super(t,i,s,a,c,o,JG,QG,eW,d)}}return n.\u0275fac=function(t){return new(t||n)(ne(Kg),ne(T),ne(dg,8),ne(tW,8),ne(OR),ne(n,12),ne(oA),ne(Bo,8))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})(),oW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({providers:[PR,iW],imports:[[xR,CS,Or],Or]}),n})(),aW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[Qa,wh,mu,l7,tA,nA,iA,oW,rA,TR]]}),n})();var jo=Ve(444);function kR(n){let e;switch(n){case"semibrevis":e=1;break;case"brevis":e=0;break;case"maxima":e=7;break;case"longa":e=9;break;case"minima":e=2;break;case"semiminima":e=4;break;case"fusa":e=8;break;case"semifusa":e=6}return e}var rn=(()=>(function(n){n[n.C=0]="C",n[n.D=1]="D",n[n.E=2]="E",n[n.F=3]="F",n[n.G=4]="G",n[n.A=5]="A",n[n.B=6]="B"}(rn||(rn={})),rn))(),ao=(()=>(function(n){n[n.NONE=0]="NONE",n.SHARP="#",n.FLAT="-",n.NATURAL="n"}(ao||(ao={})),ao))(),_r=(()=>(function(n){n[n.NONE=0]="NONE",n[n.START=1]="START",n[n.END=2]="END"}(_r||(_r={})),_r))(),fs=(()=>(function(n){n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN"}(fs||(fs={})),fs))(),Yr=(()=>(function(n){n[n.NONE=0]="NONE",n[n.COLORED=1]="COLORED"}(Yr||(Yr={})),Yr))();class My{constructor(){this.m_type="clef",this.m_line=-1,this.m_pname=rn.C,this.m_clefLine=3,this.m_keySig=new Map}raisePitch(){this.m_clefLine+=1,this.m_clefLine>5&&(this.m_clefLine=5)}lowerPitch(){this.m_clefLine-=1,this.m_clefLine<1&&(this.m_clefLine=1)}getHumdrumLine(){let e="*clef";switch(this.m_pname){case rn.G:e+="G";break;case rn.F:e+="F";break;default:e+="C"}if(e+=this.m_clefLine,e+="\t",e+="*",this.m_keySig.size>0){e+="\n",e+="*k[";for(let[t,i]of this.m_keySig)e+=t,e+=i;e+="]\t*"}return e}static parseXML(e){let t=new My;switch(e.hasAttribute("xml:id")&&(t.m_id=e.getAttribute("xml:id")),e.getAttribute("shape")){case"F":t.m_pname=rn.F;break;case"G":t.m_pname=rn.G}try{let i=parseInt(e.getAttribute("line"));t.m_clefLine=i}catch(i){}return t}}class Ty{constructor(e){this.m_type="rest",this.m_line=-1,this.m_dot=!1,this.m_color=Yr.NONE,this.m_rhythm=void 0!==e?e:1}getHumdrumLine(e){let t="";switch(this.m_rhythm){case 7:t+="X";break;case 9:t+="L";break;case 0:t+="S";break;case 1:t+="s";break;case 2:t+="M";break;case 4:t+="m";break;case 6:t+="u";break;case 8:t+="U"}return this.m_dot&&(t+=":"),this.m_color===Yr.COLORED&&(t+="~"),t+="r",e.mark&&(t+="@"),t+="\t.",t}static parseXML(e){let t=new Ty;return e.hasAttribute("xml:id")&&(t.m_id=e.getAttribute("xml:id")),e.hasAttribute("dur")&&(t.m_rhythm=kR(e.getAttribute("dur"))),e.hasAttribute("colored")&&(t.m_color=Yr.COLORED),t}}class Iy{constructor(){this.m_type="mensur",this.m_line=-1,this.m_modus=Qr.NA,this.m_tempus=Qr.Two,this.m_prolatio=Qr.Two,this.m_sign=$i.signc,this.mensurvis="*met(C)",this.mensurlog="0022"}getHumdrumLine(){return this.mensurvis="*met("+this.m_sign+")",this.mensurlog="0"+this.m_modus+this.m_tempus+this.m_prolatio,this.mensurvis+"_"+this.mensurlog+"\t*"}static parseXML(e){let t="",i=new Iy;return e.hasAttribute("xml:id")&&(i.m_id=e.getAttribute("xml:id")),e.hasAttribute("modusminor")&&(i.m_modus=e.getAttribute("modusminor")),e.hasAttribute("tempus")&&(i.m_tempus=e.getAttribute("tempus")),e.hasAttribute("prolatio")&&(i.m_prolatio=e.getAttribute("prolatio")),e.hasAttribute("sign")&&(t+=e.getAttribute("sign")),e.hasAttribute("slash")&&"1"===e.getAttribute("slash")&&(t+="|"),e.hasAttribute("dot")&&"true"===e.getAttribute("dot")&&(t+="."),e.hasAttribute("num")&&(t+=e.getAttribute("num")),e.hasAttribute("numbase")&&(t=t+"/"+e.getAttribute("numbase")),""===t&&(t="N/A"),i.m_sign=t,i}}class Pu{constructor(){this.m_type="note",this.m_line=-1,this.m_pname=rn.C,this.m_accid=ao.NONE,this.m_oct=4,this.m_rhythm=1,this.m_dot=!1,this.m_text="",this.m_lig=_r.NONE,this.m_plica=fs.NONE,this.m_color=Yr.NONE}raisePitch(e){void 0===e&&(e=1),e>=7&&(this.m_oct+=e%7,e-=e%7*7),this.m_pname+=e,this.m_pname>6&&(this.m_pname-=7,this.m_oct+=1)}lowerPitch(e){void 0===e&&(e=1),e>=7&&(this.m_oct-=e%7,e-=e%7*7),this.m_pname-=e,this.m_pname<0&&(this.m_pname+=7,this.m_oct-=1)}getHumdrumLine(e){let i,t="";switch(this.m_lig===_r.START&&(t+="["),this.m_rhythm){case 7:t+="X";break;case 9:t+="L";break;case 0:t+="S";break;case 1:t+="s";break;case 2:t+="M";break;case 4:t+="m";break;case 6:t+="u";break;case 8:t+="U"}switch(this.m_dot&&(t+=":"),this.m_pname){case rn.C:i="c";break;case rn.D:i="d";break;case rn.E:i="e";break;case rn.F:i="f";break;case rn.G:i="g";break;case rn.A:i="a";break;case rn.B:i="b"}if(this.m_oct>=4)for(let r=4;r<=this.m_oct;r++)t+=i;else{i=i.toUpperCase();for(let r=3;r>=this.m_oct;r--)t+=i}return this.m_plica===fs.DOWN?t+="k":this.m_plica===fs.UP&&(t+="K"),this.m_color===Yr.COLORED&&(t+="~"),this.m_accid!==ao.NONE&&(t+=this.m_accid.toString()),this.m_lig===_r.END&&(t+="]"),e.mark&&(t+="@"),t+="\t",this.m_text?(e.hyphen&&(t+="-"),t+=this.m_text):t+=".",t}static parseXML(e){let t=new Pu;if(e.hasAttribute("xml:id")&&(t.m_id=e.getAttribute("xml:id")),e.hasAttribute("oct")&&(t.m_oct=parseInt(e.getAttribute("oct"))),e.hasAttribute("dur")&&(t.m_rhythm=kR(e.getAttribute("dur"))),e.hasAttribute("pname")&&(t.m_pname=rn[e.getAttribute("pname").toUpperCase()]),e.hasAttribute("colored")&&(t.m_color=Yr.COLORED),e.querySelector("plica")&&(e.querySelector("plica"),t.m_plica=e.hasAttribute("dir")&&"up"==e.getAttribute("dir")?fs.UP:fs.DOWN),e.nextElementSibling&&"dot"===e.nextElementSibling.tagName&&(t.m_dot=!0),e.querySelector("accid"))switch(e.querySelector("accid").getAttribute("accid")){case"s":t.m_accid=ao.SHARP;break;case"f":t.m_accid=ao.FLAT;break;case"n":t.m_accid=ao.NATURAL}if(e.querySelector("syl")){const i=e.querySelector("syl");t.m_text=i.textContent}return"ligature"===e.parentElement.tagName&&(e===e.parentElement.firstElementChild?t.m_lig=_r.START:e===e.parentElement.lastElementChild?t.m_lig=_r.END:e.nextElementSibling&&"dot"==e.nextElementSibling.tagName&&e.nextElementSibling===e.parentElement.lastElementChild&&(t.m_dot=!0,t.m_lig=_r.END)),t}}class lW{constructor(){this.m_list=[],this.m_index=-1,this.m_rhythm=1,this.m_notationCallback=null}addClef(e){let t=new My;e===rn.G?(t.m_pname=rn.G,t.m_clefLine=2):e===rn.F?(t.m_pname=rn.F,t.m_clefLine=4):(t.m_pname=rn.C,t.m_clefLine=3),this.m_list.push(t),this.runNotationCallback()}addRest(){0!==this.m_list.length&&(this.m_list.push(new Ty(this.m_rhythm)),this.runNotationCallback())}addMensur(){this.m_list.push(new Iy),this.runNotationCallback()}addPitchFar(e){if(0===this.m_list.length)return void this.addClef(e);e=(e+7e3)%7;let t=this.getLastNote();t||(t=new Pu,t.m_pname=rn.C,t.m_oct=4,t.m_rhythm=1);let i=t.m_oct,r=t.m_pname+7*i,s=[];s[0]=7*(i-1)+e,s[1]=7*(i+0)+e,s[2]=7*(i+1)+e;let o=-1;for(let c=0;c<s.length;c++)if(Math.abs(r-s[c])>3&&Math.abs(r-s[c])<8){o=c;break}let a=new Pu;switch(a.m_rhythm=this.m_rhythm,a.m_pname=e,o){case 0:a.m_oct=i-1;break;case 1:a.m_oct=i;break;case 2:a.m_oct=i+1}this.m_list.push(a),this.runNotationCallback()}addPitchNear(e){if(0==this.m_list.length)return void this.addClef(e);e=(e+7e3)%7;let t=this.getLastNote();t||(t=new Pu,t.m_pname=0,t.m_oct=4,t.m_rhythm=1);let i=t.m_oct,r=t.m_pname+7*i,s=[];s[0]=7*(i-1)+e,s[1]=7*(i+0)+e,s[2]=7*(i+1)+e;let o=-1;for(let c=0;c<s.length;c++)if(Math.abs(r-s[c])<4){o=c;break}let a=new Pu;switch(a.m_rhythm=this.m_rhythm,a.m_pname=e,o){case 0:a.m_oct=i-1;break;case 1:a.m_oct=i;break;case 2:a.m_oct=i+1}this.m_list.push(a),this.runNotationCallback()}getLastNote(){for(let e=this.m_list.length-1;e>=0;e--)if("note"===this.m_list[e].m_type)return this.m_list[e];return null}removeLastItem(){this.m_list.pop(),this.runNotationCallback()}hasOpenLigature(){let e=!1;for(let t of this.m_list)if("note"===t.m_type){let i=t;i.m_lig===_r.START?e=!0:i.m_lig===_r.END&&(e=!1)}return e}selectBackward(){this.m_index>0?this.m_index--:0===this.m_index?this.m_index=-1:this.m_index<0&&(this.m_index=this.m_list.length-1),this.runNotationCallback()}selectForward(){this.m_index<this.m_list.length-1?this.m_index++:this.m_index==this.m_list.length-1?this.m_index=-1:this.m_index<0&&(this.m_index=0),this.runNotationCallback()}runNotationCallback(){if(this.m_notationCallback){let e=this.getHumdrumScore({});this.m_notationCallback(e)}}addTextToCurrentItem(e){if(0===this.m_list.length)return!1;let t=this.m_index;if(t<0&&(t=this.m_list.length-1),t<0)return!1;let i=this.m_list[t];return"note"===i.m_type&&(i.m_text+=e,"-"===e&&(this.m_index+=1,this.m_index>=this.m_list.length&&(this.m_index=-1))),this.runNotationCallback(),!0}goToEndOfList(){this.m_index=-1,this.runNotationCallback()}lowerPitch(e){if(0===this.m_list.length)return;let t=this.m_index;t<0&&(t=this.m_list.length-1),"note"===this.m_list[t].m_type?this.m_list[t].lowerPitch(e):"clef"===this.m_list[t].m_type&&this.m_list[t].lowerPitch(),this.runNotationCallback()}raisePitch(e){if(0===this.m_list.length)return;let t=this.m_index;t<0&&(t=this.m_list.length-1),"note"===this.m_list[t].m_type?this.m_list[t].raisePitch(e):"clef"===this.m_list[t].m_type&&this.m_list[t].raisePitch(),this.runNotationCallback()}deleteCharacterOnCurrentItem(){let e=this.m_index;e<0&&(e=this.m_list.length-1);try{let t=this.m_list[e];if(0===t.m_text.length)return;t.m_text=t.m_text.substring(0,t.m_text.length-1),this.runNotationCallback()}catch(t){}}clearTextOnCurrentItem(){let e=this.m_index;if(e<0||e>=this.m_list.length)return;let t=this.m_list[e];if(t)try{t.m_text="",this.runNotationCallback()}catch(i){}}clear(){this.m_list=[],this.m_index=-1,this.runNotationCallback()}getHumdrumScore(e){e||(e={});let t=[];t.push("**mens\t**text"),!0!==e.white&&t.push("*black\t*");var i,r,s=0,o=0,a=!1,c=e;for(i=0;i<this.m_list.length;i++){var d=this.m_list[i];"note"==d.m_type?s+=1:"rest"==d.m_type&&(o+=1),c.mark=!1,c.hyphen=a,i==this.m_index&&(c.mark=!0),c.export&&(c.mark=!1),void 0===d.m_id&&(d.m_id="m-"+(0,jo.v4)()),r=d.getHumdrumLine(c),"note"===d.m_type&&(a=!!d.m_text.match(/-$/)),this.m_list[i].m_line=t.length+1,t.push(r)}s+o==0&&t.push("4ryy\t."),t.push("=-\t=-"),t.push("*-\t*-"),c.export||t.push("!!!RDF**kern: @ = marked note");var f="";for(i=0;i<t.length;i++)f+=t[i]+"\n";return f}selectItemByLine(e){for(let t=0;t<this.m_list.length;t++)if(this.m_list[t].m_line===e)return this.m_index=t,void this.runNotationCallback()}processKeySig(e,t){if(this.m_list.length>0){let i=this.m_list[0];return"clef"!==i.m_type?(console.debug("First was not a clef!!!"),!1):(i.m_keySig.has(e)&&i.m_keySig.get(e)===t?i.m_keySig.delete(e):i.m_keySig.set(e,t),this.runNotationCallback(),!0)}}}var Qn=(()=>(function(n){n.altus="altus",n.cantus="cantus",n.contratenor="contratenor",n.contratenor1="contratenor I",n.contratenor2="contratenor II",n.discantus="discantus",n.duplum="duplum",n.lowervoice1="lower voice I",n.lowervoice2="lower voice II",n.motetus="motetus",n.quadruplum="quadruplum",n.quintus="quintus",n.superius="superius",n.uppervoice1="upper voice I",n.uppervoice2="uppervoice II",n.tenor="tenor",n.triplum="triplum",n.bassus="bassus"}(Qn||(Qn={})),Qn))();function RR(n){switch(n){case Qn.altus:return 8;case Qn.cantus:return 5;case Qn.contratenor:return 10;case Qn.contratenor1:return 10.1;case Qn.contratenor2:return 10.2;case Qn.discantus:return 5;case Qn.duplum:return 3;case Qn.lowervoice1:return 100;case Qn.lowervoice2:return 100.1;case Qn.motetus:return 3;case Qn.quadruplum:return 1;case Qn.quintus:return 8;case Qn.superius:return 5;case Qn.uppervoice1:return-1.1;case Qn.uppervoice2:return-1;case Qn.tenor:return 9;case Qn.triplum:return 2;case Qn.bassus:return 20;default:return 0}}var Qr=(()=>(function(n){n.Three="3",n.Two="2",n.NA="0"}(Qr||(Qr={})),Qr))(),$i=(()=>(function(n){n.signc="C",n.signcdot="C.",n.signo="O",n.signodot="O.",n.signc2="C2",n.signc3="C3",n.signo2="O2",n.signo3="O3",n.signccut="C|",n.signc32="C3/2",n.signccut32="C|3/2",n.signocut="O|",n.signo32="O3/2",n.signocut32="O|3/2",n.NA="N/A"}($i||($i={})),$i))();const rl=new class cW{constructor(){this.vrvToolkit=null,this.options=null,this.options={humType:0,scale:90,spacingNonLinear:.35,lyricSize:3,breaks:"none",choiceXPathQuery:"./corr"}}setup(){this.vrvToolkit||(this.vrvToolkit=new verovio.toolkit,this.vrvToolkit.setOptions(this.options))}humdrumToMEI(e){return this.vrvToolkit.loadData(e),this.vrvToolkit.getMEI({pageNo:0,scoreBased:!0})}humdrumToSVG(e){this.vrvToolkit.loadData(e);let t=this.vrvToolkit.renderToSVG(1);return(new DOMParser).parseFromString(t,"image/svg+xml").documentElement}meiToSVG(e,t=!1){const r=(new XMLSerializer).serializeToString(e),s=new DOMParser;if(t){const a=Object.assign({},this.options);a.ligatureAsBracket=!0,this.vrvToolkit.setOptions(a)}this.vrvToolkit.loadData(r);const o=this.vrvToolkit.renderToSVG(1);return t&&this.vrvToolkit.setOptions(this.options),s.parseFromString(o,"image/svg+xml").documentElement}meiToHumdrum(e){const i=(new XMLSerializer).serializeToString(e);return this.vrvToolkit.convertMEIToHumdrum(i)}dissonanceInfo(e){return this.vrvToolkit.convertHumdrumToHumdrum(e+="\n!!!filter: mens2kern | dissonant\n")}};class FR{constructor(e,t){this.canvasIRI=e,this.id=t||"m-"+(0,jo.v4)()}}class lA{constructor(e,t){this.id=t||"m-"+(0,jo.v4)(),this.zone=e}get svg(){let e=document.createElementNS("http://www.w3.org/2000/svg","rect");return e.setAttribute("x",this.zone.ulx.toString()),e.setAttribute("y",this.zone.uly.toString()),e.id=this.id,e.setAttribute("width",(this.zone.lrx-this.zone.ulx).toString()),e.setAttribute("height",(this.zone.lry-this.zone.uly).toString()),e.classList.add("zoneRect"),e}}class cA{constructor(e){this.contents=e||new lW}static compare(e,t){let i=e.pb.index-t.pb.index;if(0!==i)return i;const r=e.sb.zone,s=t.sb.zone,c=r.lry-s.uly,d=s.lry-r.uly;if(c>0&&d>0){const f=Math.min(c,d),p=(r.lry-r.uly+s.lry-s.uly)/2,_=r.lrx-s.ulx,y=s.lrx-r.ulx,w=(r.lrx-r.ulx+s.lrx-s.ulx)/2;let I;if(I=_>0&&y>0?Math.min(_,y):0,f>.25*p&&I<.1*w)return r.ulx-s.ulx}return e.sb.zone.uly-t.sb.zone.uly}get id(){return this.sb.id}get voice(){return this.parent.voice}set voice(e){if(e!==this.parent.voice){let t=this.parent.parent.getOrCreatePart(e),i=this.parent.systems.indexOf(this);this.parent.systems.splice(i,1),t.addSystem(this)}}getContents(){let e="mensural.white"===this.parent.parent.notationType;console.debug(this.parent.parent.notationType);let t=rl.humdrumToMEI(this.contents.getHumdrumScore({white:e})),r=[],s=(new DOMParser).parseFromString(t,"application/xml"),o=s.querySelector("clef");null!==o&&(this._recurseId(o),r.push(o));let a=s.querySelector("keySig");null!==a&&(this._recurseId(a),r.push(a));let c=s.querySelector("mensur");null!==c&&null===c.closest("layer")&&(this._recurseId(c),r.push(c));let d=s.querySelector("layer");if(console.debug(d),null!==d)for(let f of Array.from(d.children))this._recurseId(f),"note"===f.tagName&&f.hasAttribute("dots")&&f.removeAttribute("dots"),r.push(f);return r}_recurseId(e){let t=e.getAttribute("xml:id"),i=!1;if(t&&/(note|rest|clef|keySig|pb|sb|mensur)/.test(e.tagName)){let r=t.match(/L(\d+)[\w\d]+$/);if(r){let s=parseInt(r[1]),o=this.contents.m_list.filter(a=>a.m_line===s);if(o.length>0)if(i=!0,e.setAttribute("xml:id",o[0].m_id),"mensur"===o[0].m_type){let a=o[0];a.m_modus!==Qr.NA&&e.setAttribute("modusminor",a.m_modus.toString()),a.m_tempus!==Qr.NA&&e.setAttribute("tempus",a.m_tempus.toString()),a.m_prolatio!==Qr.NA&&e.setAttribute("prolatio",a.m_prolatio.toString())}else if("note"===o[0].m_type&&e.hasAttribute("dots")&&(!e.nextElementSibling||"dot"!==e.nextElementSibling.tagName)){const c=e.ownerDocument.createElementNS(Ae,"dot");e.insertAdjacentElement("afterend",c),e.removeAttribute("dots")}}}i||e.setAttribute("xml:id","m-"+(0,jo.v4)());for(let r of Array.from(e.children))this._recurseId(r)}}class Yg{constructor(e,t){this.parent=e,t?this.id=t:t="m-"+(0,jo.v4)(),this.systems=[],this.modus=Qr.NA,this.tempus=Qr.NA,this.prolatio=Qr.NA,this.sign=$i.NA}static compare(e,t){return RR(e.voice)-RR(t.voice)}addSystem(e){e.parent=this,this.systems.push(e)}removeSystem(e){let t=this.systems.filter(i=>i.id===e);if(t.length>0){let i=this.systems.indexOf(t[0]);return this.systems.splice(i,1)[0]}return null}generatePartXML(){this.systems.sort(cA.compare);let e=this.parent._meiDoc.createElementNS(Ae,"part"),t=this._generateScoreDef();e.appendChild(t);let i=t.querySelector("staffDef");i.setAttribute("label",this.voice.toString()),i.setAttribute("xml:id",this.voice.toString().replace(" ",""));let r=this.parent._meiDoc.createElementNS(Ae,"mensur");i.appendChild(r),this.modus!==Qr.NA&&r.setAttribute("modusminor",this.modus.toString()),this.tempus!==Qr.NA&&r.setAttribute("tempus",this.tempus.toString()),this.prolatio!==Qr.NA&&r.setAttribute("prolatio",this.prolatio.toString()),this.sign===$i.signc?r.setAttribute("sign","C"):this.sign===$i.signc2?(r.setAttribute("sign","C"),r.setAttribute("num","2")):this.sign===$i.signc3?(r.setAttribute("sign","C"),r.setAttribute("num","3")):this.sign===$i.signc32?(r.setAttribute("sign","C"),r.setAttribute("num","3"),r.setAttribute("numbase","2")):this.sign===$i.signccut?(r.setAttribute("sign","C"),r.setAttribute("slash","1")):this.sign===$i.signccut32?(r.setAttribute("sign","C"),r.setAttribute("slash","1"),r.setAttribute("num","3"),r.setAttribute("numbase","2")):this.sign===$i.signcdot?(r.setAttribute("sign","C"),r.setAttribute("dot","true")):this.sign===$i.signo?r.setAttribute("sign","O"):this.sign===$i.signo2?(r.setAttribute("sign","O"),r.setAttribute("num","2")):this.sign===$i.signo3?(r.setAttribute("sign","O"),r.setAttribute("num","3")):this.sign===$i.signo32?(r.setAttribute("sign","O"),r.setAttribute("num","3"),r.setAttribute("numbase","2")):this.sign===$i.signocut?(r.setAttribute("sign","O"),r.setAttribute("slash","1")):this.sign===$i.signocut32?(r.setAttribute("sign","O"),r.setAttribute("slash","1"),r.setAttribute("num","3"),r.setAttribute("numbase","2")):this.sign===$i.signodot&&(r.setAttribute("sign","O"),r.setAttribute("dot","true"));let s=this.parent._meiDoc.createElementNS(Ae,"section");e.appendChild(s);let o=this.parent._meiDoc.createElementNS(Ae,"staff");o.setAttribute("n","1"),s.appendChild(o);let a=this.parent._meiDoc.createElementNS(Ae,"layer");a.setAttribute("n","1"),o.appendChild(a);let c=null,d=null,f=this.parent._meiDoc.querySelector("facsimile");for(let p of this.systems){let _=p.getContents();if(console.debug(_),0===_.filter(k=>"clef"!==k.tagName&&"rest"!==k.tagName).length)continue;if(p.pb.canvasIRI!==c){let k=this.parent._meiDoc.createElementNS(Ae,"pb"),j=Array.from(f.querySelectorAll("graphic")).filter(J=>J.getAttribute("target")===p.pb.canvasIRI);if(j.length>0)d=j[0];else{let J=this.parent._meiDoc.createElementNS(Ae,"surface");J.setAttribute("xml:id","m-"+(0,jo.v4)()),d=this.parent._meiDoc.createElementNS(Ae,"graphic"),d.setAttribute("xml:id","m-"+(0,jo.v4)()),d.setAttribute("target",p.pb.canvasIRI),J.appendChild(d),f.appendChild(J)}let B=d.closest("surface");k.setAttribute("facs","#"+B.getAttribute("xml:id")),k.setAttribute("xml:id",p.pb.id),c=p.pb.canvasIRI,a.appendChild(k)}let y=this.parent._meiDoc.createElementNS(Ae,"zone"),w="m"+(0,jo.v4)();y.setAttribute("xml:id",w),y.setAttribute("ulx",Math.round(p.sb.zone.ulx).toString()),y.setAttribute("uly",Math.round(p.sb.zone.uly).toString()),y.setAttribute("lrx",Math.round(p.sb.zone.lrx).toString()),y.setAttribute("lry",Math.round(p.sb.zone.lry).toString()),d.appendChild(y);let I=this.parent._meiDoc.createElementNS(Ae,"sb");I.setAttribute("facs","#"+y.getAttribute("xml:id")),I.setAttribute("xml:id",p.sb.id),a.appendChild(I),_.forEach(k=>{k.hasAttribute("color")&&k.removeAttribute("color"),k.hasAttribute("type")&&k.removeAttribute("type"),"ligature"===k.tagName&&k.removeAttribute("form"),a.appendChild(k)})}return e}_generateScoreDef(){let e=this.parent._meiDoc.createElementNS(Ae,"scoreDef"),t=this.parent._meiDoc.createElementNS(Ae,"staffGrp");e.appendChild(t);let i=this.parent._meiDoc.createElementNS(Ae,"staffDef");return i.setAttribute("n","1"),i.setAttribute("lines","5"),i.setAttribute("notationtype",this.parent.notationType),this.parent.notationSubtype&&i.setAttribute("notationsubtype",this.parent.notationSubtype),t.appendChild(i),e}}class NR extends Yg{constructor(e,t){super(e,t),this.voice=Qn.tenor,this.repetitions=1}generatePartXML(){let e=super.generatePartXML();if(this.repetitions>1){let t=this.parent._meiDoc.createElementNS(Ae,"dir");t.setAttribute("n",(this.repetitions-1).toString()),t.setAttribute("layer","1"),console.debug(e),console.debug(e.querySelector("note,ligature,rest"));let i=e.querySelector("note,ligature,rest").getAttribute("xml:id");console.debug(e),console.debug(this.endingId);let r=void 0!==this.endingId?Array.from(e.querySelectorAll("note,rest")).find(a=>a.getAttribute("xml:id")===this.endingId):e.querySelector("layer").lastElementChild,s=null===r.closest("ligature")?r.getAttribute("xml:id"):r.closest("ligature").getAttribute("xml:id");t.setAttribute("plist","#"+i+" #"+s),t.setAttribute("follows","#"+s),e.querySelector("staff").appendChild(t),t.insertAdjacentHTML("beforebegin","\x3c!-- The @n attribute on <dir> is used to represent the number of repetitions in a machine readable format. --\x3e")}return e}}const Ae="http://www.music-encoding.org/ns/mei";class Oy{constructor(e){this.metadata=new uW,this.metadata.sourceIRI=e,this.parts=[],this._createSkeletonMEI()}get notationType(){return/Ars[_ ](antiqua|nova)/.test(this.notationSubtype)?"mensural.black":"mensural.white"}static fromXML(e){var t,i,r,s,o;let a=e.documentElement,c="";try{let k=a.querySelectorAll("sourceDesc");for(let j of Array.from(k))for(let B of Array.from(j.querySelectorAll("source"))){if(""!==c)break;if("IIIF"===B.getAttribute("targettype")){c=B.getAttribute("target");break}}}catch(k){console.debug(k)}let d=new Oy(c);for(let k of Array.from(a.querySelectorAll("manifestation")))if(k.querySelector("titleStmt")){let j=null===(i=null===(t=k.querySelector("titleStmt"))||void 0===t?void 0:t.querySelector("title"))||void 0===i?void 0:i.querySelector("identifier");if(j&&"siglum"===j.getAttribute("label")){d.metadata.siglum=j.textContent;break}}let f=null===(r=a.querySelector("fileDesc"))||void 0===r?void 0:r.querySelector("titleStmt");if(f){f.querySelector("title")&&(d.metadata.shortTitle=f.querySelector("title").textContent);for(let k of Array.from(null===(s=f.querySelector("respStmt"))||void 0===s?void 0:s.querySelectorAll("persName")))switch(k.getAttribute("role").toLowerCase()){case"encoder":case"proofreader":case"editor":let j={name:k.textContent,type:k.getAttribute("role").toLowerCase()};d.metadata.contributors.push(j)}}if(a.querySelector("workList")){let k=a.querySelector("work");if(k&&(k.querySelector("title")&&(d.metadata.shortTitle=k.querySelector("title").textContent),k.querySelector("composer")&&(d.metadata.composerName=k.querySelector("composer").textContent),k.querySelector("classification"))){let j=k.querySelector("classification").querySelector("termList");if(j)for(let B of Array.from(j.querySelectorAll("term"))){switch(B.textContent){case"Motet":case"Song":case"Conductus":case"Mass Movement":case"Plainchant":d.metadata.genre=B.textContent}if(""!==d.metadata.genre)break}}}let _=a.querySelector("facsimile"),y=Array.from(_.querySelectorAll("surface")),w=Array.from(_.querySelectorAll("zone"));const I=Array.from(a.querySelectorAll("part"));for(const k of I){let j=k.querySelector("staffDef");console.assert(j.hasAttribute("label"));let B=j.getAttribute("label"),J=/^[tT]enor/.test(B)?new NR(d,k.getAttribute("xml:id")):new Yg(d,k.getAttribute("xml:id"));J.voice=Qn[B],d.parts.push(J);let pe=j.querySelector("mensur"),De="";d.notationSubtype=j.hasAttribute("notationsubtype")?j.getAttribute("notationsubtype"):"",j.hasAttribute("modusminor")?J.modus=j.getAttribute("modusminor"):pe&&pe.hasAttribute("modusminor")&&(J.modus=pe.getAttribute("modusminor")),j.hasAttribute("tempus")?J.tempus=j.getAttribute("tempus"):pe&&pe.hasAttribute("tempus")&&(J.tempus=pe.getAttribute("tempus")),j.hasAttribute("prolatio")?J.prolatio=j.getAttribute("prolatio"):pe&&pe.hasAttribute("prolatio")&&(J.prolatio=pe.getAttribute("prolatio")),j.hasAttribute("sign")?De+=j.getAttribute("sign"):pe&&pe.hasAttribute("sign")&&(De+=pe.getAttribute("sign")),(j.hasAttribute("slash")&&"1"===j.getAttribute("slash")||pe&&pe.hasAttribute("slash")&&"1"===pe.getAttribute("slash"))&&(De+="|"),(j.hasAttribute("dot")&&"true"===j.getAttribute("dot")||pe&&pe.hasAttribute("dot")&&"true"===pe.getAttribute("dot"))&&(De+="."),j.hasAttribute("num")?De+=j.getAttribute("num"):pe&&pe.hasAttribute("num")&&(De+=pe.getAttribute("num")),j.hasAttribute("numbase")?De=De+"/"+j.getAttribute("numbase"):pe&&pe.hasAttribute("numbase")&&(De=De+"/"+pe.getAttribute("numbase")),""===De&&(De="N/A"),J.sign=De;const zt=k.querySelector("layer");if(/^[tT]enor/.test(J.voice)){const ft=k.querySelector("dir");if(ft){const an=J;an.repetitions=Number(ft.getAttribute("n"))+1;const qn=ft.getAttribute("plist").match(/^#[-\w\d]+ #([-\w\d]+)$/);qn.length>1&&(an.endingId=qn[1])}}const bt=Array.from(zt.querySelectorAll("pb,sb,clef,note,rest,mensur"));let Rt=null,Tt=null;for(const ft of bt)if("pb"===ft.tagName){let _i=function(Zn){fetch(c).then(Oe=>Oe.json()).then(Oe=>{let ze=Oe.sequences[0].canvases;Zn.index=ze.findIndex(Qe=>Qe["@id"]===Zn.canvasIRI),Zn.codedVal=ze[Zn.index].label})},an=ft.getAttribute("facs").split("#")[1];console.assert(y.some(Zn=>Zn.getAttribute("xml:id")===an));let Pn=y.find(Zn=>Zn.getAttribute("xml:id")===an).querySelector("graphic");Rt=new FR(Pn.getAttribute("target"),ft.getAttribute("xml:id")),_i(Rt)}else if("sb"===ft.tagName){let an;if(ft.hasAttribute("facs")){let qn=ft.getAttribute("facs").split("#")[1];console.assert(w.some(_i=>_i.getAttribute("xml:id")===qn));let Pn=w.find(_i=>_i.getAttribute("xml:id")===qn);an=new lA({ulx:Number(Pn.getAttribute("ulx")),uly:Number(Pn.getAttribute("uly")),lrx:Number(Pn.getAttribute("lrx")),lry:Number(Pn.getAttribute("lry"))},ft.getAttribute("xml:id"))}else an=new lA({ulx:0,uly:0,lrx:0,lry:0},ft.getAttribute("xml:id"));Tt=new cA,Tt.sb=an,Tt.pb=Rt,J.addSystem(Tt)}else if("clef"===ft.tagName){let an=My.parseXML(ft);if("keySig"===(null===(o=ft.nextElementSibling)||void 0===o?void 0:o.tagName)){const qn=ft.nextElementSibling.getAttribute("sig");if(/([1-9]|1[0-2])(f|s)/.test(qn)){const Pn=/([1-9]|1[0-2])(f|s)/.exec(qn),_i=parseInt(Pn[1]),Zn=Pn[2],Oe=["f","c","g","d","a","e","b"],ze=["b","e","a","d","g","c","f"];for(let Qe=0;Qe<_i;Qe++)"f"===Zn?an.m_keySig.set(ze[Qe],"-"):an.m_keySig.set(Oe[Qe],"#")}}Tt.contents.m_list.push(an)}else if("rest"===ft.tagName){let an=Ty.parseXML(ft);Tt.contents.m_list.push(an)}else if("note"===ft.tagName){let an=Pu.parseXML(ft);Tt.contents.m_list.push(an)}else if("mensur"===ft.tagName){let an=Iy.parseXML(ft);Tt.contents.m_list.push(an)}}return d}generateXML(){this.parts.sort(Yg.compare),this._createSkeletonMEI();let e=this._meiDoc.querySelector("parts");for(let t of this.parts){if(0===t.systems.length)continue;let i=(/^[tT]enor/.test(t.voice),t.generatePartXML());0!==i.querySelector("layer").children.length&&e.appendChild(i)}return this._meiDoc}_createSkeletonMEI(){this._meiDoc=document.implementation.createDocument(Ae,"mei",null);let e=this._meiDoc.documentElement;e.setAttribute("meiversion","5.0.0-dev"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");let t=this._generateHeader();e.appendChild(t);let i=this._meiDoc.createElementNS(Ae,"music"),r=this._meiDoc.createElementNS(Ae,"facsimile"),s=this._meiDoc.createElementNS(Ae,"body"),o=this._meiDoc.createElementNS(Ae,"mdiv"),a=this._meiDoc.createElementNS(Ae,"parts");e.appendChild(i),i.appendChild(r),i.appendChild(s),s.appendChild(o),o.appendChild(a)}_generateHeader(){var e,t;let i=this._meiDoc.createElementNS(Ae,"meiHead"),r=this._meiDoc.createElementNS(Ae,"fileDesc");i.appendChild(r);let s=this._meiDoc.createElementNS(Ae,"titleStmt");r.appendChild(s);let o=this._meiDoc.createElementNS(Ae,"title");o.textContent=this.metadata.shortTitle,s.appendChild(o);let a=this._meiDoc.createElementNS(Ae,"composer");a.textContent=this.metadata.composerName,s.appendChild(a);let c=this._meiDoc.createElementNS(Ae,"funder"),d=this._meiDoc.createElementNS(Ae,"funder"),f=this._meiDoc.createElementNS(Ae,"corpName"),p=this._meiDoc.createElementNS(Ae,"corpName");f.textContent="Brandeis University",c.appendChild(f),p.textContent="National Endowment for the Humanities (NEH)",d.appendChild(p),s.appendChild(c),s.appendChild(d);let _=this._meiDoc.createElementNS(Ae,"respStmt");s.appendChild(_);let y=this._meiDoc.createElementNS(Ae,"persName");y.textContent="Karen Desmond",y.setAttribute("role","project director"),y.setAttribute("auth","VIAF"),y.setAttribute("auth.uri","http://viaf.org/viaf/"),y.setAttribute("codedval","316001213"),_.appendChild(y);for(let zh of this.metadata.contributors){let _c=this._meiDoc.createElementNS(Ae,"persName");_c.textContent=zh.name,_c.setAttribute("role",zh.type),_.appendChild(_c)}let w=this._meiDoc.createElementNS(Ae,"pubStmt");r.appendChild(w);let I=this._meiDoc.createElementNS(Ae,"publisher");w.appendChild(I);let k=this._meiDoc.createElementNS(Ae,"persName");k.textContent="Karen Desmond",I.appendChild(k);let j=this._meiDoc.createElementNS(Ae,"corpName");j.textContent="Brandeis University",I.appendChild(j);let B=this._meiDoc.createElementNS(Ae,"date");B.textContent=(new Date).getFullYear().toString(),w.appendChild(B);let J=this._meiDoc.createElementNS(Ae,"availability");w.appendChild(J);let pe=this._meiDoc.createElementNS(Ae,"useRestrict");pe.textContent="Available for purposes of academic research and teaching only.",J.appendChild(pe);let De=this._meiDoc.createElementNS(Ae,"seriesStmt");r.appendChild(De);let zt=this._meiDoc.createElementNS(Ae,"title");zt.textContent="Measuring Polyphony: Digital Encodings of Late Medieval Music",De.appendChild(zt);let bt=this._meiDoc.createElementNS(Ae,"editor");De.appendChild(bt);let Rt=this._meiDoc.createElementNS(Ae,"persName");Rt.textContent="Karen Desmond",bt.appendChild(Rt);let Tt=this._meiDoc.createElementNS(Ae,"identifier");De.appendChild(Tt);let ft=this._meiDoc.createElementNS(Ae,"ref");ft.setAttribute("targettype","home_page"),ft.setAttribute("target","http://www.measuringpolyphony.org/"),Tt.appendChild(ft);let an=this._meiDoc.createElementNS(Ae,"notesStmt"),qn=this._meiDoc.createElementNS(Ae,"annot");qn.setAttribute("label","original_clefs"),an.appendChild(qn);let Pn=this._meiDoc.createElementNS(Ae,"annot");Pn.setAttribute("label","commentary"),an.appendChild(Pn),r.appendChild(an);let _i=this._meiDoc.createElementNS(Ae,"sourceDesc");r.appendChild(_i);let Zn=this._meiDoc.createElementNS(Ae,"source");_i.appendChild(Zn),Zn.setAttribute("targettype","IIIF"),Zn.setAttribute("target",this.metadata.sourceIRI);let Oe=this._meiDoc.createElementNS(Ae,"locus");Zn.appendChild(Oe),Oe.textContent=null===(t=null===(e=this.parts[0])||void 0===e?void 0:e.systems[0])||void 0===t?void 0:t.pb.codedVal;let ze=this._meiDoc.createElementNS(Ae,"encodingDesc");i.appendChild(ze);let Qe=this._meiDoc.createElementNS(Ae,"appInfo");ze.appendChild(Qe);let pt=this._meiDoc.createElementNS(Ae,"application");pt.setAttribute("xml:id","MPEditor"),Qe.appendChild(pt);let ni=this._meiDoc.createElementNS(Ae,"name");ni.textContent="Measuring Polyphony Editor",pt.appendChild(ni);let or=this._meiDoc.createElementNS(Ae,"editorialDecl");ze.appendChild(or);let kn=this._meiDoc.createElementNS(Ae,"p");kn.textContent="This MEI encoding in mensural notation was made using the Measuring Polyphony Editor, transcribed from IIIF images of the original manuscript source one staff at a time, entering the pitches and rhythms for each stave using a combination of number and letter keystrokes. The Measuring Polyphony Editor generates two MEI files from this user input: an MEI parts file that captures each voice part entered, and an MEI score file that scores up the voice parts, which is viewable here.",or.appendChild(kn);let Bs=this._meiDoc.createElementNS(Ae,"projectDesc");ze.appendChild(Bs);let $n=this._meiDoc.createElementNS(Ae,"p");$n.textContent="The Measuring Polyphony Editor, funded by a 2019-2020 NEH Digital Humanities Grant, is a prototype tool that allows a variety of modern readers (students and experts, musicologists, music theorists, those interested in the history of music notation, counterpoint, medieval palaeography and/or manuscript studies) to access and contribute transcriptions of music directly linked to digital images of the medieval manuscripts, and to learn about the original notation. This tool will offer new possibilities for the analysis and interpretation of late medieval music. In a broader humanities context, the project investigates how modeling the meanings of notational signs can lead to new understandings of the interaction between the sign and the signified, and of the relationship between notational style and changes in musical style across time and place.",Bs.appendChild($n);let gm=this._meiDoc.createElementNS(Ae,"workList");i.appendChild(gm);let mc=this._meiDoc.createElementNS(Ae,"work");gm.appendChild(mc);let ar=this._meiDoc.createElementNS(Ae,"identifier");ar.setAttribute("type","catalogue_number"),mc.appendChild(ar);let Ea=this._meiDoc.createElementNS(Ae,"title");Ea.textContent=this.metadata.shortTitle,mc.appendChild(Ea);let $o=this._meiDoc.createElementNS(Ae,"composer");$o.textContent=this.metadata.composerName,mc.appendChild($o);let Da=this._meiDoc.createElementNS(Ae,"incip");mc.appendChild(Da);for(let zh of this.parts){let _c=this._meiDoc.createElementNS(Ae,"incipText");_c.setAttribute("label",zh.voice.toString()),_c.setAttribute("corresp","#"+zh.voice.toString().replace(" ","")),_c.innerHTML="<lg><l>["+zh.voice.toString().toUpperCase()+"]</l></lg>",Da.appendChild(_c)}let $h=this._meiDoc.createElementNS(Ae,"classification");mc.appendChild($h);let mL=this._meiDoc.createElementNS(Ae,"termList");$h.appendChild(mL);let _L=this._meiDoc.createElementNS(Ae,"term");_L.textContent=this.metadata.genre,mL.appendChild(_L);let vL=this._meiDoc.createElementNS(Ae,"manifestationList");i.appendChild(vL);let mm=this._meiDoc.createElementNS(Ae,"manifestation");mm.setAttribute("singleton","true"),vL.appendChild(mm);let bL=this._meiDoc.createElementNS(Ae,"titleStmt");mm.appendChild(bL);let yL=this._meiDoc.createElementNS(Ae,"title");bL.appendChild(yL);let XA=this._meiDoc.createElementNS(Ae,"identifier");XA.setAttribute("label","siglum"),XA.textContent=this.metadata.siglum,yL.appendChild(XA);let wL=this._meiDoc.createElementNS(Ae,"physLoc");mm.appendChild(wL);let l0=this._meiDoc.createElementNS(Ae,"repository");wL.appendChild(l0);let CL=this._meiDoc.createElementNS(Ae,"corpName");CL.textContent="[LIBRARY NAME]",l0.appendChild(CL);let EL=this._meiDoc.createElementNS(Ae,"identifier");l0.appendChild(EL),EL.textContent="[SHELFMARK]";let JA=this._meiDoc.createElementNS(Ae,"ptr");l0.appendChild(JA),JA.setAttribute("targettype","IIIF"),JA.setAttribute("target",this.metadata.sourceIRI);let DL=this._meiDoc.createElementNS(Ae,"notesStmt");mm.appendChild(DL);let SL=this._meiDoc.createElementNS(Ae,"annot");return SL.textContent="Primary manuscript source for this encoding.",DL.appendChild(SL),i}getSystems(){let e=[];for(let t of this.parts)e.unshift(...t.systems);return e}getSystem(e){let i=this.getSystems().filter(r=>r.id===e);return i.length>0?i[0]:null}getPart(e){let t=this.parts.filter(i=>i.voice===e);return t.length>0?t[0]:null}getOrCreatePart(e){if(this.parts.some(i=>i.voice===e))return this.getPart(e);let t=/^[tT]enor/.test(e)?new NR(this):new Yg(this);return t.voice=e,this.parts.push(t),this.parts.sort(Yg.compare),t}getPb(e){let t=new Set;for(let i of this.parts)i.systems.forEach(r=>{t.add(r.pb)});for(let i of t.values())if(i.index===e)return i;return null}}class uW{constructor(){this.contributors=[]}}function LR(n,e){switch(n){case"gallica":return"https://gallica.bnf.fr/iiif/ark:/"+e+"/manifest.json";case"ecodices":return"https://www.e-codices.unifr.ch/metadata/iiif/"+e+"/manifest.json";case"diamm":return"https://www.diamm.ac.uk/sources/"+e+"/manifest";case"iiif":return decodeURIComponent(e);default:return""}}const VR=new RegExp("https?://gallica.bnf.fr/ark:/([a-z0-9]+/[a-z0-9]+)"),BR=new RegExp("https?://gallica.bnf.fr/iiif/ark:/([a-z0-9]+/[a-z0-9]+)/manifest.json"),jR=new RegExp("https?://www.e-codices.unifr.ch/[a-z]{2}/list/one/([a-z]+)/([-a-zA-Z0-9]+)"),Py=new RegExp("https?://www.e-codices.unifr.ch/metadata/iiif/([-a-zA-Z0-9]+)/manifest.json"),HR=new RegExp("https?://.*"),ky=new RegExp("https://www.diamm.ac.uk/sources/([0-9]+)");var Qg=(()=>(function(n){n.NONE="None",n.SEMIBREVE="semibrevis",n.BREVE="brevis",n.LONG="longa"}(Qg||(Qg={})),Qg))();let ic=(()=>{class n{constructor(){this.meiDoc=null,this.editorialMode=!1,this.scoreOptions={barlines:Qg.NONE,modernClefs:!1}}get mei(){return this.meiDoc}set mei(t){this.meiDoc=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Oh(n,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}function Ry(n){return n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n}function Fy(n,e,t){return t.a=n,t.f=e,t}function Ce(n){return Fy(2,n,function(e){return function(t){return n(e,t)}})}function dn(n){return Fy(3,n,function(e){return function(t){return function(i){return n(e,t,i)}}})}function rc(n){return Fy(4,n,function(e){return function(t){return function(i){return function(r){return n(e,t,i,r)}}}})}function UR(n){return Fy(5,n,function(e){return function(t){return function(i){return function(r){return function(s){return n(e,t,i,r,s)}}}}})}function O(n,e,t){return 2===n.a?n.f(e,t):n(e)(t)}function Ie(n,e,t,i){return 3===n.a?n.f(e,t,i):n(e)(t)(i)}function si(n,e,t,i,r){return 4===n.a?n.f(e,t,i,r):n(e)(t)(i)(r)}function $R(n,e,t,i,r,s){return 5===n.a?n.f(e,t,i,r,s):n(e)(t)(i)(r)(s)}var Xg,zR,pn={$:0};function sc(n,e){return{$:1,a:n,b:e}}var gn=Ce(sc);function Zt(n){for(var e=pn,t=n.length;t--;)e=sc(n[t],e);return e}function GR(n){for(var e=[];n.b;n=n.b)e.push(n.a);return e}var uA=dn(function(n,e,t){for(var i=[];e.b&&t.b;e=e.b,t=t.b)i.push(O(n,e.a,t.a));return Zt(i)}),WR=dn(function(n,e,t){for(var i=Array(n),r=0;n>r;r++)i[r]=t(e+r);return i}),dA=Ce(function(n,e){for(var t=Array(n),i=0;n>i&&e.b;i++)t[i]=e.a,e=e.b;return t.length=i,Di(t,e)}),oc=Ce(function(n,e){return e[n]}),ku=dn(function(n,e,t){for(var i=t.length,r=Array(i),s=0;i>s;s++)r[s]=t[s];return r[n]=e,r}),qR=Ce(function(n,e){for(var t=e.length,i=Array(t+1),r=0;t>r;r++)i[r]=e[r];return i[t]=n,i}),Ph=dn(function(n,e,t){for(var i=t.length,r=0;i>r;r++)e=O(n,t[r],e);return e}),kh=dn(function(n,e,t){for(var i=t.length-1;i>=0;i--)e=O(n,t[i],e);return e}),Ny=Ce(function(n,e){for(var t=e.length,i=Array(t),r=0;t>r;r++)i[r]=n(e[r]);return i}),sl=dn(function(n,e,t){return t.slice(n,e)}),ZR=dn(function(n,e,t){var i=e.length,r=n-i;r>t.length&&(r=t.length);for(var s=Array(i+r),o=0;o<i;o++)s[o]=e[o];for(o=0;r>o;o++)s[o+i]=t[o];return s});function Ly(n){throw Error("https://github.com/elm/core/blob/1.0.0/hints/"+n+".md")}function ac(n,e){for(var t,i=[],r=hA(n,e,0,i);r&&(t=i.pop());r=hA(t.a,t.b,0,i));return r}function hA(n,e,t,i){if(n===e)return!0;if("object"!==(void 0===n?"undefined":Ry(n))||null===n||null===e)return"function"==typeof n&&Ly(5),!1;if(t>100)return i.push(Di(n,e)),!0;if(n.$<0&&(n=rF(n),e=rF(e)),"function"==typeof DataView&&Oh(n,DataView)){var r=n.byteLength;if(e.byteLength!==r)return!1;for(var s=0;r>s;++s)if(n.getUint8(s)!==e.getUint8(s))return!1}for(var o in n)if(!hA(n[o],e[o],t+1,i))return!1;return!0}function di(n,e,t){if("object"!==(void 0===n?"undefined":Ry(n)))return n===e?0:e>n?-1:1;if(void 0===n.$)return(t=di(n.a,e.a))||(t=di(n.b,e.b))?t:di(n.c,e.c);for(;n.b&&e.b&&!(t=di(n.a,e.a));n=n.b,e=e.b);return t||(n.b?1:e.b?-1:0)}function Di(n,e){return{a:n,b:e}}function lc(n,e){if("string"==typeof n)return n+e;if(!n.b)return e;var t=sc(n.a,e);n=n.b;for(var i=t;n.b;n=n.b)i=i.b=sc(n.a,e);return t}var Vy=Ce(function(n,e){var t=e%n;return 0===n?Ly(11):t>0&&n<0||t<0&&n>0?t+n:t}),fA=Math.ceil,pA=Math.floor,KR=Math.log,dW=Ce(function(n,e){return n&&e}),hW=Ce(function(n,e){return n!==e}),fW=Ce(function(n,e){return n+e}),pW=dn(function(n,e,t){for(var i=t.length;i-- >0;){var r=t[i],s=t.charCodeAt(i);56320<=s&&s<=57343&&(r=t[--i]+r),e=O(n,r,e)}return e}),gW=Ce(function(n,e){return e.split(n)}),mW=Ce(function(n,e){return e.join(n)}),_W=dn(function(n,e,t){return t.slice(n,e)}),vW=Ce(function(n,e){for(var t=e.length;t-- >0;){var i=e[t],r=e.charCodeAt(t);if(56320<=r&&r<=57343&&(i=e[--t]+i),!n(i))return!1}return!0});function Jg(n){return{$:2,b:n}}var bW=Jg(function(n){return"number"!=typeof n?lo("an INT",n):-2147483647<n&&n<2147483647&&(0|n)===n||isFinite(n)&&!(n%1)?co(n):lo("an INT",n)});Jg(function(n){return"boolean"==typeof n?co(n):lo("a BOOL",n)}),Jg(function(n){return"number"==typeof n?co(n):lo("a FLOAT",n)}),Jg(function(n){return co(n)});var yW=Jg(function(n){return"string"==typeof n?co(n):Oh(n,String)?co(n+""):lo("a STRING",n)}),YR=Ce(function(n,e){return{$:6,d:n,b:e}}),QR=Ce(function(n,e){return{$:10,b:e,h:n}}),wW=Ce(function(n,e){return ol(n,e)});function ol(n,e){switch(n.$){case 2:return n.b(e);case 5:return null===e?co(n.c):lo("null",e);case 3:return By(e)?XR(n.b,e,Zt):lo("a LIST",e);case 4:return By(e)?XR(n.b,e,CW):lo("an ARRAY",e);case 6:var t=n.d;if("object"!==(void 0===e?"undefined":Ry(e))||null===e||!(t in e))return lo("an OBJECT with a field named `"+t+"`",e);var d=ol(n.b,e[t]);return hc(d)?d:Ru(O(oF,t,d.a));case 7:var i=n.e;return By(e)?i>=e.length?lo("a LONGER array. Need index "+i+" but only see "+e.length+" entries",e):(d=ol(n.b,e[i]),hc(d)?d:Ru(O(aF,i,d.a))):lo("an ARRAY",e);case 8:if("object"!==(void 0===e?"undefined":Ry(e))||null===e||By(e))return lo("an OBJECT",e);var r=pn;for(var s in e)if(e.hasOwnProperty(s)){if(d=ol(n.b,e[s]),!hc(d))return Ru(O(oF,s,d.a));r=sc(Di(s,d.a),r)}return co(uo(r));case 9:for(var o=n.f,a=n.g,c=0;c<a.length;c++){if(d=ol(a[c],e),!hc(d))return d;o=o(d.a)}return co(o);case 10:return d=ol(n.b,e),hc(d)?ol(n.h(d.a),e):d;case 11:for(var f=pn,p=n.g;p.b;p=p.b){if(d=ol(p.a,e),hc(d))return d;f=sc(d.a,f)}return Ru(MW(uo(f)));case 1:return Ru(O(sF,n.a,e));case 0:return co(n.a)}}function XR(n,e,t){for(var i=e.length,r=Array(i),s=0;i>s;s++){var o=ol(n,e[s]);if(!hc(o))return Ru(O(aF,s,o.a));r[s]=o.a}return co(t(r))}function By(n){return Array.isArray(n)||"undefined"!=typeof FileList&&Oh(n,FileList)||"undefined"!=typeof TouchList&&Oh(n,TouchList)||"undefined"!=typeof HTMLCollection&&Oh(n,HTMLCollection)||"undefined"!=typeof NodeList&&Oh(n,NodeList)}function CW(n){return O(pF,n.length,function(e){return n[e]})}function lo(n,e){return Ru(O(sF,"Expecting "+n,e))}var EW=Ce(function(n,e){return JSON.stringify(e,null,n)+""}),JR=Ce(function(n,e){return{$:3,b:n,d:e}}),DW=0,gA=!1,eF=[];function mA(n){if(eF.push(n),!gA){for(gA=!0;n=eF.shift();)!function(e){for(;e.f;){var t=e.f.$;if(0===t||1===t){for(;e.g&&e.g.$!==t;)e.g=e.g.i;if(!e.g)return;e.f=e.g.b(e.f.a),e.g=e.g.i}else{if(2===t)return void(e.f.c=e.f.b(function(i){e.f=i,mA(e)}));if(5===t){if(0===e.h.length)return;e.f=e.f.b(e.h.shift())}else e.g={$:+(3!==t),b:e.f.b,i:e.g},e.f=e.f.d}}}(n);gA=!1}}var SW=rc(function(n,e,t,i){return function(r,s,o,a,c,d){var f=O(wW,r,s?s.flags:void 0);hc(f)||Ly(2);var p={},_=o(f.a),y=_.a,I=function(j,B){var J;for(var pe in al){var De=al[pe];De.a&&((J=J||{})[pe]=De.a(pe,B)),j[pe]=function(zt,bt){var Rt,Tt,ft={g:bt,h:void 0},an=zt.c,qn=zt.d,Pn=zt.e,_i=zt.f;return ft.h=(Rt=O(JR,function Zn(Oe){return O(JR,Zn,{$:5,b:function(ze){var Qe=ze.a;return 0===ze.$?Ie(qn,ft,Qe,Oe):Pn&&_i?si(an,ft,Qe.i,Qe.j,Oe):Ie(an,ft,Pn?Qe.i:Qe.j,Oe)}})},zt.b),mA(Tt={$:0,e:DW++,f:Rt,g:null,h:[]}),Tt)}(De,B)}return J}(p,function k(j,B){var J=O(a,j,y);y=J.a,nF(p,J.b,c(y))});return nF(p,_.b,c(y)),I?{ports:I}:{}}(e,i,n.aX,n.a6,n.a4)}),al={},tF=[],_A=!1;function nF(n,e,t){if(tF.push({p:n,q:e,r:t}),!_A){_A=!0;for(var i;i=tF.shift();)!function(r,s,o){var a,d={};for(var f in jy(!0,s,d,null),jy(!1,o,d,null),r)(a=r[f]).h.push({$:"fx",a:d[f]||{i:pn,j:pn}}),mA(a)}(i.p,i.q,i.r);_A=!1}}function jy(n,e,t,i){switch(e.$){case 1:var s,o,c,d,f,p=e.k,_=(s=p,o=i,O(n?al[s].e:al[s].f,function(w){for(var I=o;I;I=I.t)w=I.s(w);return w},e.l));return void(t[p]=(c=n,d=_,f=(f=t[p])||{i:pn,j:pn},c?f.i=sc(d,f.i):f.j=sc(d,f.j),f));case 2:for(var y=e.m;y.b;y=y.b)jy(n,y.a,t,i);return;case 3:return void jy(n,e.o,t,{s:e.n,t:i})}}var AW=Ce(function(n,e){return e}),xW=dn(function(n,e,t){var i=t.c,r=t.d,s=Ce(function(o,a){return Ie(kh,o.$?n:s,a,o.a)});return Ie(kh,s,Ie(kh,n,e,r),i)}),iF=dn(function(n,e,t){for(;;){if(-2===t.$)return e;var s=t.d,a=n,c=Ie(n,t.b,t.c,Ie(iF,n,e,t.e));n=a,e=c,t=s}}),rF=function(n){return Ie(iF,dn(function(e,t,i){return O(gn,Di(e,t),i)}),pn,n)},Ru=function(n){return{$:1,a:n}},sF=Ce(function(n,e){return{$:3,a:n,b:e}}),oF=Ce(function(n,e){return{$:0,a:n,b:e}}),aF=Ce(function(n,e){return{$:1,a:n,b:e}}),co=function(n){return{$:0,a:n}},MW=function(n){return{$:2,a:n}},ki=function(n){return{$:0,a:n}},cc={$:1},em=function(n){return n+""},tm=Ce(function(n,e){return O(mW,n,GR(e))}),TW=Ce(function(n,e){return Zt(O(gW,n,e))}),lF=function(n){return O(tm,"\n    ",O(TW,"\n",n))},Rh=dn(function(n,e,t){for(;;){if(!t.b)return e;var r=t.b,s=n,o=O(n,t.a,e);n=s,e=o,t=r}}),ll=function(n){return Ie(Rh,Ce(function(e,t){return t+1}),0,n)},IW=dn(function(n,e,t){for(;;){if(!(1>di(n,e)))return t;var i=n,r=e-1,s=O(gn,e,t);n=i,e=r,t=s}}),cF=Ce(function(n,e){return Ie(IW,n,e,pn)}),OW=Ce(function(n,e){return Ie(uA,n,O(cF,0,ll(e)-1),e)}),uF=function(n){return n.toLowerCase()},vA=function(n){return n.toUpperCase()},dF=function(n){return ac(n,uF(n))&&!ac(n,vA(n))},hF=function(n){return ac(n,vA(n))&&!ac(n,uF(n))},fF=function(n){var e=n.charCodeAt(0);return 55296<=e&&e<=56319?1024*(e-55296)+n.charCodeAt(1)-56320+65536:e},kW=function(n){return dF(n)||hF(n)||function(n){var e=fF(n);return e<=57&&48<=e}(n)},uo=function(n){return Ie(Rh,gn,pn,n)},RW=function(n){var e=n.charCodeAt(0);return isNaN(e)?cc:ki(55296<=e&&e<=56319?Di(n[0]+n[1],n.slice(2)):Di(n[0],n.slice(1)))},FW=Ce(function(n,e){return"\n\n("+em(n+1)+") "+lF(NW(e))}),NW=function(n){return O(LW,n,pn)},LW=Ce(function(n,e){for(;;)switch(n.$){case 0:var t=n.a,a=n.b,i=function(){var y=RW(t);if(1===y.$)return!1;var w=y.a,I=w.a,k=w.b;return(dF(I)||hF(I))&&O(vW,kW,k)}()?"."+t:"['"+t+"']";n=a,e=O(gn,i,e);continue;case 1:a=n.b;var s="["+em(n.a)+"]";n=a,e=O(gn,s,e);continue;case 2:var o=n.a;if(!o.b)return"Ran into a Json.Decode.oneOf with no possibilities"+(e.b?" at json"+O(tm,"",uo(e)):"!");if(o.b.b){var _=(e.b?"The Json.Decode.oneOf at json"+O(tm,"",uo(e)):"Json.Decode.oneOf")+" failed in the following "+em(ll(o))+" ways:";return O(tm,"\n\n",O(gn,_,O(OW,FW,o)))}n=a=o.a;continue;default:var f=n.a,p=n.b;return(_=e.b?"Problem with the value at json"+O(tm,"",uo(e))+":\n\n    ":"Problem with the given value:\n\n")+lF(O(EW,4,p))+"\n\n"+f}}),ho=rc(function(n,e,t,i){return{$:0,a:n,b:e,c:t,d:i}}),uc=[],bA=Ce(function(n,e){return KR(e)/KR(n)}),Pr=fA(O(bA,2,32)),Hy=si(ho,0,Pr,uc,uc),Fu=function(n){return{$:1,a:n}},ps=function(n){return n.length},Uy=Ce(function(n,e){return di(n,e)>0?n:e}),dc=function(n){return{$:0,a:n}},VW=Ce(function(n,e){for(;;){var t=O(dA,32,n),r=t.b,s=O(gn,dc(t.a),e);if(!r.b)return uo(s);n=r,e=s}}),BW=Ce(function(n,e){for(;;){var t=fA(e/32);if(1===t)return O(dA,32,n).a;n=O(VW,n,pn),e=t}}),$y=Ce(function(n,e){if(!e.a)return si(ho,ps(e.c),Pr,uc,e.c);var t=32*e.a,i=pA(O(bA,32,t-1)),r=O(BW,n?uo(e.d):e.d,e.a);return si(ho,ps(e.c)+t,O(Uy,5,i*Pr),r,e.c)}),jW=UR(function(n,e,t,i,r){for(;;){if(e<0)return O($y,!1,{d:i,a:t/32|0,c:r});var s=Fu(Ie(WR,32,e,n));e-=32,i=O(gn,s,i)}}),pF=Ce(function(n,e){if(n<=0)return Hy;var t=n%32,i=Ie(WR,t,n-t,e);return $R(jW,e,n-t-32,n,pn,i)}),hc=function(n){return!n.$},gF=rc(function(n,e,t,i){if(!i.b)return e;var r=i.a,s=i.b;if(!s.b)return O(n,r,e);var o=s.a,a=s.b;if(!a.b)return O(n,r,O(n,o,e));var c=a.a,d=a.b;if(!d.b)return O(n,r,O(n,o,O(n,c,e)));var p=d.b;return O(n,r,O(n,o,O(n,c,O(n,d.a,t>500?Ie(Rh,n,e,uo(p)):si(gF,n,e,t+1,p)))))}),Fh=dn(function(n,e,t){return si(gF,n,e,0,t)}),yA=Ce(function(n,e){return e.b?Ie(Fh,gn,e,n):n}),Nh=Ce(function(n,e){return Ie(Fh,Ce(function(t,i){return O(gn,n(t),i)}),pn,e)}),HW=Ce(function(n,e){return Ie(Fh,yA,pn,O(Nh,n,e))}),Nu=function(n){return n},zy=dn(function(n,e,t){return e(n(t))}),mF=dn(function(n,e,t){return n?e:t}),_F=O(zy,Nh(function(n){return Ie(mF,n<=0,!1,!0)}),Nu),vF=function(n){return Ie(pW,gn,pn,n)},nm=Ce(function(n,e){for(;;){if(n<=0||!e.b)return e;n-=1,e=e.b}}),UW=dn(function(n,e,t){for(;;){if(e<=0)return n;n=O(gn,t,n),e-=1}}),Gy=Ce(function(n,e){return Ie(UW,pn,n,e)}),im=Ce(function(n,e){var t=ll(e);return ac(t,n)?e:di(t,n)>0?O(nm,t-n,e):lc(O(Gy,n-t,!1),e)}),$W=Ce(function(n,e){for(;;){var t=Di(e/2|0,e%2),i=t.a,r=O(gn,O(Vy,2,t.b),n);if(!(i>0))return r;n=r,e=i}}),wA=O(zy,$W(pn),_F),bF=function(n){return O(Nh,function(e){return Ie(mF,e,1,0)},n)},zW=dn(function(n,e,t){for(;;){if(n<=0||!e.b)return t;var i=e.a;n-=1,e=e.b,t=O(gn,i,t)}}),GW=Ce(function(n,e){return uo(Ie(zW,n,e,pn))}),yF=dn(function(n,e,t){if(e<=0)return pn;var i=Di(e,t);e:for(;;){t:for(;;){if(!i.b.b)return t;if(!i.b.b.b){if(1===i.a)break e;break}switch(i.a){case 1:break e;case 2:var r=i.b;return Zt([r.a,r.b.a]);case 3:if(i.b.b.b.b){var o=i.b,a=o.b;return Zt([o.a,a.a,a.b.a])}break t;default:if(i.b.b.b.b&&i.b.b.b.b.b){var d=i.b,f=d.b,p=f.b,_=p.b,w=_.b;return O(gn,d.a,O(gn,f.a,O(gn,p.a,O(gn,_.a,n>1e3?O(GW,e-4,w):Ie(yF,n+1,e-4,w)))))}break t}}return t}return Zt([i.b.a])}),CA=Ce(function(n,e){return Ie(yF,0,n,e)}),wF=Ce(function(n,e){return Di(O(CA,n,e),O(nm,n,e))}),EA=Ce(function(n,e){return Ie(Fh,Ce(function(t,i){var r=i.a,s=i.b,o=O(wF,8-ll(t),s),c=o.b;return Di(lc(t,lc(uo(o.a),r)),c)}),Di(pn,uo(bF(O(im,8*ll(n),wA(e))))),n).a}),WW=function(n){var e=fF(n);return e<128?bF(O(im,8,wA(e))):O(EA,Zt(e<2048?[Zt([1,1,0]),Zt([1,0])]:e<65536?[Zt([1,1,1,0]),Zt([1,0]),Zt([1,0])]:[Zt([1,1,1,1,0]),Zt([1,0]),Zt([1,0]),Zt([1,0])]),e)},qW=(zR=function(n){return n},al[Xg="outgoing"]&&Ly(3),al[Xg]={e:AW,u:zR,a:function(n){var e=[],t=al[n].u,i={$:2,b:function(r){var s=setTimeout(function(){r({$:0,a:0})},0);return function(){clearTimeout(s)}},c:null};return al[n].b=i,al[n].c=dn(function(r,s,o){for(;s.b;s=s.b)for(var a=e,c=t(s.a),d=0;d<a.length;d++)a[d](c);return i}),{subscribe:function(r){if("function"!=typeof r)throw Error("Trying to subscribe an invalid callback on port `"+n+"`");e.push(r)},unsubscribe:function(r){var s=(e=e.slice()).indexOf(r);s>=0&&e.splice(s,1)}}}},function(n){return{$:1,k:Xg,l:n}}),CF=dn(function(n,e,t){return n<=0?t:Ie(CF,n>>1,lc(e,e),1&n?lc(t,e):t)}),ZW=Ce(function(n,e){return Ie(CF,n,e,"")}),KW=dn(function(n,e,t){return lc(O(ZW,n-t.length,O(fW,e,"")),t)}),EF=Ce(function(n,e){return Ie(uA,n,e.a,e.b)}),rm=function(n){return ll(n)},DA=Ce(function(n,e){var t=Di(rm(n),rm(e)),i=t.a,r=t.b;return ac(i,r)?Di(n,e):di(i,r)>0?Di(n,O(im,i,e)):Di(O(im,r,n),e)}),sm=Ce(function(n,e){return O(EF,dW,O(DA,n,e))}),DF=Ce(function(n,e){var t=n.a,i=n.b,r=e.f,s=e.p;return s&&t&&i?{f:O(gn,!0,r),p:!0}:t&&i||s&&(t||i)?{f:O(gn,!1,r),p:!0}:t||i||s?{f:O(gn,!0,r),p:!1}:{f:O(gn,!1,r),p:!1}}),YW=uA(Ce(function(n,e){return Di(n,e)})),QW=Ce(function(n,e){var t;return O(DF,Di(!1,!1),Ie(Fh,DF,{f:pn,p:!1},(t=O(DA,n,e),O(YW,t.a,t.b)))).f}),cl=dn(function(n,e,t){var i=O(QW,e,t),r=rm(i);return di(r,n)>0?O(nm,r-n,i):i}),wa=cl(64),Ho=4294967295>>>32-Pr,XW=dn(function(n,e,t){for(;;){var i=O(oc,Ho&e>>>n,t);if(i.$)return O(oc,Ho&e,i.a);n-=Pr,t=i.a}}),Lh=function(n){return n>>>5<<5},om=Ce(function(n,e){var t=e.a,i=e.b,r=e.c,s=e.d;return n<0||di(n,t)>-1?cc:di(n,Lh(t))>-1?ki(O(oc,Ho&n,s)):ki(Ie(XW,i,n,r))}),AF=Ce(function(n,e){return n(e)}),JW=AF(Nh(function(n){return!n})),Ca=function(n){return AF(function(e){var t,i;return i=(t=O(wF,ll(e)-n,e)).a,lc(t.b,i)})},xF=function(n){return O(Fh,function(e){return yA(n(e))},pn)},eq=function(n){switch(vA(n)){case"0":return Zt([!1,!1,!1,!1]);case"1":return Zt([!1,!1,!1,!0]);case"2":return Zt([!1,!1,!0,!1]);case"3":return Zt([!1,!1,!0,!0]);case"4":return Zt([!1,!0,!1,!1]);case"5":return Zt([!1,!0,!1,!0]);case"6":return Zt([!1,!0,!0,!1]);case"7":return Zt([!1,!0,!0,!0]);case"8":return Zt([!0,!1,!1,!1]);case"9":return Zt([!0,!1,!1,!0]);case"A":return Zt([!0,!1,!0,!1]);case"B":return Zt([!0,!1,!0,!0]);case"C":return Zt([!0,!0,!1,!1]);case"D":return Zt([!0,!0,!1,!0]);case"E":return Zt([!0,!0,!0,!1]);case"F":return Zt([!0,!0,!0,!0]);default:return pn}},Ee=function(n){return O(xF,eq,vF(n))},tq=dn(function(n,e,t){for(;;){var i=O(dA,32,n),r=i.a,s=i.b;if(0>di(ps(r),32))return O($y,!0,{d:e,a:t,c:r});n=s,e=O(gn,Fu(r),e),t+=1}}),MF=function(n){return n.b?Ie(tq,n,pn,0):Hy},TF=MF(Zt([Ee("428A2F98D728AE22"),Ee("7137449123EF65CD"),Ee("B5C0FBCFEC4D3B2F"),Ee("E9B5DBA58189DBBC"),Ee("3956C25BF348B538"),Ee("59F111F1B605D019"),Ee("923F82A4AF194F9B"),Ee("AB1C5ED5DA6D8118"),Ee("D807AA98A3030242"),Ee("12835B0145706FBE"),Ee("243185BE4EE4B28C"),Ee("550C7DC3D5FFB4E2"),Ee("72BE5D74F27B896F"),Ee("80DEB1FE3B1696B1"),Ee("9BDC06A725C71235"),Ee("C19BF174CF692694"),Ee("E49B69C19EF14AD2"),Ee("EFBE4786384F25E3"),Ee("0FC19DC68B8CD5B5"),Ee("240CA1CC77AC9C65"),Ee("2DE92C6F592B0275"),Ee("4A7484AA6EA6E483"),Ee("5CB0A9DCBD41FBD4"),Ee("76F988DA831153B5"),Ee("983E5152EE66DFAB"),Ee("A831C66D2DB43210"),Ee("B00327C898FB213F"),Ee("BF597FC7BEEF0EE4"),Ee("C6E00BF33DA88FC2"),Ee("D5A79147930AA725"),Ee("06CA6351E003826F"),Ee("142929670A0E6E70"),Ee("27B70A8546D22FFC"),Ee("2E1B21385C26C926"),Ee("4D2C6DFC5AC42AED"),Ee("53380D139D95B3DF"),Ee("650A73548BAF63DE"),Ee("766A0ABB3C77B2A8"),Ee("81C2C92E47EDAEE6"),Ee("92722C851482353B"),Ee("A2BFE8A14CF10364"),Ee("A81A664BBC423001"),Ee("C24B8B70D0F89791"),Ee("C76C51A30654BE30"),Ee("D192E819D6EF5218"),Ee("D69906245565A910"),Ee("F40E35855771202A"),Ee("106AA07032BBD1B8"),Ee("19A4C116B8D2D0C8"),Ee("1E376C085141AB53"),Ee("2748774CDF8EEB99"),Ee("34B0BCB5E19B48A8"),Ee("391C0CB3C5C95A63"),Ee("4ED8AA4AE3418ACB"),Ee("5B9CCA4F7763E373"),Ee("682E6FF3D6B2B8A3"),Ee("748F82EE5DEFB2FC"),Ee("78A5636F43172F60"),Ee("84C87814A1F0AB72"),Ee("8CC702081A6439EC"),Ee("90BEFFFA23631E28"),Ee("A4506CEBDE82BDE9"),Ee("BEF9A3F7B2C67915"),Ee("C67178F2E372532B"),Ee("CA273ECEEA26619C"),Ee("D186B8C721C0C207"),Ee("EADA7DD6CDE0EB1E"),Ee("F57D4F7FEE6ED178"),Ee("06F067AA72176FBA"),Ee("0A637DC5A2C898A6"),Ee("113F9804BEF90DAE"),Ee("1B710B35131C471B"),Ee("28DB77F523047D84"),Ee("32CAAB7B40C72493"),Ee("3C9EBE0A15C9BEBC"),Ee("431D67C49C100D4C"),Ee("4CC5D4BECB3E42B6"),Ee("597F299CFC657E2A"),Ee("5FCB6FAB3AD6FAEC"),Ee("6C44198C4A475817")])),SA=Ce(function(n,e){return e.$?n:e.a}),Uo=Ce(function(n,e){return O(EF,hW,O(DA,n,e))}),nq=Ce(function(n,e){var t=n.aW,i=n.a3,r=O(Uo,O(sm,e.Z,e.aa),O(Uo,O(sm,e.Z,e.ab),O(sm,e.aa,e.ab))),s=O(Uo,O(Ca,28,e.Z),O(Uo,O(Ca,34,e.Z),O(Ca,39,e.Z))),o=O(wa,s,r),a=O(Uo,O(sm,e.af,e.ai),O(sm,JW(e.af),e.aP)),c=O(Uo,O(Ca,14,e.af),O(Uo,O(Ca,18,e.af),O(Ca,41,e.af))),d=O(wa,e.C,O(wa,c,O(wa,a,O(wa,O(SA,pn,O(om,t,TF)),i))));return{Z:O(wa,d,o),aa:e.Z,ab:e.aa,ad:e.ab,af:O(wa,e.ad,d),ai:e.af,aP:e.ai,C:e.aP}}),IF=Ce(function(n,e){return O(yA,O(Gy,n,!1),O(CA,ll(e)-n,e))}),iq={M:1024,aK:nq,aO:function(n){var e=n.aT,t=n.aU,i=n.aR,r=n.aS,s=O(Uo,O(Ca,19,e),O(Uo,O(Ca,61,e),O(IF,6,e))),o=O(Uo,O(Ca,1,i),O(Uo,O(Ca,8,i),O(IF,7,i)));return O(wa,r,O(wa,o,O(wa,t,s)))},aY:{Z:Ee("6A09E667F3BCC908"),aa:Ee("BB67AE8584CAA73B"),ab:Ee("3C6EF372FE94F82B"),ad:Ee("A54FF53A5F1D36F1"),af:Ee("510E527FADE682D1"),ai:Ee("9B05688C2B3E6C1F"),aP:Ee("1F83D9ABFB41BD6B"),C:Ee("5BE0CD19137E2179")},a2:TF},rq=dn(function(n,e,t){return{Z:Ie(cl,n,e.Z,t.Z),aa:Ie(cl,n,e.aa,t.aa),ab:Ie(cl,n,e.ab,t.ab),ad:Ie(cl,n,e.ad,t.ad),af:Ie(cl,n,e.af,t.af),ai:Ie(cl,n,e.ai,t.ai),aP:Ie(cl,n,e.aP,t.aP),C:Ie(cl,n,e.C,t.C)}}),oq=Ce(function(n,e){return n({aW:e.a,a3:e.b})}),aq=dn(function(n,e,t){return Ie(rq,n.M/16|0,e,Ie(Rh,oq(n.aK),e,function(n){var e=n.a;return Ie(xW,Ce(function(t,i){var r=i.a,s=i.b;return Di(r-1,O(gn,Di(r,t),s))}),Di(e-1,pn),n).b}(t)))}),AA=Ce(function(n,e){var t=ps(n),i=32-ps(e.c)-t,r=Ie(ZR,32,e.c,n);return i<0?{d:O(gn,Fu(r),e.d),a:e.a+1,c:Ie(sl,i,t,n)}:i?{d:e.d,a:e.a,c:r}:{d:O(gn,Fu(r),e.d),a:e.a+1,c:uc}}),OF=function(n){return[n]},am=rc(function(n,e,t,i){var r=Ho&e>>>n;if(di(r,ps(i))>-1){if(5===n)return O(qR,Fu(t),i);var o=dc(si(am,n-Pr,e,t,uc));return O(qR,o,i)}var s=O(oc,r,i);return s.$?(o=dc(si(am,n-Pr,e,t,OF(s))),Ie(ku,r,o,i)):(o=dc(si(am,n-Pr,e,t,s.a)),Ie(ku,r,o,i))}),PF=Ce(function(n,e){var t=e.a,i=e.b,r=e.c,s=ps(e.d),o=ps(n),a=t+(o-s);if(!ac(o,32))return si(ho,a,i,r,n);if(!(di(a>>>Pr,1<<i)>0))return si(ho,a,i,si(am,i,t,n,r),uc);var c=i+Pr,d=si(am,c,t,n,OF(dc(r)));return si(ho,a,c,d,uc)}),kF=Ce(function(n,e){var t=e.d,i=ps(n),r=32-ps(t)-i,s=O(PF,Ie(ZR,32,t,n),e);return r<0?O(PF,Ie(sl,r,i,n),s):s}),cq=Ce(function(n,e){var i=e.c,r=e.d;if(1>di(e.a,128)){var s=Ce(function(a,c){return a.$?O(kF,a.a,c):Ie(Ph,s,c,a.a)});return O(kF,r,Ie(Ph,s,n,i))}return s=Ce(function(o,a){return o.$?O(AA,o.a,a):Ie(Ph,s,a,o.a)}),O($y,!0,O(AA,r,Ie(Ph,s,function(n){var e=n.a,t=n.c,i=n.d,r=Ce(function(s,o){return s.$?O(gn,s,o):Ie(Ph,r,o,s.a)});return{d:Ie(Ph,r,pn,t),a:e/32|0,c:i}}(n),i)))}),uq=Ce(function(n,e){return e.$?cc:ki(n(e.a))}),dq=UR(function(n,e,t,i,r){return 1===e.$||1===t.$||1===i.$||1===r.$?cc:ki(si(n,e.a,t.a,i.a,r.a))}),RF=rc(function(n,e,t,i){var r=Ho&e>>>n,s=O(oc,r,i);if(!s.$)return Ie(ku,r,dc(si(RF,n-Pr,e,t,s.a)),i);var o=Ie(ku,Ho&e,t,s.a);return Ie(ku,r,Fu(o),i)}),hq=dn(function(n,e,t){var i=t.a,r=t.b,s=t.c,o=t.d;return n<0||di(n,i)>-1?t:di(n,Lh(i))>-1?si(ho,i,r,s,Ie(ku,Ho&n,e,o)):si(ho,i,r,si(RF,r,n,e,s),o)}),fq=dn(function(n,e,t){return O(SA,t,O(uq,function(i){return Ie(hq,e,i,t)},$R(dq,rc(function(i,r,s,o){return n.aO({aR:s,aS:o,aT:i,aU:r})}),O(om,e-2,t),O(om,e-7,t),O(om,e-15,t),O(om,e-16,t))))}),pq=dn(function(n,e,t){var i=O(cq,t,e.R);return Ie(Rh,fq(n),i,e.S)}),gq=Ce(function(n,e){var t=e.a,i=e.c,r=e.d;if(!n)return e;if(di(n,Lh(t))>-1)return si(ho,t-n,Pr,uc,Ie(sl,n-Lh(t),ps(r),r));var s=n/32|0,o=Ce(function(p,_){return p.$?O(gn,p.a,_):Ie(kh,o,_,p.a)}),a=O(nm,s,Ie(kh,o,Zt([r]),i));if(!a.b)return Hy;var c=a.a,d=a.b,f={d:pn,a:0,c:Ie(sl,n-32*s,ps(c),c)};return O($y,!0,Ie(Rh,AA,f,d))}),mq=rc(function(n,e,t,i){for(;;){var r=O(oc,Ho&t>>>n,i);if(r.$)return Ie(sl,0,Ho&e,r.a);n-=Pr,i=r.a}}),_q=dn(function(n,e,t){for(;;){if(1>di(n,e)||!ps(t))return t;var i=O(oc,0,t);if(i.$)return t;n-=Pr,t=i.a}}),FF=dn(function(n,e,t){var i=Ho&e>>>n,r=O(oc,i,t);if(r.$)return Ie(sl,0,i,t);var s=Ie(FF,n-Pr,e,r.a);return ps(s)?Ie(ku,i,dc(s),Ie(sl,0,i+1,t)):Ie(sl,0,i,t)}),vq=Ce(function(n,e){var t=e.a,i=e.b,r=e.c,s=e.d;if(ac(n,t))return e;if(di(n,Lh(t))>-1)return si(ho,n,i,r,Ie(sl,0,Ho&n,s));var o=Lh(n),a=pA(O(bA,32,O(Uy,1,o-1))),c=O(Uy,5,a*Pr);return si(ho,n,c,Ie(_q,i,c,Ie(FF,i,o,r)),si(mq,i,n,o,r))}),NF=Ce(function(n,e){var t=e.a,i=n<0?t+n:n;return i<0?0:di(i,t)>0?t:i}),bq=dn(function(n,e,t){var i=O(NF,e,t),r=O(NF,n,t);return di(r,i)>0?Hy:O(gq,r,O(vq,i,t))}),yq=rc(function(n,e,t,i){for(;;){var r=Ie(aq,n,i,Ie(pq,n,e,Ie(bq,O(Uy,0,16*(e.t-1)),16*e.t,t)));if(!(0>di(e.t,e.X)))return r;e=function(c,d){var f={};for(var p in c)f[p]=c[p];for(var p in d)f[p]=d[p];return f}(e,{t:e.t+1}),i=r}}),wq=dn(function(n,e,t){if(n<=0||e<=0)return pn;var i=Ce(function(r,s){for(;;){if(!r.b)return uo(s);var o=O(nm,e,r),a=O(gn,O(CA,n,r),s);r=o,s=a}});return O(i,t,pn)}),LF=Ce(function(n,e){return Ie(wq,n,n,e)}),Cq=Ce(function(n,e){var s=e.d,o=function(a){return a.$?Fu(O(Ny,n,a.a)):dc(O(Ny,o,a.a))};return si(ho,e.a,e.b,O(Ny,o,e.c),O(Ny,n,s))}),Eq=Ce(function(n,e){return O(pF,n,function(t){return e})}),Dq=Ce(function(n,e){var t=n.a2.a-1,i={t:1,R:O(Eq,t-15,pn),S:O(cF,16,t),X:fA(rm(e)/n.M)};return si(yq,n,i,O(Cq,Nu,MF(O(LF,n.M/16|0,e))),n.aY)}),VF=O(zy,xF(function(n){return n}),Nu),Sq=Ce(function(n,e){return VF(O(Nh,function(t){return t(e)},n))})(Zt([function(n){return n.Z},function(n){return n.aa},function(n){return n.ab},function(n){return n.ad},function(n){return n.af},function(n){return n.ai},function(n){return n.aP},function(n){return n.C}])),Aq=Ce(function(n,e){var t=n.I,i=rm(e),r=t-O(Vy,t,i+1+(t/8|0));return VF(Zt([e,Zt([!0]),O(Gy,r,!1),O(im,t/8|0,wA(i))]))}),xA=Ce(function(n,e){return pA(n/e)}),xq=dn(function(n,e,t){for(;;){if(!t.b)return e+n;var i=t.a,r=t.b;if(0>di(i.U,e))return e+i.ao;t=r}}),Wy=Ce(function(n,e){var i=n.b;return Ie(xq,n.a,O(xA,e,6e4),i)}),MA=function(n){var e=O(xA,n,1440)+719468,t=(e>=0?e:e-146096)/146097|0,i=e-146097*t,r=(i-(i/1460|0)+(i/36524|0)-(i/146096|0))/365|0,s=i-(365*r+(r/4|0)-(r/100|0)),o=(5*s+2)/153|0,a=o+(o<10?3:-9);return{ae:s-((153*o+2)/5|0)+1,an:a,aG:r+400*t+ +(a<=2)}},BF=Ce(function(n,e){return MA(O(Wy,n,e)).ae}),Mq=function(n){for(;;){if(n.b){if(n.a){if(n.b.b){if(n.b.a){if(n.b.b.b){if(n.b.b.a){if(n.b.b.b.b){if(n.b.b.b.a){if(!n.b.b.b.b.b)return ki("F");break}if(!n.b.b.b.b.b)return ki("E")}break}if(n.b.b.b.b){if(n.b.b.b.a){if(!n.b.b.b.b.b)return ki("D");break}if(!n.b.b.b.b.b)return ki("C")}}break}if(n.b.b.b){if(n.b.b.a){if(n.b.b.b.b){if(n.b.b.b.a){if(!n.b.b.b.b.b)return ki("B");break}if(!n.b.b.b.b.b)return ki("A")}break}if(n.b.b.b.b){if(n.b.b.b.a){if(!n.b.b.b.b.b)return ki("9");break}if(!n.b.b.b.b.b)return ki("8")}}}break}if(n.b.b){if(n.b.a){if(n.b.b.b){if(n.b.b.a){if(n.b.b.b.b){if(n.b.b.b.a){if(!n.b.b.b.b.b)return ki("7");break}if(!n.b.b.b.b.b)return ki("6")}break}if(n.b.b.b.b){if(n.b.b.b.a){if(!n.b.b.b.b.b)return ki("5");break}if(!n.b.b.b.b.b)return ki("4")}}break}if(n.b.b.b){if(n.b.b.a){if(n.b.b.b.b){if(n.b.b.b.a){if(!n.b.b.b.b.b)return ki("3");break}if(!n.b.b.b.b.b)return ki("2")}break}if(n.b.b.b.b){if(n.b.b.b.a){if(!n.b.b.b.b.b)return ki("1");break}if(!n.b.b.b.b.b)return ki("0")}}}}break}return cc},Oq=Ce(function(n,e){switch(MA(O(Wy,n,e)).an){case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 9:return 8;case 10:return 9;case 11:return 10;default:return 11}}),kq=Ce(function(n,e){switch(O(Vy,7,O(xA,O(Wy,n,e),1440))){case 0:return 3;case 1:return 4;case 2:return 5;case 3:return 6;case 4:return 0;case 5:return 1;default:return 2}}),Rq=Ce(function(n,e){return MA(O(Wy,n,e)).aG}),lm=O(Ce(function(n,e){return{$:0,a:n,b:e}}),0,pn),Fq={$:2,m:pn},Nq={$:2,m:pn},Lq=SW({aX:function(n){var e,t=n.W,i=em(O(Rq,lm,t)),r=function(n){switch(n){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";default:return"December"}}(O(Oq,lm,t)),s=O(BF,lm,t),o=Ie(KW,2,"0",em(O(BF,lm,t))),a=function(n){switch(n){case 0:return"Monday";case 1:return"Tuesday";case 2:return"Wednesday";case 3:return"Thursday";case 4:return"Friday";case 5:return"Saturday";default:return"Sunday"}}(O(kq,lm,t));return Di(0,qW(Ie(_W,s,s+25,function(n){var e=4-O(Vy,4,ll(n)),t=e&&4!==e?lc(O(Gy,e,!1),n):n;return GR(O(Nh,O(zy,Mq,SA("0")),O(LF,4,t))).join("")}((e=_F(O(HW,WW,vF(i+" "+r+" "+a+" "+o+" "+n.L))),Sq(O(Dq,iq,O(Aq,{I:1024},e)))))).toLowerCase()))},a4:function(n){return Nq},a6:Ce(function(n,e){return Di(0,Fq)})}),Vq={Authenticate:{init:Lq(O(QR,function(n){return O(QR,function(e){return{$:0,a:{L:e,W:n}}},O(YR,"apiKey",yW))},O(YR,"timeStamp",bW)))(0)}};const TA="7183d41de88f249120c0942e51ec9d3705781ab2",jF="editor.measuringpolyphony.org";let IA="";function Mt(n){const e=document.createElement(n),t=Array.prototype.slice.call(arguments,1);for(;t.length;)HF(e,t.shift());return e}function HF(n,e){if(null!=e)if("object"!=typeof e&&"function"!=typeof e)n.appendChild(document.createTextNode(e));else if(e instanceof window.Node)n.appendChild(e);else if(e instanceof Array){const t=e.length;for(let i=0;i<t;i++)HF(n,e[i])}else UF(n,e)}function UF(n,e){for(const t in e)!e.hasOwnProperty(t)||("style"===t?Hq(n,e.style):n.setAttribute(t,e[t]))}function Hq(n,e){if(e){if("object"!=typeof e)return void(n.style.cssText=e);for(const t in e)!e.hasOwnProperty(t)||(n.style[t]=e[t])}}function $F(n){this.name="DivaParentElementNotFoundException",this.message=n,this.stack=(new Error).stack}function zF(n){this.name="NotAnIIIFManifestException",this.message=n,this.stack=(new Error).stack}function GF(n){this.name="ObjectDataNotSuppliedException",this.message=n,this.stack=(new Error).stack}Ve(917),Ve(726),$F.prototype=new Error,zF.prototype=new Error,GF.prototype=new Error;const Fs={Events:new class Uq{constructor(){this._cache={}}publish(e,t,i){if(this._cache[e]){const r=this._cache[e];if(void 0!==r.global){const s=r.global,o=s.length;for(let a=0;a<o;a++)s[a].apply(i||null,t||[])}if(i&&void 0!==i.getInstanceId){const s=i.getInstanceId();if(this._cache[e][s]){const o=this._cache[e][s],a=o.length;for(let c=0;c<a;c++)o[c].apply(i,t||[])}}}}subscribe(e,t,i){return this._cache[e]||(this._cache[e]={}),"string"==typeof i?(this._cache[e][i]||(this._cache[e][i]=[]),this._cache[e][i].push(t)):(this._cache[e].global||(this._cache[e].global=[]),this._cache[e].global.push(t)),i?[e,t,i]:[e,t]}unsubscribe(e,t){const i=e[0];if(this._cache[i]){let r;const s=3===e.length?e[2]:"global";if(r=this._cache[i][s],!r)return!1;if(t)return delete this._cache[i][s],r.length>0;let o=r.length;for(;o--;)if(r[o]===e[1])return this._cache[i][s].splice(o,1),!0}return!1}unsubscribeAll(e){if(e){const t=Object.keys(this._cache);let r,i=t.length;for(;i--;)r=t[i],void 0!==this._cache[r][e]&&delete this._cache[r][e]}else this._cache={}}}},OA_onDoubleClick=function qq(n,e){n.addEventListener("dblclick",function(i){i.ctrlKey||e(i,qy(i.currentTarget,i))});const t=WF(500);n.addEventListener("contextmenu",function(i){i.preventDefault(),i.ctrlKey&&(t.isTriggered()?(t.reset(),e(i,qy(i.currentTarget,i))):t.trigger())})},OA_onPinch=function Zq(n,e){let t=0;n.addEventListener("touchstart",function(i){i.preventDefault(),2===i.originalEvent.touches.length&&(t=PA(i.originalEvent.touches[0].clientX,i.originalEvent.touches[0].clientY,i.originalEvent.touches[1].clientX,i.originalEvent.touches[1].clientY))}),n.addEventListener("touchmove",function(i){if(i.preventDefault(),2===i.originalEvent.touches.length){const r=i.originalEvent.touches,s=PA(r[0].clientX,r[0].clientY,r[1].clientX,r[1].clientY);Math.abs(s-t)>0&&e(i,qy(i.currentTarget,{pageX:(r[0].clientX+r[1].clientX)/2,pageY:(r[0].clientY+r[1].clientY)/2}),t,s)}})},OA_onDoubleTap=function Kq(n,e){const t=WF(250);let i=null;n.addEventListener("touchend",r=>{if(r.preventDefault(),t.isTriggered()){t.reset();const s={pageX:r.originalEvent.changedTouches[0].clientX,pageY:r.originalEvent.changedTouches[0].clientY};PA(i.pageX,i.pageY,s.pageX,s.pageY)<50&&e(r,qy(r.currentTarget,s)),i=null}else i={pageX:r.originalEvent.changedTouches[0].clientX,pageY:r.originalEvent.changedTouches[0].clientY},t.trigger()})};function PA(n,e,t,i){return Math.sqrt((t-n)*(t-n)+(i-e)*(i-e))}function WF(n){let e=!1,t=null;return{trigger(){e=!0,i(),t=setTimeout(function(){e=!1,t=null},n)},isTriggered:()=>e,reset(){e=!1,i()}};function i(){null!==t&&(clearTimeout(t),t=null)}}function qy(n,e){const t=n.getBoundingClientRect();return{left:e.pageX-t.left,top:e.pageY-t.top}}var qF=Ve(489);class Yq{constructor(e,t){this.page=e,this._viewerCore=t,this._innerElement=this._viewerCore.getSettings().innerElement,this._pageToolsElem=null,this.labelWidth=0}mount(){null===this._pageToolsElem&&(this._buttons=this._initializePageToolButtons(),this._pageToolsElem=Mt("div",{class:"diva-page-tools-wrapper"},Mt("div",{class:"diva-page-tools"},this._buttons)),this._pageLabelsElem=Mt("div",{class:"diva-page-labels-wrapper"},Mt("div",{class:"diva-page-labels"},this._viewerCore.settings.manifest.pages[this.page].l))),this.refresh(),this._innerElement.appendChild(this._pageToolsElem),this._innerElement.appendChild(this._pageLabelsElem)}_initializePageToolButtons(){const e=this._viewerCore.getSettings(),t=this._viewerCore.getPublicInstance(),i=this.page;return this._viewerCore.getPageTools().map(r=>{const s=r.pageToolsIcon.cloneNode(!0);return s.addEventListener("click",o=>{r.handleClick.call(r,o,e,t,i)},!1),s.addEventListener("touchend",o=>{o.preventDefault(),r.handleClick.call(r,o,e,t,i)},!1),s})}unmount(){this._innerElement.removeChild(this._pageToolsElem),this._innerElement.removeChild(this._pageLabelsElem)}refresh(){const e=this._viewerCore.getPageRegion(this.page,{includePadding:!0,incorporateViewport:!0});let t=window.getComputedStyle(this._innerElement,null).getPropertyValue("margin-left");this._pageToolsElem.style.top=`${e.top}px`,this._pageToolsElem.style.left=e.left-parseInt(t)+"px",this._pageLabelsElem.style.top=`${e.top}px`,this._pageLabelsElem.style.left=e.right-parseInt(t)-this.labelWidth-5+"px"}}class Qq{constructor(e){if(this._viewerCore=e,this._viewerState=e.getInternalState(),this._overlays=[],this._viewerCore.getPageTools().length){const t=e.getSettings().numPages;for(let i=0;i<t;i++){const r=new Yq(i,e);this._overlays.push(r),this._viewerCore.addPageOverlay(r);let s=document.createElement("span");s.innerHTML=e.settings.manifest.pages[i].l,s.classList.add("diva-page-labels"),s.setAttribute("style","display: inline-block;"),document.body.appendChild(s);let o=s.clientWidth;document.body.removeChild(s),r.labelWidth=o}}}onDoubleClick(e,t){const i=this._viewerCore.getSettings(),r=e.ctrlKey?i.zoomLevel-1:i.zoomLevel+1,s=this._viewerCore.getPagePositionAtViewportOffset(t);this._viewerCore.zoom(r,s)}onPinch(e,t,i,r){const s=this._viewerCore.getInternalState(),o=this._viewerCore.getSettings();let a=Math.log(Math.pow(2,o.zoomLevel)*r/(i*Math.log(2)))/Math.log(2);if(a=Math.max(o.minZoomLevel,a),a=Math.min(o.maxZoomLevel,a),a===o.zoomLevel)return;const c=this._viewerCore.getPagePositionAtViewportOffset(t),f=this._viewerCore.getCurrentLayout().getPageToViewportCenterOffset(c.anchorPage,s.viewport),p=1/Math.pow(2,o.zoomLevel-a);this._viewerCore.reload({zoomLevel:a,goDirectlyTo:c.anchorPage,horizontalOffset:f.x-c.offset.left+c.offset.left*p,verticalOffset:f.y-c.offset.top+c.offset.top*p})}onViewWillLoad(){this._viewerCore.publish("DocumentWillLoad",this._viewerCore.getSettings())}onViewDidLoad(){this._handleZoomLevelChange();const e=this._viewerCore.getSettings().activePageIndex,t=this._viewerCore.getPageName(e);this._viewerCore.publish("DocumentDidLoad",e,t)}onViewDidUpdate(e,t){const i=null!==t?t:function Xq(n,e,t){const i=t.top+t.height/2,r=t.left+t.width/2,s=(0,qF.maxBy)(n,o=>{const a=e.getPageDimensions(o),c=e.getPageOffset(o,{includePadding:!0}),f=c.top+a.height/2,p=Math.max(Math.abs(r-(c.left+a.width/2))-a.width/2,0),_=Math.max(Math.abs(i-f)-a.height/2,0);return-(p*p+_*_)});return null!=s?s:null}(e,this._viewerCore.getCurrentLayout(),this._viewerCore.getViewport());let r=this._viewerState.viewport.intersectionTolerance;this._viewerState.viewport.intersectionTolerance=0;let s=e.filter(o=>this._viewerState.renderer.isPageVisible(o));this._viewerState.viewport.intersectionTolerance=r,null!==i&&this._viewerCore.setCurrentPages(i,s),null!==t&&this._viewerCore.publish("ViewerDidJump",t),this._handleZoomLevelChange()}_handleZoomLevelChange(){const e=this._viewerState,t=e.options.zoomLevel;e.oldZoomLevel!==t&&e.oldZoomLevel>=0&&(this._viewerCore.publish(e.oldZoomLevel<t?"ViewerDidZoomIn":"ViewerDidZoomOut",t),this._viewerCore.publish("ViewerDidZoom",t)),e.oldZoomLevel=t}destroy(){this._overlays.forEach(e=>{this._viewerCore.removePageOverlay(e)},this)}}class Jq{constructor(e){this._viewerCore=e}onDoubleClick(e,t){const i=this._viewerCore.getPagePositionAtViewportOffset(t),r=this._viewerCore.getCurrentLayout(),s=this._viewerCore.getViewport(),o=r.getPageToViewportCenterOffset(i.anchorPage,s);this._viewerCore.reload({inGrid:!1,goDirectlyTo:i.anchorPage,horizontalOffset:o.x+i.offset.left,verticalOffset:o.y+i.offset.top})}onPinch(){this._viewerCore.reload({inGrid:!1})}onViewWillLoad(){}onViewDidLoad(){}onViewDidUpdate(e,t){if(0===e.length)return;let i=this._viewerCore.viewerState.viewport.intersectionTolerance;this._viewerCore.viewerState.viewport.intersectionTolerance=0;let r=e.filter(p=>this._viewerCore.viewerState.renderer.isPageVisible(p));if(this._viewerCore.viewerState.viewport.intersectionTolerance=i,null!==t)return void this._viewerCore.setCurrentPages(t,r);const s=this._viewerCore.getCurrentLayout(),o=[];e.forEach(p=>{const _=s.getPageInfo(p).group;(0===o.length||_!==o[o.length-1])&&o.push(_)});const a=this._viewerCore.getViewport();let c;c=1===o.length||o[0].region.top>=a.top?o[0]:o[1].region.bottom<=a.bottom?o[1]:function eZ(n,e){const t=e.top+e.height/2;return(0,qF.maxBy)(n,i=>-Math.abs(t-(i.region.top+i.dimensions.height/2)))}(o,a);const d=this._viewerCore.getSettings().activePageIndex;c.pages.some(p=>p.index===d)||this._viewerCore.setCurrentPages(c.pages[0].index,r)}destroy(){}}class tZ{constructor(){this._pages={},this._renderedPages=[],this._renderedPageMap={}}addOverlay(e){(this._pages[e.page]||(this._pages[e.page]=[])).push(e),this._renderedPageMap[e.page]&&e.mount()}removeOverlay(e){const t=e.page,i=this._pages[t];if(!i)return;const r=i.indexOf(e);-1!==r&&(this._renderedPageMap[t]&&i[r].unmount(),i.splice(r,1),0===i.length&&delete this._pages[t])}updateOverlays(e){const t=this._renderedPages,i={};e.map(r=>{i[r]=!0,this._renderedPageMap[r]||(this._renderedPageMap[r]=!0,this._invokeOnOverlays(r,s=>{s.mount()}))}),t.map(r=>{i[r]?this._invokeOnOverlays(r,s=>{s.refresh()}):(delete this._renderedPageMap[r],this._invokeOnOverlays(r,s=>{s.unmount()}))}),this._renderedPages=e}_invokeOnOverlays(e,t){const i=this._pages[e];i&&i.map(r=>t(r))}}class ZF{constructor(e,t){this._rows=e,this._cols=t,this._map=new Array(e).fill(null).map(()=>new Array(t).fill(!1))}isLoaded(e,t){return e>=this._rows||t>=this._cols||this._map[e][t]}set(e,t,i){this._map[e][t]=i}}class nZ{constructor(e){this._levels=e;const t=this._urlsToTiles={};e.forEach(i=>{i.tiles.forEach(r=>{t[r.url]={zoomLevel:i.zoomLevel,row:r.row,col:r.col}})}),this.clear()}clear(){const e=this._loadedByLevel={};this._levels.forEach(t=>{e[t.zoomLevel]=new ZF(t.rows,t.cols)})}getTiles(e){const t=[],i=this._levels[0].zoomLevel,r=new ZF(this._levels[0].rows,this._levels[0].cols);let s;if(null===e)s=0;else{const c=Math.ceil(e);s=function iZ(n,e){const t=n.length;for(let i=0;i<t;i++)if(e(n[i],i))return i;return-1}(this._levels,d=>d.zoomLevel<=c)}this._levels.slice(0,s+1).reverse().concat(this._levels.slice(s+1)).forEach(c=>{const d=this._loadedByLevel[c.zoomLevel];let f=c.tiles.filter(_=>d.isLoaded(_.row,_.col));const p=Math.pow(2,i-c.zoomLevel);f=f.filter(_=>{let y=!1;const w=_.row*p,I=_.col*p;for(let k=0;k<p;k++)for(let j=0;j<p;j++)r.isLoaded(w+k,I+j)||(y=!0,r.set(w+k,I+j,!0));return y}),t.push(f)},this),t.reverse();const a=[];return t.forEach(c=>{a.push.apply(a,c)}),a}updateFromCache(e){this.clear(),this._levels.forEach(t=>{const i=this._loadedByLevel[t.zoomLevel];t.tiles.forEach(r=>{e.has(r.url)&&i.set(r.row,r.col,!0)})},this)}updateWithLoadedUrls(e){e.forEach(t=>{const i=this._urlsToTiles[t];this._loadedByLevel[i.zoomLevel].set(i.row,i.col,!0)},this)}}class rZ{constructor(e,t){const i=function oZ(n,e){const t=null===e?n.pageLayouts:function aZ(n,e){const t=Math.pow(2,e-n.maxZoomLevel);return n.pageLayouts.map(i=>({dimensions:YF(i.dimensions,t),pages:i.pages.map(r=>({index:r.index,groupOffset:{top:Math.floor(r.groupOffset.top*t),left:Math.floor(r.groupOffset.left*t)},dimensions:YF(r.dimensions,t)}))}))}(n,e),i=function lZ(n,e){let t,i;const r=n.padding.document;return n.verticallyOriented?(t="width",i=r.left+r.right):(t="height",i=r.top+r.bottom),i+e.reduce((s,o)=>Math.max(o.dimensions[t],s),0)}(n,t);let r=n.verticallyOriented?n.padding.document.top:n.padding.document.left;const s=[],o={top:n.padding.page.top,left:n.padding.page.left};let a,c;return t.forEach((d,f)=>{let p,_;n.verticallyOriented?(p=r,_=(i-d.dimensions.width)/2):(p=(i-d.dimensions.height)/2,_=r);const y={top:p,bottom:p+o.top+d.dimensions.height,left:_,right:_+o.left+d.dimensions.width};s.push({index:f,dimensions:d.dimensions,pages:d.pages,region:y,padding:o}),r=n.verticallyOriented?y.bottom:y.right}),n.verticallyOriented?(a=r+o.top,c=i):(a=i,c=r+o.left),{dimensions:{height:a,width:c},pageGroups:s}}(e,t);this.dimensions=i.dimensions,this.pageGroups=i.pageGroups,this._pageLookup=function sZ(n){const e={};return n.forEach(t=>{t.pages.forEach(i=>{e[i.index]={index:i.index,group:t,dimensions:i.dimensions,groupOffset:i.groupOffset}})}),e}(i.pageGroups)}getPageInfo(e){return this._pageLookup[e]||null}getPageDimensions(e){if(!this._pageLookup||!this._pageLookup[e])return null;const t=KF(this._pageLookup[e]);return{height:t.bottom-t.top,width:t.right-t.left}}getPageOffset(e,t){const i=this.getPageRegion(e,t);return i?{top:i.top,left:i.left}:null}getPageRegion(e,t){const i=this._pageLookup[e];if(!i)return null;const r=KF(i),s=i.group.padding;return t&&t.includePadding?{top:r.top+s.top,left:r.left+s.left,bottom:r.bottom,right:r.right}:{top:r.top,left:r.left,bottom:r.bottom+s.top,right:r.right}}getPageToViewportCenterOffset(e,t){const i=t.left,r=t.right-t.left,s=this.getPageOffset(e);return{x:i-s.left+parseInt(r/2,10),y:t.top-s.top+parseInt((t.bottom-t.top)/2,10)}}}function KF(n){const e=n.groupOffset.top+n.group.region.top,i=n.groupOffset.left+n.group.region.left;return{top:e,bottom:e+n.dimensions.height,left:i,right:i+n.dimensions.width}}function YF(n,e){return{height:Math.floor(n.height*e),width:Math.floor(n.width*e)}}const kA=Ve(455)("diva:ImageCache");class cZ{constructor(e){this.maxKeys=(e=e||{maxKeys:100}).maxKeys||100,this._held={},this._urls={},this._lru=[]}get(e){const t=this._urls[e];return t?t.img:null}has(e){return!!this._urls[e]}put(e,t){let i=this._urls[e];i?(i.img=t,this._promote(i)):(i={img:t,url:e},this._urls[e]=i,this._tryEvict(1),this._lru.unshift(i))}_promote(e){const t=this._lru.indexOf(e);this._lru.splice(t,1),this._lru.unshift(e)}_tryEvict(e){const t=this.maxKeys-e;if(this._lru.length<=t)return;let i=this._lru.length-1;for(;;){const r=this._lru[i];if(!this._held[r.url]&&(kA("Evicting image %s",r.url),this._lru.splice(i,1),delete this._urls[r.url],this._lru.length<=t))break;if(0===i){kA.enabled&&kA("Cache overfull by %s (all entries are being held)",this._lru.length-t);break}i--}}acquire(e){this._held[e]=(this._held[e]||0)+1,this._promote(this._urls[e])}release(e){this._held[e]>1?this._held[e]--:delete this._held[e],this._tryEvict(0)}}class uZ{constructor(e){this._url=e.url,this._callback=e.load,this._errorCallback=e.error,this.timeoutTime=e.timeoutTime||0,this._aborted=this._complete=!1,this._crossOrigin=e.settings.imageCrossOrigin,this.timeout=setTimeout(()=>{this._image=new Image,this._image.crossOrigin=this._crossOrigin,this._image.onload=this._handleLoad.bind(this),this._image.onerror=this._handleError.bind(this),this._image.src=e.url},this.timeoutTime)}abort(){clearTimeout(this.timeout),this._image&&(this._image.onload=this._image.onerror=null,this._image.src=""),this._aborted=!0}_handleLoad(){this._aborted?console.error("ImageRequestHandler invoked on cancelled request for "+this._url):this._complete?console.error("ImageRequestHandler invoked on completed request for "+this._url):(this._complete=!0,this._callback(this._image))}_handleError(){this._errorCallback(this._image)}}const dZ_animate=function hZ(n){const e=n.duration,t=n.parameters,i=n.onUpdate,r=n.onEnd,s=Zy(),o=s+e,a={},c={},d=Object.keys(t);d.forEach(w=>{const I=t[w];a[w]=function fZ(n,e,t){return i=>n+(e-n)*t(i)}(I.from,I.to,I.easing||XF)});let f=requestAnimationFrame(function p(){const w=Zy();(function _(w){d.forEach(I=>{c[I]=a[I](w)})})(Math.min((w-s)/e,1)),i(c),w<o?f=requestAnimationFrame(p):y({interrupted:!1})});return{cancel(){null!==f&&(cancelAnimationFrame(f),y({interrupted:!0}))}};function y(w){f=null,r&&r(w)}};let Zy;function XF(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1}Zy="undefined"!=typeof performance&&performance.now?()=>performance.now():()=>Date.now();class JF{constructor(e,t){this._viewport=e.viewport,this._outerElement=e.outerElement,this._documentElement=e.innerElement,this._settings=e.settings,this._hooks=t||{},this._canvas=Mt("canvas",{class:"diva-viewer-canvas"}),this._ctx=this._canvas.getContext("2d"),this.layout=null,this._sourceResolver=null,this._renderedPages=null,this._config=null,this._zoomLevel=null,this._compositeImages=null,this._renderedTiles=null,this._animation=null,this._cache=new cZ,this._pendingRequests={}}static getCompatibilityErrors(){return"undefined"!=typeof HTMLCanvasElement?null:["Your browser lacks support for the ",Mt("pre","canvas")," element. Please upgrade your browser."]}load(e,t,i){if(this._clearAnimation(),this._hooks.onViewWillLoad&&this._hooks.onViewWillLoad(),this._sourceResolver=i,this._config=e,this._compositeImages={},this._setLayoutToZoomLevel(t.zoomLevel),!this.layout.getPageInfo(t.anchorPage))throw new Error("invalid page: "+t.anchorPage);(this._canvas.width!==this._viewport.width||this._canvas.height!==this._viewport.height)&&(this._canvas.width=this._viewport.width,this._canvas.height=this._viewport.height),this.goto(t.anchorPage,t.verticalOffset,t.horizontalOffset),this._canvas.parentNode!==this._outerElement&&this._outerElement.insertBefore(this._canvas,this._outerElement.firstChild),this._hooks.onViewDidLoad&&this._hooks.onViewDidLoad()}_setViewportPosition(e){if(e.zoomLevel!==this._zoomLevel){if(null===this._zoomLevel)throw new TypeError("The current view is not zoomable");if(null===e.zoomLevel)throw new TypeError("The current view requires a zoom level");this._setLayoutToZoomLevel(e.zoomLevel)}this._goto(e.anchorPage,e.verticalOffset,e.horizontalOffset)}_setLayoutToZoomLevel(e){this.layout=new rZ(this._config,e),this._zoomLevel=e,UF(this._documentElement,{style:{height:this.layout.dimensions.height+"px",width:this.layout.dimensions.width+"px"}}),this._viewport.setInnerDimensions(this.layout.dimensions)}adjust(){this._clearAnimation(),this._render(),this._hooks.onViewDidUpdate&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),null)}_render(){const e=[];this.layout.pageGroups.forEach(i=>{if(!this._viewport.intersectsRegion(i.region))return;const r=i.pages.filter(function(s){return this.isPageVisible(s.index)},this).map(s=>s.index);e.push.apply(e,r)},this),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._paintOutline(e),e.forEach(i=>{if(!this._compositeImages[i]){const r=this.layout.getPageInfo(i),s=this._sourceResolver.getAllZoomLevelsForPage(r),o=new nZ(s);o.updateFromCache(this._cache),this._compositeImages[i]=o}},this),this._initiateTileRequests(e);const t=tN(this._renderedPages||[],e);t.removed.forEach(i=>{delete this._compositeImages[i]},this),this._renderedPages=e,this._paint(),this._hooks.onPageWillLoad&&t.added.forEach(i=>{this._hooks.onPageWillLoad(i)},this)}_paint(){const e=[];this._renderedPages.forEach(r=>{this._compositeImages[r].getTiles(this._zoomLevel).forEach(s=>{const o=eN(s,this._zoomLevel);this._isTileVisible(r,o)&&(e.push(s.url),this._drawTile(r,o,this._cache.get(s.url)))})});const t=this._cache,i=tN(this._renderedTiles||[],e);i.added.forEach(r=>{t.acquire(r)}),i.removed.forEach(r=>{t.release(r)}),i.removed&&this._renderedPages.forEach(r=>{this._compositeImages[r].updateFromCache(this._cache)},this),this._renderedTiles=e}_paintOutline(e){e.forEach(t=>{let i=this.layout.getPageInfo(t),r=this._getImageOffset(t),s=Math.max(0,(this._viewport.width-this.layout.dimensions.width)/2),o=Math.max(0,(this._viewport.height-this.layout.dimensions.height)/2),a=r.left-this._viewport.left+s,c=r.top-this._viewport.top+o,d=a<0?-a:0,f=c<0?-c:0,p=Math.max(0,a),_=Math.max(0,c),y=i.dimensions.width-d,w=i.dimensions.height-f;this._ctx.strokeStyle="#AAA",this._ctx.strokeRect(p+.5,_+.5,y,w)})}_initiateTileRequests(e){const t={},i=(r,s)=>{const o=this._compositeImages[s];t[r.url]=new uZ({url:r.url,timeoutTime:250,settings:this._settings,load:a=>{delete this._pendingRequests[r.url],this._cache.put(r.url,a),o===this._compositeImages[s]?(o.updateWithLoadedUrls([r.url]),this._isTileForSourceVisible(s,r)&&this._paint()):this._isTileForSourceVisible(s,r)&&this._paint()},error:()=>{delete this._pendingRequests[r.url]}})};for(let r=0;r<e.length;r++){const s=e[r],o=this._sourceResolver.getBestZoomLevelForPage(this.layout.getPageInfo(s)).tiles;for(let a=0;a<o.length;a++){const c=o[a];if(!this._cache.has(c.url)&&this._isTileForSourceVisible(s,c)){if(this._pendingRequests[c.url]){t[c.url]=this._pendingRequests[c.url],delete this._pendingRequests[c.url];continue}i(c,s)}}}for(const r in this._pendingRequests)this._pendingRequests[r].abort();this._pendingRequests=t}_drawTile(e,t,i){let r=this._getTileToDocumentOffset(e,t),s=Math.max(0,(this._viewport.width-this.layout.dimensions.width)/2),o=Math.max(0,(this._viewport.height-this.layout.dimensions.height)/2),a=r.left-this._viewport.left+s,c=r.top-this._viewport.top+o,d=a<0?-a:0,f=c<0?-c:0,p=Math.max(0,a),_=Math.max(0,c),y=d/t.scaleRatio,w=f/t.scaleRatio,I=Math.min(t.dimensions.width,i.width*t.scaleRatio)-d,k=Math.min(t.dimensions.height,i.height*t.scaleRatio)-f,j=Math.max(1,Math.round(I)),B=Math.max(1,Math.round(k));this._ctx.drawImage(i,y,w,j/t.scaleRatio,B/t.scaleRatio,p,_,j,B)}_isTileForSourceVisible(e,t){return this._isTileVisible(e,eN(t,this._zoomLevel))}_isTileVisible(e,t){const i=this._getTileToDocumentOffset(e,t);return this._viewport.intersectsRegion({top:i.top,bottom:i.top+t.dimensions.height,left:i.left,right:i.left+t.dimensions.width})}_getTileToDocumentOffset(e,t){const i=this._getImageOffset(e);return{top:i.top+t.offset.top,left:i.left+t.offset.left}}_getImageOffset(e){return this.layout.getPageOffset(e,{includePadding:!0})}goto(e,t,i){this._clearAnimation(),this._goto(e,t,i),this._hooks.onViewDidUpdate&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),e)}_goto(e,t,i){const r=this.layout.getPageOffset(e),o=r.top+t-Math.round(this._viewport.height/2),c=r.left+i-Math.round(this._viewport.width/2);this._viewport.top=o,this._viewport.left=c,this._render()}transitionViewportPosition(e){this._clearAnimation();const t=e.getPosition,i=this._hooks.onViewDidTransition;this._animation=dZ_animate({duration:e.duration,parameters:e.parameters,onUpdate:r=>{this._setViewportPosition(t(r)),this._hooks.onZoomLevelWillChange(r.zoomLevel),i&&i()},onEnd:r=>{e.onEnd&&e.onEnd(r),this._hooks.onViewDidUpdate&&!r.interrupted&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),null)}})}_clearAnimation(){this._animation&&(this._animation.cancel(),this._animation=null)}isPageVisible(e){return!(!this.layout||!this.layout.getPageInfo(e))&&this._viewport.intersectsRegion(this.layout.getPageRegion(e))}getRenderedPages(){return this._renderedPages.slice()}destroy(){this._clearAnimation(),Object.keys(this._pendingRequests).forEach(e=>{const t=this._pendingRequests[e];delete this._pendingRequests[e],t.abort()},this),this._canvas.parentNode.removeChild(this._canvas)}}function eN(n,e){let t;return t=null===e?1:Math.pow(2,e-n.zoomLevel),{sourceZoomLevel:n.zoomLevel,scaleRatio:t,row:n.row,col:n.col,dimensions:{width:n.dimensions.width*t,height:n.dimensions.height*t},offset:{left:n.offset.left*t,top:n.offset.top*t},url:n.url}}function tN(n,e){if(n===e)return{added:[],removed:[]};const t=n.filter(r=>-1===e.indexOf(r));return{added:e.filter(r=>-1===n.indexOf(r)),removed:t}}function nN(n,e){const t=e.getMaxPageDimensions(n);return{width:Math.floor(t.width),height:Math.floor(t.height)}}function CZ(n){if(n.inGrid)return function wZ(n){const e=n.viewport.width,t=n.manifest,i=n.pagesPerRow,r=n.fixedHeightGrid,s=n.fixedPadding,o=n.showNonPagedPages,c=(e-s*(i+1))/i,d=c,f=r?s+t.minRatio*c:s+t.maxRatio*c,p=[];let _=[];const w={height:f,width:e};return t.pages.forEach((I,k)=>{if(!o&&t.paged&&!I.paged)return;const j=(I=>{const k=I.d[I.d.length-1],j=k.h/k.w;let B,J;return r?(B=(f-s)/j,J=f-s):(B=d,J=B*j),{width:Math.round(B),height:Math.round(J)}})(I);let B=Math.floor(_.length*(s+d)+s);r&&(B+=(d-j.width)/2),_.push({index:k,dimensions:j,groupOffset:{top:0,left:B}}),_.length===i&&(p.push({dimensions:w,pages:_}),_=[])}),_.length>0&&p.push({dimensions:w,pages:_}),p}(iN(n,["manifest","viewport","pagesPerRow","fixedHeightGrid","fixedPadding","showNonPagedPages"]));{const e=iN(n,["manifest","verticallyOriented","showNonPagedPages"]);return n.inBookLayout?function mZ(n){return function _Z(n){const e=n.manifest,t=[];let i=null,r=[];const s=()=>{for(let o=0,a=r.length;o<a;o++)t.push([r[o]]);r=[]};return e.pages.forEach((o,a)=>{const c={index:a,dimensions:nN(a,e),paged:!e.paged||o.paged};!n.showNonPagedPages&&!c.paged||(c.paged?0===a||o.facingPages?(t.push([c]),s()):null===i?i=c:(t.push([i,c]),i=null,s()):r.push(c))}),null!==i&&(t.push([i]),s()),t}(n).map(t=>function vZ(n,e){const t=n.verticallyOriented;if(2===e.length)return function bZ(n,e,t){const i=n.dimensions,r=e.dimensions,s=Math.max(i.height,r.height);let o,a,c;if(t){const d=Math.max(i.width,r.width);o=2*d,a=d-i.width,c=d}else o=i.width+r.width,a=0,c=i.width;return{dimensions:{height:s,width:o},pages:[{index:n.index,dimensions:i,groupOffset:{top:0,left:a}},{index:e.index,dimensions:r,groupOffset:{top:0,left:c}}]}}(e[0],e[1],t);const i=e[0],r=i.dimensions;let s;return s=i.paged?0===i.index&&t?r.width:0:t?r.width/2:0,{dimensions:{height:r.height,width:t&&!n.manifest.pages[i.index].facingPages?2*r.width:r.width},pages:[{index:i.index,groupOffset:{top:0,left:s},dimensions:r}]}}(n,t))}(e):function yZ(n){const e=n.manifest,t=[];return e.pages.forEach((i,r)=>{if(!n.showNonPagedPages&&e.paged&&!i.paged)return;const s=nN(r,e);t.push({dimensions:s,pages:[{index:r,groupOffset:{top:0,left:0},dimensions:s}]})}),t}(e)}}function iN(n,e){const t={};return e.forEach(function(i){t[i]=n[i]}),t}class SZ{constructor(e){this.whitelistedKeys=e.whitelistedKeys||[],this.additionalProperties=e.additionalProperties||[],this.validations=e.validations}isValid(e,t,i){let r=null;if(this.validations.some((a,c)=>a.key===e&&(r=c,!0)),null===r)return!0;const s={};s[e]=t;const o=rN(i,s,this);return!this._runValidation(r,t,o)}validate(e){this._validateOptions({},e)}getValidatedOptions(e,t){const i=Object.assign({},t);return this._validateOptions(e,i),i}_validateOptions(e,t){const i=rN(e,t,this);this._applyValidations(t,i)}_applyValidations(e,t){this.validations.forEach((i,r)=>{if(!e.hasOwnProperty(i.key))return;const s=e[i.key],o=this._runValidation(r,s,t);o&&(o.warningSuppressed||function AZ(n,e,t){console.warn("Invalid value for "+n+": "+e+". Using "+t+" instead.")}(i.key,s,o.value),e[i.key]=o.value)},this)}_runValidation(e,t,i){const r=this.validations[e];i.index=e;let s=!1;const a=r.validate(t,i.proxy,{suppressWarning:()=>{s=!0}});return void 0===a||a===t?null:{value:a,warningSuppressed:s}}}function rN(n,e,t){const i={proxy:{},index:null},r=xZ.bind(null,n,e),s={};return t.whitelistedKeys.forEach(o=>{s[o]={get:r.bind(null,o)}}),t.additionalProperties.forEach(o=>{s[o.key]={get:o.get}}),t.validations.forEach((o,a)=>{s[o.key]={get:()=>{if(a<i.index)return r(o.key);throw new TypeError("Cannot access setting "+o.key+" while validating "+t.validations[i.index].key)}}}),Object.defineProperties(i.proxy,s),i}function xZ(n,e,t){return t in e?e[t]:n[t]}class sN{constructor(e,t){this.intersectionTolerance=(t=t||{}).intersectionTolerance||0,this.outer=e,this._top=this._left=this._width=this._height=this._innerDimensions=null,this.invalidate()}intersectsRegion(e){return this.hasHorizontalOverlap(e)&&this.hasVerticalOverlap(e)}hasVerticalOverlap(e){const t=this.top-this.intersectionTolerance,i=this.bottom+this.intersectionTolerance;return Ky(e.top,t,i)||Ky(e.bottom,t,i)||e.top<=t&&e.bottom>=i}hasHorizontalOverlap(e){const t=this.left-this.intersectionTolerance,i=this.right+this.intersectionTolerance;return Ky(e.left,t,i)||Ky(e.right,t,i)||e.left<=t&&e.right>=i}invalidate(){this._width=this.outer.clientWidth,this._height=this.outer.clientHeight,this._top=this.outer.scrollTop,this._left=this.outer.scrollLeft}setInnerDimensions(e){this._innerDimensions=e,e&&(this._top=RA(this._top,0,e.height-this._height),this._left=RA(this._left,0,e.width-this._width))}}function oN(n,e){const t="_"+n,i="scroll"+n.charAt(0).toUpperCase()+n.slice(1);return{get:function(){return this[t]},set:function(r){let s;s=this._innerDimensions?RA(r,0,this._innerDimensions[e]-this[e]):lN(r,0),this[t]=this.outer[i]=s}}}function aN(n){return{get:function(){return this["_"+n]}}}function Ky(n,e,t){return n>=e&&n<=t}function RA(n,e,t){return lN(function MZ(n,e){return Math.min(n,e)}(n,t),e)}function lN(n,e){return Math.max(n,e)}Object.defineProperties(sN.prototype,{top:oN("top","height"),left:oN("left","width"),width:aN("width"),height:aN("height"),bottom:{get:function(){return this._top+this._height}},right:{get:function(){return this._left+this._width}}});const cm=Ve(455)("diva:ViewerCore");function FA(){return FA.counter++}FA.counter=1;const TZ=[{key:"goDirectlyTo",validate:(n,e)=>{if(n<0||n>=e.manifest.pages.length)return 0}},{key:"minPagesPerRow",validate:n=>Math.max(2,n)},{key:"maxPagesPerRow",validate:(n,e)=>Math.max(n,e.minPagesPerRow)},{key:"pagesPerRow",validate:(n,e)=>{if(n<e.minPagesPerRow||n>e.maxPagesPerRow)return e.maxPagesPerRow}},{key:"maxZoomLevel",validate:(n,e,t)=>{if(t.suppressWarning(),n<0||n>e.manifest.maxZoom)return e.manifest.maxZoom}},{key:"minZoomLevel",validate:(n,e,t)=>n>e.manifest.maxZoom?(t.suppressWarning(),0):n<0||n>e.maxZoomLevel?0:void 0},{key:"zoomLevel",validate:(n,e,t)=>n>e.manifest.maxZoom?(t.suppressWarning(),0):n<e.minZoomLevel||n>e.maxZoomLevel?e.minZoomLevel:void 0}];class IZ{constructor(e,t,i){this.parentObject=e,this.publicInstance=i,this.viewerState={currentPageIndices:[0],activePageIndex:0,horizontalOffset:0,horizontalPadding:0,ID:null,initialKeyScroll:!1,initialSpaceScroll:!1,innerElement:null,innerObject:{},isActiveDiva:!0,isScrollable:!0,isZooming:!1,loaded:!1,manifest:null,mobileWebkit:!1,numPages:0,oldZoomLevel:-1,options:t,outerElement:null,outerObject:{},pageOverlays:new tZ,pageTools:[],parentObject:this.parentObject,pendingManifestRequest:null,pluginInstances:[],renderer:null,resizeTimer:-1,scrollbarWidth:0,selector:"",throbberTimeoutID:-1,toolbar:null,verticalOffset:0,verticalPadding:0,viewHandler:null,viewport:null,viewportElement:null,viewportObject:null,zoomDuration:400},this.settings=function EZ(n){const e={};return n.forEach(t=>{!function DZ(n,e){Object.keys(e).forEach(t=>{Object.defineProperty(n,t,{get:()=>e[t],set:()=>{throw new TypeError("Cannot set settings."+t)}})})}(e,t)}),e}([t,this.viewerState]);const r=FA();this.viewerState.ID="diva-"+r+"-",this.viewerState.selector=this.settings.ID,Object.defineProperties(this.settings,{panelHeight:{get:()=>this.viewerState.viewport.height},panelWidth:{get:()=>this.viewerState.viewport.width}}),this.optionsValidator=new SZ({additionalProperties:[{key:"manifest",get:()=>this.viewerState.manifest}],validations:TZ}),this.viewerState.scrollbarWidth=function $q(){let n=document.createElement("p");n.style.width="100%",n.style.height="200px";let e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(n),document.body.appendChild(e);let t=n.offsetWidth;e.style.overflow="scroll";let i=n.offsetWidth;return t===i&&(i=e.clientWidth),document.body.removeChild(e),t-i}(),this.viewerState.mobileWebkit=void 0!==window.orientation,null===t.hashParamSuffix&&(t.hashParamSuffix=1===r?"":r+"");const s=Mt("div",this.elemAttrs("inner",{class:"diva-inner"})),o=Mt("div",this.elemAttrs("viewport"),s),a=Mt("div",this.elemAttrs("outer"),o,Mt("div",this.elemAttrs("throbber"),[Mt("div",{class:"cube cube1"}),Mt("div",{class:"cube cube2"}),Mt("div",{class:"cube cube3"}),Mt("div",{class:"cube cube4"}),Mt("div",{class:"cube cube5"}),Mt("div",{class:"cube cube6"}),Mt("div",{class:"cube cube7"}),Mt("div",{class:"cube cube8"}),Mt("div",{class:"cube cube9"})]));this.viewerState.innerElement=s,this.viewerState.viewportElement=o,this.viewerState.outerElement=a,this.viewerState.innerObject=s,this.viewerState.viewportObject=o,this.viewerState.outerObject=a,this.settings.parentObject.append(a),this.viewerState.viewport=new sN(this.viewerState.viewportElement,{intersectionTolerance:this.settings.viewportMargin}),this.boundScrollFunction=this.scrollFunction.bind(this),this.boundEscapeListener=this.escapeListener.bind(this),this.initPlugins(),this.handleEvents(),this.showThrobber()}isValidOption(e,t){return this.optionsValidator.isValid(e,t,this.viewerState.options)}elemAttrs(e,t){const i={id:this.settings.ID+e,class:"diva-"+e};return t?Object.assign(i,t):i}getPageData(e,t){return this.settings.manifest.pages[e].d[this.settings.zoomLevel][t]}clearViewer(){this.viewerState.viewport.top=0,clearTimeout(this.viewerState.resizeTimer)}hasChangedOption(e,t){return t in e&&e[t]!==this.settings[t]}escapeListener(e){27===e.keyCode&&this.publicInstance.leaveFullscreenMode()}reloadViewer(e){const t=[];if(e=this.optionsValidator.getValidatedOptions(this.settings,e),this.hasChangedOption(e,"zoomLevel")&&(this.viewerState.oldZoomLevel=this.settings.zoomLevel,this.viewerState.options.zoomLevel=e.zoomLevel,t.push(["ZoomLevelDidChange",e.zoomLevel])),this.hasChangedOption(e,"pagesPerRow")&&(this.viewerState.options.pagesPerRow=e.pagesPerRow,t.push(["GridRowNumberDidChange",e.pagesPerRow])),this.hasChangedOption(e,"verticallyOriented")&&(this.viewerState.options.verticallyOriented=e.verticallyOriented),this.hasChangedOption(e,"showNonPagedPages")&&(this.viewerState.options.showNonPagedPages=e.showNonPagedPages),"goDirectlyTo"in e?(this.viewerState.options.goDirectlyTo=e.goDirectlyTo,"verticalOffset"in e&&(this.viewerState.verticalOffset=e.verticalOffset),"horizontalOffset"in e&&(this.viewerState.horizontalOffset=e.horizontalOffset)):this.viewerState.options.goDirectlyTo=this.settings.activePageIndex,(this.hasChangedOption(e,"inGrid")||this.hasChangedOption(e,"inBookLayout"))&&("inGrid"in e&&(this.viewerState.options.inGrid=e.inGrid),"inBookLayout"in e&&(this.viewerState.options.inBookLayout=e.inBookLayout),t.push(["ViewDidSwitch",this.settings.inGrid])),this.hasChangedOption(e,"inFullscreen")&&(this.viewerState.options.inFullscreen=e.inFullscreen,this.prepareModeChange(e),t.push(["ModeDidSwitch",this.settings.inFullscreen])),this.clearViewer(),this.updateViewHandlerAndRendering(),this.viewerState.renderer){const i={pageLayouts:CZ(this.settings),padding:this.getPadding(),maxZoomLevel:this.settings.inGrid?null:this.viewerState.manifest.maxZoom,verticallyOriented:this.settings.verticallyOriented||this.settings.inGrid},r={zoomLevel:this.settings.inGrid?null:this.settings.zoomLevel,anchorPage:this.settings.goDirectlyTo,verticalOffset:this.viewerState.verticalOffset,horizontalOffset:this.viewerState.horizontalOffset},s=this.getCurrentSourceProvider();if(cm.enabled){const o=Object.keys(i).filter(function(a){return"pageLayouts"!==a&&"padding"!==a}).map(function(a){return a+": "+JSON.stringify(i[a])}).join(", ");cm("reload with %s",o)}this.viewerState.renderer.load(i,r,s)}return t.forEach(i=>{this.publish.apply(this,i)}),!0}prepareModeChange(e){const t=e.inFullscreen?"add":"remove";this.viewerState.outerObject.classList[t]("diva-fullscreen"),document.body.classList[t]("diva-hide-scrollbar"),this.settings.parentObject.classList[t]("diva-full-width");const i=this.settings.panelHeight,r=this.settings.panelWidth;if(this.viewerState.viewport.invalidate(),!this.viewerState.loaded&&!this.settings.inGrid&&!("verticalOffset"in e)){const o=this.settings.panelWidth;this.viewerState.verticalOffset+=(i-this.settings.panelHeight)/2,this.viewerState.horizontalOffset+=(r-o)/2}e.inFullscreen?document.addEventListener("keyup",this.boundEscapeListener):document.removeEventListener("keyup",this.boundEscapeListener)}updateViewHandlerAndRendering(){const e=this.settings.inGrid?Jq:Qq;this.viewerState.viewHandler&&!(this.viewerState.viewHandler instanceof e)&&(this.viewerState.viewHandler.destroy(),this.viewerState.viewHandler=null),this.viewerState.viewHandler||(this.viewerState.viewHandler=new e(this)),this.viewerState.renderer||this.initializeRenderer()}initializeRenderer(){const e=JF.getCompatibilityErrors();e?this.showError(e):this.viewerState.renderer=new JF({viewport:this.viewerState.viewport,outerElement:this.viewerState.outerElement,innerElement:this.viewerState.innerElement,settings:this.settings},{onViewWillLoad:()=>{this.viewerState.viewHandler.onViewWillLoad()},onViewDidLoad:()=>{this.updatePageOverlays(),this.viewerState.viewHandler.onViewDidLoad()},onViewDidUpdate:(r,s)=>{this.updatePageOverlays(),this.viewerState.viewHandler.onViewDidUpdate(r,s)},onViewDidTransition:()=>{this.updatePageOverlays()},onPageWillLoad:r=>{this.publish("PageWillLoad",r)},onZoomLevelWillChange:r=>{this.publish("ZoomLevelWillChange",r)}})}getCurrentSourceProvider(){if(this.settings.inGrid){const t={getAllZoomLevelsForPage:i=>[t.getBestZoomLevelForPage(i)],getBestZoomLevelForPage:i=>({zoomLevel:1,rows:1,cols:1,tiles:[{url:this.settings.manifest.getPageImageURL(i.index,{width:i.dimensions.width}),zoomLevel:1,row:0,col:0,dimensions:i.dimensions,offset:{top:0,left:0}}]})};return t}const e={width:this.settings.tileWidth,height:this.settings.tileHeight};return{getBestZoomLevelForPage:t=>this.settings.manifest.getPageImageTiles(t.index,Math.ceil(this.settings.zoomLevel),e),getAllZoomLevelsForPage:t=>{const i=[],r=this.viewerState.manifest.maxZoom;for(let s=0;s<=r;s++)i.push(this.settings.manifest.getPageImageTiles(t.index,s,e));return i.reverse(),i}}}getPadding(){let e,t,i,r;return this.settings.inGrid?(i=this.settings.fixedPadding,e=t=r=0):(e=this.settings.verticallyOriented?this.viewerState.verticalPadding:0,t=this.settings.verticallyOriented?0:this.viewerState.horizontalPadding,i=this.settings.verticallyOriented?0:this.viewerState.verticalPadding,r=this.settings.verticallyOriented?this.viewerState.horizontalPadding:0),{document:{top:i,bottom:i,left:r,right:r},page:{top:e,bottom:0,left:t,right:0}}}updatePageOverlays(){this.viewerState.pageOverlays.updateOverlays(this.viewerState.renderer.getRenderedPages())}handleZoom(e,t){if(!this.isValidOption("zoomLevel",e))return!1;if(this.viewerState.viewportObject.removeEventListener("scroll",this.boundScrollFunction),!t){const p=this.viewerState.viewport,_=this.viewerState.renderer.layout.getPageRegion(this.settings.activePageIndex);t={anchorPage:this.settings.activePageIndex,offset:{left:p.width/2-(_.left-p.left),top:p.height/2-(_.top-p.top)}}}const i=this.viewerState.renderer.layout.getPageRegion(t.anchorPage),r=i.left+t.offset.left-(this.settings.viewport.left+this.settings.viewport.width/2),s=i.top+t.offset.top-(this.settings.viewport.top+this.settings.viewport.height/2),o=(p,_)=>{const y=Math.pow(2,p-_);return{zoomLevel:p,anchorPage:t.anchorPage,verticalOffset:t.offset.top*y-s,horizontalOffset:t.offset.left*y-r}};this.viewerState.options.zoomLevel=e;let a=this.viewerState.oldZoomLevel;this.viewerState.oldZoomLevel=this.settings.zoomLevel;const c=o(e,a);this.viewerState.options.goDirectlyTo=c.anchorPage,this.viewerState.verticalOffset=c.verticalOffset,this.viewerState.horizontalOffset=c.horizontalOffset,this.viewerState.renderer.transitionViewportPosition({duration:this.settings.zoomDuration,parameters:{zoomLevel:{from:a,to:e}},getPosition:p=>o(p.zoomLevel,a),onEnd:p=>{this.viewerState.viewportObject.addEventListener("scroll",this.boundScrollFunction),p.interrupted&&(this.viewerState.oldZoomLevel=e)}});let d=document.getElementById(this.settings.selector+"zoom-in-button"),f=document.getElementById(this.settings.selector+"zoom-out-button");return d.disabled=!0,f.disabled=!0,setTimeout(()=>{d.disabled=!1,f.disabled=!1},this.settings.zoomDuration),this.publish("ZoomLevelDidChange",e),!0}getYOffset(e,t){let i=void 0===e?this.settings.activePageIndex:e;return parseInt("center"===t||"centre"===t?this.getPageData(i,"h")/2:"bottom"===t?this.getPageData(i,"h")-this.settings.panelHeight/2:this.settings.panelHeight/2,10)}getXOffset(e,t){let i=void 0===e?this.settings.activePageIndex:e;return parseInt("left"===t?this.settings.panelWidth/2:"right"===t?this.getPageData(i,"w")-this.settings.panelWidth/2:this.getPageData(i,"w")/2,10)}updatePanelSize(){return this.viewerState.viewport.invalidate(),this.viewerState.renderer&&(this.updateOffsets(),this.viewerState.renderer.goto(this.settings.activePageIndex,this.viewerState.verticalOffset,this.viewerState.horizontalOffset)),!0}updateOffsets(){const e=this.viewerState.renderer.layout.getPageToViewportCenterOffset(this.settings.activePageIndex,this.viewerState.viewport);e&&(this.viewerState.horizontalOffset=e.x,this.viewerState.verticalOffset=e.y)}bindMouseEvents(){this.viewerState.viewportObject.classList.add("dragscroll"),OA_onDoubleClick(this.viewerState.viewportObject,(e,t)=>{cm("Double click at %s, %s",t.left,t.top),this.viewerState.viewHandler.onDoubleClick(e,t)})}onResize(){this.updatePanelSize(),clearTimeout(this.viewerState.resizeTimer),this.viewerState.resizeTimer=setTimeout(()=>{const e=this.viewerState.renderer.layout.getPageToViewportCenterOffset(this.settings.activePageIndex,this.viewerState.viewport);this.reloadViewer(e?{goDirectlyTo:this.settings.activePageIndex,verticalOffset:e.y,horizontalOffset:e.x}:{goDirectlyTo:this.settings.activePageIndex})},200)}bindTouchEvents(){this.settings.blockMobileMove&&document.body.addEventListener("touchmove",e=>(e.originalEvent.preventDefault(),!1)),OA_onPinch(this.viewerState.viewportObject,function(e,t,i,r){cm("Pinch %s at %s, %s",r-i,t.left,t.top),this.viewerState.viewHandler.onPinch(e,t,i,r)}),OA_onDoubleTap(this.viewerState.viewportObject,function(e,t){cm("Double tap at %s, %s",t.left,t.top),this.viewerState.viewHandler.onDoubleClick(e,t)})}scrollFunction(){const e=this.viewerState.viewport.top,t=this.viewerState.viewport.left;let i;this.viewerState.viewport.invalidate();const r=this.viewerState.viewport.top,s=this.viewerState.viewport.left;i=this.settings.verticallyOriented||this.settings.inGrid?r-e:s-t,this.viewerState.renderer.adjust();const o=this.settings.verticallyOriented||this.settings.inGrid?r:s;this.publish("ViewerDidScroll",o),i>0?this.publish("ViewerDidScrollDown",o):i<0&&this.publish("ViewerDidScrollUp",o),this.updateOffsets()}handleEvents(){this.viewerState.innerObject.addEventListener("mousedown",()=>{this.viewerState.innerObject.classList.add("diva-grabbing")}),this.viewerState.innerObject.addEventListener("mouseup",()=>{this.viewerState.innerObject.classList.remove("diva-grabbing")}),this.bindMouseEvents(),this.viewerState.viewportObject.addEventListener("scroll",this.boundScrollFunction),document.addEventListener("keydown.diva",f=>{if(!this.viewerState.isActiveDiva)return!0;if(this.settings.enableSpaceScroll&&!f.shiftKey&&32===f.keyCode||this.settings.enableKeyScroll&&34===f.keyCode)return this.viewerState.viewport.top+=this.settings.panelHeight,!1;if(!this.settings.enableSpaceScroll&&32===f.keyCode&&f.preventDefault(),this.settings.enableKeyScroll){if(f.shiftKey||f.ctrlKey||f.metaKey)return!0;switch(f.keyCode){case 33:return this.viewerState.viewport.top-=this.settings.panelHeight,!1;case 38:return this.viewerState.viewport.top-=this.settings.arrowScrollAmount,!1;case 40:return this.viewerState.viewport.top+=this.settings.arrowScrollAmount,!1;case 37:return this.viewerState.viewport.left-=this.settings.arrowScrollAmount,!1;case 39:return this.viewerState.viewport.left+=this.settings.arrowScrollAmount,!1;case 36:return this.viewerState.viewport.top=0,!1;case 35:return this.settings.verticallyOriented?this.viewerState.viewport.top=1/0:this.viewerState.viewport.left=1/0,!1;default:return!0}}return!0}),Fs.Events.subscribe("ViewerDidTerminate",function(){document.removeEventListener("keydown.diva")},this.settings.ID),window.addEventListener("resize",this.onResize.bind(this),!1),Fs.Events.subscribe("ViewerDidTerminate",function(){window.removeEventListener("resize",this.onResize,!1)},this.settings.ID),"onorientationchange"in window&&(window.addEventListener("orientationchange",this.onResize,!1),Fs.Events.subscribe("ViewerDidTerminate",function(){window.removeEventListener("orientationchange",this.onResize,!1)},this.settings.ID)),Fs.Events.subscribe("PanelSizeDidChange",this.updatePanelSize,this.settings.ID),Fs.Events.subscribe("ViewerDidTerminate",()=>{this.viewerState.renderer&&this.viewerState.renderer.destroy(),clearTimeout(this.viewerState.resizeTimer)},this.settings.ID)}initPlugins(){if(!this.settings.hasOwnProperty("plugins"))return null;this.viewerState.pluginInstances=this.settings.plugins.map(e=>{const t=new e(this);return t.isPageTool&&this.viewerState.pageTools.push(t),t})}showThrobber(){this.hideThrobber(),this.viewerState.throbberTimeoutID=setTimeout(()=>{let e=document.getElementById(this.settings.selector+"throbber");e&&(e.style.display="block")},this.settings.throbberTimeout)}hideThrobber(){clearTimeout(this.viewerState.throbberTimeoutID);let e=document.getElementById(this.settings.selector+"throbber");e&&(e.style.display="none")}showError(e){const t=Mt("div",this.elemAttrs("error"),[Mt("button",this.elemAttrs("error-close",{"aria-label":"Close dialog"})),Mt("p",Mt("strong","Error")),Mt("div",e)]);this.viewerState.outerObject.appendChild(t),document.getElementById(this.settings.selector+"error-close").addEventListener("click",()=>{t.parentNode.removeChild(t)})}setManifest(e,t){if(this.viewerState.manifest=e,this.hideThrobber(),this.viewerState.numPages=this.settings.manifest.pages.length,this.optionsValidator.validate(this.viewerState.options),this.publish("NumberOfPagesDidChange",this.settings.numPages),this.settings.adaptivePadding>0){const a=Math.floor((this.settings.minZoomLevel+this.settings.maxZoomLevel)/2);this.viewerState.horizontalPadding=parseInt(this.settings.manifest.getAverageWidth(a)*this.settings.adaptivePadding,10),this.viewerState.verticalPadding=parseInt(this.settings.manifest.getAverageHeight(a)*this.settings.adaptivePadding,10)}else this.viewerState.horizontalPadding=this.settings.fixedPadding,this.viewerState.verticalPadding=this.settings.fixedPadding;this.viewerState.pageTools.length&&(this.viewerState.verticalPadding=Math.max(40,this.viewerState.verticalPadding)),this.settings.manifest.paged&&(this.viewerState.options.inBookLayout=!0),this.publish("ObjectDidLoad",this.settings),this.updatePanelSize();let i,r,s=!1,o=!1;if(null==t.goDirectlyTo?(t.goDirectlyTo=this.settings.goDirectlyTo,i=r=!0):(i=null==t.horizontalOffset||isNaN(t.horizontalOffset),r=null==t.verticalOffset||isNaN(t.verticalOffset)),i&&(0===t.goDirectlyTo&&this.settings.inBookLayout&&this.settings.verticallyOriented?t.horizontalOffset=this.viewerState.horizontalPadding:(o=!0,t.horizontalOffset=this.getXOffset(t.goDirectlyTo,"center"))),r&&(s=!0,t.verticalOffset=this.getYOffset(t.goDirectlyTo,"top")),this.reloadViewer(t),this.updatePanelSize(),this.settings.enableAutoTitle){let a=document.getElementById(this.settings.selector+"title");a?a.innerHTML=this.settings.manifest.itemTitle:this.settings.parentObject.insertBefore(Mt("div",this.elemAttrs("title"),[this.settings.manifest.itemTitle]),this.settings.parentObject.firstChild)}this.settings.verticallyOriented?this.viewerState.innerElement.style.minWidth=this.settings.panelWidth+"px":this.viewerState.innerElement.style.minHeight=this.settings.panelHeight+"px",(s||o)&&(s&&(this.viewerState.verticalOffset=this.getYOffset(this.settings.activePageIndex,"top")),o&&(this.viewerState.horizontalOffset=this.getXOffset(this.settings.activePageIndex,"center")),this.viewerState.renderer.goto(this.settings.activePageIndex,this.viewerState.verticalOffset,this.viewerState.horizontalOffset)),this.viewerState.loaded=!0,this.publish("ViewerDidLoad",this.settings)}publish(e){const t=Array.prototype.slice.call(arguments,1);Fs.Events.publish(e,t,this.publicInstance)}getSettings(){return this.settings}getInternalState(){return this.viewerState}getPublicInstance(){return this.publicInstance}getPageTools(){return this.viewerState.pageTools}getCurrentLayout(){return this.viewerState.renderer?this.viewerState.renderer.layout:null}getViewport(){const e=this.viewerState.viewport;return{top:e.top,left:e.left,bottom:e.bottom,right:e.right,width:e.width,height:e.height}}addPageOverlay(e){this.viewerState.pageOverlays.addOverlay(e)}removePageOverlay(e){this.viewerState.pageOverlays.removeOverlay(e)}getPageRegion(e,t){const i=this.viewerState.renderer.layout,r=i.getPageRegion(e,t);if(t&&t.incorporateViewport){const s=this.settings.verticallyOriented?"width":"height";if(this.viewerState.viewport[s]>i.dimensions[s]){const o=(this.viewerState.viewport[s]-i.dimensions[s])/2;return this.settings.verticallyOriented?{top:r.top,bottom:r.bottom,left:r.left+o,right:r.right+o}:{top:r.top+o,bottom:r.bottom+o,left:r.left,right:r.right}}}return r}getPagePositionAtViewportOffset(e){const t_left=e.left+this.viewerState.viewport.left,t_top=e.top+this.viewerState.viewport.top,i=this.viewerState.renderer.getRenderedPages(),r=i.length;for(let o=0;o<r;o++){const a=i[o],c=this.viewerState.renderer.layout.getPageRegion(a);if(c.left<=t_left&&c.right>=t_left&&c.top<=t_top&&c.bottom>=t_top)return{anchorPage:a,offset:{left:t_left-c.left,top:t_top-c.top}}}const s=this.viewerState.renderer.layout.getPageRegion(this.settings.activePageIndex);return{anchorPage:this.settings.activePageIndex,offset:{left:t_left-s.left,top:t_top-s.top}}}setCurrentPages(e,t){!function i(r,s){if(r.length!==s.length)return!1;for(let o=0,a=r.length;o<a;o++)if(r[o]!==s[o])return!1;return!0}(this.viewerState.currentPageIndices,t)?(this.viewerState.currentPageIndices=t,this.viewerState.activePageIndex!==e&&(this.viewerState.activePageIndex=e,this.publish("ActivePageDidChange",e)),this.publish("VisiblePageDidChange",t),this.viewerState.manifest.pages[e].otherImages.length>0&&this.publish("VisiblePageHasAlternateViews",e)):this.viewerState.activePageIndex!==e&&(this.viewerState.activePageIndex=e,this.publish("ActivePageDidChange",e))}getPageName(e){return this.viewerState.manifest.pages[e].f}reload(e){this.reloadViewer(e)}zoom(e,t){return this.handleZoom(e,t)}enableScrollable(){this.viewerState.isScrollable||(this.bindMouseEvents(),this.enableDragScrollable(),this.viewerState.options.enableKeyScroll=this.viewerState.initialKeyScroll,this.viewerState.options.enableSpaceScroll=this.viewerState.initialSpaceScroll,this.viewerState.viewportElement.style.overflow="auto",this.viewerState.isScrollable=!0)}enableDragScrollable(){this.viewerState.viewportObject.hasAttribute("nochilddrag")&&this.viewerState.viewportObject.removeAttribute("nochilddrag")}disableScrollable(){this.viewerState.isScrollable&&(this.disableDragScrollable(),this.viewerState.outerObject.dblclick=null,this.viewerState.outerObject.contextmenu=null,this.viewerState.viewportElement.style.overflow="hidden",this.viewerState.initialKeyScroll=this.settings.enableKeyScroll,this.viewerState.initialSpaceScroll=this.settings.enableSpaceScroll,this.viewerState.options.enableKeyScroll=!1,this.viewerState.options.enableSpaceScroll=!1,this.viewerState.isScrollable=!1)}disableDragScrollable(){this.viewerState.viewportObject.hasAttribute("nochilddrag")||this.viewerState.viewportObject.setAttribute("nochilddrag","")}clear(){this.clearViewer()}setPendingManifestRequest(e){this.viewerState.pendingManifestRequest=e}destroy(){this.publish("ViewerWillTerminate",this.settings),this.settings.pendingManifestRequest&&this.settings.pendingManifestRequest.abort(),document.body.removeClass("diva-hide-scrollbar"),this.settings.parentObject.parent().empty().removeData("diva"),this.settings.parentObject.parent().removeAttr("style").removeAttr("class"),this.publish("ViewerDidTerminate",this.settings),Fs.Events.unsubscribeAll(this.settings.ID)}}function OZ(n){let r,e=n.label,t="object"==typeof e?e[Object.keys(e)[0]][0]:e,i=n.value;return r=Array.isArray(i)?i.map(s=>s[Object.keys(s)[0]]):"object"==typeof i?i[Object.keys(i)[0]]:i,Array.isArray(r)&&(r=r.join(", ")),{label:t,value:r}}const cN=(n,e)=>{const t=Math.max(n,e);return t<128?0:Math.ceil(Math.log((t+1)/257)/Math.log(2))},Yy=(n,e)=>n/Math.pow(2,e),PZ=(n,e)=>n.map(t=>{const i=t.width,r=t.height,s=uN(t),o="/"!==s.url.slice(-1)?s.url+"/":s.url,a=new Array(e+1);for(let c=0;c<e+1;c++)a[c]={h:Math.floor(Yy(r,e-c)),w:Math.floor(Yy(i,e-c))};return{f:s.url,url:o,il:t.label||"",d:a}});function uN(n){let e=n["@id"]||n.id;const t=/#xywh=([0-9]+,[0-9]+,[0-9]+,[0-9]+)/;let i="",r=!0;if(/\/([0-9]+,[0-9]+,[0-9]+,[0-9]+)\//.test(e)){const o=e.split("/");i=o[o.length-4]}else t.test(e)?i=t.exec(e)[1]:n.service&&(n.service["@id"]||n.service.id)&&(e=n.service["@id"]||n.service.id,r=!1);r&&(e=e.split("/").slice(0,-4).join("/"));const s={url:e};if(i.length){const o=i.split(",");s.x=parseInt(o[0],10),s.y=parseInt(o[1],10),s.w=parseInt(o[2],10),s.h=parseInt(o[3],10)}return s}class FZ{getPageImageURL(e,t,i){let r;r=!i||null==i.width&&null==i.height?"full":(null==i.width?"":i.width)+","+(null==i.height?"":i.height);const s=e.pages[t];return encodeURI(s.url+"full/"+r+"/0/"+(s.api>1.1?"default":"native")+".jpg")}getTileImageURL(e,t,i){const r=e.pages[t];let s,o;s=i.row===i.rowCount-1?r.d[i.zoomLevel].h-(i.rowCount-1)*i.tileDimensions.height:i.tileDimensions.height,o=i.col===i.colCount-1?r.d[i.zoomLevel].w-(i.colCount-1)*i.tileDimensions.width:i.tileDimensions.width;const a=Math.pow(2,e.maxZoom-i.zoomLevel);let c=i.col*i.tileDimensions.width*a,d=i.row*i.tileDimensions.height*a;r.hasOwnProperty("xoffset")&&(c+=r.xoffset,d+=r.yoffset);const f=[c,d,o*a,s*a].join(",");return encodeURI(r.url+f+"/"+o+","+s+"/0/"+(r.api>1.1?"default":"native")+".jpg")}}class ul{constructor(e,t){this.pages=e.pgs,this.maxZoom=e.max_zoom,this.maxRatio=e.dims.max_ratio,this.minRatio=e.dims.min_ratio,this.itemTitle=e.item_title,this.metadata=e.metadata,this.paged=!!e.paged,this._maxWidths=e.dims.max_w,this._maxHeights=e.dims.max_h,this._averageWidths=e.dims.a_wid,this._averageHeights=e.dims.a_hei,this._totalHeights=e.dims.t_hei,this._totalWidths=e.dims.t_wid,this._urlAdapter=t}static fromIIIF(e){const t=function RZ(n){let e=n["@context"];if(!e)return console.error("Invalid IIIF Manifest; No @context found."),null;const t=(n=>"http://iiif.io/api/presentation/2/context.json"===n||Array.isArray(n)&&n.includes("http://iiif.io/api/presentation/2/context.json")?2:Array.isArray(n)&&n.includes("http://iiif.io/api/presentation/3/context.json")?3:2)(e),i=n.sequences?n.sequences[0]:null,r=i?i.canvases:n.items,s=r.length,o=new Array(r.length);let a,c,d,f,_,y,w,I,k,j,B,J,pe,De,zt,bt,Rt,p=[],Tt=100,ft=0,an=100;for(let pt=0;pt<s;pt++){const ni=r[pt],or=ni.width,kn=ni.height,Bs=cN(or,kn),$n=kn/or;ft=Math.max($n,ft),an=Math.min($n,an),Tt=Math.min(Tt,Bs)}const qn=new Array(Tt+1).fill(0),Pn=new Array(Tt+1).fill(0),_i=new Array(Tt+1).fill(0),Zn=new Array(Tt+1).fill(0);for(let pt=0;pt<s;pt++)if(a=r[pt],J=a["@id"]||a.id,pe=a.label,c=a.images?a.images[0].resource:a.items[0].items[0].body,p=[],"oa:Choice"===c["@type"]||"Choice"===c.type?(d=c.default||c.items[0],f=c.item||c.items.slice(1),p=PZ(f,Tt)):d=c,k=a.width||d.width,j=a.height||d.height,k<=0||j<=0)console.warn("Invalid width or height for canvas "+pe+". Skipping");else{B=cN(k,j),De=d.label||null,w=uN(d),y="/"!==w.url.slice(-1)?w.url+"/":w.url,_=d.service["@context"]||d.service.type,I="http://iiif.io/api/image/2/context.json"===_||"ImageService2"===_?2:"http://library.stanford.edu/iiif/image-api/1.1/context.json"===_?1.1:1,zt=new Array(Tt+1);for(let kn=0;kn<Tt+1;kn++)bt=Math.floor(Yy(k,Tt-kn)),Rt=Math.floor(Yy(j,Tt-kn)),zt[kn]={h:Rt,w:bt},qn[kn]+=bt,Pn[kn]+=Rt,_i[kn]=Math.max(bt,_i[kn]),Zn[kn]=Math.max(Rt,Zn[kn]);o[pt]={d:zt,m:B,l:pe,il:De,f:w.url,url:y,api:I,paged:"non-paged"!==a.viewingHint||!!a.behavior&&"non-paged"!==a.behavior[0],facingPages:"facing-pages"===a.viewingHint||!!a.behavior&&"facing-pages"===a.behavior[0],canvas:J,otherImages:p,xoffset:w.x||null,yoffset:w.y||null}}const Oe=new Array(Tt+1),ze=new Array(Tt+1);for(let pt=0;pt<Tt+1;pt++)Oe[pt]=qn[pt]/s,ze[pt]=Pn[pt]/s;const Qe={a_wid:Oe,a_hei:ze,max_w:_i,max_h:Zn,max_ratio:ft,min_ratio:an,t_hei:Pn,t_wid:qn};return{version:t,item_title:OZ(n).label,metadata:n.metadata||null,dims:Qe,max_zoom:Tt,pgs:o,paged:"paged"===n.viewingHint||!!n.behaviour&&"paged"===n.behaviour[0]||!!i&&"paged"===i.viewingHint}}(e);return new ul(t,new FZ)}isPageValid(e,t){return!(!t&&this.paged&&!this.pages[e].paged)&&e>=0&&e<this.pages.length}getMaxPageDimensions(e){const t=this.pages[e].d[this.maxZoom];return{height:t.h,width:t.w}}getPageDimensionsAtZoomLevel(e,t){const i=this.pages[e].d[this.maxZoom],r=function NZ(n,e){return 1/Math.pow(2,n-e)}(this.maxZoom,t);return{height:i.h*r,width:i.w*r}}getPageImageURL(e,t){return this._urlAdapter.getPageImageURL(this,e,t)}getPageImageTiles(e,t,i){const r=this.pages[e];if(!isFinite(t)||t%1!=0)throw new TypeError("Zoom level must be an integer: "+t);const s=Math.ceil(r.d[t].h/i.height),o=Math.ceil(r.d[t].w/i.width),a=[];let c,d,f;for(c=0;c<s;c++)for(d=0;d<o;d++)f=this._urlAdapter.getTileImageURL(this,e,{row:c,col:d,rowCount:s,colCount:o,zoomLevel:t,tileDimensions:i}),a.push({row:c,col:d,zoomLevel:t,dimensions:{height:i.height,width:i.width},offset:{top:c*i.height,left:d*i.width},url:f});return{zoomLevel:t,rows:s,cols:o,tiles:a}}}function Vh(n){return function(e){return this[n][e]}}ul.prototype.getMaxWidth=Vh("_maxWidths"),ul.prototype.getMaxHeight=Vh("_maxHeights"),ul.prototype.getAverageWidth=Vh("_averageWidths"),ul.prototype.getAverageHeight=Vh("_averageHeights"),ul.prototype.getTotalWidth=Vh("_totalWidths"),ul.prototype.getTotalHeight=Vh("_totalHeights");class LZ{constructor(e){this.viewer=e,this.settings=e.settings}_elemAttrs(e,t){const i={id:this.settings.ID+e,class:"diva-"+e};return t?Object.assign(i,t):i}_subscribe(e,t){Fs.Events.subscribe(e,t,this.settings.ID)}createButton(e,t,i,r){const s=Mt("button",{type:"button",id:this.settings.ID+e,class:"diva-"+e+" diva-button",title:t,"aria-label":t});return r&&s.appendChild(r),i&&s.addEventListener("click",i),s}createLabel(e,t,i,r,s){return Mt("div",{id:this.settings.ID+t,class:e+" diva-label"},[i,Mt("span",{id:this.settings.ID+r},s)])}createZoomButtons(){let e=this._createZoomOutIcon(),t=this._createZoomInIcon(),i=[this.createButton("zoom-out-button","Zoom Out",()=>{this.viewer.setZoomLevel(this.settings.zoomLevel-1)},e),this.createButton("zoom-in-button","Zoom In",()=>{this.viewer.setZoomLevel(this.settings.zoomLevel+1)},t),this.createLabel("diva-zoom-label","zoom-label","Zoom level: ","zoom-level",this.settings.zoomLevel+1)],r=function(){document.getElementById(this.settings.ID+"zoom-level").textContent=this.settings.zoomLevel+1};return this._subscribe("ZoomLevelDidChange",r),this._subscribe("ViewerDidLoad",r),Mt("div",{id:this.settings.ID+"zoom-controls",style:"display: none"},i)}createGridControls(){let e=this._createGridMoreIcon(),t=this._createGridFewerIcon(),i=[this.createButton("grid-out-button","Fewer",()=>{this.viewer.setGridPagesPerRow(this.settings.pagesPerRow-1)},t),this.createButton("grid-in-button","More",()=>{this.viewer.setGridPagesPerRow(this.settings.pagesPerRow+1)},e),this.createLabel("diva-grid-label","grid-label","Pages per row: ","pages-per-row",this.settings.pagesPerRow)];return this._subscribe("GridRowNumberDidChange",function(){document.getElementById(this.settings.ID+"pages-per-row").textContent=this.settings.pagesPerRow}),Mt("div",{id:this.settings.ID+"grid-controls",style:"display:none"},i)}createPageLabel(){const e=Mt("span",{id:this.settings.ID+"current-page"}),t=()=>{let i=this.viewer.getCurrentPageIndices(),r=i[0],s=i[i.length-1],o=this.settings.manifest.pages[r].l;e.textContent=r!==s?this.settings.enableIndexAsLabel?r+" - "+s:o+" - "+this.settings.manifest.pages[s].l:this.settings.enableIndexAsLabel?r:o};return this._subscribe("VisiblePageDidChange",t),this._subscribe("ViewerDidLoad",t),this._subscribe("ViewDidSwitch",t),Mt("span",{class:"diva-page-label diva-label"},e)}createGotoPageForm(){const e=Mt("input",{id:this.settings.ID+"goto-page-input",class:"diva-input diva-goto-page-input",autocomplete:"off",type:"text","aria-label":"Page Input"}),t=Mt("input",{id:this.settings.ID+"goto-page-submit",class:"diva-button diva-button-text",type:"submit",value:"Go"}),i=Mt("div",{id:this.settings.ID+"input-suggestions",class:"diva-input-suggestions"}),r=Mt("form",{id:this.settings.ID+"goto-page",class:"diva-goto-form"},e,t,i);return r.addEventListener("submit",o=>{o.preventDefault();const a=e.value;if(this.settings.onGotoSubmit&&"function"==typeof this.settings.onGotoSubmit){const c=this.settings.onGotoSubmit(a);this.viewer.gotoPageByIndex(c)||window.alert("No page could be found with that label or page number")}else this.viewer.gotoPageByLabel(a)||window.alert("No page could be found with that label or page number");return i.style.display="none",!1}),["input","focus"].forEach(o=>{e.addEventListener(o,()=>{i.innerHTML="";const a=e.value;let c=0;if(this.settings.enableGotoSuggestions&&a){const d=this.settings.manifest.pages;for(let f=0,p=d.length;f<p&&c<10;f++)if(d[f].l.toLowerCase().indexOf(a.toLowerCase())>-1){const _=Mt("div",{class:"diva-input-suggestion"},d[f].l);i.appendChild(_),c++}c>0&&(i.style.display="block")}else i.style.display="none"})}),e.addEventListener("keydown",o=>{let a;if(13===o.keyCode){const c=document.getElementsByClassName("active")[0];void 0!==c&&(e.value=c.innerText)}if(38===o.keyCode){a=document.getElementsByClassName("active")[0];const c=a?a.previousSibling:void 0;if(void 0!==c)a.classList.remove("active"),null!==c&&c.classList.add("active");else{let d=document.getElementsByClassName("diva-input-suggestion").length-1;document.getElementsByClassName("diva-input-suggestion")[d].classList.add("active")}}else if(40===o.keyCode){a=document.getElementsByClassName("active")[0];const c=a?a.nextSibling:void 0;void 0!==c?(a.classList.remove("active"),null!==c&&c.classList.add("active")):document.getElementsByClassName("diva-input-suggestion")[0].classList.add("active")}}),function s(o,a,c,d){o.addEventListener(a,function(f){for(var p=f.target;p&&p!==this;)p.matches(c)&&d.call(p,f),p=p.parentNode})}(i,"mousedown",".diva-input-suggestion",function(){e.value=this.textContent,i.style.display="none";let o=new Event("submit",{cancelable:!0});r.dispatchEvent(o)}),e.addEventListener("blur",()=>{i.style.display="none"}),r}createViewMenu(){const e=Mt("div",this._elemAttrs("view-options")),t=this._createGridViewIcon(),i=this._createBookViewIcon(),r=this._createPageViewIcon(),o=this.createButton("view-icon","Change view",()=>{e.style.display="none"===e.style.display?"block":"none"}),a=d=>{this.viewer.changeView(d),e.style.display="none"},c=()=>{const d=" diva-view-icon diva-button";this.settings.inGrid?(o.appendChild(t),o.className="diva-grid-icon"+d):this.settings.inBookLayout?(o.appendChild(i),o.className="diva-book-icon"+d):(o.appendChild(r),o.className="diva-document-icon"+d);const f=document.createDocumentFragment();for((this.settings.inGrid||this.settings.inBookLayout)&&f.appendChild(this.createButton("document-icon","Document View",a.bind(null,"document"),r)),(this.settings.inGrid||!this.settings.inBookLayout)&&f.appendChild(this.createButton("book-icon","Book View",a.bind(null,"book"),i)),this.settings.inGrid||f.appendChild(this.createButton("grid-icon","Grid View",a.bind(null,"grid"),t));e.firstChild;)e.removeChild(e.firstChild);e.appendChild(f)};return document.addEventListener("mouseup",d=>{e!==d.target&&(e.style.display="none")}),this._subscribe("ViewDidSwitch",c),this._subscribe("ObjectDidLoad",c),Mt("div",this._elemAttrs("view-menu"),o,e)}createFullscreenButton(){let e=this._createFullscreenIcon();return this.createButton("fullscreen-icon","Toggle fullscreen mode",()=>{this.viewer.toggleFullscreenMode()},e)}toggleZoomGridControls(){this.settings.inGrid?(document.getElementById(this.settings.ID+"zoom-controls").style.display="none",document.getElementById(this.settings.ID+"grid-controls").style.display="block"):(document.getElementById(this.settings.ID+"zoom-controls").style.display="block",document.getElementById(this.settings.ID+"grid-controls").style.display="none")}render(){this._subscribe("ViewDidSwitch",this.toggleZoomGridControls),this._subscribe("ObjectDidLoad",this.toggleZoomGridControls);let e=[this.createZoomButtons(),this.createGridControls()],t=[this.createPageLabel(),this.createViewMenu()];this.settings.enableFullscreen&&t.push(this.createFullscreenButton()),this.settings.enableGotoPage&&t.splice(1,0,this.createGotoPageForm());let i=this.viewer.viewerState.pluginInstances;for(let o=0,a=i.length;o<a;o++){let c=i[o];!c.toolbarSide||(c.toolbarIcon=c.createIcon(),c.toolbarIcon&&("right"===c.toolbarSide?t.splice(2,0,c.toolbarIcon):"left"===c.toolbarSide&&e.splice(2,0,c.toolbarIcon),c.toolbarIcon.addEventListener("click",r.bind(this,c))))}function r(o){o.handleClick(this.viewer)}const s=Mt("div",this._elemAttrs("tools"),Mt("div",this._elemAttrs("tools-left"),e),Mt("div",this._elemAttrs("tools-right"),t));this.settings.toolbarParentObject.insertBefore(s,this.settings.toolbarParentObject.firstChild)}_createToolbarIcon(e){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttributeNS(null,"viewBox","0 0 25 25"),t.setAttributeNS(null,"x","0px"),t.setAttributeNS(null,"y","0px"),t.setAttributeNS(null,"style","enable-background:new 0 0 48 48;");let i=document.createElementNS("http://www.w3.org/2000/svg","g");return i.setAttributeNS(null,"transform","matrix(1, 0, 0, 1, -12, -12)"),e.forEach(r=>{let s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d",r),i.appendChild(s)}),t.appendChild(i),t}_createZoomOutIcon(){return this._createToolbarIcon(["M19.5,23c-0.275,0-0.5-0.225-0.5-0.5v-1c0-0.275,0.225-0.5,0.5-0.5h7c0.275,0,0.5,0.225,0.5,0.5v1c0,0.275-0.225,0.5-0.5,0.5H19.5z","M37.219,34.257l-2.213,2.212c-0.202,0.202-0.534,0.202-0.736,0l-6.098-6.099c-1.537,0.993-3.362,1.577-5.323,1.577c-5.431,0-9.849-4.418-9.849-9.849c0-5.431,4.418-9.849,9.849-9.849c5.431,0,9.849,4.418,9.849,9.849c0,1.961-0.584,3.786-1.576,5.323l6.098,6.098C37.422,33.722,37.422,34.054,37.219,34.257z M29.568,22.099c0-3.706-3.014-6.72-6.72-6.72c-3.706,0-6.72,3.014-6.72,6.72c0,3.706,3.014,6.72,6.72,6.72C26.555,28.818,29.568,25.805,29.568,22.099z"])}_createZoomInIcon(){return this._createToolbarIcon(["M37.469,34.257l-2.213,2.212c-0.202,0.202-0.534,0.202-0.736,0l-6.098-6.099c-1.537,0.993-3.362,1.577-5.323,1.577c-5.431,0-9.849-4.418-9.849-9.849c0-5.431,4.418-9.849,9.849-9.849c5.431,0,9.849,4.418,9.849,9.849c0,1.961-0.584,3.786-1.576,5.323l6.098,6.098C37.672,33.722,37.672,34.054,37.469,34.257z M29.818,22.099c0-3.706-3.014-6.72-6.72-6.72c-3.706,0-6.72,3.014-6.72,6.72c0,3.706,3.014,6.72,6.72,6.72C26.805,28.818,29.818,25.805,29.818,22.099z M26.5,21H24v-2.5c0-0.275-0.225-0.5-0.5-0.5h-1c-0.275,0-0.5,0.225-0.5,0.5V21h-2.5c-0.275,0-0.5,0.225-0.5,0.5v1c0,0.275,0.225,0.5,0.5,0.5H22v2.5c0,0.275,0.225,0.5,0.5,0.5h1c0.275,0,0.5-0.225,0.5-0.5V23h2.5c0.275,0,0.5-0.225,0.5-0.5v-1C27,21.225,26.775,21,26.5,21z"])}_createGridMoreIcon(){return this._createToolbarIcon(["M29.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z"])}_createGridFewerIcon(){return this._createToolbarIcon(["M25.5,35c-0.275,0-0.5-0.225-0.5-0.5v-9c0-0.275,0.225-0.5,0.5-0.5h9c0.275,0,0.5,0.225,0.5,0.5v9c0,0.275-0.225,0.5-0.5,0.5H25.5z M22.5,35c0.275,0,0.5-0.225,0.5-0.5v-9c0-0.275-0.225-0.5-0.5-0.5h-9c-0.275,0-0.5,0.225-0.5,0.5v9c0,0.275,0.225,0.5,0.5,0.5H22.5z M34.5,23c0.275,0,0.5-0.225,0.5-0.5v-9c0-0.275-0.225-0.5-0.5-0.5h-9c-0.275,0-0.5,0.225-0.5,0.5v9c0,0.275,0.225,0.5,0.5,0.5H34.5z M22.5,23c0.275,0,0.5-0.225,0.5-0.5v-9c0-0.275-0.225-0.5-0.5-0.5h-9c-0.275,0-0.5,0.225-0.5,0.5v9c0,0.275,0.225,0.5,0.5,0.5H22.5z"])}_createGridViewIcon(){return this._createToolbarIcon(["M29.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z"])}_createBookViewIcon(){return this._createToolbarIcon(["M35,16.8v-1.323c0,0-2.292-1.328-5.74-1.328c-3.448,0-5.26,1.25-5.26,1.25s-1.813-1.25-5.26-1.25c-3.448,0-5.74,1.328-5.74,1.328V16.8l-1,0.531v0.021v15.687c0,0,4.531-1.578,6.999-1.578c2.468,0,5.001,0.885,5.001,0.885s2.532-0.885,5-0.885c0.306,0,0.643,0.024,1,0.066v4.325l1.531-2.016L33,35.852v-3.72c2,0.43,3,0.906,3,0.906V17.352v-0.021L35,16.8z M23,29.03c-1-0.292-2.584-0.679-3.981-0.679c-2.246,0-3.019,0.404-4.019,0.699V16.634c0,0,1.125-0.699,4.019-0.699c1.694,0,2.981,0.417,3.981,1.126V29.03z M33,29.051c-1-0.295-1.773-0.699-4.02-0.699c-1.396,0-2.981,0.387-3.98,0.679V17.06c1-0.709,2.286-1.126,3.98-1.126c2.895,0,4.02,0.699,4.02,0.699V29.051z"])}_createPageViewIcon(){return this._createToolbarIcon(["M29.425,29h4.47L29,33.934v-4.47C29,29.19,29.151,29,29.425,29z M34,14.563V28h-5.569C28.157,28,28,28.196,28,28.47V34H14.497C14.223,34,14,33.71,14,33.437V14.563C14,14.29,14.223,14,14.497,14h18.9C33.672,14,34,14.29,34,14.563z M25.497,26.497C25.497,26.223,25.275,26,25,26h-7c-0.275,0-0.497,0.223-0.497,0.497v1.006C17.503,27.777,17.725,28,18,28h7c0.275,0,0.497-0.223,0.497-0.497V26.497z M30.497,22.497C30.497,22.223,30.275,22,30,22H18c-0.275,0-0.497,0.223-0.497,0.497v1.006C17.503,23.777,17.725,24,18,24h12c0.275,0,0.497-0.223,0.497-0.497V22.497z M30.497,18.497C30.497,18.223,30.275,18,30,18H18c-0.275,0-0.497,0.223-0.497,0.497v1.006C17.503,19.777,17.725,20,18,20h12c0.275,0,0.497-0.223,0.497-0.497V18.497z"])}_createFullscreenIcon(){return this._createToolbarIcon(["M35,12H13c-0.55,0-1,0.45-1,1v22c0,0.55,0.45,1,1,1h22c0.55,0,1-0.45,1-1V13C36,12.45,35.55,12,35,12z M34,34H14V14h20V34z","M17,21.75v-4.5c0-0.138,0.112-0.25,0.25-0.25h4.5c0.138,0,0.17,0.08,0.073,0.177l-1.616,1.616l1.823,1.823c0.097,0.097,0.097,0.256,0,0.354l-1.061,1.06c-0.097,0.097-0.256,0.097-0.354,0l-1.823-1.823l-1.616,1.616C17.08,21.92,17,21.888,17,21.75z M20.97,25.97c-0.097-0.097-0.256-0.097-0.354,0l-1.823,1.823l-1.616-1.616C17.08,26.08,17,26.112,17,26.25v4.5c0,0.138,0.112,0.25,0.25,0.25h4.5c0.138,0,0.17-0.08,0.073-0.177l-1.616-1.616l1.823-1.823c0.097-0.097,0.097-0.256,0-0.354L20.97,25.97z M30.75,17h-4.5c-0.138,0-0.17,0.08-0.073,0.177l1.616,1.616l-1.823,1.823c-0.097,0.097-0.097,0.256,0,0.354l1.061,1.06c0.097,0.097,0.256,0.097,0.354,0l1.823-1.823l1.616,1.616C30.92,21.92,31,21.888,31,21.75v-4.5C31,17.112,30.888,17,30.75,17z M30.823,26.177l-1.616,1.616l-1.823-1.823c-0.097-0.097-0.256-0.097-0.354,0l-1.061,1.06c-0.097,0.097-0.097,0.256,0,0.354l1.823,1.823l-1.616,1.616C26.08,30.92,26.112,31,26.25,31h4.5c0.138,0,0.25-0.112,0.25-0.25v-4.5C31,26.112,30.92,26.08,30.823,26.177z M26,22.5c0-0.275-0.225-0.5-0.5-0.5h-3c-0.275,0-0.5,0.225-0.5,0.5v3c0,0.275,0.225,0.5,0.5,0.5h3c0.275,0,0.5-0.225,0.5-0.5V22.5z"])}}const VZ={get:dN,update:function BZ(n,e){const t=dN(n),i=window.location.hash;if(t!==e)if("string"==typeof t){const r=i.indexOf("&"+n+"=")>0?i.indexOf("&"+n+"="):i.indexOf("#"+n+"="),s=r+n.length+2+t.length,o=0===r?"#":"&";window.location.replace(i.substring(0,r)+o+n+"="+e+i.substring(s))}else 0===i.length?window.location.replace("#"+n+"="+e):window.location.replace(i+"&"+n+"="+e)}};function dN(n){const e=window.location.hash;if(""!==e){let t=e.indexOf("&"+n+"=")>0?e.indexOf("&"+n+"="):e.indexOf("#"+n+"=");if(t>=0){t+=n.length+2;const i=e.indexOf("&",t);return i>t?decodeURIComponent(e.substring(t,i)):i<0?decodeURIComponent(e.substring(t)):""}return!1}return!1}class NA{constructor(e,t){if(!(e instanceof HTMLElement)&&(this.element=document.getElementById(e),null===this.element))throw new $F;if(!t.objectData)throw new GF("You must supply either a URL or a literal object to the `objectData` key.");this.options=Object.assign({adaptivePadding:.05,arrowScrollAmount:40,blockMobileMove:!1,objectData:"",enableAutoTitle:!0,enableFilename:!0,enableFullscreen:!0,enableGotoPage:!0,enableGotoSuggestions:!0,enableGridIcon:!0,enableGridControls:"buttons",enableImageTitles:!0,enableIndexAsLabel:!1,enableKeyScroll:!0,enableLinkIcon:!0,enableNonPagedVisibilityIcon:!0,enableSpaceScroll:!1,enableToolbar:!0,enableZoomControls:"buttons",fillParentHeight:!0,fixedPadding:10,fixedHeightGrid:!0,goDirectlyTo:0,hashParamSuffix:null,imageCrossOrigin:"anonymous",inFullscreen:!1,inBookLayout:!1,inGrid:!1,maxPagesPerRow:8,maxZoomLevel:-1,minPagesPerRow:2,minZoomLevel:0,onGotoSubmit:null,pageAliases:{},pageAliasFunction:function(){return!1},pageLoadTimeout:200,pagesPerRow:5,requestHeaders:{Accept:"application/json"},showNonPagedPages:!1,throbberTimeout:100,tileHeight:256,tileWidth:256,toolbarParentObject:null,verticallyOriented:!0,viewportMargin:200,zoomLevel:2},t);const i=Mt("div",{class:"diva-wrapper"+(this.options.fillParentHeight?" diva-wrapper-flexbox":"")});this.element.appendChild(i),this.options.toolbarParentObject=this.options.toolbarParentObject||i;const r=new IZ(i,this.options,this);this.viewerState=r.getInternalState(),this.settings=r.getSettings(),this.toolbar=this.settings.enableToolbar?new LZ(this):null,i.id=this.settings.ID+"wrapper",this.divaState={viewerCore:r,toolbar:this.toolbar};let s=Fs.Events.subscribe("ObjectDidLoad",()=>{null!==this.toolbar&&this.toolbar.render(),Fs.Events.unsubscribe(s)});this.hashState=this._getHashParamState(),this._loadOrFetchObjectData()}_loadOrFetchObjectData(){if("object"==typeof this.settings.objectData)setTimeout(()=>{this._loadObjectData(this.settings.objectData,this.hashState)},0);else{const e=fetch(this.settings.objectData,{headers:this.settings.requestHeaders}).then(t=>{if(!t.ok){Fs.Events.publish("ManifestFetchError",[t],this),this._ajaxError(t);let i=new Error(t.statusText);throw i.response=t,i}return t.json()}).then(t=>{this._loadObjectData(t,this.hashState)});this.divaState.viewerCore.setPendingManifestRequest(e)}}_showError(e){this.divaState.viewerCore.showError(e)}_ajaxError(e){const t=["Invalid objectData setting. Error code: "+e.status+" "+e.statusText];if(0===this.settings.objectData.lastIndexOf("http",0)){const r=this.settings.objectData.replace(/https?:\/\//i,"").split(/[/?#]/)[0];window.location.hostname!==r&&t.push(Mt("p","Attempted to access cross-origin data without CORS."),Mt("p","You may need to update your server configuration to support CORS. For help, see the ",Mt("a",{href:"https://github.com/DDMAL/diva.js/wiki/Installation#a-note-about-cross-site-requests",target:"_blank"},"cross-site request documentation.")))}this._showError(t)}_loadObjectData(e,t){let i;if(!e.hasOwnProperty("@context")&&(-1===e["@context"].indexOf("iiif")||-1===e["@context"].indexOf("shared-canvas")))throw new zF("This does not appear to be a IIIF Manifest.");Fs.Events.publish("ManifestDidLoad",[e],this),i=ul.fromIIIF(e);const r=t?this._getLoadOptionsForState(t,i):{};this.divaState.viewerCore.setManifest(i,r)}_getHashParamState(){const e={};return["f","v","z","n","i","p","y","x"].forEach(t=>{const i=VZ.get(t+this.settings.hashParamSuffix);!1!==i&&(e[t]=i)}),"true"===e.f?e.f=!0:"false"===e.f&&(e.f=!1),["z","n","p","x","y"].forEach(t=>{t in e&&(e[t]=parseInt(e[t],10))}),e}_getLoadOptionsForState(e,t){t=t||this.settings.manifest;const i="v"in e?this._getViewState(e.v):{};"f"in e&&(i.inFullscreen=e.f),"z"in e&&(i.zoomLevel=e.z),"n"in e&&(i.pagesPerRow=e.n);let r=this._getPageIndexForManifest(t,e.i);if(r>=0&&r<t.pages.length||(r=e.p-1,r>=0&&r<t.pages.length||(r=null)),null!==r){const s=parseInt(e.x,10),o=parseInt(e.y,10);i.goDirectlyTo=r,i.horizontalOffset=s,i.verticalOffset=o}return i}_getViewState(e){switch(e){case"d":return{inGrid:!1,inBookLayout:!1};case"b":return{inGrid:!1,inBookLayout:!0};case"g":return{inGrid:!0,inBookLayout:!1};default:return{}}}_getPageIndexForManifest(e,t){let i;const r=e.pages.length;for(i=0;i<r;i++)if(e.pages[i].f===t)return i;return-1}_getState(){let e;e=this.settings.inGrid?"g":this.settings.inBookLayout?"b":"d";const i=this.divaState.viewerCore.getCurrentLayout().getPageToViewportCenterOffset(this.settings.activePageIndex,this.viewerState.viewport);return{f:this.settings.inFullscreen,v:e,z:this.settings.zoomLevel,n:this.settings.pagesPerRow,i:!!this.settings.enableFilename&&this.settings.manifest.pages[this.settings.activePageIndex].f,p:!this.settings.enableFilename&&this.settings.activePageIndex+1,y:!!i&&i.y,x:!!i&&i.x}}_getURLHash(){const e=this._getState(),t=[];let i;for(i in e)!1!==e[i]&&t.push(i+this.settings.hashParamSuffix+"="+encodeURIComponent(e[i]));return t.join("&")}_getPageIndex(e){return this._getPageIndexForManifest(this.settings.manifest,e)}_checkLoaded(){return!!this.viewerState.loaded||(console.warn("The viewer is not completely initialized. This is likely because it is still downloading data. To fix this, only call this function if the isReady() method returns true."),!1)}_toggleFullscreen(){this._reloadViewer({inFullscreen:!this.settings.inFullscreen});let e,t=!1,i=document.getElementById(this.settings.selector+"tools");function s(){i.style.opacity=1,clearTimeout(e),!t&&this.settings.inFullscreen&&(e=setTimeout(function(){i.style.opacity=0},2e3))}this.settings.inFullscreen?(i.classList.add("diva-fullscreen-tools"),document.addEventListener("mousemove",s.bind(this)),document.getElementsByClassName("diva-viewport")[0].addEventListener("scroll",s.bind(this)),i.addEventListener("mouseenter",function(){t=!0}),i.addEventListener("mouseleave",function(){t=!1})):i.classList.remove("diva-fullscreen-tools")}_togglePageLayoutOrientation(){const e=!this.settings.verticallyOriented;return this._reloadViewer({inGrid:!1,verticallyOriented:e,goDirectlyTo:this.settings.activePageIndex,verticalOffset:this.divaState.viewerCore.getYOffset(),horizontalOffset:this.divaState.viewerCore.getXOffset()}),e}_changeView(e){switch(e){case"document":return this._reloadViewer({inGrid:!1,inBookLayout:!1});case"book":return this._reloadViewer({inGrid:!1,inBookLayout:!0});case"grid":return this._reloadViewer({inGrid:!0});default:return!1}}_gotoPageByIndex(e,t,i){let r=parseInt(e,10);if(this._isPageIndexValid(r)){const s=this.divaState.viewerCore.getXOffset(r,t),o=this.divaState.viewerCore.getYOffset(r,i);return this.viewerState.renderer.goto(r,o,s),!0}return!1}_isPageIndexValid(e){return this.settings.manifest.isPageValid(e,this.settings.showNonPagedPages)}_getPageIndexForPageXYValues(e,t){const i=this.viewerState.outerElement.getBoundingClientRect();if(e<i.left||e>i.right||t<i.top||t>i.bottom)return-1;const c=document.getElementsByClassName("diva-page");let d=c.length;for(;d--;){const f=c[d],p=f.getBoundingClientRect();if(!(e<p.left||e>p.right||t<p.top||t>p.bottom))return f.getAttribute("data-index")}return-1}_reloadViewer(e){return this.divaState.viewerCore.reload(e)}_getCurrentURL(){return location.protocol+"//"+location.host+location.pathname+location.search+"#"+this._getURLHash()}activate(){this.viewerState.isActiveDiva=!0}changeObject(e){this.viewerState.loaded=!1,this.divaState.viewerCore.clear(),this.viewerState.renderer&&this.viewerState.renderer.destroy(),this.viewerState.options.objectData=e,this._loadOrFetchObjectData()}changeView(e){this._changeView(e)}deactivate(){this.viewerState.isActiveDiva=!1}destroy(){this.divaState.viewerCore.destroy()}disableScrollable(){this.divaState.viewerCore.disableScrollable()}enableScrollable(){this.divaState.viewerCore.enableScrollable()}disableDragScrollable(){this.divaState.viewerCore.disableDragScrollable()}enableDragScrollable(){this.divaState.viewerCore.enableDragScrollable()}enterFullscreenMode(){return!this.settings.inFullscreen&&(this._toggleFullscreen(),!0)}enterGridView(){return!this.settings.inGrid&&(this._changeView("grid"),!0)}getAllPageURIs(){return this.settings.manifest.pages.map(e=>e.f)}getCurrentCanvas(){return this.settings.manifest.pages[this.settings.activePageIndex].canvas}getCurrentPageDimensionsAtCurrentZoomLevel(){return this.getPageDimensionsAtCurrentZoomLevel(this.settings.activePageIndex)}getCurrentPageFilename(){return console.warn("This method will be deprecated in the next version of Diva. Please use getCurrentPageURI instead."),this.settings.manifest.pages[this.settings.activePageIndex].f}getCurrentPageIndices(){return this.settings.currentPageIndices}getActivePageIndex(){return this.settings.activePageIndex}getCurrentPageOffset(){return this.getPageOffset(this.settings.activePageIndex)}getCurrentPageURI(){return this.settings.manifest.pages[this.settings.activePageIndex].f}getCurrentURL(){return this._getCurrentURL()}getFilenames(){return console.warn("This will be removed in the next version of Diva. Use getAllPageURIs instead."),this.settings.manifest.pages.map(e=>e.f)}getGridPagesPerRow(){return this.settings.pagesPerRow}getInstanceId(){return this.settings.ID}getInstanceSelector(){return this.divaState.viewerCore.selector}getItemTitle(){return this.settings.manifest.itemTitle}getMaxZoomLevel(){return this.settings.maxZoomLevel}getMaxZoomLevelForPage(e){return!!this._checkLoaded()&&this.settings.manifest.pages[e].m}getMinZoomLevel(){return this.settings.minZoomLevel}getNumberOfPages(){return!!this._checkLoaded()&&this.settings.numPages}getOtherImages(e){return this.settings.manifest.pages[e].otherImages}getPageDimensions(e){return this._checkLoaded()?this.divaState.viewerCore.getCurrentLayout().getPageDimensions(e):null}getPageDimensionsAtCurrentZoomLevel(e){let t=parseInt(e,10);if(!this._isPageIndexValid(t))throw new Error("Invalid Page Index");return this.divaState.viewerCore.getCurrentLayout().getPageDimensions(t)}getPageDimensionsAtZoomLevel(e,t){if(!this._checkLoaded())return!1;t>this.settings.maxZoomLevel&&(t=this.settings.maxZoomLevel);const r=this.settings.manifest.pages[parseInt(e,10)].d[parseInt(t,10)];return{width:r.w,height:r.h}}getPageImageURL(e,t){return this.settings.manifest.getPageImageURL(e,t)}getPageIndexForPageXYValues(e,t){return this._getPageIndexForPageXYValues(e,t)}getPageOffset(e,t){const i=this.divaState.viewerCore.getPageRegion(e,t);return{top:i.top,left:i.left}}getSettings(){return this.settings}getState(){return this._getState()}getZoomLevel(){return this.settings.zoomLevel}gotoPageByIndex(e,t,i){return this._gotoPageByIndex(e,t,i)}gotoPageByLabel(e,t,i){const r=this.settings.manifest.pages;let s=e.toLowerCase();for(let a=0,c=r.length;a<c;a++)if(r[a].l.toLowerCase().indexOf(s)>-1)return this._gotoPageByIndex(a,t,i);const o=parseInt(e,10)-1;return this._gotoPageByIndex(o,t,i)}gotoPageByName(e,t,i){console.warn("This method will be removed in the next version of Diva.js. Use gotoPageByURI instead.");const r=this._getPageIndex(e);return this._gotoPageByIndex(r,t,i)}gotoPageByURI(e,t,i){const r=this._getPageIndex(e);return this._gotoPageByIndex(r,t,i)}hasOtherImages(e){return!0===this.settings.manifest.pages[e].otherImages}hideNonPagedPages(){this._reloadViewer({showNonPagedPages:!1})}isInFullscreen(){return this.settings.inFullscreen}isPageIndexValid(e){return this._isPageIndexValid(e)}isPageInViewport(e){return this.viewerState.renderer.isPageVisible(e)}isReady(){return this.viewerState.loaded}isRegionInViewport(e,t,i,r,s){const o=this.divaState.viewerCore.getCurrentLayout();if(!o)return!1;const a=o.getPageOffset(e),c=a.top+i,d=a.left+t;return this.viewerState.viewport.intersectsRegion({top:c,bottom:c+s,left:d,right:d+r})}isVerticallyOriented(){return this.settings.verticallyOriented}leaveFullscreenMode(){return!!this.settings.inFullscreen&&(this._toggleFullscreen(),!0)}leaveGridView(){return!!this.settings.inGrid&&(this._reloadViewer({inGrid:!1}),!0)}setGridPagesPerRow(e){return!!this.divaState.viewerCore.isValidOption("pagesPerRow",e)&&this._reloadViewer({inGrid:!0,pagesPerRow:e})}setState(e){this._reloadViewer(this._getLoadOptionsForState(e))}setZoomLevel(e){return this.settings.inGrid&&this._reloadViewer({inGrid:!1}),this.divaState.viewerCore.zoom(e)}showNonPagedPages(){this._reloadViewer({showNonPagedPages:!0})}toggleFullscreenMode(){this._toggleFullscreen()}toggleNonPagedPagesVisibility(){this._reloadViewer({showNonPagedPages:!this.settings.showNonPagedPages})}toggleOrientation(){return this._togglePageLayoutOrientation()}translateFromMaxZoomLevel(e){return e/Math.pow(2,this.settings.maxZoomLevel-this.settings.zoomLevel)}translateToMaxZoomLevel(e){const t=this.settings.maxZoomLevel-this.settings.zoomLevel;return 0===t?e:e*Math.pow(2,t)}zoomIn(){return this.setZoomLevel(this.settings.zoomLevel+1)}zoomOut(){return this.setZoomLevel(this.settings.zoomLevel-1)}}NA.Events=Fs.Events;const Lu=NA;"undefined"!=typeof window&&function(n){n.Diva=n.Diva||NA}(window);let LA=(()=>{class n extends qt{constructor(){super(),this._selected=null}get selected(){return this._selected}set selected(t){this._selected=t,this.next(this._selected)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jZ=(()=>{class n{constructor(t,i){this.selectedSystem=t,this.stateService=i,this.creatingStaff=!1,this.firstPoint=null}ngOnInit(){let t;t=this.iiifManifest.includes("diamm.ac.uk")?{Accept:"application/json",Authorization:`Token ${TA}`,"X-DIAMM-Secret":IA,"X-DIAMM-Origin":jF}:{Accept:"application/json"},this.diva=new Lu("diva-wrapper",{objectData:this.iiifManifest,requestHeaders:t}),Lu.Events.subscribe("ActivePageDidChange",this.refreshOverlay.bind(this),this.diva.settings.ID),Lu.Events.subscribe("DocumentDidLoad",this.refreshOverlay.bind(this),this.diva.settings.ID),Lu.Events.subscribe("ZoomLevelDidChange",this.handleZoom.bind(this),this.diva.settings.ID),this.selectedSystem.subscribe(()=>{this.refreshOverlay(this.diva.getActivePageIndex())})}ngOnDestroy(){this.selectedSystem.selected=null;try{this.diva.deactivate(),this.diva.destroy()}catch(t){console.warn(t)}}handleKeydown(){this.diva.disableDragScrollable()}handleKeyup(){this.creatingStaff||this.diva.enableDragScrollable()}clickHandler(t){const i=t.target;if("rect"===i.tagName){Array.from(document.getElementsByClassName("selectedZone")).forEach(s=>{s.classList.remove("selectedZone")});let r=this.stateService.mei.getSystem(i.id);null!==r&&(this.selectedSystem.selected=r,i.classList.add("selectedZone"))}}mousedownHandler(t){if(t.shiftKey){this.creatingStaff=!0;const i=document.getElementById("editor-container-"+this.diva.getActivePageIndex().toString()).firstElementChild,r=i.createSVGPoint();r.x=t.clientX,r.y=t.clientY;const s=i.getScreenCTM();this.firstPoint=r.matrixTransform(s.inverse());let o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x",this.firstPoint.x.toString()),o.setAttribute("y",this.firstPoint.y.toString()),o.setAttribute("width","0"),o.setAttribute("height","0"),o.classList.add("zoneRect"),o.id="drawing-rect",i.appendChild(o)}}mousemoveHandler(t){if(this.creatingStaff){const i=document.getElementById("drawing-rect");if(null!==i){const r=i.viewportElement,s=r.createSVGPoint();s.x=t.clientX,s.y=t.clientY;const o=s.matrixTransform(r.getScreenCTM().inverse());i.setAttribute("x",Math.min(o.x,this.firstPoint.x).toString()),i.setAttribute("y",Math.min(o.y,this.firstPoint.y).toString()),i.setAttribute("width",Math.abs(o.x-this.firstPoint.x).toString()),i.setAttribute("height",Math.abs(o.y-this.firstPoint.y).toString())}}}mouseupHandler(t){if(this.creatingStaff){this.diva.enableDragScrollable(),this.creatingStaff=!1;const i=this.diva.getActivePageIndex(),r=document.getElementById("editor-container-"+i.toString()).firstElementChild,s=r.createSVGPoint();s.x=t.clientX,s.y=t.clientY;const o=r.getScreenCTM(),a=s.matrixTransform(o.inverse());let c=this.stateService.mei.getPb(i);null===c&&(c=new FR(this.diva.getCurrentCanvas()),c.index=i,c.codedVal=this.diva.settings.manifest.pages[i].l);let f,d=new lA({ulx:Math.min(this.firstPoint.x,a.x),uly:Math.min(this.firstPoint.y,a.y),lrx:Math.max(a.x,this.firstPoint.x),lry:Math.max(a.y,this.firstPoint.y)});f=null!==this.selectedSystem.selected?this.selectedSystem.selected.parent:this.stateService.mei.getOrCreatePart(Qn.triplum);const p=new cA;p.pb=c,p.sb=d,f.addSystem(p),this.selectedSystem.selected=p,this.refreshOverlay(i),this.firstPoint=null}}refreshOverlay(t){const i=this.diva.settings.innerElement,r=this.diva.getPageDimensionsAtCurrentZoomLevel(t),s=this.diva.settings.viewHandler._viewerCore.getPageRegion(t,{includePadding:!0,incorporateViewport:!0}),o=getComputedStyle(i,null).getPropertyValue("margin-left");let a=document.getElementById("editor-container-"+t.toString());null===a&&(a=document.createElement("div"),a.id="editor-container-"+t.toString(),a.classList.add("editor-container"),i.appendChild(a));const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=this.diva.getPageDimensionsAtZoomLevel(t,Number.MAX_SAFE_INTEGER);for(c.setAttribute("width",r.width.toString()),c.setAttribute("height",r.height.toString()),c.setAttribute("viewBox","0 0 "+d.width+" "+d.height),a.style.position="absolute",a.style.top=`${s.top}px`,a.style.left=s.left-parseInt(o)+"px";null!==a.firstChild;)a.firstChild.remove();let f=this.stateService.mei.getSystems().filter(p=>p.pb.index===t);for(const p of f){let _=p.sb.svg;c.appendChild(_),this.selectedSystem.selected===p&&_.classList.add("selectedZone")}a.appendChild(c)}handleZoom(){new Promise(t=>{Array.from(document.getElementsByClassName("editor-container")).forEach(i=>{i.style.display="none"}),setTimeout(t,this.diva.settings.zoomDuration+100)}).then(()=>{this.refreshOverlay(this.diva.getActivePageIndex()),Array.from(document.getElementsByClassName("editor-container")).forEach(t=>{t.style.display=""})})}}return n.\u0275fac=function(t){return new(t||n)(L(LA),L(ic))},n.\u0275cmp=Cn({type:n,selectors:[["app-diva-view"]],hostBindings:function(t,i){1&t&&We("keydown.shift",function(){return i.handleKeydown()},!1,yp)("keyup.shift",function(){return i.handleKeyup()},!1,yp)},inputs:{iiifManifest:"iiifManifest"},decls:1,vars:0,consts:[["id","diva-wrapper",3,"mousedown","mousemove","click","mouseup"]],template:function(t,i){1&t&&(D(0,"div",0),We("mousedown",function(s){return i.mousedownHandler(s)})("mousemove",function(s){return i.mousemoveHandler(s)})("click",function(s){return i.clickHandler(s)})("mouseup",function(s){return i.mouseupHandler(s)}),S())},styles:['@import"https://unpkg.com/diva.js@6.0.2/build/diva.css";#diva-wrapper{height:calc(100% - 80px)}rect.zoneRect{fill:#000;fill-opacity:0;stroke:#000;stroke-dasharray:25,25;stroke-width:.25em}rect.selectedZone{stroke-dasharray:none;stroke:#000;opacity:.75;fill:none}\n'],encapsulation:2}),n})();var um=Ve(203);function HZ(n,e){if(1&n){const t=Xs();D(0,"button",1)(1,"a",5),We("click",function(r){return en(t),kt().saveHumdrumClick(r)}),C(2," Download System Humdrum "),S()()}}function UZ(n,e){if(1&n){const t=Xs();D(0,"button",6),We("click",function(){return en(t),kt().deleteStaff()}),C(1," Delete Staff "),S()}}let $Z=(()=>{class n{constructor(t,i,r){this.selectedSystem=t,this.stateService=i,this.dialog=r}ngOnInit(){this.selectedSystem.subscribe(t=>{this.currentStaff=t})}saveClick(t){let i=t.target;const r=this.stateService.mei.generateXML(),o=(new XMLSerializer).serializeToString(r),a=um.xml('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n'+o),c=new Blob([a],{type:"application/xml"});i.setAttribute("href",window.URL.createObjectURL(c)),i.setAttribute("download","Parts_"+(0,jo.v4)()+".xml")}saveHumdrumClick(t){let i=t.target;const s=this.currentStaff.contents.getHumdrumScore({white:"mensural.white"===this.currentStaff.parent.parent.notationType}),o=new Blob([s],{type:"text/plain"});i.setAttribute("href",window.URL.createObjectURL(o))}deleteStaff(){let t=this.currentStaff;t.parent.removeSystem(t.id),this.selectedSystem.next(null)}}return n.\u0275fac=function(t){return new(t||n)(L(LA),L(ic),L(PR))},n.\u0275cmp=Cn({type:n,selectors:[["app-toolbar"]],decls:6,vars:2,consts:[[1,"toolbar-container"],["mat-stroked-button",""],["download","","type","application/xml",3,"click"],["mat-stroked-button","",4,"ngIf"],["mat-stroked-button","",3,"click",4,"ngIf"],["download","","type","text/plain",3,"click"],["mat-stroked-button","",3,"click"]],template:function(t,i){1&t&&(D(0,"div",0)(1,"button",1)(2,"a",2),We("click",function(s){return i.saveClick(s)}),C(3," Download MEI File "),S()(),Yn(4,HZ,3,0,"button",3),Yn(5,UZ,2,0,"button",4),S()),2&t&&(Xe(4),Ye("ngIf",i.currentStaff),Xe(1),Ye("ngIf",i.currentStaff))},directives:[Ih,hu],styles:[".toolbar-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-top:.5em;padding-bottom:.5em}"]}),n})();const zZ=["example"];function GZ(n,e){if(1&n&&(D(0,"option",31),C(1),S()),2&n){const t=e.$implicit;ch("value",t[0]),Xe(1),su(t[1])}}function WZ(n,e){if(1&n&&(D(0,"option",31),C(1),S()),2&n){const t=e.$implicit;ch("value",t[1]),Xe(1),su(t[1])}}function qZ(n,e){if(1&n){const t=Xs();D(0,"form",6)(1,"h1"),C(2,"Enter Music"),S(),D(3,"fieldset")(4,"label",7),C(5,"Voice:\xa0 "),D(6,"select",8),We("ngModelChange",function(r){return en(t),kt().selected.voice=r}),Yn(7,GZ,2,2,"option",9),S()()(),D(8,"h3",7),C(9,"Select Initial Mensuration:"),S(),D(10,"div",10)(11,"fieldset")(12,"legend",11),C(13,"modus"),S(),D(14,"input",12),We("ngModelChange",function(r){return en(t),kt().selected.parent.modus=r}),S(),D(15,"label",13),C(16,"3"),S(),C(17," \xa0 "),D(18,"input",14),We("ngModelChange",function(r){return en(t),kt().selected.parent.modus=r}),S(),D(19,"label",15),C(20,"2"),S(),C(21," \xa0 "),D(22,"input",16),We("ngModelChange",function(r){return en(t),kt().selected.parent.modus=r}),S(),D(23,"label",17),C(24,"N/A"),S()(),D(25,"fieldset")(26,"legend",11),C(27,"tempus"),S(),D(28,"input",18),We("ngModelChange",function(r){return en(t),kt().selected.parent.tempus=r}),S(),D(29,"label",19),C(30,"3"),S(),C(31," \xa0 "),D(32,"input",20),We("ngModelChange",function(r){return en(t),kt().selected.parent.tempus=r}),S(),D(33,"label",21),C(34,"2"),S(),C(35," \xa0 "),D(36,"input",22),We("ngModelChange",function(r){return en(t),kt().selected.parent.tempus=r}),S(),D(37,"label",23),C(38,"N/A"),S()(),D(39,"fieldset")(40,"legend",11),C(41,"prolatio"),S(),D(42,"input",24),We("ngModelChange",function(r){return en(t),kt().selected.parent.prolatio=r}),S(),D(43,"label",25),C(44,"3"),S(),C(45," \xa0 "),D(46,"input",26),We("ngModelChange",function(r){return en(t),kt().selected.parent.prolatio=r}),S(),D(47,"label",27),C(48,"2"),S(),C(49," \xa0 "),D(50,"input",28),We("ngModelChange",function(r){return en(t),kt().selected.parent.prolatio=r}),S(),D(51,"label",29),C(52,"N/A"),S()()(),D(53,"fieldset")(54,"label",7),C(55,"Mensuration Sign:\xa0 "),D(56,"select",30),We("ngModelChange",function(r){return en(t),kt().selected.parent.sign=r}),Yn(57,WZ,2,2,"option",9),S()()()()}if(2&n){const t=kt();Ye("formGroup",t.staffForm),Xe(6),Ye("ngModel",t.selected.voice),Xe(1),Ye("ngForOf",t.voices),Xe(7),Ye("ngModel",t.selected.parent.modus),Xe(4),Ye("ngModel",t.selected.parent.modus),Xe(4),Ye("ngModel",t.selected.parent.modus),Xe(6),Ye("ngModel",t.selected.parent.tempus),Xe(4),Ye("ngModel",t.selected.parent.tempus),Xe(4),Ye("ngModel",t.selected.parent.tempus),Xe(6),Ye("ngModel",t.selected.parent.prolatio),Xe(4),Ye("ngModel",t.selected.parent.prolatio),Xe(4),Ye("ngModel",t.selected.parent.prolatio),Xe(6),Ye("ngModel",t.selected.parent.sign),Xe(1),Ye("ngForOf",t.signs)}}function ZZ(n,e){if(1&n&&(D(0,"option",31),C(1),S()),2&n){const t=e.$implicit;ch("value",t[1]),Xe(1),su(t[1])}}function KZ(n,e){if(1&n){const t=Xs();D(0,"div",32)(1,"form",6)(2,"fieldset")(3,"legend",11),C(4,"modus"),S(),D(5,"input",33),We("ngModelChange",function(r){en(t);const s=kt();return s.selected.contents.m_list[s.selected.contents.m_index].m_modus=r}),S(),D(6,"label",34),C(7,"3"),S(),C(8," \xa0 "),D(9,"input",35),We("ngModelChange",function(r){en(t);const s=kt();return s.selected.contents.m_list[s.selected.contents.m_index].m_modus=r}),S(),D(10,"label",36),C(11,"2"),S(),C(12," \xa0 "),D(13,"input",37),We("ngModelChange",function(r){en(t);const s=kt();return s.selected.contents.m_list[s.selected.contents.m_index].m_modus=r}),S(),D(14,"label",38),C(15,"N/A"),S()(),D(16,"fieldset")(17,"legend",11),C(18,"tempus"),S(),D(19,"input",39),We("ngModelChange",function(r){en(t);const s=kt();return s.selected.contents.m_list[s.selected.contents.m_index].m_tempus=r}),S(),D(20,"label",40),C(21,"3"),S(),C(22," \xa0 "),D(23,"input",41),We("ngModelChange",function(r){en(t);const s=kt();return s.selected.contents.m_list[s.selected.contents.m_index].m_tempus=r}),S(),D(24,"label",42),C(25,"2"),S(),C(26," \xa0 "),D(27,"input",43),We("ngModelChange",function(r){en(t);const s=kt();return s.selected.contents.m_list[s.selected.contents.m_index].m_tempus=r}),S(),D(28,"label",44),C(29,"N/A"),S()(),D(30,"fieldset")(31,"legend",11),C(32,"prolatio"),S(),D(33,"input",45),We("ngModelChange",function(r){en(t);const s=kt();return s.selected.contents.m_list[s.selected.contents.m_index].m_prolatio=r}),S(),D(34,"label",46),C(35,"3"),S(),C(36," \xa0 "),D(37,"input",47),We("ngModelChange",function(r){en(t);const s=kt();return s.selected.contents.m_list[s.selected.contents.m_index].m_prolatio=r}),S(),D(38,"label",48),C(39,"2"),S(),C(40," \xa0 "),D(41,"input",49),We("ngModelChange",function(r){en(t);const s=kt();return s.selected.contents.m_list[s.selected.contents.m_index].m_prolatio=r}),S(),D(42,"label",50),C(43,"N/A"),S()(),D(44,"fieldset")(45,"label",7),C(46,"Mensuration Sign:\xa0 "),D(47,"select",51),We("ngModelChange",function(r){en(t);const s=kt();return s.selected.contents.m_list[s.selected.contents.m_index].m_sign=r}),Yn(48,ZZ,2,2,"option",9),S()()()()()}if(2&n){const t=kt();Xe(1),Ye("formGroup",t.mensurForm),Xe(4),Ye("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_modus),Xe(4),Ye("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_modus),Xe(4),Ye("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_modus),Xe(6),Ye("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_tempus),Xe(4),Ye("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_tempus),Xe(4),Ye("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_tempus),Xe(6),Ye("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_prolatio),Xe(4),Ye("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_prolatio),Xe(4),Ye("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_prolatio),Xe(6),Ye("ngModel",t.selected.contents.m_list[t.selected.contents.m_index].m_sign),Xe(1),Ye("ngForOf",t.signs)}}function YZ(n,e){if(1&n){const t=Xs();D(0,"div",52)(1,"p"),C(2,' If the piece has repetitions of the tenor that are not written out in full, please specify here. See "Music Input Help" for details. '),S(),D(3,"button",53),We("click",function(){return en(t),kt().repTenorButton()}),C(4,"Set End of Repeating Tenor"),S(),C(5," \xa0 "),D(6,"label"),C(7,"Total Number of Tenor Statements:\xa0 "),D(8,"input",54),We("ngModelChange",function(r){return en(t),kt().selected.parent.repetitions=r}),S()()()}if(2&n){const t=kt();Xe(8),Ye("ngModel",t.selected.parent.repetitions)}}function QZ(n,e){if(1&n){const t=Xs();D(0,"button",55),We("click",function(){return en(t),kt().finishStep()}),C(1," Continue to Score Editor\n"),S()}}let XZ=(()=>{class n{constructor(t,i,r,s){this.selectedSystem=t,this.stateService=i,this.route=r,this.router=s,this.voices=Object.entries(Qn),this.signs=Object.entries($i),this.keySigMode=!1,this.pitchSig=null,this.accidSig=null,this.selected=null,this.staffForm=new On({voice:new An(""),modus:new An(""),tempus:new An(""),prolatio:new An(""),mensursign:new An("")}),this.mensurForm=new On({modus2:new An(""),tempus2:new An(""),prolatio2:new An(""),mensursign2:new An("")})}ngOnInit(){this.selectedSystem.subscribe({next:t=>{if(this.selected=t,this.container.nativeElement.innerHTML="",null===t)return;let i=rl.humdrumToSVG(t.contents.getHumdrumScore());this.container.nativeElement.appendChild(i)}})}updateSVG(){let i=rl.humdrumToSVG(this.selectedSystem.selected.contents.getHumdrumScore({white:"mensural.white"===this.selectedSystem.selected.parent.parent.notationType}));if(this.container.nativeElement.innerHTML="",this.container.nativeElement.appendChild(i),/^[tT]enor/.test(this.selectedSystem.selected.parent.voice)){const r=this.selectedSystem.selected.parent;if(void 0!==r.endingId){let s=i.getElementById(r.endingId);null!==s&&s.setAttribute("fill","#00f")}}}handleClick(t){let i=t.target;for(;i;){if("g"===i.nodeName){let r;if(r=i.id.match(/-.*L(\d+)/)){this.selectedSystem.selected.contents.selectItemByLine(parseInt(r[1])),this.updateSVG();break}}i=i.parentNode}}finishStep(){const t=this.route.snapshot.paramMap.get("source"),i=this.route.snapshot.paramMap.get("identifier");this.router.navigate(["/score",t,i])}repTenorButton(){const t=this.stateService.mei.getPart(Qn.tenor);try{let s=this.container.nativeElement.querySelector(".layer").lastElementChild.id.match(/L(\d+)[\w\d]+$/),o=parseInt(s[1]),a=this.selectedSystem.selected.contents.m_list.filter(c=>c.m_line===o);t.endingId=a[0].m_id}catch(i){console.debug(i),t.endingId=void 0}this.updateSVG()}handleKeyPress(t){if(null==this.selectedSystem.selected)return;if(this.keySigMode)return this.handleKeySigPress(t),t.preventDefault(),void this.updateSVG();if(t.metaKey)return;let i=this.selectedSystem.selected.contents;if(i.m_index>=0&&1===t.key.length){if(t.key>="0"&&t.key<="9")return this.processDigit(Number(t.key),t),t.preventDefault(),void this.updateSVG();if(" "!==t.key&&i.addTextToCurrentItem(t.key))return t.preventDefault(),void this.updateSVG()}if(i.m_index>=0&&"Backspace"===t.key)t.shiftKey?i.clearTextOnCurrentItem():i.deleteCharacterOnCurrentItem(),t.preventDefault();else if(i.m_index<0&&"Backspace"===t.key)i.removeLastItem(),t.preventDefault();else switch(t.key){case"k":this.keySigMode=!0,console.debug("Set keySigMode"),t.preventDefault();break;case"C":i.addPitchFar(rn.C),t.preventDefault();break;case"c":i.addPitchNear(rn.C),t.preventDefault();break;case"D":i.addPitchFar(rn.D),t.preventDefault();break;case"d":i.addPitchNear(rn.D),t.preventDefault();break;case"E":i.addPitchFar(rn.E),t.preventDefault();break;case"e":i.addPitchNear(rn.E),t.preventDefault();break;case"F":i.addPitchFar(rn.F),t.preventDefault();break;case"f":i.addPitchNear(rn.F),t.preventDefault();break;case"G":i.addPitchFar(rn.G),t.preventDefault();break;case"g":i.addPitchNear(rn.G),t.preventDefault();break;case"A":i.addPitchFar(rn.A),t.preventDefault();break;case"a":i.addPitchNear(rn.A),t.preventDefault();break;case"B":i.addPitchFar(rn.B),t.preventDefault();break;case"b":i.addPitchNear(rn.B),t.preventDefault();break;case"m":case"M":i.hasOpenLigature()||i.addMensur(),t.preventDefault();break;case"p":case"P":this.processPlica(t.key),t.preventDefault();break;case"~":this.processColor(t.key),t.preventDefault();break;case"r":case"R":i.hasOpenLigature()?alert("Can't enter a rest in an open ligature! Please close first."):i.addRest(),t.preventDefault();break;case".":this.processDotKey(),t.preventDefault();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.processDigit(Number(t.key),t),t.preventDefault();break;case"Tab":t.shiftKey?i.selectBackward():i.selectForward(),t.preventDefault();break;case" ":case"ArrowRight":i.selectForward(),t.preventDefault();break;case"ArrowLeft":i.selectBackward(),t.preventDefault();break;case"ArrowUp":i.raisePitch(t.shiftKey?7:1),t.preventDefault();break;case"ArrowDown":i.lowerPitch(t.shiftKey?7:1),t.preventDefault();break;case"End":i.goToEndOfList(),t.preventDefault();break;case"[":i.hasOpenLigature()?alert("A ligature is already open!"):this.processLig(!0),t.preventDefault();break;case"]":i.hasOpenLigature()?this.processLig(!1):alert("No open ligature to close!"),t.preventDefault();break;case"#":case"-":case"N":case"n":this.processAccidental(t.key),t.preventDefault()}this.updateSVG()}processDigit(t,i){let r=this.selectedSystem.selected.contents;if(0===r.m_list.length)return void(3!==t&&(r.m_rhythm=t));var s=r.m_index,o=!1;s<0&&(s=r.m_list.length-1,o=!0);let a=r.m_list[s];if("clef"===a.m_type)return 3!==t&&(r.m_rhythm=t),void r.runNotationCallback();o?r.m_rhythm=t:("note"===a.m_type||"rest"===a.m_type)&&(o||(3!==t&&(a.m_rhythm=t,r.m_index+=1,r.m_rhythm=t,r.runNotationCallback()),r.m_index>=r.m_list.length&&(r.m_index=-1)))}processDotKey(){let t=this.selectedSystem.selected.contents;if(0===t.m_list.length)return;let i=t.m_index;i<0&&(i=t.m_list.length-1);let r=t.m_list[i];return"note"===r.m_type?(r.m_dot=!r.m_dot,void t.runNotationCallback()):void 0}processLig(t){let i=this.selectedSystem.selected.contents;if(0===i.m_list.length)return;let r=i.m_index;r<0&&(r=i.m_list.length-1);let s=i.m_list[r];if("note"===s.m_type){let o=s;return o.m_lig=t?o.m_lig===_r.START?_r.NONE:_r.START:o.m_lig===_r.END?_r.NONE:_r.END,void i.runNotationCallback()}}processPlica(t){let i=this.selectedSystem.selected.contents;if(0===i.m_list.length)return;let r=i.m_index;r<0&&(r=i.m_list.length-1);let s=i.m_list[r];if("note"===s.m_type){let o=s;return o.m_plica="p"===t?o.m_plica===fs.DOWN?fs.NONE:fs.DOWN:o.m_plica===fs.UP?fs.NONE:fs.UP,void i.runNotationCallback()}}processColor(t){let i=this.selectedSystem.selected.contents;if(0===i.m_list.length)return;let r=i.m_index;r<0&&(r=i.m_list.length-1);let s=i.m_list[r];if("note"===s.m_type){let o=s;return"~"===t&&(o.m_color=o.m_color===Yr.COLORED?Yr.NONE:Yr.COLORED),void i.runNotationCallback()}if("rest"===s.m_type){let o=s;return"~"===t&&(o.m_color=o.m_color===Yr.COLORED?Yr.NONE:Yr.COLORED),void i.runNotationCallback()}}handleKeySigPress(t){switch(t.key){case"a":case"A":case"b":case"B":case"c":case"C":case"d":case"D":case"e":case"E":case"f":case"F":case"g":case"G":null===this.pitchSig?this.pitchSig=t.key:(this.pitchSig=null,this.accidSig=null,this.keySigMode=!1,console.debug("unset keySigMode"));break;case"#":case"-":case"n":null!==this.pitchSig&&null===this.accidSig&&(this.accidSig=t.key,this.selectedSystem.selected.contents.processKeySig(this.pitchSig,this.accidSig),console.debug("Process with "+this.pitchSig+" and "+this.accidSig)),this.pitchSig=null,this.accidSig=null,this.keySigMode=!1,console.debug("unset keySigMode")}}processAccidental(t){let i=this.selectedSystem.selected.contents;if(0===i.m_list.length)return;let r=i.m_index;r<0&&(r=i.m_list.length-1);let s=i.m_list[r];if("note"===s.m_type){let o=s;switch(t){case"N":o.m_accid=ao.NONE;break;case"#":o.m_accid=ao.SHARP;break;case"-":o.m_accid=ao.FLAT;break;case"n":o.m_accid=ao.NATURAL}i.runNotationCallback()}}}return n.\u0275fac=function(t){return new(t||n)(L(LA),L(ic),L(va),L(gr))},n.\u0275cmp=Cn({type:n,selectors:[["app-staff-select"]],viewQuery:function(t,i){if(1&t&&qr(zZ,5),2&t){let r;Ti(r=Ii())&&(i.container=r.first)}},hostBindings:function(t,i){1&t&&We("keydown",function(s){return i.handleKeyPress(s)},!1,wp)},decls:6,vars:4,consts:[[3,"formGroup",4,"ngIf"],[3,"click"],["example",""],["id","mensur-change",4,"ngIf"],["id","tenor-section",4,"ngIf"],["color","primary","class","primary-button","mat-stroked-button","",3,"click",4,"ngIf"],[3,"formGroup"],[1,"music-subentry"],["formControlName","voice",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-container"],[1,"mensuration"],["type","radio","id","modus-3","formControlName","modus","value","3",3,"ngModel","ngModelChange"],["for","modus-3"],["type","radio","id","modus-2","formControlName","modus","value","2",3,"ngModel","ngModelChange"],["for","modus-2"],["type","radio","id","modus-na","formControlName","modus","value","0",3,"ngModel","ngModelChange"],["for","modus-na"],["type","radio","id","tempus-3","formControlName","tempus","value","3",3,"ngModel","ngModelChange"],["for","tempus-3"],["type","radio","id","tempus-2","formControlName","tempus","value","2",3,"ngModel","ngModelChange"],["for","tempus-2"],["type","radio","id","tempus-na","formControlName","tempus","value","0",3,"ngModel","ngModelChange"],["for","tempus-na"],["type","radio","id","prolatio-3","formControlName","prolatio","value","3",3,"ngModel","ngModelChange"],["for","prolatio-3"],["type","radio","id","prolatio-2","formControlName","prolatio","value","2",3,"ngModel","ngModelChange"],["for","prolatio-2"],["type","radio","id","prolatio-na","formControlName","prolatio","value","0",3,"ngModel","ngModelChange"],["for","prolatio-na"],["formControlName","mensursign",3,"ngModel","ngModelChange"],[3,"value"],["id","mensur-change"],["type","radio","id","modus2-3","formControlName","modus2","value","3",3,"ngModel","ngModelChange"],["for","modus2-3"],["type","radio","id","modus2-2","formControlName","modus2","value","2",3,"ngModel","ngModelChange"],["for","modus2-2"],["type","radio","id","modus2-na","formControlName","modus2","value","0",3,"ngModel","ngModelChange"],["for","modus2-na"],["type","radio","id","tempus2-3","formControlName","tempus2","value","3",3,"ngModel","ngModelChange"],["for","tempus2-3"],["type","radio","id","tempus2-2","formControlName","tempus2","value","2",3,"ngModel","ngModelChange"],["for","tempus2-2"],["type","radio","id","tempus2-na","formControlName","tempus2","value","0",3,"ngModel","ngModelChange"],["for","tempus2-na"],["type","radio","id","prolatio2-3","formControlName","prolatio2","value","3",3,"ngModel","ngModelChange"],["for","prolatio2-3"],["type","radio","id","prolatio2-2","formControlName","prolatio2","value","2",3,"ngModel","ngModelChange"],["for","prolatio2-2"],["type","radio","id","prolatio2-na","formControlName","prolatio2","value","0",3,"ngModel","ngModelChange"],["for","prolatio2-na"],["formControlName","mensursign2",3,"ngModel","ngModelChange"],["id","tenor-section"],["mat-stroked-button","",1,"primary-button",3,"click"],["type","number","min","1",3,"ngModel","ngModelChange"],["color","primary","mat-stroked-button","",1,"primary-button",3,"click"]],template:function(t,i){1&t&&(Yn(0,qZ,58,14,"form",0),D(1,"div",1,2),We("click",function(s){return i.handleClick(s)}),S(),Yn(3,KZ,49,12,"div",3),Yn(4,YZ,9,1,"div",4),Yn(5,QZ,2,0,"button",5)),2&t&&(Ye("ngIf",i.selected),Xe(3),Ye("ngIf",i.selected&&i.selected.contents.m_index>=0&&"mensur"==i.selected.contents.m_list[i.selected.contents.m_index].m_type),Xe(1),Ye("ngIf",i.selected&&"tenor"===i.selected.voice),Xe(1),Ye("ngIf",i.selected))},directives:[hu,Vb,Mb,yh,pu,vg,Eg,pg,Dg,Sg,ID,vh,Ih,FD,TD,Lb],styles:[".flex-container[_ngcontent-%COMP%]{display:flex}form[_ngcontent-%COMP%]{padding-top:.5em}.music-subentry[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:500;margin-top:.75rem}.mensuration[_ngcontent-%COMP%]{font-size:1.25rem}#tenor-section[_ngcontent-%COMP%]{background-color:#f9f0dc;border-style:solid;border-width:1px;padding-left:10px;padding-right:10px;margin-bottom:1rem}fieldset[_ngcontent-%COMP%]{padding-right:2.5em}"]}),n})(),JZ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Cn({type:n,selectors:[["app-general-help"]],decls:50,vars:0,consts:[["href","https://youtu.be/Z1Z_OrPhbhI","target","_blank"]],template:function(t,i){1&t&&(D(0,"h2"),C(1,"Manuscript Navigation"),S(),D(2,"ul")(3,"li"),C(4," To select the page of the manuscript you want to work on, either use the scrollbar to the right of the manuscript or type the folio number in the box and click the "),D(5,"code"),C(6,"Go"),S(),C(7," button. "),S(),D(8,"li"),C(9," Click the magnifying boxes for the appropriate zoom level and move around the manuscript using your mouse or the trackpad. "),S()(),At(10,"mat-divider"),D(11,"h2"),C(12,"Metadata Entry"),S(),D(13,"p"),C(14," First enter basic metadata about the composition. This includes a short title for the work, composer name (if known), the notation type (selected from a drop-down menu), the siglum for the manuscript (if known). You should add your name by clicking the \u201cAdd Contributor\u201d button and selecting the appropriate role (Encoder, Proofreader, Editor) along with your name. You may add multiple contributors, and you may also add your name additional times with alternate roles (for example, if you are both encoder and editor). "),At(15,"br"),C(16," If there is something you don't know, you can leave it as is and continue. "),At(17,"br"),C(18," Metadata must be entered before staff input can fully begin.\n"),S(),At(19,"mat-divider"),D(20,"h2"),C(21,"Adding Staves ("),D(22,"a",0),C(23,"Video clip"),S(),C(24,")"),S(),D(25,"ul")(26,"li"),C(27," To select an area for a new staff, hold "),D(28,"code"),C(29,"SHIFT"),S(),C(30," and click-and-drag an area surrounding the staff on the Diva.js viewer. When you release the mouse, a staff is added. "),S(),D(31,"li"),C(32," To select a staff, click on the bounding box on the viewer: it will appear as a solid box when you select it, and unselected staves will have bounding boxes with dashed lines. "),S(),D(33,"li"),C(34," Bounding boxes can overlap. "),S(),D(35,"li"),C(36," When a staff is selected, the voice it belongs to and mensuration of that voice can be set on the right. This information is saved automatically. It is important to set the correct voice part and mensuration for each stave so that the scoring-up process (next step) will work correctly. However, you can go back at any point and fix/update either the voice part or mensuration for any stave. "),S(),D(37,"li"),C(38," You can select as many staves as you need in this process, for all the voice parts. You can do this in any order, and can continue to the music input phase, and then later add more staves. "),S(),D(39,"li"),C(40,' To add musical components (pitches, rhythm, text), begin typing. This will add musical elements to the staff below the voice and mensuration options. Information on this process is available under the "Music Input Help" Tab. '),S(),D(41,"li"),C(42,' To delete a staff, first select it and then click the "Delete Staff" button under the "Staff Input" tab. '),S()(),At(43,"mat-divider"),D(44,"h2"),C(45,"Saving Work on the Music Input Screen"),S(),D(46,"p"),C(47,' The \u201cDownload MEI File\u201d downloads any music input at this stage of the process as a parts-based MEI file. You can reload this parts-based MEI file at a later point from the home screen of the MP Editor (using the File chooser under the heading \u201cLoad an .mei file"). '),S(),D(48,"p"),C(49," You also have the option of downloading the Humdrum data by clicking on the button \u201cDownload System Humdrum.\u201d\n"),S())},directives:[xy],styles:[""]}),n})(),eK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Cn({type:n,selectors:[["app-music-input-help"]],decls:215,vars:0,consts:[["href","https://youtu.be/eo2j7Hqyhx0","target","_blank"],[1,"hi"],["href","https://youtu.be/4uG6ZD8ROYA","target","_blank"],["href","https://youtu.be/wRUgBgEa5mg","target","_blank"],[1,"hi2"],["href","https://youtu.be/5RC-x7cSotI","target","_blank"],["href","https://youtu.be/kSWEh43K4Uo","target","_blank"],["href","https://youtu.be/DJ33hipbJ9k","target","_blank"],["href","https://youtu.be/95ujvvwOGUk","target","_blank"],["href","https://youtu.be/qwvoeJCUZ5U","target","_blank"]],template:function(t,i){1&t&&(D(0,"h2"),C(1,"Music Input Instructions"),S(),D(2,"ul")(3,"li")(4,"b"),C(5," Adding clefs ("),D(6,"a",0),C(7,"Video clip"),S(),C(8,")"),S(),D(9,"ul")(10,"li"),C(11," Type "),D(12,"span",1),C(13,"C"),S(),C(14," to insert C3 clef, or "),D(15,"span",1),C(16,"F"),S(),C(17," to insert F4 clef."),S(),D(18,"li"),C(19," Press the up or down arrows to move the clef to another line."),S(),D(20,"li"),C(21," You can remove the clef by clicking the backspace/delete key."),S()()(),D(22,"li")(23,"b"),C(24," Adding key signatures ("),D(25,"a",2),C(26,"Video clip"),S(),C(27,")"),S(),D(28,"ul")(29,"li"),C(30," Type "),D(31,"span",1),C(32,"k"),S(),C(33," to enter key signature mode after adding a clef."),S(),D(34,"li"),C(35," Then enter the pitch name letter and accidental (either the keystroke - or #, see below) to add to key signature."),S(),D(36,"li"),C(37," To remove from a key signature, enter k, the same pitch letter, and accidental again."),S(),D(38,"li"),C(39," Example: For F-sharp, type "),D(40,"span",1),C(41,"k f #"),S()(),D(42,"li"),C(43," You can also remove the key signature by clicking the backspace/delete key."),S()()(),D(44,"li")(45,"b"),C(46," Adding pitches ("),D(47,"a",3),C(48,"Video clip"),S(),C(49,")"),S(),D(50,"ul")(51,"li"),C(52," Type pitch "),D(53,"span",1),C(54,"letter"),S(),C(55," name of each note to add them to the line: "),D(56,"span",1),C(57,"f.ed.efgagfgedderfag"),S()(),D(58,"li"),C(59,' Type "'),D(60,"span",1),C(61,"."),S(),C(62,'" to add dot after note.'),S(),D(63,"li"),C(64,' Type "'),D(65,"span",1),C(66,"r"),S(),C(67,'" to add a rest.'),S(),D(68,"li"),C(69," Type "),D(70,"span",4),C(71,"backspace"),S(),C(72," to delete a note or notes."),S(),D(73,"li"),C(74," Use capital letters to choose the larger interval for the next pitch. So if you are on `d` and want to go to the `a` a fifth above, type capital A rather than lowercase (which would give the `a` that is a fourth below)."),S(),D(75,"li")(76,"span",4),C(77,"Up/down"),S(),C(78," arrows transpose last pitch up/down a step."),S(),D(79,"li")(80,"span",4),C(81,"Shift-up/down"),S(),C(82," arrows transpose last pitch up/down an octave."),S()()(),D(83,"li")(84,"b"),C(85," Adding Accidentals ("),D(86,"a",5),C(87,"Video clip"),S(),C(88,")"),S(),At(89,"br"),C(90," After adding a note: "),D(91,"ul")(92,"li"),C(93," press "),D(94,"code"),C(95,"-"),S(),C(96," to add a flat."),S(),D(97,"li"),C(98," press "),D(99,"code"),C(100,"#"),S(),C(101," to add a sharp."),S(),D(102,"li"),C(103," press "),D(104,"code"),C(105,"n"),S(),C(106," to add a natural."),S(),D(107,"li"),C(108," press "),D(109,"code"),C(110,"N"),S(),C(111," to clear the accidental for that note."),S()()(),D(112,"li")(113,"b"),C(114," Adding ligatures ("),D(115,"a",6),C(116,"Video clip"),S(),C(117,")"),S(),At(118,"br"),C(119,"Note that while duration of pitches in ligatures can be changed after the fact (in the score editor screen), ligatures must be specified as pitches are added in the music input phase. "),D(120,"ul")(121,"li"),C(122," After adding a note, press "),D(123,"span",4),C(124,"["),S(),C(125," to start a ligature."),S(),D(126,"li"),C(127," After adding a note, press "),D(128,"span",4),C(129,"]"),S(),C(130," to end a ligature."),S()()(),D(131,"li")(132,"b"),C(133," Adding rhythm ("),D(134,"a",7),C(135,"Video clip"),S(),C(136,")"),S(),D(137,"ul")(138,"li")(139,"span",1),C(140,"1"),S(),C(141," semibreve, "),D(142,"span",1),C(143,"2"),S(),C(144," minim, "),D(145,"span",1),C(146,"4"),S(),C(147," semiminim, "),D(148,"span",1),C(149,"8"),S(),C(150," fusa, "),D(151,"span",1),C(152,"6"),S(),C(153," semifusa, "),D(154,"span",1),C(155,"0"),S(),C(156," breve, "),D(157,"span",1),C(158,"9"),S(),C(159," long, "),D(160,"span",1),C(161,"7"),S(),C(162," maxima. "),S(),D(163,"li")(164,"i"),C(165,"Interleaved method"),S(),C(166,": type (new) rhythm before adding a note. The default rhythm is whole note (semibreve)."),S(),D(167,"li")(168,"i"),C(169,"Second-pass method"),S(),C(170,": type pitches first, then select first note and type rhythms to update note rhythms."),S(),D(171,"li")(172,"i"),C(173,"Selective second-pass method"),S(),C(174,": type clef, then most common rhythm, then notes, then click on notes that need rhythms to fix. Typing rhythm number will change rhythm and advance to next note."),S(),D(175,"li"),C(176," left/right arrow keys or tab/shift-tab moves to next/previous note/rest/clef."),S()()(),D(177,"li")(178,"b"),C(179," Adding text ("),D(180,"a",8),C(181,"Video clip"),S(),C(182,")"),S(),D(183,"ul")(184,"li"),C(185,"Click on a note (or left/right arrows or tab/shift-tab to move to target note)."),S(),D(186,"li"),C(187,"Type text for note, then press the pace, tab, or right arrow key or click to go to next note and enter the next word/syllable."),S(),D(188,"li")(189,"span",4),C(190,"backspace"),S(),C(191," delete last letter."),S(),D(192,"li")(193,"span",4),C(194,"shift-backspace"),S(),C(195," deletes the entire syllable."),S(),D(196,"li"),C(197," Adding a dash at the end of text input for a note marks that this is part of a word that continues to the next note, and a hypphen will be seen on the screen."),S(),D(198,"li"),C(199," To correct mistyped text, click the note to highlight it and press backspace. Then type the new text that belongs to that note."),S()()(),D(200,"li")(201,"b"),C(202," Repeating tenor ("),D(203,"a",9),C(204,"Video clip"),S(),C(205,")"),S(),D(206,"ul")(207,"li"),C(208,"When a staff that belongs to the tenor part is selected, the number of statements can be indicated."),S(),D(209,"li"),C(210,"If more than one tenor statement is indicated, a repeating tenor will be generated."),S(),D(211,"li"),C(212,'Where the tenor repeats from can be set after entering that element by pressing the "Set End of Repeating Tenor" button. The ending will be highlighted in blue. '),S(),D(213,"li"),C(214,"If no end point is specified, the entire tenor will repeat by default."),S()()()())},styles:[""]}),n})();function tK(n,e){if(1&n){const t=Xs();D(0,"div"),$v(1,28),D(2,"label",29),C(3,"Contributor:\xa0 "),D(4,"select",30)(5,"option",31),C(6,"Encoder"),S(),D(7,"option",32),C(8,"Proofreader"),S(),D(9,"option",33),C(10,"Editor"),S()(),At(11,"input",34),S(),C(12," \xa0 "),D(13,"button",35),We("click",function(){const s=en(t).index;return kt(3).removeContributor(s)}),C(14,"Remove"),S(),zv(),S()}if(2&n){const t=e.$implicit;Xe(1),Ye("formGroup",t)}}function nK(n,e){if(1&n){const t=Xs();D(0,"form",9),We("submit",function(){return en(t),kt(2).onSetMetadata()}),D(1,"h1",10),C(2,"Enter Metadata"),S(),D(3,"label",11),C(4,"Short title:\xa0 "),At(5,"input",12),S(),At(6,"br"),D(7,"label",11),C(8,"Composer name:\xa0 "),At(9,"input",13),S(),At(10,"br"),D(11,"label",11),C(12,"Notation:\xa0 "),D(13,"select",14)(14,"option",15),C(15,"Black Mensural \u2014 Ars antiqua"),S(),D(16,"option",16),C(17,"Black Mensural \u2014 Ars nova"),S(),D(18,"option",17),C(19,"White Mensural"),S()()(),At(20,"br"),D(21,"label",11),C(22,"Manuscript Siglum:\xa0 "),At(23,"input",18),S(),At(24,"br"),D(25,"label",11),C(26,"Genre:\xa0 "),D(27,"select",19)(28,"option",20),C(29,"Motet"),S(),D(30,"option",21),C(31,"Song"),S(),D(32,"option",22),C(33,"Conductus"),S(),D(34,"option",23),C(35,"Mass Movement"),S(),D(36,"option",24),C(37,"Plainchant"),S()()(),At(38,"br"),Yn(39,tK,15,1,"div",25),D(40,"div")(41,"button",26),We("click",function(){return en(t),kt(2).addContributor()}),C(42,"Add Contributor"),S()(),At(43,"br"),D(44,"button",27),C(45,"Continue to Music Input"),S()()}if(2&n){const t=kt(2);Ye("formGroup",t.metadataForm),Xe(39),Ye("ngForOf",t.temp.controls)}}function iK(n,e){if(1&n&&(D(0,"mat-tab",7),Yn(1,nK,46,2,"form",8),S()),2&n){const t=kt();Xe(1),Ye("ngIf",0===t.inputStep)}}function rK(n,e){1&n&&At(0,"app-toolbar")}function sK(n,e){1&n&&At(0,"app-staff-select")}function oK(n,e){if(1&n&&(D(0,"mat-tab",36),At(1,"mat-divider"),Yn(2,rK,1,0,"app-toolbar",37),At(3,"mat-divider"),Yn(4,sK,1,0,"app-staff-select",37),S()),2&n){const t=kt();Xe(2),Ye("ngIf",1===t.inputStep),Xe(2),Ye("ngIf",1===t.inputStep)}}let VA=(()=>{class n{constructor(t,i){if(this.stateService=t,this.route=i,this.metadataForm=new On({shortTitle:new An("",[to.required]),composerName:new An("",[to.required]),contributors:new Un([]),notationSubtype:new An("",[to.required]),siglum:new An("",[to.required]),genre:new An("",[to.required])}),this.inputStep=n.InputStep.METADATA,this.source=this.route.snapshot.paramMap.get("source"),this.identifier=decodeURIComponent(this.route.snapshot.paramMap.get("identifier")),this.iiifManifest=LR(this.source,this.identifier),this.stateService.mei||(this.stateService.mei=new Oy(this.iiifManifest)),null!=this.stateService.mei.metadata){this.metadataForm.controls.shortTitle.setValue(this.stateService.mei.metadata.shortTitle),this.metadataForm.controls.composerName.setValue(this.stateService.mei.metadata.composerName),this.metadataForm.controls.notationSubtype.setValue(this.stateService.mei.notationSubtype),this.metadataForm.controls.siglum.setValue(this.stateService.mei.metadata.siglum),this.metadataForm.controls.genre.setValue(this.stateService.mei.metadata.genre);let r=this.metadataForm.get("contributors");for(let s of this.stateService.mei.metadata.contributors){let o=new On({type:new An(s.type,to.required),name:new An(s.name,to.required)});r.push(o)}}this.temp=this.metadataForm.get("contributors"),console.debug(this.iiifManifest),console.debug(this.metadataForm.controls.contributors)}ngOnInit(){this.stateService.editorialMode=!1}onSetMetadata(){let t=this.metadataForm.value;this.stateService.mei.metadata={shortTitle:t.shortTitle,composerName:t.composerName,contributors:t.contributors.filter(i=>i.type.length>0&&i.name.length>0).map(i=>i),sourceIRI:this.iiifManifest,siglum:t.siglum,genre:t.genre},this.stateService.mei.notationSubtype=t.notationSubtype,this.inputStep=n.InputStep.INPUT}addContributor(){this.temp.push(new On({type:new An("",[to.required]),name:new An("",[to.required])}))}removeContributor(t){this.temp.removeAt(t)}}return n.\u0275fac=function(t){return new(t||n)(L(ic),L(va))},n.\u0275cmp=Cn({type:n,selectors:[["app-input"]],decls:10,vars:3,consts:[["id","editor-container"],[3,"iiifManifest"],["id","right-side"],["label","Metadata Input",4,"ngIf"],["label","Music Input",4,"ngIf"],["label","General Help"],["label","Music Input Help"],["label","Metadata Input"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["id","metadata-header"],[1,"metadataInput"],["id","shortTitle","formControlName","shortTitle","required",""],["id","composerName","formControlName","composerName","required",""],["id","notationSubtype","formControlName","notationSubtype","required",""],["value","Ars_antiqua"],["value","Ars_nova"],["value",""],["id","siglum","formControlName","siglum","required",""],["id","genre","formControlName","genre","required",""],["value","Motet"],["value","Song"],["value","Conductus"],["value","Mass Movement"],["value","Plainchant"],[4,"ngFor","ngForOf"],["color","primary","mat-stroked-button","","type","button",1,"primary-button",3,"click"],["color","primary","mat-stroked-button","","type","submit",1,"primary-button"],[3,"formGroup"],[1,"contributor"],["formControlName","type","required",""],["value","encoder"],["value","proofreader"],["value","editor"],["formControlName","name","required",""],["color","secondary","mat-stroked-button","","type","button",1,"secondary-button",3,"click"],["label","Music Input"],[4,"ngIf"]],template:function(t,i){1&t&&(D(0,"div",0),At(1,"app-diva-view",1),D(2,"div",2)(3,"mat-tab-group"),Yn(4,iK,2,1,"mat-tab",3),Yn(5,oK,5,2,"mat-tab",4),D(6,"mat-tab",5),At(7,"app-general-help"),S(),D(8,"mat-tab",6),At(9,"app-music-input-help"),S()()()()),2&t&&(Xe(1),Ye("iiifManifest",i.iiifManifest),Xe(3),Ye("ngIf",0===i.inputStep),Xe(1),Ye("ngIf",1===i.inputStep))},directives:[jZ,_R,hu,eA,Vb,Mb,yh,vh,vg,Eg,Bb,pu,Dg,Sg,pg,Ih,xy,$Z,XZ,JZ,eK],styles:["#editor-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(10,1fr)}app-diva-view[_ngcontent-%COMP%]{grid-column:1 / 7}#metadata-header[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}#right-side[_ngcontent-%COMP%]{overflow-y:scroll;grid-column:7 / 11;margin:1em 0 1em 1em}.metadataInput[_ngcontent-%COMP%]{width:30em}.metadataInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{float:right}.metadataInput[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{float:right;width:17em}.contributor[_ngcontent-%COMP%]{width:30em}.contributor[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{float:right}"]}),n})();!function(n){let e;var t;(t=e=n.InputStep||(n.InputStep={}))[t.METADATA=0]="METADATA",t[t.INPUT=1]="INPUT"}(VA||(VA={}));let aK=(()=>{class n{constructor(){rl.setup()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Cn({type:n,selectors:[["app-root"]],decls:16,vars:0,consts:[["id","mainNav",1,"navbar","navbar-expand-lg","navbar-light"],["href","https://measuringpolyphony.org",1,"navbar-brand"],["src","assets/img/thumbnail.png","id","thumbnail"],["id","navTitle"],["id","navDescription"],[1,"clearfix"],["id","additionalButtons"],["href","https://measuringpolyphony.org/transcriptions.html",1,"additionalButtons"],["href","./",1,"additionalButtons"],["href","https://measuringpolyphony.org",1,"additionalButtons"]],template:function(t,i){1&t&&(D(0,"nav",0)(1,"a",1),At(2,"img",2),D(3,"div",3),C(4,"Measuring Polyphony"),S(),D(5,"div",4),C(6,"Digital encodings of late medieval music"),S(),At(7,"div",5),S(),D(8,"div",6)(9,"a",7),C(10," Browse "),S(),D(11,"a",8),C(12," Transcribe "),S(),D(13,"a",9),C(14,"About"),S()()(),At(15,"router-outlet"))},directives:[JD],styles:['@import"https://unpkg.com/browse/startbootstrap-grayscale@4.0.0/css/grayscale.min.css";body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;position:relative;width:100%;height:100%;color:#fff;background-color:#fff}html[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;width:100%;height:100%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:700;margin:0 0 35px;letter-spacing:1px}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;border:1px solid white}p[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:12px;line-height:1.3;margin:0 0 25px}@media (min-width: 768px){p[_ngcontent-%COMP%]{font-size:14px;line-height:1.4;margin:0 0 35px}}#mainNav[_ngcontent-%COMP%]{font-family:Merriweather,serif;margin-bottom:20px;text-transform:uppercase;border-bottom:1px solid rgba(255,255,255,.3);background-color:#9d2322;color:#fff;padding:4px 8px}#mainNav[_ngcontent-%COMP%]   #navDescription[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:12px;font-weight:400}#mainNav[_ngcontent-%COMP%]   #navTitle[_ngcontent-%COMP%]{font-family:Merriweather,serif;margin-top:4px}#mainNav[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{font-size:14px;color:#fff;border:1px solid white;padding:8px;margin-right:10px}#mainNav[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{font-weight:700;font-size:22px;margin-left:10px;color:#fff!important;display:block}#mainNav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{#loadOverlay {display: none} color: white}#mainNav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{transition:background .3s ease-in-out}#mainNav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{color:fade(white,80%);outline:none;background-color:#9d2322}#mainNav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:active, #mainNav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:focus{outline:none;background-color:transparent}.nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#fff!important}#mainNav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-family:Merriweather,serif;font-size:12px;margin-top:28px}#additionalButtons[_ngcontent-%COMP%]{display:flex;margin-left:auto}.additionalButtons[_ngcontent-%COMP%]{color:#fff;padding-left:1rem}@media (min-width: 992px){#mainNav[_ngcontent-%COMP%]{transition:background .3s ease-in-out,padding-top .3s ease-in-out,padding-bottom .3s;letter-spacing:1px;border-bottom:none}#mainNav.navbar-shrink[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-bottom:1px solid rgba(255,255,255,.3);background:black}#mainNav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{outline:none;background-color:#ffffff4d}#mainNav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:hover{color:#fff}#mainNav[_ngcontent-%COMP%], #browse[_ngcontent-%COMP%]{font-size:20px;padding-right:50px;color:#fff!important}#mainNav[_ngcontent-%COMP%], #about[_ngcontent-%COMP%]{font-size:20px;color:#fff!important}}#thumbnail[_ngcontent-%COMP%]{margin-right:15px;float:left;vertical-align:center}@media (min-width: 768px){#mainNav[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{margin-left:20px}#mainNav[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{margin-right:20px}}']}),n})();const Qy="controlsError",Xy="valueChangedSync",Jy="rxwebValidator",e0="template-validation-config",dm="conditionalValidator",hi="validatorConfig",fc="modelInstance",HA="patch";class Ns{static functionCreator(e){for(var t=[],i=e.match(/^\s*\(?\s*([^)]*)\s*\)?\s*=>(.*)/),r=i[2].split(","),s=0;s<r.length;s++){var o=r[s].match(/^\s*\(?\s*([^)]*)\s*\)?\s*|===|!==|==|!=|>=|>|<=|<|(.*)/);null!==o?t=new Function(i[1],"return "+o.input):(o=r[s].match(/^\s*\(?\s*([^)]*)\s*\)?\s*=(.*)/),t=new Function(i[1],null===o?"return "+r.input:"return "+o.input))}return 0==r.length&&(t={accessFunction:new Function(i[1],"return "+i[2])}),t}static execute(e,t,i,r,s){let o=s?t.dynamicConfig:t.conditionalExpression,a=s?t:r;return i&&"string"==typeof o&&(o=Ns.functionCreator(o)),!i||!o||(r&&r.constructor!==Object?o.call(r,i,e,a):o(i,e,a))}static getConditionPath(e){let t="";for(var i=1;i<e.length;i++)t+=e.length-1==i?e[i].trim():`${e[i].trim()}.`;return t}static expressionParser(e,t){let r=[],s=e.toString(),o=Ns.extractArguments(s);if(o.length>0){let a=[];s.replace(/\s/g,"").replace(new RegExp(/{|}/,"g"),"").split(new RegExp(/return|===|!==|==|!=|>=|>|<=|<|&&/)).forEach(c=>{let d=c.replace(/\(|\)/g,"").split("||");for(let f of d)a.push(f)}),a.forEach(c=>{o.forEach((d,f)=>{if((c=c.trim()).startsWith(d+".")){var p=c.split(".");if(2==p.length||p.length>=2&&t)r.push(t?{propName:this.getConditionPath(p),argumentIndex:3==f?0:2==f?1:1==f?-1:f}:{propName:p[1].trim(),argumentIndex:3==f?0:2==f?1:1==f?-1:f});else{var _=p[1].split("[");let y={propName:p[p.length-1].trim(),objectPropName:_[0],arrayIndex:_.length>1?_[1].replace("]",""):void 0,argumentIndex:3===f?0:2===f?1:f};r.push(y)}}})})}return r}static extractArguments(e){let t=["this"];if("("===e[0].trim()||e.trim().startsWith("function")){let i=e.match(/\(([^)]+)\)/g);i&&i[0]&&i[0].split(",").forEach(r=>t.push(r.trim().replace("(","").replace(")","")))}else{let i=e[0].split("=>")[0];t.push(i.trim().replace("(","").replace(")",""))}return t}static expressionColumns(e,t=!1){var i=[];let r=[];return"string"==typeof e?(e.split("=>")[1].split(" && ").forEach(s=>{s.split(" || ").forEach(o=>{r.push(o.trim().split(" ")[0])})}),r.forEach(s=>{var o=s.split(".");if(2==o.length)i.push({propName:o[1].trim()});else{var a=o[1].split("[");let c={propName:o[o.length-1].trim(),objectPropName:a[0],arrayIndex:a.length>1?a[1].replace("]",""):void 0};i.push(c)}})):i=Ns.expressionParser(e,t),i}static dynamicConfigParser(e,t){let i=[],r=e.toString(),s=Ns.extractArguments(r),o=r.replace(new RegExp(/\r?\n|\r|;/g)," ").replace(/["%()\{}=\\?\ufffd`'#<>|,;:+-]+/g," ").split(/ /g);return s.length>3&&s.splice(s.length-1,1),s.forEach(a=>{o.filter(c=>c!=`${a}.${t}`&&c.startsWith(`${a}.`)).forEach(c=>{let d=c.split(".");if(2==d.length)i.push({propName:c.replace(`${a}.`,"")});else{var f=d[1].split("[");let p={propName:d[d.length-1].trim(),objectPropName:f[0],arrayIndex:f.length>1?f[1].replace("]",""):void 0};i.push(p)}})}),i}}const b={numeric:"numeric",required:"required",minLength:"minLength",maxLength:"maxLength",minNumber:"minNumber",maxNumber:"maxNumber",pattern:"pattern",password:"password",compare:"compare",minDate:"minDate",maxDate:"maxDate",alpha:"alpha",alphaNumeric:"alphaNumeric",email:"email",hexColor:"hexColor",lowerCase:"lowerCase",url:"url",upperCase:"upperCase",nested:"nested",propArray:"propArray",propObject:"propObject",contains:"contains",range:"range",custom:"custom",digit:"digit",creditCard:"creditCard",time:"time",json:"json",greaterThan:"greaterThan",greaterThanEqualTo:"greaterThanEqualTo",lessThan:"lessThan",lessThanEqualTo:"lessThanEqualTo",choice:"choice",different:"different",even:"even",odd:"odd",factor:"factor",leapYear:"leapYear",allOf:"allOf",oneOf:"oneOf",noneOf:"noneOf",mac:"mac",ascii:"ascii",dataUri:"dataUri",port:"port",latLong:"latLong",extension:"extension",fileSize:"fileSize",endsWith:"endsWith",startsWith:"startsWith",primeNumber:"primeNumber",latitude:"latitude",longitude:"longitude",compose:"compose",rule:"rule",file:"file",image:"image",unique:"unique",notEmpty:"notEmpty",ip:"ip",cusip:"cusip",grid:"grid",date:"date",and:"and",or:"or",not:"not",minTime:"minTime",maxTime:"maxTime",requiredTrue:"requiredTrue",mask:"mask",iban:"iban",updateOn:"updateOn"},Ls="objectProperty",fo="arrayProperty",pN="message",_t=new class{constructor(){this.instances=[],this.modelIncrementCount=0}get(n){return this.instances.filter(t=>t.instance===n)[0]}getInstance(n,e,t,i){let s=null!=t?n.constructor:n,o=this.instances.filter(a=>a.instance===s)[0];return o||(o=this.addInstanceContainer(s)),o}addPropsConfig(n,e){let t=this.instances.filter(i=>i.instance==n)[0];if(t)for(let i of e)for(let r of i.propNames){let s=t.properties.filter(o=>o.name==r&&o.propertyType!==Ls&&o.propertyType!==fo)[0];s?this.addPropConfig(n,[s],i):":all:"===r&&this.addPropConfig(n,t.properties.filter(o=>o.propertyType!==Ls&&o.propertyType!==fo),i)}else void 0===e&&this.addInstanceContainer(n)}addPropConfig(n,e,t){for(var i of e){let r=!1;if(t.excludePropNames&&(r=void 0!==t.excludePropNames.filter(s=>s==i.name)[0]),!r){if(t.validationConfig)for(let s in t.validationConfig)this.init({constructor:n},0,i.name,s,!0===t.validationConfig[s]?void 0:t.validationConfig[s],!1);t.error&&this.addDecoratorConfig({constructor:n},0,i.name,t.error,"error"),t.disable&&this.addDecoratorConfig({constructor:n},0,i.name,t.disable,"disabled"),t.elementClass&&this.addDecoratorConfig({constructor:n},0,i.name,t.elementClass,"elementClass"),t.ignore&&(i.ignore=t.ignore)}}}addSanitizer(n,e,t,i,r){let s=this.getInstance(n,e,t,i);s&&(s.sanitizers[t]||(s.sanitizers[t]=[]),s.sanitizers[t].push({name:i,config:r}))}addDecoratorConfig(n,e,t,i,r){let o=null!=t?n.constructor:n,a=this.instances.filter(d=>d.instance===o)[0];a||(a=this.addInstanceContainer(o)),a.nonValidationDecorators[r].conditionalExpressions[t]=i.conditionalExpression,Ns.expressionColumns(i.conditionalExpression,!0).forEach(d=>{if(-1!==d.argumentIndex){let f=d.objectPropName?`${d.objectPropName}.${d.propName}-rxw-${d.argumentIndex}`:`${d.propName}-rxw-${d.argumentIndex}`;a.nonValidationDecorators[r].changeDetection[f]||(a.nonValidationDecorators[r].changeDetection[f]=[]);let p=a.nonValidationDecorators[r].changeDetection[f];-1===p.indexOf(f)&&p.push(t)}else a.nonValidationDecorators[r].controlProp[t]||(a.nonValidationDecorators[r].controlProp[t]={}),a.nonValidationDecorators[r].controlProp[t][d.propName.replace(";","")]=!0})}init(n,e,t,i,r,s){this.addAnnotation(null!=t?n.constructor:n,{propertyIndex:e,propertyName:t,annotationType:i,config:r,isAsync:s,isValidator:"updateOn"!==i})}initPropertyObject(n,e,t,i,r){_t.addProperty(i.constructor,{name:n,propertyType:e,entity:t,dataPropertyName:r?r.name:void 0,entityProvider:r?r.entityProvider:void 0,defaultValue:r?r.defaultValue:void 0,objectConfig:r&&r.autoCreate?{autoCreate:r.autoCreate}:void 0})}addInstanceContainer(n){let e={instance:n,propertyAnnotations:[],properties:[],nonValidationDecorators:{disabled:{conditionalExpressions:{},changeDetection:{},controlProp:{}},error:{conditionalExpressions:{},changeDetection:{},controlProp:{}},elementClass:{conditionalExpressions:{},changeDetection:{},controlProp:{}}},sanitizers:{}};return this.instances.push(e),e}addProperty(n,e,t=!1){let i=this.instances.filter(r=>r.instance===n)[0];i?this.addPropertyInfo(i,e,!t):(i=this.addInstanceContainer(n),this.addPropertyInfo(i,e))}addPropertyInfo(n,e,t=!1){var i=this.getProperty(n,e);i?t&&this.updateProperty(i,e):n.properties.push(e),i&&e.messageNexus&&(i.messageNexus=e.messageNexus)}addAnnotation(n,e){this.addProperty(n,{propertyType:"property",name:e.propertyName},!0);let t=this.instances.filter(i=>i.instance===n)[0];if(t||(t=this.addInstanceContainer(n)),t.propertyAnnotations.push(e),e.config&&e.config.conditionalExpression){let i=Ns.expressionColumns(e.config.conditionalExpression);this.addChangeValidation(t,e.propertyName,i)}if(e.config&&e.config.dynamicConfig){let i=Ns.dynamicConfigParser(e.config.dynamicConfig,e.propertyName);this.addChangeValidation(t,e.propertyName,i)}this.setConditionalColumns(t,e)}setConditionalColumns(n,e){n&&e.config&&(e.annotationType==b.and||e.annotationType==b.or||e.annotationType==b.not?Object.keys(e.config.validation).forEach(t=>{"boolean"!=typeof e.config.validation[t]&&this.setLogicalConditional(n,t,e.config.validation[t].fieldName,e.propertyName)}):this.setLogicalConditional(n,e.annotationType,e.config.fieldName,e.propertyName))}setLogicalConditional(n,e,t,i){n&&(e==b.compare||e==b.greaterThan||e==b.greaterThanEqualTo||e==b.lessThan||e==b.lessThanEqualTo||e==b.different||e==b.factor||e==b.minTime||e==b.maxTime||e==b.creditCard&&t||(e==b.minDate||e==b.maxDate)&&t)&&this.setConditionalValueProp(n,t,i)}setConditionalValueProp(n,e,t){if(e){let i=e.split?e.split("."):"";i.length<2?(n.conditionalValidationProps||(n.conditionalValidationProps={}),n.conditionalValidationProps[e]||(n.conditionalValidationProps[e]=[]),-1==n.conditionalValidationProps[e].indexOf(t)&&n.conditionalValidationProps[e].push(t)):this.addChangeValidation(n,t,[{argumentIndex:1,objectPropName:i[0],propName:i[1],referencePropName:t}])}}addChangeValidation(n,e,t){n&&(n.conditionalValidationProps||(n.conditionalValidationProps={}),t.forEach(i=>{i.propName&&!i.objectPropName?(n.conditionalValidationProps[i.propName]||(n.conditionalValidationProps[i.propName]=[]),-1==n.conditionalValidationProps[i.propName].indexOf(e)&&n.conditionalValidationProps[i.propName].push(e)):i.propName&&i.objectPropName&&(n.conditionalObjectProps||(n.conditionalObjectProps=[]),i.referencePropName=e,n.conditionalObjectProps.push(i))}))}clearInstance(n){let e=this.instances.filter(t=>t.instance===n)[0];if(e){let t=this.instances.indexOf(e);this.instances.splice(t,1)}}getProperty(n,e){return n.properties.filter(t=>t.name==e.name)[0]}updateProperty(n,e){n.dataPropertyName=e.dataPropertyName,n.defaultValue=e.defaultValue}},sn={alpha:/^[a-zA-Z]+$/,alphaExits:/[a-zA-Z]/,alphaWithSpace:/^[a-zA-Z\s]+$/,macId:/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,onlyDigit:/^[0-9]+$/,isDigitExits:/[0-9]/,lowerCase:/[a-z]/,upperCase:/[A-Z]/,specialCharacter:/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,advancedEmail:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,basicEmail:/^(([^<>()\[\]\\.,,:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,alphaNumeric:/^[0-9a-zA-Z]+$/,alphaNumericWithSpace:/^[0-9a-zA-Z\s]+$/,hexColor:/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,strictHexColor:/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,float:/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,decimal:/^[-+]?([0-9]+|\.[0-9]+|[0-9]+\.[0-9]+)$/,hexaDecimal:/^[0-9A-F]+$/i,date:/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/,time:/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/,timeWithSeconds:/^([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/,url:/^(https?:\/\/(?:www\.|(?!www)|(?!a-zA-Z))[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www)|(?!a-zA-Z))[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9]\.[^\s]{2,})$/,localhostUrl:/^(https?:\/\/localhost\:([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])|localhost\::([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])|https?:\/\/localhost\::([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5]))$/,interanetUrl:/^(https?:\/\/[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9])$/,ascii:/^[\x00-\x7F]+$/,dataUri:/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)$/i,lat:/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,long:/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,ipV4:/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,ipV6:/^((?:[a-fA-F\d]{1,4}:){7}(?:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(:[a-fA-F\d]{1,4}){1,2}|:)|(?:[a-fA-F\d]{1,4}:){4}(?:(:[a-fA-F\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(:[a-fA-F\d]{1,4}){1,3}|:)|(?:[a-fA-F\d]{1,4}:){3}(?:(:[a-fA-F\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(:[a-fA-F\d]{1,4}){1,4}|:)|(?:[a-fA-F\d]{1,4}:){2}(?:(:[a-fA-F\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(:[a-fA-F\d]{1,4}){1,5}|:)|(?:[a-fA-F\d]{1,4}:){1}(?:(:[a-fA-F\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(:[a-fA-F\d]{1,4}){1,6}|:)|(?::((?::[a-fA-F\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,7}|:)))(%[0-9a-zA-Z]{1,})?$/,cidrV4:/^(3[0-2]|[12]?[0-9])$/,cidrV6:/^(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cusip:/^[0-9A-Z]{9}$/,grid:/^[GRID:]*([0-9A-Z]{2})[-\s]*([0-9A-Z]{5})[-\s]*([0-9A-Z]{10})[-\s]*([0-9A-Z]{1})$/g},bN="alphabet",$A="contains",wN="lowerCase",CN="upperCase",EN="specialCharacter",DN="minLength",SN="maxLength";class lt{static isExits(e,t){return null!=e.match(t)}static isValid(e,t){return t.test(e)}static isNotBlank(e,t=!1){return t?0===e||null!=e&&""!==String(e).trim():0===e||null!=e&&""!==e}static isValidPassword(e,t){let i=!1,s="status",o=Object.getOwnPropertyNames(e);for(let a of o){switch(a){case bN:i=lt.isExits(t,sn.alphaExits),s=bN;break;case"digit":i=lt.isValid(t,sn.isDigitExits),s="digit";break;case $A:i=-1!=t.indexOf(e[$A]),s=$A;break;case wN:i=lt.isValid(t,sn.lowerCase),s=wN;break;case CN:i=lt.isValid(t,sn.upperCase),s=CN;break;case EN:i=lt.isExits(t,sn.specialCharacter),s=EN;break;case DN:i=t.length>=e[a],s=DN;break;case SN:i=t.length<=e[a],s=SN}if(!i)break}return{isValid:i,keyName:s}}static isZero(e){return 0==e}static commaRegex(){return new RegExp(",","g")}}let fe=(()=>{class n{static set(t){t&&(n.json=t)}static get(t){let i;if(n.json){let r=t.split(".");for(let s of r)if(i=i?i[s]:n.json[s],!i)break}return i}}return n.i18n={},n.number={},n.json={},n.autoInstancePush=!1,n})(),ce=(()=>{class n{static toJson(t,i,r,s={}){n.setMessage();let a,o=i?i.message:null;!o&&i&&i.messageKey&&(a=i.messageKey);let c=o||(fe&&fe.json&&fe.json.validationMessage&&fe.json.validationMessage[a||t]?fe.json.validationMessage[a||t]:"");r.forEach((f,p)=>{f instanceof Date&&(f=this.getDateString(f)),c=c.replace(`{{${p}}}`,f)}),i&&i.messageNexus&&Object.keys(i.messageNexus).forEach(f=>{c=c.replace(`{{${f}}}`,i.messageNexus[f])});let d={};return d[t]={message:c,refValues:r},i&&i.isAddMessageKey&&(d.messageKey=a),s&&(s.min&&(d[t].min=s.min),s.max&&(d[t].max=s.max)),d}static null(){return null}static getPasswordMessage(){let t="password";return fe&&fe.json&&fe.json.validationMessage&&fe.json.validationMessage[t]?fe.json.validationMessage[t]:""}static setMessage(){fe.i18n&&fe.i18n.validationMessage&&n.language!==fe.i18n.language&&(fe.json||(fe.json={}),fe.json.validationMessage=fe.i18n.validationMessage(),n.language=fe.i18n.language)}static getDateString(t){let i=fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.seperator?fe.json.baseConfig.seperator:"/",r=fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.dateFormat?fe.json.baseConfig.dateFormat:"mdy";fe&&fe.json&&fe.json.internationalization&&fe.json.internationalization.dateFormat&&fe.json.internationalization.seperator&&(i=fe.json.internationalization.seperator,r=fe.json.internationalization.dateFormat);let s="",o=t.getFullYear().toString(),a=String(t.getMonth()+1),c=String(t.getDay());switch(r){case"ymd":s="".concat(o,i,a,i,c);break;case"dmy":s="".concat(c,i,a,i,o);break;case"mdy":s="".concat(a,i,c,i,o)}return s}}return n.language="",n})();function bK(n){return"[object Object]"===Object.prototype.toString.call(n)}function hl(n){let e={};if(function vK(n){return!("string"==typeof n||"number"==typeof n||"boolean"==typeof n||n instanceof Date)}(n)){for(var t in n)if("formGroup"!=t)if(Array.isArray(n[t])){e[t]=[];for(let i of n[t])bK(i)?e[t].push(hl(i)):e[t].push(i)}else e[t]="object"!=typeof n[t]||n[t]instanceof RegExp?n[t]:hl(n[t]);return e}return n}function AN(n,e){for(var t in e)if(Array.isArray(e[t])){n[t]||(n[t]=[]);for(let i of e[t])n[t].push(hl(i))}else n[t]="object"!=typeof n[t]||n[t]instanceof RegExp?e[t]:AN(n[t],e[t]);return n}function zA(n,e){let t=!1;for(var i in e){if(Array.isArray(n[i]))for(var r=0;r<n[i].length;r++)t=zA(n[i][r],e[i][r]);else t="object"!=typeof n[i]||n[i]instanceof RegExp?n[i]!=e[i]:zA(n[i],e[i]);if(t)break}return t}const GA="propArray";class fl extends Un{constructor(e,t,i,r,s){super(t,i,r),this.arrayObject=e,this.arrayConfig=s,this._isModified=!1,this._modified=[],this.cloneObject(e)}get isModified(){return this._isModified}push(e,t={isAddedInstance:!1}){let i=this.root;this.arrayObject&&e.modelInstance&&(t.isAddedInstance?this.arrayObject[this.arrayObject.length]=e.modelInstance:this.arrayObject.push(e.modelInstance)),super.push(e),i[Xy]&&i.valueChangedSync(),this.patch(),this.checkValidation()}patch(){this.checkModification(),this.parent&&this.parent[HA]()}resetForm(e){if(e&&e.index>=0&&e.groupOption)this.controls[e.index].resetForm(e.groupOption);else for(var t=0;t<this._baseValue.length;t++)if(void 0!==this.controls[t])this.controls[t].resetForm({value:this._baseValue[t]});else if(e&&e.pushFunction){let i=e.pushFunction(this._baseValue[t]);this.push(i)}}commit(){this._baseValue=[];for(let e of this.controls)e.commit(),this._baseValue.push(hl(e.value));this.patch()}removeAt(e,t={isRemovedInstance:!1}){let i=this.root;if(t.isRemovedInstance){for(var r=e;r<this.arrayObject.length-1;r++)this.arrayObject[r]=this.arrayObject[r+1];this.arrayObject.pop()}else this.arrayObject.splice(e,1);super.removeAt(e,t),i[Xy]&&i.valueChangedSync(),this.patch(),this.checkValidation()}checkValidation(){setTimeout(()=>{null!=this.arrayConfig&&this.arrayConfig.allowMaxIndex&&this.length>this.arrayConfig.allowMaxIndex?this.setErrors(ce.toJson(GA,this.arrayConfig,[this.length,this.arrayConfig.allowMaxIndex])):this.errors&&this.errors[GA]&&delete this.errors[GA]})}checkModification(){if(this._isModified=this._baseValue.length!=this.controls.length,!this._isModified)for(var e=0;e<this.controls.length&&(this._isModified=zA(this._baseValue[e],this.controls[e].value),!this._isModified);e++);}cloneObject(e){this._baseValue=[];for(let t of e)this._baseValue.push(hl(t))}}var Vu=(()=>(function(n){n[n.PositiveNumber=1]="PositiveNumber",n[n.NegativeNumber=2]="NegativeNumber",n[n.Both=3]="Both"}(Vu||(Vu={})),Vu))(),Bu=(()=>(function(n){n[n.V4=1]="V4",n[n.V6=2]="V6",n[n.AnyOne=3]="AnyOne"}(Bu||(Bu={})),Bu))(),pl=(()=>(function(n){n[n.None=0]="None",n[n.OnSubmit=1]="OnSubmit",n[n.OnDirty=2]="OnDirty",n[n.OnTouched=3]="OnTouched",n[n.OnDirtyOrTouched=4]="OnDirtyOrTouched",n[n.OnDirtyOrSubmit=5]="OnDirtyOrSubmit",n[n.OnTouchedOrSubmit=6]="OnTouchedOrSubmit"}(pl||(pl={})),pl))(),po=(()=>(function(n){n[n.ControlsOnly=1]="ControlsOnly",n[n.FormGroupsOnly=2]="FormGroupsOnly",n[n.FormArraysOnly=3]="FormArraysOnly",n[n.ControlsAndFormGroupsOnly=4]="ControlsAndFormGroupsOnly",n[n.DefinedPropsOnly=5]="DefinedPropsOnly",n[n.All=6]="All"}(po||(po={})),po))();class vt{static getParentObjectValue(e){return e.parent?this.parentObjectValue(e.parent).value:{}}static getParentModelInstanceValue(e){return e.parent?this.parentObjectValue(e.parent).modelInstanceValue:{}}static getRootFormGroup(e){return e.parent?this.getRootFormGroup(e.parent):e}static getParentControl(e){return e.parent?this.parentObjectValue(e.parent):e}static getFormControlName(e){let t="";if(e.parent)for(var i in e.parent.controls)if(e.parent.controls[i]==e){t=i;break}return t}static getParentFormArray(e){return e.parent&&!(e.parent instanceof Un||e.parent instanceof fl)?this.getParentFormArray(e.parent):e.parent}static toLower(e){return e&&String(e).toLowerCase().trim()}static getControl(e,t){let i=e.split(".");if(i.length>1){var r=t;return i.forEach((s,o)=>{r=r.controls[s]}),r}return t.controls[e]}static getFormControl(e,t){let i=e.split(".");if(i.length>1&&t.parent){var r=this.getParentControl(t);return i.forEach((s,o)=>{r=r.controls[s]}),r}return t.parent?t.parent.get([e]):void 0}static parentObjectValue(e){return e.parent?e=this.parentObjectValue(e.parent):e}static isNumeric(e){return e-parseFloat(e)+1>=0}static notEqualTo(e,t){let i=null==e?"":e,r=null==t?"":t;return i instanceof Date&&r instanceof Date?+i!=+r:i!=r}static numericValidation(e,t){let i;i=fe&&fe.number?fe.json&&fe.json.allowDecimalSymbol?fe.json.allowDecimalSymbol:fe.number.decimalSymbol:".";let r=/^[0-9]+$/;switch(t=null==t?Vu.PositiveNumber:t){case Vu.PositiveNumber:r=e?"."==i||null==i?/^[0-9\.]+$/:/^[0-9\,]+$/:/^[0-9]+$/;break;case Vu.NegativeNumber:r=e?"."==i||null==i?/^[-][0-9\.]+$/:/^[-][0-9\,]+$/:/^[-][0-9]+$/;break;case Vu.Both:r=e?"."==i||null==i?/^[-|+]?[0-9\.]+$/:/^[-|+]?[0-9\,]+$/:/^[-|+]?[0-9]+$/}return r}static configureControl(e,t,i){if(e.validatorConfig)e.validatorConfig[i]=t;else{let r={};r[i]=t,Object.assign(e,{validatorConfig:r})}}static lowerCaseWithTrim(e){return"string"==typeof e?e.toLowerCase().trim():String(e).toLowerCase().trim()}static isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}static isArray(e){return Array.isArray(e)}static cloneValue(e){return vt.isObject(e)?vt.isArray(e)?[...e]:Object.assign({},e):e}}function WA(n,e){let t=_t.get(n),i=e?e.__proto__:function Hh(n,e){let t=Object.create(n.prototype);try{n.apply(t,e)}catch(i){t=Reflect.construct(n,e)}return t}(n,[]).__proto__;if(i.__proto__){let r=!1;do{if(r=i.__proto__.constructor!=Object,r){let s=_t.get(i.__proto__.constructor);t=AN(hl(t),hl(s)),i=i.__proto__}}while(r)}return t}class wK{constructor(e,t){this.decoratorType=e,this.entityObject=t}getFormGroupName(e){let t="";if(e.parent)for(var i of Object.keys(e.parent.controls))if(e.parent.controls[i]==e){t=i;break}return t}zeroArgumentProcess(e,t){let i=[];this.getDisabledColumns(e.parent,`${t}-rxw-0`,!1).forEach(a=>i.push(a));let r=this.topControlPath(e,t),s=r.split(".");if(s.length>1){let a=vt.getRootFormGroup(e);this.getDisabledColumns(a,`${r}-rxw-0`,!0).forEach(d=>i.push(d));let c="";for(var o=0;o<s.length-2;o++){let d=s[o];c=`${r.replace(`${d}.`,"")}-rxw--0`,a.controls[d]&&(this.getDisabledColumns(a.controls[d],c,!0,d).forEach(f=>i.push(f)),a=a.controls[d])}}return i}getDisabledColumns(e,t,i,r=""){if(e[fc]){let s=WA(e[fc].constructor,this.entityObject);return this.getChangeDetectionColumns(s,t,i,r)}return[]}getChangeDetectionColumns(e,t,i,r=""){let s=[],o=e.nonValidationDecorators[this.decoratorType].changeDetection[t];return o&&o.forEach(a=>{s.push({controlPath:r?`${r}.${a}`:a,conditionalExpression:e.nonValidationDecorators[this.decoratorType].conditionalExpressions[a],isRoot:i})}),s}topControlPath(e,t){if(e.parent){let i=this.getFormGroupName(e.parent);if(i)return this.topControlPath(e.parent,t=`${i}.${t}`)}return t}childControlDisabledExpression(e,t,i=""){let r=[];if(e[fc]){let o=_t.get(e[fc].constructor);o&&(this.getChangeDetectionColumns(o,t,!0,i).forEach(a=>r.push(a)),o.properties.filter(a=>a.propertyType==Ls).forEach(a=>{e.controls[a.name]&&(this.getDisabledColumns(e.controls[a.name],t,!0,i?`${i}.${a.name}`:`${a.name}`).forEach(d=>r.push(d)),this.childControlDisabledExpression(e.controls[a.name],t,i?`${i}.${a.name}`:`${a.name}`).forEach(d=>r.push(d)))}))}return r}oneArgumentProcess(e,t){let i=this.topControlPath(e,t),r=vt.getRootFormGroup(e);return this.childControlDisabledExpression(r,i)}}const xN=/^(?:[\+-]?\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[\.,]\d+(?!:))?)?(?:\2[0-5]\d(?:[\.,]\d+)?)?(?:[zZ]|(?:[\+-])(?:[01]\d|2[0-3]):?(?:[0-5]\d)?)?)?)?$/;class qA{isDate(e){return e instanceof Date&&!isNaN(e.valueOf())}getRegex(e){var t;switch(e){case"ymd":t="^(?:[0-9]{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$";break;case"dmy":t="^(3[01]|[12][0-9]|0?[1-9])-(1[0-2]|0?[1-9])-(?:[0-9]{2})?[0-9]{2}$";break;case"mdy":t="^(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])-(?:[0-9]{2})?[0-9]{2}$"}return new RegExp(t)}regex(e){return this.getRegex(fe&&fe.json&&fe.json.internationalization&&fe.json.internationalization.dateFormat&&fe.json.internationalization.seperator?e.dateFormat||fe.json.internationalization.dateFormat:fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.dateFormat?e.dateFormat||fe.json.baseConfig.dateFormat:e.dateFormat||"mdy")}getDate(e,t,i=!1){let r,s,o;if(this.isDate(e))return e;{let a,c;if(xN.test(e))return new Date(e);switch(a=fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.seperator?fe.json.baseConfig.seperator:"/",c=t||fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.dateFormat?fe.json.baseConfig.dateFormat:"mdy",!i&&fe&&fe.json&&fe.json.internationalization&&fe.json.internationalization.dateFormat&&fe.json.internationalization.seperator&&(a=fe.json.internationalization.seperator,c=t||fe.json.internationalization.dateFormat),c){case"ymd":[r,s,o]=e.split(a).map(d=>+d);break;case"dmy":[o,s,r]=e.split(a).map(d=>+d);break;case"mdy":[s,o,r]=e.split(a).map(d=>+d)}return new Date(r,s-1,o)}}isValid(e,t){if(t&&t.isValid)return t.isValid(e);if("string"==typeof e){if(t&&t.allowISODate&&xN.test(e))return!0;let i="/";return fe&&fe.json&&fe.json.baseConfig&&fe.json.baseConfig.seperator&&(i=fe.json.baseConfig.seperator),fe.json&&fe.json.internationalization&&fe.json.internationalization.seperator&&(i=fe.json.internationalization.seperator),3===e.split(i).length&&(e=e.replace(i,"-").replace(i,"-"),this.regex(t).test(e))}return this.isDate(e)}getConfigDateValue(e){let t=e.value;return e.value&&"string"==typeof e.value&&(t=this.getDate(e.value,e.dateFormat,!0)),t}getCompareDate(e,t){let i=this.getConfigDateValue(e);if(e.fieldName){let r=vt.getFormControl(e.fieldName,t);r&&r.value&&(i=this.getDate(r.value,e.dateFormat))}return i}}function Vs(n){return null!=n&&""!==n}function MN(n,e){return Vs(n)&&"string"==typeof n?n.replace(new RegExp("[$"+e+"]+","g"),""):n}function TN(n){if(Vs(n)){var e=".";if(fe&&fe.number&&(e=fe.json&&fe.json.allowDecimalSymbol?fe.json.allowDecimalSymbol:fe.number.decimalSymbol),","==e&&"string"==typeof n&&(n=n.replace(",",".")),vt.isNumeric(n))return parseFloat(n)}return null}const IN={trim:function CK(n){return Vs(n)&&"string"==typeof n?n.trim():n},ltrim:function EK(n){return Vs(n)&&"string"==typeof n?n.replace(/^\s+/g,""):n},rtrim:function DK(n){return Vs(n)&&"string"==typeof n?n.replace(/\s+$/g,""):n},blacklist:MN,stripLow:function SK(n,e){return MN(n,!0===e?"\0-\t\v\f\x0e-\x1f\x7f":"\0-\x1f\x7f")},toBoolean:function AK(n,e){return Vs(n)?e?"1"===n||"true"===n:"0"!==n&&"false"!==n&&""!==n:n},toDouble:function xK(n){return TN(n)},toFloat:TN,toInt:function MK(n,e){return Vs(n)&&vt.isNumeric(n)?parseInt(n,e||10):null},toString:function TK(n,e){return Vs(n)?String(n):n},whitelist:function IK(n,e){return Vs(n)&&"string"==typeof n?n.replace(new RegExp(`[^${e}]+`,"g"),""):n},toDate:function OK(n,e){var t=new qA;return Vs(n)&&"string"==typeof n&&t.isValid(n,e)?n=t.getDate(n):null},escape:function PK(n){return Vs(n)?n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;"):n},prefix:function kK(n,e){return Vs(n)?`${e}${n}`:n},suffix:function RK(n,e){return Vs(n)?`${n}${e}`:n},sanitize:function FK(n,e){return e.custom(n)}},ON="touched",PN="untouched";class ju extends An{constructor(e,t,i,r,s,o,a){if(super(e,t,i),this.entityObject=r,this.baseObject=s,this._sanitizers=a,this._errorMessages=[],this._childColumns=[],this._refDisableControls=[],this._refMessageControls=[],this._refClassNameControls=[],this._isPassedExpression=!1,this._dirty=!1,this.backEndErrors={},this.defineErrorsProperty(),this._baseValue=void 0===e?null:this.getFormState(e),this._isModified=!1,this.keyName=o,this._validators=t.validators,this._asyncValidators=t.asyncValidators,this._errorMessageBindingStrategy=fe.get("reactiveForm.errorMessageBindingStrategy"),this._sanitizers&&this._sanitizers.filter(d=>"toFloat"==d.name)[0]&&this._baseValue&&fe.number&&","==fe.number.decimalSymbol){let d=String(this._baseValue);-1!=d.indexOf(".")&&(this._baseValue=d.replace(".",fe.number.decimalSymbol),super.setValue(this._baseValue))}}get errorMessages(){if(this._messageExpression){if(this._messageExpression&&!this._isPassedExpression)return[]}else 0==this._errorMessages.length&&this.errors&&this.setControlErrorMessages();return!this.errors&&this._errorMessages.length>0&&this.setControlErrorMessages(),this._language!=this.getLanguage()&&this.setControlErrorMessages(),this._errorMessages}get errorMessage(){if(this._messageExpression){if(this._messageExpression&&!this._isPassedExpression)return}else null==this._errorMessage&&this.errors&&this.setControlErrorMessages();return!this.errors&&this._errorMessage&&this.setControlErrorMessages(),this._language!=this.getLanguage()&&this.setControlErrorMessages(),this._errorMessage}defineErrorsProperty(){Object.defineProperty(this,"errors",{configurable:!0,get(){return this._language&&this._language!=this.getLanguage()&&this.validator&&(this.errors=this.validator(this)),this._errors},set(e){this._errors=e}})}getFormState(e){let t=e;return Array.isArray(e)&&(t=[],e.forEach(i=>t.push(i))),t}get isModified(){return this._isModified}getValidators(){return this.getValidatorSource(this._validators)}getAsyncValidators(){return this.getValidatorSource(this._asyncValidators)}getValidatorSource(e){return e?Array.isArray(e)?[...e]:[e]:[]}setValidators(e){this._validators=e,super.setValidators(e)}setAsyncValidators(e){this._asyncValidators=e,super.setAsyncValidators(e)}setValue(e,t){this.parent.changing=!0;let i=this.getSanitizedValue(e);t&&t.dirty&&(this.baseObject[this.keyName]=e),this.entityObject[this.keyName]=i,super.setValue(e,t),this.bindError(),this.bindClassName(),this.executeExpressions(),this.callPatch(),t&&!t.updateChanged&&this.root[Xy]&&this.root[Xy](),this.parent.changing=!1}getControlValue(){return this.getSanitizedValue(this.value)}bindError(){this._messageExpression&&(this._isPassedExpression=this.executeExpression(this._messageExpression,this)),this.setControlErrorMessages(),this.errors=this.errors}bindClassName(){if(this.updateOnElementClass&&"function"==typeof this.updateOnElementClass){let e=this.executeExpression(this._classNameExpression,this);this.updateOnElementClass(e)}}setBackEndErrors(e){Object.keys(e).forEach(t=>this.backEndErrors[t]=e[t]),this.setControlErrorMessages()}clearBackEndErrors(e){e?Object.keys(e).forEach(t=>delete this.backEndErrors[t]):this.backEndErrors={},this.setControlErrorMessages()}markAsTouched(e){let t=this.touched;super.markAsTouched(e),t!=this.touched&&this.runControlPropChangeExpression([ON,PN])}markAsUntouched(e){let t=this.untouched;super.markAsUntouched(e),t!=this.untouched&&this.runControlPropChangeExpression([PN,ON])}markAsDirty(e){let t=this._dirty;super.markAsDirty(e),this._dirty=!0,t!=this._dirty&&this.runControlPropChangeExpression(["dirty"])}markAsPristine(e){let t=this.pristine;super.markAsPristine(e),t!=this.pristine&&this.runControlPropChangeExpression(["pristine"])}markAsPending(e){let t=this.pending;super.markAsDirty(e),t!=this.pending&&this.runControlPropChangeExpression(["pending"])}runControlPropChangeExpression(e){e.forEach(t=>{(this._controlProp&&this._messageExpression&&this._controlProp[t]||!this._messageExpression&&this.checkErrorMessageStrategy())&&this.bindError(),this._classNameControlProp&&this._classNameControlProp[t]&&this.bindClassName()})}refresh(){this.getMessageExpression(this.parent,this.keyName),this.bindConditionalControls("disabled","_refDisableControls"),this.bindConditionalControls("error","_refMessageControls"),this.bindConditionalControls("elementClass","_refClassNameControls"),this.executeExpressions(),this.bindError()}reset(e,t={}){this.setValue(void 0!==e?e:this.getFormState(this._baseValue),t),this._dirty=!1}commit(){this._baseValue=this.value,this.callPatch()}callPatch(){this._isModified=this.getValue(this._baseValue)!=this.getValue(this.value),this.parent&&this.parent[HA]&&this.parent[HA](this.keyName)}checkErrorMessageStrategy(){let e=!0;switch(this._errorMessageBindingStrategy){case pl.OnSubmit:e=this.parent.submitted;break;case pl.OnDirty:e=this._dirty;break;case pl.OnTouched:e=this.touched;break;case pl.OnDirtyOrTouched:e=this._dirty||this.touched;break;case pl.OnDirtyOrSubmit:e=this._dirty||this.parent.submitted;break;case pl.OnTouchedOrSubmit:e=this.touched||this.parent.submitted;break;default:e=!0}return e}executeExpressions(){this.processExpression("_refDisableControls","disabled"),this.processExpression("_refMessageControls","bindError"),this.processExpression("_refClassNameControls","bindClassName")}getMessageExpression(e,t){if(e[fc]){let i=_t.get(e[fc].constructor);i&&(this._messageExpression=i.nonValidationDecorators.error.conditionalExpressions[t],this._controlProp=i.nonValidationDecorators.error.controlProp[this.keyName],this._classNameExpression=i.nonValidationDecorators.elementClass.conditionalExpressions[t],this._classNameControlProp=i.nonValidationDecorators.elementClass.controlProp[t],this._classNameExpression&&(this.updateOnElementClass=!0))}}getSanitizedValue(e){if(this._sanitizers)for(let t of this._sanitizers)e=IN[t.name](e,t.config);return e}bindConditionalControls(e,t){this._disableProvider=new wK(e,this.entityObject),this[t]=this._disableProvider.zeroArgumentProcess(this,this.keyName),this._disableProvider.oneArgumentProcess(this,`${this.keyName}-rxw-1`).forEach(i=>this[t].push(i))}setControlErrorMessages(){if(!this._messageExpression&&this.checkErrorMessageStrategy()||this._isPassedExpression){this._errorMessages=[],this.errors?Object.keys(this.errors).forEach(t=>{if(this.parent){if(this.parent[Qy][this.keyName]=this._errorMessage=this.getErrorMessage(this.errors,t),!this._errorMessage){let i=ce.toJson(t,void 0,[this.errors[t][t]]);this.parent[Qy][this.keyName]=this._errorMessage=this.getErrorMessage(i,t)}}else this._errorMessage=this.getErrorMessage(this.errors,t);this._errorMessages.push(this._errorMessage)}):(this._errorMessage=void 0,this.parent&&(this.parent[Qy][this.keyName]=void 0,delete this.parent[Qy][this.keyName]));let e=Object.keys(this.backEndErrors);e.length>0&&e.forEach(t=>{this._errorMessages.push(this._errorMessage=this.backEndErrors[t])})}else this._errorMessages=[],this._errorMessage=void 0;this._language=this.getLanguage()}getLanguage(){return fe.i18n&&fe.i18n.language?fe.i18n.language:void 0}getErrorMessage(e,t){if(e[t][pN])return e[t][pN]}processExpression(e,t){if(this[e])for(var i of this[e]){let r=i.isRoot?vt.getControl(i.controlPath,vt.getRootFormGroup(this)):vt.getFormControl(i.controlPath,this);r&&("disabled"==t?this.executeExpression(i.conditionalExpression,r)?r.disable():r.enable():"bindError"==t?r.bindError():"bindClassName"==t&&r.bindClassName())}}executeExpression(e,t){return e.call(t.parent[fc],t,vt.getParentModelInstanceValue(this),t.parent[fc])}getValue(e){return null!=e&&""!==e?e:""}}class jK{convertToFormData(e,t){return this.convertFormData(e,void 0,void 0,t)}convertFormData(e,t,i,r){let s=t||new FormData,o="";for(var a in e)o=i?`${i}[${a}]`:a,Array.isArray(e[a])?e[a].forEach((c,d)=>{o=`${a}[${d}]`,"object"==typeof c?this.convertFormData(c,s,o,r):this.nonObjectValueBind(c,s,o,r)}):null===e[a]||e[a]instanceof Date||"object"!=typeof e[a]||e[a]instanceof File||e[a]instanceof FileList?this.nonObjectValueBind(e[a],s,o,r):this.convertFormData(e[a],s,o,r);return s}nonObjectValueBind(e,t,i,r){if("boolean"==typeof e)t.append(i,!!e);else if(e instanceof FileList)for(var s=0;s<e.length;s++)t.append(r&&r.excludeImageIndex&&1===e.length?i:`${i}[${s}]`,e.item(s));else lt.isNotBlank(e)&&t.append(i,e)}}function HK(n,e,t){let i=!0;if(t){if(i=!1,t.resetType)switch(t.resetType){case po.ControlsOnly:i=e instanceof An;break;case po.ControlsAndFormGroupsOnly:i=e instanceof An||e instanceof On;break;case po.FormGroupsOnly:i=e instanceof On;break;case po.FormArraysOnly:i=e instanceof Un;break;case po.DefinedPropsOnly:i=!!t.value&&-1!=Object.keys(t.value).indexOf(n);break;default:i=!0}!i&&t.with&&(i=void 0!==t.with.filter(r=>r.split(".")[0]==n.split(".")[0])[0]),!i&&t.value&&(void 0===t.resetType||t.resetType!==po.DefinedPropsOnly)&&(i=!0)}return i}function UK(n,e){if(e){let t={};if(e.resetType&&(t.resetType=e.resetType==po.FormGroupsOnly||e.resetType==po.FormArraysOnly?po.ControlsOnly:e.resetType),e.with){let r=e.with.filter(s=>s.split(".")[0]==n).map(s=>{let o=s.split(".");return o.splice(0,1),o.join(".")});t.with=r}return e.value&&e.value[n]&&(t.value=e.value[n]),t=Object.keys(t).length>0?t:void 0,t}}class vr extends On{constructor(e,t,i,r,s){for(var o in super(i,r,s),this.model=e,this.entityObject=t,this._modified={},this._isModified=!1,this.changing=!1,this.baseObject={},this.entityObject)this.baseObject[o]=this.entityObject[o];this.formDataProvider=new jK}bindPrimaryKey(e,t){let i=_t.get(e.constructor);if(i){let r=i.properties.filter(s=>s.isPrimaryKey)[0];r&&this.modelInstance[r.name]&&(t[r.name]=this.modelInstance[r.name])}}get modifiedValue(){let e={};if(Object.keys(this._modified).length>0){for(var t in this.bindPrimaryKey(this.modelInstance,e),this._modified)if(this.controls[t]instanceof vr)e[t]=this.controls[t].modifiedValue;else if(this.controls[t]instanceof Un){let r=this.controls[t];e[t]=[];for(var i=0;i<this._modified[t].length;i++){let s=r.controls[i].modifiedValue;Object.keys(s).length>0&&e[t].push(s)}0==e[t].length&&delete e[t]}else e[t]=this._modified[t];return e}return this._modified}get isModified(){return this._isModified}patch(e){e?this.processModified(e,this.controls[e]):this.nestedFormsModification(),this._isModified=Object.keys(this._modified).length>0,this._isModified||this.nestedArrayIsModified(),this.parent&&this.parent.patch&&this.parent.patch()}isDirty(){let e=!1;for(let t in this.value){let i=this.modelInstance[t];if(this.controls[t]instanceof On||this.controls[t]instanceof Un){if(this.controls[t]instanceof vr)e=this.controls[t].isDirty();else if(this.controls[t]instanceof Un)for(let r of this.controls[t].controls)e=r.isDirty()}else e=vt.notEqualTo(this.baseObject[t],i);if(e)break}return e}resetForm(e){for(let t in this.controls)HK(t,this.controls[t],e)&&(this.controls[t]instanceof On?this.controls[t].resetForm(UK(t,e)):this.controls[t]instanceof Un?this.controls[t].resetForm(e&&e.value?e.value[t]:void 0):e&&e.value&&lt.isNotBlank(e.value[t])?this.controls[t].reset(e.value[t]):this.controls[t].reset())}commit(){for(let e in this.controls)this.controls[e].commit()}patchModelValue(e,t){if(e)for(let i in this.controls)if(this.controls[i]instanceof vr&&e[i])this.controls[i].patchModelValue(e[i],t);else if(this.controls[i]instanceof Un&&Array.isArray(e[i])){let r=0;for(let s of this.controls[i].controls)e[i][r]&&s.patchModelValue(e[i][r],t),r+=1}else void 0!==e[i]&&this.controls[i].patchValue(e[i],t)}getErrorSummary(e){let t={};return Object.keys(this.controls).forEach(i=>{if(this.controls[i]instanceof On){let r=this.controls[i].getErrorSummary(!1);Object.keys(r).length>0&&(t[i]=r)}else if(this.controls[i]instanceof Un){let r=0;for(let s of this.controls[i].controls){let o=s.getErrorSummary(!1);Object.keys(o).length>0&&(o.index=r,t[i]||(t[i]=[]),t[i].push(o)),r++}}else if(this.controls[i].errors){let r=this.controls[i].errors;if(e)for(let s in r)t[i]=r[s].message;else t[i]=r}}),t}valueChangedSync(){Object.keys(this.controls).forEach(e=>{if(this.controls[e]instanceof Un||this.controls[e]instanceof fl||this.controls[e]instanceof On||this.controls[e]instanceof vr||this.entityObject[e]instanceof An||this.entityObject[e]instanceof ju||!this.controls[e].getControlValue||!vt.notEqualTo(this.controls[e].getControlValue(),this.entityObject[e]))if(this.controls[e]instanceof Un||this.controls[e]instanceof fl)for(let t of this.controls[e].controls)t.valueChangedSync();else this.controls[e]instanceof vr&&this.controls[e].valueChangedSync();else this.controls[e].setValue(this.entityObject[e],{updateChanged:!0})})}refreshDisable(){Object.keys(this.controls).forEach(e=>{this.controls[e]instanceof Un||this.controls[e]instanceof fl||this.controls[e]instanceof On||this.controls[e]instanceof vr?this.controls[e]instanceof vr&&this.controls[e].refreshDisable():this.controls[e].refresh()})}bindErrorMessages(){Object.keys(this.controls).forEach(e=>{this.controls[e]instanceof Un||this.controls[e]instanceof fl||this.controls[e]instanceof On||this.controls[e]instanceof vr?this.controls[e]instanceof vr&&this.controls[e].bindErrorMessages():this.controls[e].bindError()})}get submitted(){return this._submitted}set submitted(e){this._submitted=e,Object.keys(this.controls).forEach(t=>{if(this.controls[t]instanceof Un){let i=this.controls[t];for(let r of i.controls)r.submitted=e}else this.controls[t]instanceof On?this.controls[t].submitted=e:this.controls[t].bindError()})}get modelInstanceValue(){return hl(this.entityObject)}get modelInstance(){return this.entityObject}get controlsError(){return this.getErrorSummary(!0)}toFormData(e){return this.formDataProvider.convertToFormData(this.value,e)}processModified(e,t){t.isModified?this._modified[e]=t.value:delete this._modified[e],this._isModified=Object.keys(this._modified).length>0}nestedArrayIsModified(){for(var e in this.controls)if(this.controls[e]instanceof fl&&(this._isModified=this.controls[e].isModified),this._isModified)break}setBackEndErrors(e){Object.keys(e).forEach(t=>{this.controls[t]&&this.controls[t].setBackEndErrors(e[t])})}clearBackEndErrors(e){Object.keys(e||this.controls).forEach(i=>{this.controls[i]&&(e?this.controls[i].clearBackEndErrors(e[i]):this.controls[i].clearBackEndErrors())})}nestedFormsModification(){for(var e in this.controls)if(this.controls[e]instanceof vr)this.processModified(e,this.controls[e]);else if(this.controls[e]instanceof fl)if(this.controls[e].isModified){let i=this.controls[e].controls;for(var t of(this._modified[e]=[],i))t.isModified&&(this._modified[e]||(this._modified[e]=[]),this._modified[e].push(t.modifiedValue));0==this._modified[e].length&&delete this._modified[e]}else this._modified[e]&&delete this._modified[e]}}class ai{static ProcessRule(e,t,i=!1){if(t&&t.expressionProcessed)return!0;const r=vt.getParentObjectValue(e),s=e.parent?vt.cloneValue(e.parent.value):void 0;let o;if(e.parent&&e.parent instanceof vr&&(o=e.parent.modelInstance),s)this.updateFormControlValue(s,e.parent.controls,e,t),this.forDisableUpdate(s,t);else if(t.conditionalExpression)return!1;return Ns.execute(r,t,s,o,i)}static updateFormControlValue(e,t,i,r){for(var s in e)if(!(e[s]instanceof Object)&&t[s]===i){e[s]=i.value;break}}static forDisableUpdate(e,t){t.disableConfig&&Object.keys(t.disableConfig).forEach(i=>{e[i]=t.disableConfig[i]})}}class xn{static pass(e,t){return!!ai.ProcessRule(e,t)&&lt.isNotBlank(e.value)}static passArrayValue(e,t){return!!ai.ProcessRule(e,t)&&("string"==typeof e.value?lt.isNotBlank(e.value):e.value instanceof Array)}}const n0="ArrayConfig",ZA="FieldConfig",RN="IpConfig",hm="NumberConfig",FN="PasswordConfig",NN="PatternConfig",LN="RangeConfig",$K={[n0]:["matchValues"],[ZA]:["fieldName"],[RN]:["version"],[FN]:["validation"],[hm]:["value"],[NN]:["expression"],[LN]:["minimumNumber","maximumNumber"]};function ct(n,e,t=""){return null!=n&&1!=n?function zK(n,e,t){if(e.dynamicConfig){let i=ai.ProcessRule(n,hl(e),!0);return"boolean"!=typeof i?(i.conditionalExpression=e.conditionalExpression,i.dynamicConfig=e.dynamicConfig,Object.keys(e).forEach(r=>{("conditionalExpression"!=r&&"dynamicConfig"!=r||void 0===i[r])&&(i[r]=e[r])}),i):e}return function GK(n,e){return e&&$K[e].forEach(i=>{if(void 0===n[i])throw new Error(`Pass the property of '${i}' with value in the ${e}, otherwise it won't work.`)}),n}(e,t)}(e,n,t):{}}const VN={danish:/^[A-Z\xc6\xd8\xc5]+$/i,french:/^[A-Z\xc0\xc2\xc6\xc7\xc9\xc8\xca\xcb\xcf\xce\xd4\u0152\xd9\xdb\xdc\u0178]+$/i,german:/^[A-Z\xc4\xd6\xdc\xdf]+$/i,spanish:/^[a-z\xf1\xe1\xe9\xed\xf3\xfa\xfc]+$/i,russian:/^[\u0410-\u042f\u0401]+$/i},BN={danish:/^[A-Z\xc6\xd8\xc5\s]+$/i,french:/^[A-Z\xc0\xc2\xc6\xc7\xc9\xc8\xca\xcb\xcf\xce\xd4\u0152\xd9\xdb\xdc\u0178\s]+$/i,german:/^[A-Z\xc4\xd6\xdc\xdf\s]+$/i,spanish:/^[a-z\xf1\xe1\xe9\xed\xf3\xfa\xfc\s]+$/i,russian:/^[\u0410-\u042f\u0401\s]+$/i},jN={danish:/^[0-9A-Z\xc6\xd8\xc5]+$/i,french:/^[0-9A-Z\xc0\xc2\xc6\xc7\xc9\xc8\xca\xcb\xcf\xce\xd4\u0152\xd9\xdb\xdc\u0178]+$/i,german:/^[0-9A-Z\xc4\xd6\xdc\xdf]+$/i,spanish:/^[0-9a-z\xf1\xe1\xe9\xed\xf3\xfa\xfc]+$/i,russian:/^[0-9\u0410-\u042f\u0401]+$/i},HN={danish:/^[0-9A-Z\xc6\xd8\xc5\s]+$/i,french:/^[0-9A-Z\xc0\xc2\xc6\xc7\xc9\xc8\xca\xcb\xcf\xce\xd4\u0152\xd9\xdb\xdc\u0178\s]+$/i,german:/^[0-9A-Z\xc4\xd6\xdc\xdf\s]+$/i,spanish:/^[0-9a-z\xf1\xe1\xe9\xed\xf3\xfa\xfc\s]+$/i,russian:/^[0-9\u0410-\u042f\u0401\s]+$/i};function UN(n,e,t,i){let r=ct(n,e);return xn.pass(e,r)&&(t=function WK(n,e,t){switch(t.allowCharacters&&(t.allowWhiteSpace?e[1]=new RegExp(`^[0-9a-zA-Z @${t.allowCharacters}]+$`,""):e[0]=new RegExp(`^[0-9a-zA-Z @${t.allowCharacters}]+$`,"")),n){case"alpha":var i=t.locale?t.locale:fe.json&&fe.json.defaultValidationLocale&&fe.json.defaultValidationLocale.alpha?fe.json.defaultValidationLocale.alpha:"";return[i&&i in VN?VN[i]:e[0],i&&i in BN?BN[i]:e[1]];case"alphaNumeric":var r=t.locale?t.locale:fe.json&&fe.json.defaultValidationLocale&&fe.json.defaultValidationLocale.alphaNumeric?fe.json.defaultValidationLocale.alphaNumeric:"";return[r&&r in jN?jN[r]:e[0],r&&r in HN?HN[r]:e[1]]}}(i,t,r),!lt.isValid(e.value,r&&r.allowWhiteSpace?t[1]:t[0]))?ce.toJson(i,r,[e.value]):ce.null()}function $N(n){return e=>UN(n,e,[sn.alpha,sn.alphaWithSpace],b.alpha)}function zN(n){return e=>UN(n,e,[sn.alphaNumeric,sn.alphaNumericWithSpace],b.alphaNumeric)}function GN(n){return e=>{let t=ct(n,e,ZA);const i=vt.getFormControl(t.fieldName,e),r=e.value,s=i?i.value:"";return!lt.isNotBlank(r)&&!lt.isNotBlank(s)||i&&i.value===r?ce.null():ce.toJson(b.compare,t,[r,s])}}function WN(n){return e=>{let t=ct(n,e);if(xn.pass(e,t)){let i=!1;const r=t.values?t.values:[t.value];for(let s of r)if(i=-1==e.value.indexOf(s),!i)break;if(i)return ce.toJson(b.contains,t,[e.value,t.value])}return ce.null()}}function qK(n,e){let t=!1;for(let i of e)if(t=i==n,t)break;return t}function qN(n){let e={AmericanExpress:[15],DinersClub:[14,16,19],Discover:[16,19],JCB:[16,19],Maestro:[12,16,19],MasterCard:[16],Visa:[13,16,19]};function t(r){var s=parseInt(r.substring(r.length-1,r.length));return function ZK(n){let e=0;for(var t=0;t<n.length;t++)e+=parseInt(n.substring(t,t+1));let i=new Array(0,1,2,3,4,-4,-3,-2,-1,0);for(t=n.length-1;t>=0;t-=2)e+=i[parseInt(n.substring(t,t+1))];let r=e%10;return r=10-r,10==r&&(r=0),r}(r.substring(0,r.length-1))==parseInt(String(s))}function i(r){var s="";return/^(5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)\d+$/.test(r)?s="Maestro":/^5[1-5]/.test(r)?s="MasterCard":/^4/.test(r)?s="Visa":/^3[47]/.test(r)?s="AmericanExpress":/^(?:2131|1800|35)/.test(r)?s="JCB":/^3(?:0[0-5]|[68])/.test(r)?s="DinersClub":/^6(?:011|5)/.test(r)&&(s="Discover"),s}return r=>{const s=r.value;let o=ct(n,r);const a=r.parent?r.parent.value:void 0;if(ai.ProcessRule(r,o)&&lt.isNotBlank(s)){let c=!1,d=o.fieldName&&a[o.fieldName]?[a[o.fieldName]]:o.creditCardTypes,f="";for(let p of d)if(c=qK(s.length,e[p])&&i(s)==p&&t(s),f=p,c)break;if(!c)return ce.toJson(b.creditCard,o,[s,f])}return ce.null()}}function pc(n,e,t,i){return ZN(ct(n,e),e,t,i)}function ZN(n,e,t,i){return xn.pass(e,n)&&!lt.isValid(e.value,t)?ce.toJson(i,n,[e.value]):ce.null()}function KN(n){return e=>pc(n,e,sn.onlyDigit,b.digit)}function YN(n){return e=>pc(n,e,sn.basicEmail,b.email)}function QN(n){return e=>pc(n,e,sn.strictHexColor,b.hexColor)}function XN(n){return e=>{let t=ct(n,e);return xn.pass(e,t)&&e.value!==e.value.toLowerCase()?ce.toJson(b.lowerCase,t,[e.value]):ce.null()}}function JN(n,e,t){let i=!1;switch(t){case"<":case">":i=n>e;break;case"<=":case">=":i=n>=e}return i}function e2(n,e,t){e=ct(e,n);var i=new qA;if(ai.ProcessRule(n,e)&&lt.isNotBlank(n.value)){let r=i.getCompareDate(e,n);if(!i.isDate(n.value)&&!i.isValid(n.value,e))return ce.toJson(t,e,[n.value,r]);{let s=i.getDate(n.value);if(!(t==b.minDate?JN(s,r,e.operator||">="):JN(r,s,e.operator||"<=")))return ce.toJson(t,e,[n.value,r])}}return ce.null()}function t2(n){return e=>e2(e,n,b.maxDate)}function n2(n){return e=>{let t=ct(n,e,hm);return!xn.pass(e,t)||e.value.length<=t.value?ce.null():ce.toJson(b.maxLength,t,[e.value,t.value])}}function r2(n){return e=>{let t=ct(n,e,hm);return!xn.pass(e,t)||parseFloat(e.value)<=t.value?ce.null():ce.toJson(b.maxNumber,t,[e.value,t.value])}}function s2(n){return e=>e2(e,n,b.minDate)}function o2(n){return e=>{let t=ct(n,e,hm);return!xn.pass(e,t)||String(e.value).length>=t.value?ce.null():ce.toJson(b.minLength,t,[e.value,t.value])}}function a2(n){return e=>{let t=ct(n,e,hm);return!xn.pass(e,t)||parseFloat(e.value)>=t.value?ce.null():ce.toJson(b.minNumber,t,[e.value,t.value])}}function l2(n){return t=>{let i=ct(n,t,FN),r=t.value;if(lt.isNotBlank(r)){let s=lt.isValidPassword(i.validation,r),o={};if(o.message=i.message&&i.message[s.keyName]?i.message[s.keyName]:"string"==typeof i.message?i.message:"",o.messageKey=i.messageKey&&i.messageKey[s.keyName]?i.messageKey[s.keyName]:"string"==typeof i.messageKey?i.messageKey:"",o=function e(t,i){if(!t.message&&!t.messageKey){let r=ce.getPasswordMessage();t.message=r&&"string"==typeof r?r:vt.isObject(r)?r[i]:"",t.message||(t.message=r.password),t.messageKey=""}return t}(o,s.keyName),!s.isValid)return ce.toJson(b.password,o,[r])}return ce.null()}}function c2(n){return e=>{let t=ct(n,e,LN);return!xn.pass(e,t)||(e.value||0===e.value)&&parseFloat(e.value)>=t.minimumNumber&&parseFloat(e.value)<=t.maximumNumber?ce.null():ce.toJson(b.range,t,[e.value,t.minimumNumber,t.maximumNumber])}}function u2(n){return e=>{let t=ct(n,e);return xn.pass(e,t)&&e.value!==e.value.toUpperCase()?ce.toJson(b.upperCase,t,[e.value]):ce.null()}}function d2(n){return e=>{let t=ct(n,e);return ai.ProcessRule(e,t)&&!lt.isNotBlank(e.value)?ce.toJson(b.required,t,[]):ce.null()}}function h2(n){return e=>{let t=ct(n,e,NN);if(xn.pass(e,t))for(var i in t.expression)if(!lt.isValid(e.value,t.expression[i]))return ce.toJson(i,t,[e.value]);return ce.null()}}function f2(n){return e=>{let t=ct(n,e);return xn.pass(e,t)&&!lt.isValid(e.value,t.allowSeconds?sn.timeWithSeconds:sn.time)?ce.toJson(b.time,t,[e.value]):ce.null()}}function p2(n){return e=>function YK(n,e){var t=sn.url;let i=ct(n,e);if(i&&i.urlValidationType)switch(i.urlValidationType){case 1:t=sn.url;break;case 2:t=sn.localhostUrl;break;case 3:t=sn.interanetUrl}return ZN(i,e,t,b.url)}(n,e)}function g2(n){return t=>{let i=ct(n,t);return xn.pass(t,i)&&!function e(t){var i=!1;try{var r=JSON.parse(t);i=!!r&&"object"==typeof r}catch(s){i=!1}return i}(t.value)?ce.toJson(b.json,i,[t.value]):ce.null()}}const QK={[b.greaterThan]:b.lessThan,[b.lessThan]:b.greaterThan,[b.greaterThanEqualTo]:b.lessThanEqualTo,[b.lessThanEqualTo]:b.greaterThanEqualTo};function r0(n,e,t){const i=(e=ct(e,n)).fieldName?vt.getFormControl(e.fieldName,n):void 0,r=i?i.value:void 0!==e.value?e.value:"";if(ai.ProcessRule(n,e)){if(e.isArrayControl)return function JK(n,e,t){let i=vt.getParentFormArray(n),r=n.parent?n.parent:void 0,s=QK[t],o=[];if(i&&r&&i.controls.length>1){let a=i.controls.indexOf(r),c=vt.getFormControlName(n),d=!0;if(a>0&&(d=_2(i,n,a-1,c,s,t,o)),d&&i.controls.length>a+1&&(d=_2(i,n,a+1,c,t,t,o)),o.length>0&&function XK(n){let e=setTimeout(()=>{n.forEach(t=>{t.updateValueAndValidity()}),clearTimeout(e)},200)}(o),!1===d)return ce.toJson(t,e,[n.value])}return ce.null()}(n,e,t);if(!1===m2(n,r,t))return ce.toJson(t,e,[n.value,r])}return ce.null()}function m2(n,e,t){if(lt.isNotBlank(n.value)&&lt.isNotBlank(e)){let i=!1;switch(t){case b.greaterThan:i=parseFloat(n.value)>parseFloat(e);break;case b.lessThan:i=parseFloat(n.value)<parseFloat(e);break;case b.greaterThanEqualTo:i=parseFloat(n.value)>=parseFloat(e);break;case b.lessThanEqualTo:i=parseFloat(n.value)<=parseFloat(e)}return i}return null}function _2(n,e,t,i,r,s,o){let a=!1,c=n.controls[t];if(c&&c.controls){let d=c.controls[i];a=m2(e,d.value,r),a&&d.errors&&d.errors[s]&&o.push(d)}return a}function v2(n){return e=>r0(e,n,b.greaterThan)}function b2(n){return e=>r0(e,n,b.greaterThanEqualTo)}function y2(n){return e=>r0(e,n,b.lessThanEqualTo)}function w2(n){return e=>r0(e,n,b.lessThan)}function C2(n){return e=>{let t=ct(n,e);return ai.ProcessRule(e,t)&&e.value instanceof Array&&(t.minLength=null==t.minLength?0:t.minLength,t.maxLength=null==t.maxLength?0:t.maxLength,e.value.length<t.minLength||0!==t.maxLength&&e.value.length>t.maxLength)?ce.toJson(b.choice,t,[e.value]):ce.null()}}function E2(n){return e=>{let t=ct(n,e,ZA);if(xn.pass(e,t)){const i=vt.getFormControl(t.fieldName,e),r=i?i.value:"";if(!i||i.value==e.value)return ce.toJson(b.different,t,[e.value,r])}return ce.null()}}function D2(n){return e=>{n&&(!e[hi]||!e[hi][b.numeric])&&vt.configureControl(e,n,b.numeric);let t=ct(n,e);return xn.pass(e,t)&&!lt.isValid(e.value,vt.numericValidation(t.allowDecimal,t.acceptValue))?ce.toJson(b.numeric,t,[e.value]):ce.null()}}function S2(n){return e=>{let t=ct(n,e);return xn.pass(e,t)&&e.value%2!=0?ce.toJson(b.even,t,[e.value]):ce.null()}}function A2(n){return e=>{let t=ct(n,e);return!xn.pass(e,t)||e.value%2!=0&&vt.isNumeric(e.value)?ce.null():ce.toJson(b.odd,t,[e.value])}}function x2(n){return t=>{let i=ct(n,t);const r=t.parent&&i.fieldName?vt.getFormControl(i.fieldName,t):void 0,s=i.fieldName&&r?r.value:i.dividend;return!(ai.ProcessRule(t,i)&&lt.isNotBlank(t.value)&&s>0)||lt.isValid(t.value,sn.onlyDigit)&&function e(t,i){let r=!1;for(var s=1;s<=Math.floor(Math.sqrt(t))&&(t%s!=0||(s==i&&(r=!0),t/s!==s&&t/s==i&&(r=!0),!r));s+=1);return r}(s,parseInt(t.value))?ce.null():ce.toJson(b.factor,i,[t.value])}}function M2(n){return e=>{let t=ct(n,e);return xn.pass(e,t)&&!(e.value%100==0?e.value%400==0:e.value%4==0)?ce.toJson(b.leapYear,t,[e.value]):ce.null()}}function T2(n){return e=>{let t=ct(n,e,n0);if(xn.passArrayValue(e,t)){var i=!1;for(let r of t.matchValues)if(!(i=e.value.some(s=>s==r)))break;if(!i)return ce.toJson(b.allOf,t,[e.value])}return ce.null()}}function I2(n){return e=>{let t=ct(n,e,n0);if(xn.passArrayValue(e,t)){var i=!1;for(let r of t.matchValues){let s=vt.lowerCaseWithTrim(r);if(i=Array.isArray(e.value)?e.value.some(o=>vt.lowerCaseWithTrim(o)===s):vt.lowerCaseWithTrim(e.value)===s)break}if(!i)return ce.toJson(b.oneOf,t,[e.value])}return ce.null()}}function O2(n){return e=>{let t=ct(n,e,n0);if(ai.ProcessRule(e,t)){var i=!1;for(let r of t.matchValues){let s=vt.lowerCaseWithTrim(r);if(i=Array.isArray(e.value)?e.value.some(o=>vt.lowerCaseWithTrim(o)===s):vt.lowerCaseWithTrim(e.value)===s)break}if(i)return ce.toJson(b.noneOf,t,[e.value])}return ce.null()}}function P2(n){return e=>pc(n,e,sn.macId,b.mac)}function k2(n){return e=>pc(n,e,sn.ascii,b.ascii)}function R2(n){return e=>pc(n,e,sn.dataUri,b.dataUri)}function F2(n){return e=>{let t=ct(n,e);return!xn.pass(e,t)||lt.isValid(e.value,sn.onlyDigit)&&e.value>=0&&e.value<=65535?ce.null():ce.toJson(b.port,t,[e.value])}}function N2(n){return e=>{let t=ct(n,e);if(xn.pass(e,t)){let i=e.value.split(",");if(!(i.length>1&&lt.isValid(i[0],sn.lat)&&lt.isValid(i[1],sn.long)))return ce.toJson(b.latLong,t,[e.value])}return ce.null()}}function L2(n){return e=>{let t=ct(n,e);if(xn.pass(e,t)){let r=!1,s=t.values?t.values:[t.value];for(let o of s)if(r=String(e.value).substr(e.value.length-o.length,o.length)!=o,!r)break;if(r)return ce.toJson(b.endsWith,t,[e.value,t.value])}return ce.null()}}function V2(n){return e=>{let t=ct(n,e);if(xn.pass(e,t)){let i=!1,r=t.values?t.values:[t.value];for(let s of r){let o=String(e.value).substr(0,s.length);if(i=t.isRestrict&&String(o).toLowerCase()==String(s).toLowerCase()||!t.isRestrict&&o!=s,!i)break}if(i)return ce.toJson(b.startsWith,t,[e.value,t.value])}return ce.null()}}function B2(n){return t=>{let i=ct(n,t);return!xn.pass(t,i)||vt.isNumeric(t.value)&&function e(t){let i=1!=t;for(var r=2;r<t;r++)if(t%r==0){i=!1;break}return i}(t.value)?ce.null():ce.toJson(b.primeNumber,i,[t.value])}}function j2(n){return e=>pc(n,e,sn.lat,b.latitude)}function H2(n){return e=>pc(n,e,sn.long,b.longitude)}function U2(n){return e=>{let t=ct(n,e);if(ai.ProcessRule(e,t)&&t.validators){let i;for(let r of t.validators)if(i=r(e),i)break;if(i)return t.messageKey||t.message?ce.toJson(t.messageKey||b.compose,t,[e.value]):i}return ce.null()}}function $2(n){return i=>{let r=ct(n,i);if(ai.ProcessRule(i,r)&&lt.isNotBlank(i.value)){let o=vt.getParentFormArray(i),a=i.parent?i.parent:void 0,c=[],d=[];if(o&&a){let f=i.value,p=vt.getFormControlName(i),_=!1;for(let w of o.controls)if(w!=a&&(_=vt.toLower(w.controls[p].value)==vt.toLower(f)&&!(w.controls[p].errors&&w.controls[p].errors[b.unique]),w.controls[p].errors&&w.controls[p].errors[b.unique]?o.controls.filter(I=>I.controls[p]!=w.controls[p]&&vt.toLower(I.controls[p].value)==vt.toLower(w.controls[p].value))[0]||c.push(w.controls[p]):d.push(w.controls[p].value)),_)break;c.length>0&&((i,r)=>{let s=setTimeout(()=>{i.forEach(o=>{r.filter(c=>c==o.value)[0]||o.updateValueAndValidity()}),clearTimeout(s)},200)})(c,d);let y=!1;if(r.additionalValidation&&(y=((i,r,s,o,a)=>{let c=o.controls.indexOf(s),d=[];return-1!=c&&(o.value.forEach((f,p)=>{c!=p&&d.push(f)}),i.additionalValidation(a,c,r,s.value,d))})(r,p,a,o,f)),_&&!y)return ce.toJson(b.unique,r,[i.value])}}return ce.null()}}function z2(n){return e=>{let t=ct(n,e);return ai.ProcessRule(e,t)&&!lt.isNotBlank(e.value,!0)?ce.toJson(b.notEmpty,t,[]):ce.null()}}function G2(n){let e=lt.isValid(n,sn.ipV4);if(e){const t=n.split(".");for(let i of t)if(e=i<=255,!e)break}return e}function W2(n){return lt.isValid(n,sn.ipV6)}function q2(n){return e=>{let t=ct(n,e,RN);if(xn.pass(e,t)){let r=t.isCidr?e.value.split("/"):[e.value];var i=t.version==Bu.V4?G2(r[0]):t.version==Bu.V6?W2(r[0]):G2(r[0])||W2(r[0]);if(t.isCidr&&i&&(i=r.length>1&&(t.version==Bu.V4?lt.isValid(r[1],sn.cidrV4):t.version==Bu.V6?lt.isValid(r[1],sn.cidrV6):lt.isValid(r[1],sn.cidrV4)||lt.isValid(r[1],sn.cidrV6))),!i)return ce.toJson(b.ip,t,[e.value])}return ce.null()}}function Z2(n){return e=>{let t=ct(n,e);if(xn.pass(e,t)){var i=e.value.toUpperCase();let o=lt.isValid(i,sn.cusip);if(o){let a=i.split("").map(d=>{var f=d.charCodeAt(0);return f>="A".charCodeAt(0)&&f<="Z".charCodeAt(0)?f-"A".charCodeAt(0)+10:d}),c=0;for(var r=0;r<a.length-1;r++){var s=parseInt(a[r],10);r%2!=0&&(s*=2),s>9&&(s-=9),c+=s}c=(10-c%10)%10,o=c==a[a.length-1]}if(!o)return ce.toJson(b.cusip,t,[e.value])}return ce.null()}}function K2(n){return e=>{let t=ct(n,e);if(xn.pass(e,t)){let c=e.value.toUpperCase();var i=lt.isValid(c,sn.grid);if(i){c=c.replace(/\s/g,"").replace(/-/g,""),"GRID:"===c.substr(0,5)&&(c=c.substr(5));let d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var r=d.length,s=c.length,o=Math.floor(r/2),a=0;a<s;a++)o=(2*(o||r)%(r+1)+d.indexOf(c.charAt(a)))%r;i=1===o}if(!i)return ce.toJson(b.grid,t,[e.value])}return ce.null()}}function Y2(n){return e=>function KK(n,e,t){e=ct(e,n);var i=new qA;return ai.ProcessRule(n,e)&&lt.isNotBlank(n.value)&&!i.isDate(n.value)&&!i.isValid(n.value,e)?ce.toJson(t,e,[n.value]):ce.null()}(e,n,b.date)}function Q2(n,e,t){let i=!1;switch(t){case"<":case">":i=n>e;break;case"<=":case">=":i=n>=e}return i}function KA(n){let e=n?n.split(":"):[];return new Date(1970,0,1,e[0]?e[0]:0,e[1]?e[1]:0,e[2]?e[2]:0).getTime()}function X2(n,e,t){if(e=ct(e,n),ai.ProcessRule(n,e)&&lt.isNotBlank(n.value)){if(!function oY(n,e){return lt.isValid(n.value,e.allowSeconds?sn.timeWithSeconds:sn.time)}(n,e))return ce.toJson(t,e,[n.value]);{let i=e.fieldName?vt.getFormControl(e.fieldName,n):void 0,r=KA(i?i.value:e.value),s=KA(n.value),o=t==b.minTime?Q2(s,r,e.operator||">="):Q2(r,s,e.operator||"<="),a={[t==b.minTime?"min":"max"]:r};if(!o)return ce.toJson(t,e,[n.value],a)}}return ce.null()}function J2(n){return e=>X2(e,n,b.minTime)}function eL(n){return e=>X2(e,n,b.maxTime)}function tL(n){return e=>{let t=ct(n,e);return ai.ProcessRule(e,t)&&!0!==e.value?ce.toJson(b.requiredTrue,t,[]):ce.null()}}function nL(n){return e=>{let t=ct(n,e);return(!e[hi]||!e[hi][b.mask])&&vt.configureControl(e,t,b.mask),null}}const iL={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z0-9]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z0-9]{4}\d{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z0-9]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};function rL(n){return e=>{let t=ct(n,e);return!xn.pass(e,t)||function aY(n,e){const t=n.replace(/[\s\-]+/gi,"").toUpperCase(),i=e||t.slice(0,2).toUpperCase();return i in iL&&iL[i].test(t)}(e.value,t.countryCode)&&function lY(n){const e=n.replace(/[^A-Z0-9]+/gi,"").toUpperCase();return 1===(e.slice(4)+e.slice(0,4)).replace(/[A-Z]/g,s=>s.charCodeAt(0)-55).match(/\d{1,7}/g).reduce((s,o)=>Number(s+o)%97,"")}(e.value)?ce.null():ce.toJson(b.iban,t,[e.value,t.countryCode])}}const gs={alphaNumeric:zN,alpha:$N,compare:GN,email:YN,hexColor:QN,lowerCase:XN,maxDate:t2,maxNumber:r2,minDate:s2,minNumber:a2,contains:WN,upperCase:u2,maxLength:n2,minLength:o2,password:l2,range:c2,required:d2,creditCard:qN,digit:KN,pattern:h2,time:f2,url:p2,json:g2,greaterThan:v2,greaterThanEqualTo:b2,lessThan:w2,lessThanEqualTo:y2,choice:C2,different:E2,numeric:D2,even:S2,odd:A2,factor:x2,leapYear:M2,allOf:T2,oneOf:I2,noneOf:O2,mac:P2,ascii:k2,dataUri:R2,port:F2,latLong:N2,extension:function eY(n){return(e,t)=>{let i=ct(n,e);if((!e[hi]||!e[hi][b.extension])&&vt.configureControl(e,i,b.extension),t&&ai.ProcessRule(e,i)&&lt.isNotBlank(e.value)){let s=!0,o="";for(var r=0;r<t.length;r++){let c=t.item(r).name.split(".");o=c[c.length-1];let d=i.extensions.filter(f=>o.toLowerCase()==f.toLowerCase())[0];if(!d&&!n.isExcludeExtensions){s=!1;break}if(d&&n.isExcludeExtensions){s=!1;break}}if(!s)return ce.toJson(b.extension,i,[o,i.extensions.join(",")])}return ce.null()}},fileSize:function tY(n){return(e,t)=>{let i=ct(n,e);if((!e[hi]||!e[hi][b.fileSize])&&vt.configureControl(e,i,b.fileSize),t&&ai.ProcessRule(e,i)&&lt.isNotBlank(e.value)){let s=i.minSize?i.minSize:0,o=!1,a=0;for(var r=0;r<t.length&&(a=t.item(r).size,o=!(a>=s&&a<=i.maxSize),!o);r++);if(o)return ce.toJson(b.fileSize,i,[a,s,i.maxSize])}return ce.null()}},endsWith:L2,startsWith:V2,primeNumber:B2,latitude:j2,longitude:H2,compose:U2,rule:function nY(n,e){return t=>{let i=ct(n,t);if(ai.ProcessRule(t,i)){let r=null;for(let s of i.customRules)if(r=s(e),r)break;if(r)return r}return ce.null()}},file:function iY(n){return(e,t)=>{let i=ct(n,e);if((!e[hi]||!e[hi][b.file])&&vt.configureControl(e,i,b.file),t&&ai.ProcessRule(e,i)&&lt.isNotBlank(e.value)){let r=i.minFiles?i.minFiles:0,s=i.maxFiles?i.maxFiles:t.length;if(!(t.length>0&&t[0]instanceof File&&t.length>=r&&t.length<=s))return ce.toJson(b.file,i,[t.length,r,s])}return ce.null()}},unique:$2,image:function sY(n){return(e,t)=>{let i=ct(n,e);return(!e[hi]||!e[hi][b.image])&&vt.configureControl(e,i,b.image),t?new Promise((r,s)=>{if(ai.ProcessRule(e,i)&&lt.isNotBlank(e.value)){let a=!1;for(var o=0;o<t.length;o++){let c=t.item(o),d=c.type?c.type.split("/"):[];if(a=d.length>1&&"image"==d[0],!a)break;let f=new Image;i.minWidth=i.minWidth?i.minWidth:0,i.minHeight=i.minHeight?i.minHeight:0,f.onload=()=>{a=f.width>=i.minWidth&&f.height>=i.minHeight&&f.width<=i.maxWidth&&f.height<=i.maxHeight,r(a?ce.null():ce.toJson(b.image,i,[f.width,f.height]))},f.onerror=()=>{r(ce.toJson(b.image,i,[]))},f.src=URL.createObjectURL(c)}a||r(ce.toJson(b.image,i,[]))}return ce.null()}):ce.null()}},notEmpty:z2,ip:q2,cusip:Z2,grid:K2,date:Y2,minTime:J2,maxTime:eL,requiredTrue:tL,mask:nL,iban:rL};function He(n,e){return t=>(n=n||{}).validatorConfig?ai.ProcessRule(t,n)?n.validatorConfig.pipe(mn(sL(n,e,t))):yt(null):yt(sL(n,e,t)(n))}function sL(n,e,t){return i=>{let r=Object.assign(Object.assign(Object.assign({},n),i),{expressionProcessed:!0});return gs[e](r)(t)}}let dY=(()=>{class n{constructor(){this.controlConfig={},this.isProcessed=!1}setModelConfig(t){this.isProcessed=!0,this.controlConfig&&this.controlConfig.validatorConfig&&(t[hi]=this.controlConfig.validatorConfig,this.controlConfig=void 0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ne({type:n,inputs:{name:"name",formControlName:"formControlName"}}),n})(),hY=(()=>{class n extends dY{constructor(){super(...arguments),this.validators=[]}validation(t){let i=null;for(let r of this.validators)if(i=r(t),i)break;return!i&&this.maskProvider&&(i=this.maskProvider.validate()),i}setEventName(){var t="";switch(this.element.tagName){case"INPUT":case"textarea":t="checkbox"==this.element.type||"radio"==this.element.type||"file"==this.element.type?"change":"INPUT";break;case"SELECT":t="change"}this.eventName=t.toLowerCase()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ne({type:n,inputs:{formControl:"formControl"},features:[jt]}),n})(),aL=(()=>{class n{constructor(t,i){this.decimalPipe=t,this.localeId=i,this.decimalSeperator=".",this.groupSeperator=",",this.isSetConfig=!1,this.decimalSeperator=ds(i,ht.Decimal),this.groupSeperator=ds(i,ht.Group),this.setSymbolInConfig()}replacer(t){t=String(t),this.isSetConfig||this.bindConfig(),t=t.split(this.groupSeperator).join(""),this.allowDecimalSymbol&&(t=t.replace(this.decimalSeperator,this.allowDecimalSymbol));var i=t.split(this.decimalSeperator);return i.length>1&&i[1]&&lt.isZero(i[1])?i[0]:t}transFormDecimal(t,i,r){if(!(t=String(t)))return t;let s=this.decimalPipe.transform(t.replace(fe.number.groupSymbol,"").replace(this.decimalSeperator,"."),i,this.localeId);if(r&&t.indexOf(this.decimalSeperator)){let o=s.split("."),a=i?i.split("-"):[],c=a.length>1?parseInt(a[a.length-1]):0;if(o.length>1&&a.length>0&&0!==c&&o[1].length!==c){let d=c-o[1].length;for(let f=0;f<d;f++)s+="0"}}return s}setSymbolInConfig(){fe.number={decimalSymbol:this.decimalSeperator,groupSymbol:this.groupSeperator}}bindConfig(){fe.json&&(fe.json.localeId&&(this.localeId=fe.json.localeId),fe.json.allowDecimalSymbol&&(this.allowDecimalSymbol=fe.json.allowDecimalSymbol)),this.isSetConfig=!0}}return n.\u0275fac=function(t){return new(t||n)(ne(rD),ne(ha))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac}),n})();class fY{constructor(e,t,i,r,s){this.input=e,this.mask=t,this.renderer=i,this.formControl=r,this.config=s,this.eventListeners=[],this.oldValue="",this.type="text",this.slotChar="_",this.autoClear=!1,this.isInvalid=!1,this.internalProcess=!1,this.bind()}bind(){lt.isNotBlank(this.formControl.value)&&(this.input.value=this.formControl.value),this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},this.androidChrome=!1;let e=this.mask.split("");for(let t=0;t<e.length;t++){let i=e[t];"?"==i?(this.len--,this.partialPosition=t):this.defs[i]?(this.tests.push(new RegExp(this.defs[i])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1),t<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.minLength=this.config.minLength?this.lastRequiredNonMaskPos-(this.lastRequiredNonMaskPos-this.config.minLength):this.lastRequiredNonMaskPos,this.buffer=[];for(let t=0;t<e.length;t++){let i=e[t];"?"!=i&&this.buffer.push(this.defs[i]?this.getPlaceholder(t):i)}this.defaultBuffer=this.buffer.join(""),this.focusText=this.input.value,this.bindEvents(),this.checkVal()}bindEvents(){this.eventListeners.push(this.renderer.listen(this.input,"focus",this.onFocus.bind(this))),this.eventListeners.push(this.renderer.listen(this.input,"blur",this.onBlur.bind(this))),this.eventListeners.push(this.renderer.listen(this.input,"keydown",this.onKeyDown.bind(this))),this.eventListeners.push(this.renderer.listen(this.input,"keypress",this.onKeyPress.bind(this))),this.eventListeners.push(this.renderer.listen(this.input,"input",this.onInput.bind(this))),this.eventListeners.push(this.renderer.listen(this.input,"paste",this.handleInputChange.bind(this)))}validate(){this.input.value&&this.oldValue!=this.input.value&&(this.checkVal(!0),this.isCompleted(null,!0),this.oldValue=this.input.value);let e=ct(this.config,this.formControl);return lt.isNotBlank(this.getUnmaskedValue())&&ai.ProcessRule(this.formControl,e)&&this.isInvalid?ce.toJson(b.mask,e,[this.formControl.value]):ce.null()}writeValue(e){this.value=e,this.input&&((null==this.value||null==this.value)&&(this.input.value=""),this.checkVal()),this.updateFilledState()}caret(e,t){let i,r,s;if(this.input.offsetParent&&this.input===document.activeElement){if("number"!=typeof e)return this.input.setSelectionRange?(r=this.input.selectionStart,s=this.input.selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),r=0-i.duplicate().moveStart("character",-1e5),s=r+i.text.length),{begin:r,end:s};r=e,s="number"==typeof t?t:r,this.input.setSelectionRange?this.input.setSelectionRange(r,s):this.input.createTextRange&&(i=this.input.createTextRange(),i.collapse(!0),i.moveEnd("character",s),i.moveStart("character",r),i.select())}}isCompleted(e,t){e=e||this.lastRequiredNonMaskPos;for(let r=this.firstNonMaskPos;r<=e;r++)if(this.tests[r]&&this.buffer[r]===this.getPlaceholder(r))return!1;return this.isInvalid=!1,t||this.formControl.updateValueAndValidity(),!0}getPlaceholder(e){return this.slotChar.charAt(e<this.slotChar.length?e:0)}seekNext(e){for(;++e<this.len&&!this.tests[e];);return e}seekPrev(e){for(;--e>=0&&!this.tests[e];);return e}shiftL(e,t){let i,r;if(!(e<0)){for(i=e,r=this.seekNext(t);i<this.len;i++)if(this.tests[i]){if(!(r<this.len&&this.tests[i].test(this.buffer[r])))break;this.buffer[i]=this.buffer[r],this.buffer[r]=this.getPlaceholder(r),r=this.seekNext(r)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,e))}}shiftR(e){let t,i,r,s;for(t=e,i=this.getPlaceholder(e);t<this.len;t++)if(this.tests[t]){if(r=this.seekNext(t),s=this.buffer[t],this.buffer[t]=i,!(r<this.len&&this.tests[r].test(s)))break;i=s}}handleAndroidInput(e){var t=this.input.value,i=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>t.length){for(this.checkVal(!0);i.begin>0&&!this.tests[i.begin-1];)i.begin--;if(0===i.begin)for(;i.begin<this.firstNonMaskPos&&!this.tests[i.begin];)i.begin++;this.caret(i.begin,i.begin)}else{for(this.checkVal(!0);i.begin<this.len&&!this.tests[i.begin];)i.begin++;this.caret(i.begin,i.begin)}this.isCompleted()?this.isInvalid=!1:(this.isInvalid=!0,this.formControl.updateValueAndValidity())}onBlur(e){if(this.focus=!1,this.checkVal(),this.updateModel(e),this.updateFilledState(),this.input.value!=this.focusText){let t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.input.dispatchEvent(t);let i=this.input.value;this.formControl.setValue(this.config.valueWithMask?i:this.getUnmaskedValue()),this.input.value=i}}onKeyDown(e){let i,r,s,t=e.which||e.keyCode;this.oldVal=this.input.value;let a=!!this.config.minLength&&this.isCompleted(this.minLength+1);8===t||46===t?(i=this.caret(),r=i.begin,s=i.end,s-r==0&&(r=46!==t?this.seekPrev(r):s=this.seekNext(r-1),s=46===t?this.seekNext(s):s),this.clearBuffer(r,s),this.shiftL(r,s-1),this.setControlValue(e,!1,a),this.updateModel(e),e.preventDefault()):13===t?(this.onBlur(e),this.setControlValue(e,!1,a),this.updateModel(e)):27===t&&(this.input.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(e),this.setControlValue(e,!1,a),e.preventDefault())}onKeyPress(e){var r,s,o,a,t=e.which||e.keyCode,i=this.caret();e.ctrlKey||e.altKey||e.metaKey||t<32||(t&&13!==t&&(i.end-i.begin!=0&&(this.clearBuffer(i.begin,i.end),this.shiftL(i.begin,i.end-1)),(r=this.seekNext(i.begin-1))<this.len&&(s=String.fromCharCode(t),this.tests[r].test(s)&&(this.shiftR(r),this.buffer[r]=s,this.writeBuffer(),o=this.seekNext(r),this.caret(o),i.begin<=this.lastRequiredNonMaskPos&&(a=this.isCompleted()))),e.preventDefault()),this.updateModel(e),void 0===a&&(a=this.isCompleted()),this.setControlValue(e,a,!!this.config.minLength&&this.isCompleted(this.minLength)))}clearBuffer(e,t){let i;for(i=e;i<t&&i<this.len;i++)this.tests[i]&&(this.buffer[i]=this.getPlaceholder(i))}writeBuffer(){this.input.value=this.buffer.join("")}checkVal(e){let r,s,o,t=this.input.value,i=-1;for(r=0,o=0;r<this.len;r++)if(this.tests[r]){for(this.buffer[r]=this.getPlaceholder(r);o++<t.length;)if(s=t.charAt(o-1),this.tests[r].test(s)){this.buffer[r]=s,i=r;break}if(o>t.length){this.clearBuffer(r+1,this.len);break}}else this.buffer[r]===t.charAt(o)&&o++,r<this.partialPosition&&(i=r);return e?this.writeBuffer():!(i+1<this.partialPosition)||this.config.minLength&&i>=this.minLength?(this.writeBuffer(),this.input.value=this.input.value.substring(0,i+1)):this.autoClear||this.buffer.join("")===this.defaultBuffer?this.isInvalid=!0:(this.isInvalid=!0,this.writeBuffer()),this.partialPosition?r:this.firstNonMaskPos}onFocus(e){let t;this.focus=!0,clearTimeout(this.caretTimeoutId),this.focusText=this.input.value,t=this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.input===document.activeElement&&(this.writeBuffer(),t==this.mask.replace("?","").length?this.caret(0,t):this.caret(t),this.updateFilledState())},10)}onInput(e){this.androidChrome?this.handleAndroidInput(e):this.handleInputChange(e)}setControlValue(e,t,i){this.isInvalid=i?!i:!t;let r=this.input.value,s="";this.isInvalid||(s=this.config.valueWithMask?r:this.getUnmaskedValue()),this.formControl.setValue(s),this.oldValue=this.input.value=r,t||this.onFocus(e)}handleInputChange(e){setTimeout(()=>{var t=this.checkVal(!0);this.caret(t),this.updateModel(e),this.setControlValue(e,this.isCompleted())},0)}getUnmaskedValue(){let e=[];for(let t=0;t<this.buffer.length;t++){let i=this.buffer[t];this.tests[t]&&i!=this.getPlaceholder(t)&&e.push(i)}return e.join("")}updateModel(e){}updateFilledState(){this.filled=this.input&&""!=this.input.value}onDestroy(){let e=this.eventListeners.length;for(var t=0;t<e;t++)this.eventListeners[0](),this.eventListeners.splice(0,1);this.eventListeners=[]}}const pY={provide:sr,useExisting:_n(()=>vY),multi:!0},gY=["required","notEmpty","alpha","alphaNumeric","ascii","dataUri","digit","email","even","hexColor","json","latitude","latLong","leapYear","longitude","lowerCase","mac","odd","port","primeNumber","time","upperCase","url","unique","cusip","gird"],a0="numeric";let vY=(()=>{class n extends hY{constructor(t,i,r){super(),this.elementRef=t,this.renderer=i,this.decimalProvider=r,this.eventListeners=[],this.isNumericSubscribed=!1,this.isFocusCalled=!1,this.isMasked=!1,this.element=t.nativeElement,this.setEventName()}set validationControls(t){this.controls=t}get validationControls(){return this.controls}ngOnInit(){let t=[];Object.keys(gs).forEach(i=>{(this[`rx${i}`]||-1!=gY.indexOf(i)&&""==this[`rx${i}`])&&(t.push(gs[i](this[`rx${i}`])),this.name&&(!this.formControlName||!this.formControl)&&vt.configureControl(this.controlConfig,this[`rx${i}`],i))}),t.length>0&&(this.validators=t),this.rxnumeric&&(this.rxnumeric.isFormat||this.rxnumeric.digitsInfo)&&this.bindNumericElementEvent()}blurEvent(){if(!(this.formControl&&this.formControl.errors&&this.formControl.errors.numeric)){if(null!=this.formControl.value){let t=this.decimalProvider.transFormDecimal(this.formControl.value,this.rxnumeric.digitsInfo,this.rxnumeric.persistZero);t=this.rxnumeric.isFormat?t:this.decimalProvider.replacer(t),this.setValueOnElement(t)}this.isFocusCalled=!1}}bindNumericElementEvent(t){t&&(this.rxnumeric=t);let i=this.renderer.listen(this.element,"blur",this.blurEvent.bind(this));this.eventListeners.push(i),i=this.renderer.listen(this.element,"focus",r=>{if(this.isFocusCalled=!0,!(this.formControl&&this.formControl.errors&&this.formControl.errors.numeric)&&null!=this.formControl.value){let s=this.decimalProvider.replacer(this.element.value);this.setValueOnElement(s)}}),this.eventListeners.push(i)}bindValueChangeEvent(){if(""!=this.eventName){let t=this.renderer.listen(this.element,this.eventName,()=>{Object.keys(this.validationControls).forEach(i=>{this.validationControls[i].updateValueAndValidity()})});this.eventListeners.push(t)}}subscribeNumericFormatter(){this.formControl[hi]&&this.formControl[hi][a0]&&(this.formControl[hi][a0].isFormat||this.formControl[hi][a0].digitsInfo)&&(this.isNumericSubscribed||(this.bindNumericElementEvent(this.formControl[hi][a0]),this.isNumericSubscribed=!0),!this.isFocusCalled&&lt.isNotBlank(this.formControl.value)&&this.blurEvent())}subscribeMaskValidator(){if(this.formControl[hi]&&this.formControl[hi].mask&&!this.isMasked){let t=this.formControl[hi].mask;this.maskProvider=new fY(this.element,t.mask,this.renderer,this.formControl,t),this.isMasked=!0}}setValueOnElement(t){this.renderer.setProperty(this.element,"value",t)}setTemplateValidators(t){for(let i in t[hi])this[i]=t[hi][i];delete t[e0],delete t[hi],this.ngOnInit()}updateOnElementClass(t){var i="";return function(r){i&&t.classList.remove(i),r&&t.classList.add(r),i=r}}setValidatorConfig(t){if(!this.formControl){this.formControl=t;let i=this.formControl;i.updateOnElementClass&&(i.updateOnElementClass=this.updateOnElementClass(this.element))}this.subscribeMaskValidator(),this.subscribeNumericFormatter(),t[e0]&&this.setTemplateValidators(t),t[dm]&&(this.conditionalValidator=t[dm],delete t[dm])}validate(t){return this.setValidatorConfig(t),this.conditionalValidator&&this.conditionalValidator(t),this.isProcessed||this.setModelConfig(t),this.validators&&this.validators.length>0||this.maskProvider?this.validation(t):null}ngOnDestroy(){this.controls=void 0;let t=this.eventListeners.length;for(var i=0;i<t;i++)this.eventListeners[0](),this.eventListeners.splice(0,1);this.eventListeners=[],this.maskProvider&&this.maskProvider.onDestroy()}}return n.\u0275fac=function(t){return new(t||n)(L(yn),L(da),L(aL))},n.\u0275dir=Ne({type:n,selectors:[["","ngModel",""],["","formControlName",""],["","formControl",""]],inputs:{rxnumeric:"rxnumeric",rxalpha:"rxalpha",rxalphaNumeric:"rxalphaNumeric",rxascii:"rxascii",rxcompare:"rxcompare",rxcompose:"rxcompose",rxcontains:"rxcontains",rxcreditCard:"rxcreditCard",rxdataUri:"rxdataUri",rxdifferent:"rxdifferent",rxdigit:"rxdigit",rxemail:"rxemail",rxendsWith:"rxendsWith",rxeven:"rxeven",rxextension:"rxextension",rxfactor:"rxfactor",rxfileSize:"rxfileSize",rxgreaterThanEqualTo:"rxgreaterThanEqualTo",rxgreaterThan:"rxgreaterThan",rxhexColor:"rxhexColor",rxjson:"rxjson",rxlatitude:"rxlatitude",rxlatLong:"rxlatLong",rxleapYear:"rxleapYear",rxlessThan:"rxlessThan",rxlessThanEqualTo:"rxlessThanEqualTo",rxlongitude:"rxlongitude",rxlowerCase:"rxlowerCase",rxmac:"rxmac",rxmaxDate:"rxmaxDate",rxmaxLength:"rxmaxLength",rxmaxNumber:"rxmaxNumber",rxminDate:"rxminDate",rxminLength:"rxminLength",rxminNumber:"rxminNumber",rxodd:"rxodd",rxpassword:"rxpassword",rxport:"rxport",rxprimeNumber:"rxprimeNumber",rxrequired:"rxrequired",rxrange:"rxrange",rxrule:"rxrule",rxstartsWith:"rxstartsWith",rxtime:"rxtime",rxupperCase:"rxupperCase",rxurl:"rxurl",rxunique:"rxunique",rxnotEmpty:"rxnotEmpty",rxcusip:"rxcusip",rxgrid:"rxgrid",rxdate:"rxdate"},features:[Bn([pY]),jt]}),n})();function Ze(n,e,t){var i=(r,s)=>"string"!=typeof r?(n&&(!r.validatorConfig||!r.validatorConfig[e])&&vt.configureControl(r,n,e),t(r)):(_t.init(s,0,r,e,n,!1),null);return Object.defineProperty(i,"name",{value:Jy}),i}function on(n,e,t){var i=(r,s)=>"string"!=typeof r?(n&&(!r.validatorConfig||!r.validatorConfig[e])&&vt.configureControl(r,n,e),t(r)):(_t.init(s,0,r,e,n,!0),null);return Object.defineProperty(i,"name",{value:Jy}),i}function EY(n){return Ze(n,b.alpha,$N(n))}function DY(n){return on(n,b.alpha,He(n,b.alpha))}function SY(n){return Ze(n,b.allOf,T2(n))}function AY(n){return on(n,b.allOf,He(n,b.allOf))}function xY(n){return Ze(n,b.alphaNumeric,zN(n))}function MY(n){return on(n,b.alphaNumeric,He(n,b.alphaNumeric))}function TY(n){return Ze(n,b.choice,C2(n))}function IY(n){return on(n,b.choice,He(n,b.choice))}function OY(n){return Ze(n,b.compare,GN(n))}function PY(n){return Ze(n,b.contains,WN(n))}function kY(n){return on(n,b.contains,He(n,b.contains))}function RY(n){return Ze(n,b.creditCard,qN(n))}function FY(n){return on(n,b.creditCard,He(n,b.creditCard))}function NY(n){return Ze(n,b.different,E2(n))}function LY(n){return Ze(n,b.digit,KN(n))}function VY(n){return Ze(n,b.email,YN(n))}function BY(n){return Ze(n,b.even,S2(n))}function jY(n){return Ze(n,b.factor,x2(n))}function HY(n){return on(n,b.factor,He(n,b.factor))}function UY(n){return Ze(n,b.greaterThanEqualTo,b2(n))}function $Y(n){return on(n,b.greaterThanEqualTo,He(n,b.greaterThanEqualTo))}function zY(n){return Ze(n,b.greaterThan,v2(n))}function GY(n){return on(n,b.greaterThan,He(n,b.greaterThan))}function WY(n){return Ze(n,b.hexColor,QN(n))}function qY(n){return Ze(n,b.json,g2(n))}function ZY(n){return Ze(n,b.leapYear,M2(n))}function KY(n){return Ze(n,b.lessThanEqualTo,y2(n))}function YY(n){return on(n,b.lessThanEqualTo,He(n,b.lessThanEqualTo))}function QY(n){return Ze(n,b.lessThan,w2(n))}function XY(n){return on(n,b.lessThan,He(n,b.lessThan))}function JY(n){return Ze(n,b.lowerCase,XN(n))}function eQ(n){return Ze(n,b.mac,P2(n))}function tQ(n){return Ze(n,b.maxDate,t2(n))}function nQ(n){return on(n,b.maxDate,He(n,b.maxDate))}function iQ(n){return Ze(n,b.maxLength,n2(n))}function rQ(n){return on(n,b.maxLength,He(n,b.maxLength))}function sQ(n){return Ze(n,b.maxNumber,r2(n))}function oQ(n){return on(n,b.maxNumber,He(n,b.maxNumber))}function aQ(n){return Ze(n,b.minDate,s2(n))}function lQ(n){return on(n,b.minDate,He(n,b.minDate))}function cQ(n){return Ze(n,b.minLength,o2(n))}function uQ(n){return on(n,b.minLength,He(n,b.minLength))}function dQ(n){return Ze(n,b.minNumber,a2(n))}function hQ(n){return on(n,b.minNumber,He(n,b.minNumber))}function fQ(n){return Ze(n,b.noneOf,O2(n))}function pQ(n){return on(n,b.noneOf,He(n,b.noneOf))}function gQ(n){return Ze(n,b.numeric,D2(n))}function mQ(n){return on(n,b.numeric,He(n,b.numeric))}function _Q(n){return Ze(n,b.odd,A2(n))}function vQ(n){return Ze(n,b.oneOf,I2(n))}function bQ(n){return on(n,b.oneOf,He(n,b.oneOf))}function yQ(n){return Ze(n,b.password,l2(n))}function wQ(n){return on(n,b.password,He(n,b.password))}function CQ(n){return Ze(n,b.pattern,h2(n))}function EQ(n){return on(n,b.pattern,He(n,b.pattern))}function DQ(n){return Ze(n,b.range,c2(n))}function SQ(n){return on(n,b.range,He(n,b.range))}function AQ(n){return Ze(n,b.required,d2(n))}function xQ(n){return Ze(n,b.time,f2(n))}function MQ(n){return on(n,b.time,He(n,b.time))}function TQ(n){return Ze(n,b.upperCase,u2(n))}function IQ(n){return Ze(n,b.url,p2(n))}function OQ(n){return on(n,b.url,He(n,b.url))}function PQ(n){return Ze(n,b.ascii,k2(n))}function kQ(n){return Ze(n,b.dataUri,R2(n))}function RQ(n){return Ze(n,b.port,F2(n))}function FQ(n){return Ze(n,b.latLong,N2(n))}function NQ(n){return Ze(n,b.extension,e=>null)}function LQ(n){return on(n,b.extension,He(n,b.extension))}function VQ(n){return Ze(n,b.fileSize,e=>null)}function BQ(n){return on(n,b.fileSize,He(n,b.fileSize))}function jQ(n){return Ze(n,b.endsWith,L2(n))}function HQ(n){return on(n,b.endsWith,He(n,b.endsWith))}function UQ(n){return Ze(n,b.startsWithWith,V2(n))}function $Q(n){return on(n,b.startsWithWith,He(n,b.startsWith))}function zQ(n){return Ze(n,b.primeNumber,B2(n))}function GQ(n){return Ze(n,b.latitude,j2(n))}function WQ(n){return Ze(n,b.longitude,H2(n))}function qQ(n){return Ze(n,b.compose,U2(n))}function ZQ(n){return Ze(n,b.file,e=>null)}function KQ(n){return on(n,b.file,He(n,b.file))}function YQ(n){return Ze(n,b.custom,function rY(n){return e=>{let t=ct(n,e);if(ai.ProcessRule(e,t)){const i=vt.getParentObjectValue(e),r=e.parent?e.parent.value:void 0;let s=null;for(let o of t.customRules)if(s=o(i,r,t.additionalValue),s)break;if(s)return s}return ce.null()}}(n))}function QQ(n){return on(n,b.custom,He(n,b.custom))}function XQ(n){return Ze(n,b.unique,$2(n))}function JQ(n){return Ze(n,b.image,e=>null)}function eX(n){return on(n,b.image,He(n,b.image))}function tX(n){return Ze(n,b.notEmpty,z2(n))}function nX(n){return Ze(n,b.ip,q2(n))}function iX(n){return on(n,b.ip,He(n,b.ip))}function rX(n){return Ze(n,b.cusip,Z2(n))}function sX(n){return Ze(n,b.grid,K2(n))}function oX(n){return Ze(n,b.date,Y2(n))}function aX(n){return on(n,b.date,He(n,b.date))}function lX(n){return Ze(n,b.and,function lL(n){return e=>{let t=ct(n,e);if(xn.pass(e,t)){let r=Object.keys(t.validation),s=!1;for(var i of r)if(s="boolean"==typeof t.validation[i]?gs[i]()(e):gs[i](t.validation[i])(e),s)break;if(s)return ce.toJson(b.and,t,[e.value])}return ce.null()}}(n))}function cX(n){return Ze(n,b.or,function cL(n){return e=>{let t=ct(n,e);if(xn.pass(e,t)){let r=Object.keys(t.validation),s=!1;for(var i of r)if(s="boolean"==typeof t.validation[i]?gs[i]()(e):gs[i](t.validation[i])(e),!s)break;if(s)return ce.toJson(b.or,t,[e.value])}return ce.null()}}(n))}function uX(n){return Ze(n,b.not,function uL(n){return e=>{let t=ct(n,e);if(xn.pass(e,t)){let r=Object.keys(t.validation),s=!1;for(var i of r)if(s="boolean"==typeof t.validation[i]?gs[i]()(e):gs[i](t.validation[i])(e),!s)break;if(!s)return ce.toJson(b.not,t,[e.value])}return ce.null()}}(n))}function dX(n){return Ze(n,b.minTime,J2(n))}function hX(n){return on(n,b.minTime,He(n,b.minTime))}function fX(n){return Ze(n,b.maxTime,eL(n))}function pX(n){return on(n,b.maxTime,He(n,b.maxTime))}function gX(n){return Ze(n,b.requiredTrue,tL(n))}function mX(n){return Ze(n,b.mask,nL(n))}function _X(n){return Ze(n,b.iban,rL(n))}function vX(n){return on(n,b.iban,He(n,b.iban))}let bX=(()=>{class n{}return n.alpha=EY,n.allOf=SY,n.alphaNumeric=xY,n.choice=TY,n.compare=OY,n.contains=PY,n.creditCard=RY,n.different=NY,n.digit=LY,n.email=VY,n.even=BY,n.factor=jY,n.greaterThanEqualTo=UY,n.greaterThan=zY,n.hexColor=WY,n.json=qY,n.leapYear=ZY,n.lessThanEqualTo=KY,n.lessThan=QY,n.lowerCase=JY,n.mac=eQ,n.maxDate=tQ,n.maxLength=iQ,n.maxNumber=sQ,n.minDate=aQ,n.minLength=cQ,n.minNumber=dQ,n.noneOf=fQ,n.numeric=gQ,n.odd=_Q,n.oneOf=vQ,n.password=yQ,n.pattern=CQ,n.range=DQ,n.required=AQ,n.time=xQ,n.upperCase=TQ,n.url=IQ,n.ascii=PQ,n.dataUri=kQ,n.port=RQ,n.latLong=FQ,n.extension=NQ,n.fileSize=VQ,n.endsWith=jQ,n.startsWith=UQ,n.primeNumber=zQ,n.latitude=GQ,n.longitude=WQ,n.compose=qQ,n.file=ZQ,n.custom=YQ,n.unique=XQ,n.image=JQ,n.notEmpty=tX,n.ip=nX,n.cusip=rX,n.grid=sX,n.date=oX,n.and=lX,n.or=cX,n.not=uX,n.minTime=dX,n.maxTime=fX,n.requiredTrue=gX,n.mask=mX,n.iban=_X,n.alphaAsync=DY,n.alphaNumericAsync=MY,n.allOfAsync=AY,n.choiceAsync=IY,n.containsAsync=kY,n.creditCardAsync=FY,n.customAsync=QQ,n.dateAsync=aX,n.endsWithAsync=HQ,n.extensionAsync=LQ,n.factorAsync=HY,n.fileSizeAsync=BQ,n.fileAsync=KQ,n.greaterThanEqualToAsync=$Y,n.greaterThanAsync=GY,n.imageAsync=eX,n.ipAsync=iX,n.lessThanEqualToAsync=YY,n.lessThanAsync=XY,n.maxDateAsync=nQ,n.maxLengthAsync=rQ,n.maxNumberAsync=oQ,n.maxTimeAsync=pX,n.minDateAsync=lQ,n.minLengthAsync=uQ,n.minNumberAsync=hQ,n.minTimeAsync=hX,n.noneOfAsync=pQ,n.numericAsync=mQ,n.oneOfAsync=bQ,n.passwordAsync=wQ,n.patternAsync=EQ,n.rangeAsync=SQ,n.startsWithAsync=$Q,n.timeAsync=MQ,n.urlAsync=OQ,n.ibanAsync=vX,n})();function yX(n,e){1&n&&(D(0,"small"),C(1,"URL is unexpected for this source!"),S())}let wX=(()=>{class n{constructor(t,i){this.router=t,this.stateService=i,this.type="gallica",this.identifier="12148/btv1b8454675g",this.file=null,this.invalid=!1,this.selectionForm=new On({source:new An("gallica",to.required),resourceURL:new An("",[to.required,bX.url()])}),this.loadMEIForm=new On({fileInput:new An("",to.required)})}ngOnInit(){}submit(){console.debug("Submit");let r,t=this.selectionForm.controls.source.value,i=this.selectionForm.controls.resourceURL.value;switch(this.invalid=!1,t){case"gallica":if(console.debug("gallica"),!VR.test(i))return console.debug("false"),void(this.invalid=!0);console.debug("true"),r=i.match(VR)[1];break;case"ecodices":if(jR.test(i)){console.debug("Regular ecodices");let s=i.match(jR);r=s[1]+"-"+s[2]}else{if(!Py.test(i))return void(this.invalid=!0);console.debug("IIIF ecodices"),r=i.match(Py)[1]}break;case"diamm":if(!ky.test(i))return void(this.invalid=!0);r=i.match(ky)[1];break;case"iiif":console.debug("iiif case"),HR.test(i)&&(console.debug("generic iiif"),r=encodeURIComponent(i));break;default:return console.debug(t),void(this.invalid=!0)}console.debug(r),this.router.navigate(["/input",t,encodeURIComponent(r)])}meiSubmit(){if(console.debug("MEI Submit"),console.debug(this.file),null===this.file)return;let t=new FileReader;t.addEventListener("load",()=>{let i=t.result,s=(new DOMParser).parseFromString(i,"application/xml"),o=Oy.fromXML(s);console.debug(o);let c,d,a=o.metadata.sourceIRI;if(BR.test(a))c="gallica",d=a.match(BR)[1];else if(Py.test(a))c="ecodices",d=a.match(Py)[1];else if(HR.test(a))c="iiif",d=encodeURIComponent(a);else{if(!ky.test(a))return void window.alert("Sorry! This seems to be a valid file, but this IIIF manifest cannot be loaded.");c="diamm",d=a.match(ky)[1]}this.stateService.mei=o,this.router.navigate(["/input",c,encodeURIComponent(d)])}),t.readAsText(this.file)}onFileChange(t){this.file=t.target.files[0]}get encodedIdSample(){return encodeURIComponent(this.identifier)}}return n.\u0275fac=function(t){return new(t||n)(L(gr),L(ic))},n.\u0275cmp=Cn({type:n,selectors:[["app-select-document"]],decls:148,vars:5,consts:[["id","document-select"],["id","load-manuscript"],[3,"formGroup","submit"],[2,"display","block"],[1,"label"],["formControlName","source"],["value","gallica","selected",""],["value","ecodices"],["value","diamm"],["value","iiif"],["type","url","formControlName","resourceURL"],[4,"ngIf"],["type","submit","mat-stroked-button","",3,"disabled"],["id","load-mei"],["type","file","formControlName","fileInput","accept","application/mei+xml, application/xml, .mei, .xml",3,"change"],["id","prototype-message"],["href","https://www.neh.gov","target","_blank"],["href","https://drive.google.com/file/d/1GfVzleT_NtvJMOXMv5OYib4a6W1LAUlQ/view?usp=sharing"],["href","https://measuringpolyphony.org","target","_blank"],["href","https://www.youtube.com/channel/UCWB5WRs4LjKpYB_-J2Sb03Q/videos","target","_blank"],["href","https://www.youtube.com/playlist?list=PLLVDNsvw7fOdM3O7nsTR4rVXKLhmQLxkn","target","_blank"],["href","https://www.youtube.com/playlist?list=PLLVDNsvw7fOdFLZz6c7dOvmD3YSUHdRWm","target","_blank"],["href","https://www.youtube.com/playlist?list=PLLVDNsvw7fOd-zYNODauvioZ_45ocwk1Y","target","_blank"],["href","https://drive.google.com/file/d/1y86g5-ESfeeyFyCXsyfpI_oTgF8rF_9_/view?usp=sharing","target","_blank"],["href","https://bit.ly/3cBnyrk","target","_blank"]],template:function(t,i){1&t&&(D(0,"div",0)(1,"div",1)(2,"h1"),C(3,"Load a manuscript"),S(),D(4,"form",2),We("submit",function(){return i.submit()}),D(5,"div",3)(6,"label",4),C(7,"Manuscript Repository:\xa0 "),D(8,"select",5)(9,"option",6),C(10,"Gallica"),S(),D(11,"option",7),C(12,"eCodices"),S(),D(13,"option",8),C(14,"DIAMM"),S(),D(15,"option",9),C(16,"Generic IIIF"),S()()(),C(17," \xa0 "),D(18,"label",4),C(19,"URL:\xa0 "),At(20,"input",10),S(),Yn(21,yX,2,0,"small",11),S(),D(22,"div")(23,"button",12),C(24,"Submit"),S()()(),At(25,"br"),D(26,"p"),C(27," For example, to transcribe a piece from the famous "),D(28,"em"),C(29,"Roman de Fauvel"),S(),C(30," manuscript, choose "),D(31,"em"),C(32,"Gallica"),S(),C(33," in the dropdown and paste this URL: "),At(34,"br"),D(35,"code"),C(36,"https://gallica.bnf.fr/ark:/12148/btv1b8454675g"),S()()(),D(37,"div",13)(38,"h1"),C(39,"Load an .mei file"),S(),D(40,"form",2),We("submit",function(){return i.meiSubmit()}),D(41,"div",3)(42,"label",4),C(43,"Compatible Parts-MEI File:\xa0 "),D(44,"input",14),We("change",function(s){return i.onFileChange(s)}),S()()(),D(45,"div")(46,"button",12),C(47,"Load File"),S()()()()(),D(48,"div",15)(49,"p"),C(50," The Measuring Polyphony Music Editor (the MP Editor), funded by the "),D(51,"a",16),C(52,"National Endowment for the Humanities"),S(),C(53,", is a prototype web application that allows users with no expertise in music encoding to transcribe and digitally encode transcriptions of polyphony in mensural notation, and create links between these music transcriptions to zones of the digital images of the original medieval manuscripts. To download a White Paper on the MP Editor, click "),D(54,"a",17),C(55,"here"),S(),C(56,". For more information about the Measuring Polyphony project, click "),D(57,"a",18),C(58,"here"),S(),C(59,". "),S(),D(60,"h2"),C(61,"Project Team"),S(),D(62,"ul")(63,"li"),C(64,"Karen Desmond, Brandeis University, Massachusetts, USA: Principal Investigator & Project Director"),S(),D(65,"li"),C(66,"Juliette Regimbal, McGill University, Canada: Prototype developer"),S(),D(67,"li"),C(68,"Martha Thomae, McGill University, Canada: Prototype developer"),S(),D(69,"li"),C(70,"Andrew Hankinson, RISM, Switzerland: Consultant on diva.js, MEI"),S(),D(71,"li"),C(72,"Laurent Pugin, University of Bern & RISM, Switzerland: Consultant on Verovio, MEI"),S(),D(73,"li"),C(74,"Craig Sapp, Stanford University, California, USA: Consultant on Humdrum, MEI"),S()(),D(75,"h2"),C(76,"Student Research Assistants"),S(),D(77,"ul")(78,"li"),C(79,"Caelan Gadweh-Meaden, Brandeis University, USA"),S(),D(80,"li"),C(81,"Zen Kuriyama, Brandeis University, USA"),S(),D(82,"li"),C(83,"Daniel Shapiro, Brandeis University, USA"),S()(),D(84,"p"),C(85,"With thanks also to Julie Cumming and her music palaeography students at McGill University - Christina Colanduoni, Mayu Egan, Genevi\xe8ve Gates-Panneton, Namgon Lee, and Celia Morin - for testing the MP Editor in December 2020."),S(),D(86,"h2"),C(87,"Advisory Board"),S(),D(88,"ul")(89,"li"),C(90,"Julie Cumming, McGill University, Canada"),S(),D(91,"li"),C(92,"Julia Craig McFeely, University of Oxford, UK"),S(),D(93,"li"),C(94,"Giuliano DiBacco, Indiana University, USA"),S(),D(95,"li"),C(96,"Ichiro Fujinaga, McGill University, Canada"),S(),D(97,"li"),C(98,"Richard Freedman, Haverford College, USA"),S(),D(99,"li"),C(100,"David Lewis, Goldsmiths University of London, UK"),S(),D(101,"li"),C(102,"Anna Zayaruznaya, Yale University, USA"),S()(),At(103,"p")(104,"p"),D(105,"h2"),C(106,"Help and Training Materials"),S(),D(107,"p"),C(108,"The "),D(109,"a",19),C(110,"Measuring Polyphony YouTube channel"),S(),C(111," has in-depth informational videos on using the MP Editor as well as short videos explaining individual functions of the editor. The Measuring Polyphony YouTube channel is organized into playlists that contain comprehensive training videos on how to use the MP editor:"),S(),D(112,"ul")(113,"li"),C(114,"(1) "),D(115,"a",20),C(116,"Video summaries"),S(),C(117," (1-3 mins) of how to use the MP Editor"),S(),D(118,"li"),C(119,"(2) "),D(120,"a",21),C(121,"Short videos"),S(),C(122," (10-20 seconds) on specific features"),S(),D(123,"li"),C(124,"(3) "),D(125,"a",22),C(126,"A video series"),S(),C(127," that takes you step-by-step through a transcription of the song "),D(128,"i"),C(129,"Dous viaire gracieus"),S(),C(130," by the fourteenth-century composer Guillaume de Machaut, and which can be used along with this PDF training document ("),D(131,"a",23),C(132,"download PDF"),S(),C(133,")"),S()(),D(134,"p"),C(135,"There are also detailed help pages within the MP Editor that also link to short videos with examples. These help pages are located within the tabs at the top of the Music Input and Score Editor interfaces:"),S(),D(136,"ul")(137,"li"),C(138,"General Help (Navigation, Metadata, Staves, Saving)"),S(),D(139,"li"),C(140,"Music Input Help (Information on inputting notation, e.g., clefs, rhythm, pitches, Etc.)"),S(),D(141,"li"),C(142,"Score Editor Help (Small edits of pitch and rhythm, Score display preferences, Editorial Mode, Downloading your work)"),S()(),D(143,"p"),C(144,"To report bugs, please use this "),D(145,"a",24),C(146,"form (https://bit.ly/3cBnyrk)"),S(),C(147,". Thank you. "),S()()),2&t&&(Xe(4),Ye("formGroup",i.selectionForm),Xe(17),Ye("ngIf",i.invalid),Xe(2),Ye("disabled",!i.selectionForm.valid),Xe(17),Ye("formGroup",i.loadMEIForm),Xe(6),Ye("disabled",!i.loadMEIForm.valid))},directives:[Vb,Mb,yh,pu,vg,Eg,Dg,Sg,vh,hu,Ih],styles:["#document-select[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}#document-select[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{grid-column:2;display:grid;padding-bottom:5em}#document-select[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{justify-self:center}#prototype-message[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr)}#prototype-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{grid-column:2 / 4;text-align:center}#prototype-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{grid-column:2 / 4;text-align:center;font-size:1.625rem}#prototype-message[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{grid-column:2 / 4;text-align:center;list-style-type:none}#prototype-message[_ngcontent-%COMP%]   #funder-logos[_ngcontent-%COMP%]{grid-column:4;display:flex;margin-left:auto;padding-right:1rem}#load-manuscript[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}form[_ngcontent-%COMP%]{display:grid}form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{justify-self:center}a[_ngcontent-%COMP%]{margin-top:2em}h1[_ngcontent-%COMP%]{font-size:1.625rem}.funder-logo[_ngcontent-%COMP%]{height:4rem}"]}),n})(),CX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jt({imports:[[Qa,wh,nA,iA,tA]]}),n})(),pL=(()=>{class n{constructor(){this._staffLoc=new qt}getStaffLocation(){return this._staffLoc}set staffLocation(t){this._staffLoc.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EX=(()=>{class n{constructor(t){this.staffService=t,this.pageToCanvasMap=new Map}ngOnInit(){this.diva=new Lu("diva-score-wrapper",{objectData:this.iiifManifest}),Lu.Events.subscribe("ManifestDidLoad",this.parseCanvases.bind(this),this.diva.settings.ID),Lu.Events.subscribe("ZoomLevelDidChange",this.handleZoom.bind(this),this.diva.settings.ID),this.staffService.getStaffLocation().subscribe(([t,i])=>{this.iri=t,this.bbox=i,console.debug(t),console.debug(i),this.redraw()})}handleZoom(){new Promise(t=>{document.getElementById("score-editor-container").style.display="none",setTimeout(t,this.diva.settings.zoomDuration+100)}).then(()=>{this.redraw(),document.getElementById("score-editor-container").style.display=""})}redraw(){const t=this.pageToCanvasMap.get(this.iri);if(void 0===t)return;this.diva.getCurrentPageIndices().includes(t)||this.diva.gotoPageByIndex(t);const i=this.diva.settings.innerElement,r=this.diva.getPageDimensionsAtCurrentZoomLevel(t),s=this.diva.settings.viewHandler._viewerCore.getPageRegion(t,{includePadding:!0,incorporateViewport:!0}),o=getComputedStyle(i,null).getPropertyValue("margin-left");let a=document.getElementById("score-editor-container");null===a&&(a=document.createElement("div"),a.id="score-editor-container",i.appendChild(a));const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=this.diva.getPageDimensionsAtZoomLevel(t,Number.MAX_SAFE_INTEGER);for(c.setAttribute("width",r.width.toString()),c.setAttribute("height",r.height.toString()),c.setAttribute("viewBox","0 0 "+d.width+" "+d.height),a.style.position="absolute",a.style.top=`${s.top}px`,a.style.left=s.left-parseInt(o)+"px";null!==a.firstChild;)a.firstChild.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.setAttribute("x",this.bbox.ulx),f.setAttribute("y",this.bbox.uly),f.setAttribute("width",(Number(this.bbox.lrx)-Number(this.bbox.ulx)).toString()),f.setAttribute("height",(Number(this.bbox.lry)-Number(this.bbox.uly)).toString()),f.classList.add("zoneRect"),c.appendChild(f),a.appendChild(c)}parseCanvases(t){for(const i of t.sequences)for(const r of i.canvases)this.pageToCanvasMap.set(r["@id"],i.canvases.indexOf(r))}ngOnDestroy(){try{this.diva.deactivate(),this.diva.destroy()}catch(t){console.warn(t)}}}return n.\u0275fac=function(t){return new(t||n)(L(pL))},n.\u0275cmp=Cn({type:n,selectors:[["app-score-diva-view"]],inputs:{iiifManifest:"iiifManifest"},decls:1,vars:0,consts:[["id","diva-score-wrapper"]],template:function(t,i){1&t&&At(0,"div",0)},styles:['@import"https://unpkg.com/diva.js@6.0.2/build/diva.css";rect.selectedZone[_ngcontent-%COMP%]{stroke-dasharray:none;fill-opacity:0;stroke-width:.45em;stroke:#000;opacity:.75;fill:none}']}),n})(),gL=(()=>{class n{constructor(){this._parts=null,this._score=null,this._partsSubject=new qt,this._scoreSubject=new qt}get parts(){return this._parts}set parts(t){this._parts=t,this._partsSubject.next(this._parts)}get score(){return this._score}set score(t){this._score=t,this._scoreSubject.next(this._score)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DX=(()=>{class n{constructor(t,i,r,s){this.stateService=t,this.route=i,this.router=r,this.doc=s,this.currentDoc=null}ngOnInit(){this.doc._scoreSubject.subscribe(t=>{this.currentDoc=t})}saveFiles(t){if(null!==this.currentDoc){const i=t.target,s=(new XMLSerializer).serializeToString(this.currentDoc),o=um.xml('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n'+s),a=new Blob([o],{type:"application/xml"});i.setAttribute("href",URL.createObjectURL(a)),i.setAttribute("download",(this.stateService.mei.metadata.shortTitle.length>0?this.stateService.mei.metadata.shortTitle:"Untitled")+"_MENSURAL_SCORE.xml")}if(null!=this.stateService.mei&&!this.stateService.editorialMode){const i=document.createElement("a"),s=(new XMLSerializer).serializeToString(this.doc.parts),o=um.xml('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n'+s),a=new Blob([o],{type:"application/xml"});i.setAttribute("href",URL.createObjectURL(a)),i.setAttribute("download",(this.stateService.mei.metadata.shortTitle.length>0?this.stateService.mei.metadata.shortTitle:"Untitled")+"_MENSURAL_PARTS.xml"),i.click()}}goToInputEditor(){if(confirm("Warning: Edits made on this page will be lost. Return to input editor?")){let t=this.route.snapshot.paramMap.get("source"),i=this.route.snapshot.paramMap.get("identifier");this.router.navigate(["/input",t,i])}}copyToClipboard(){if(null!==this.currentDoc){const t=new XMLSerializer,i=um.xml('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n'+t.serializeToString(this.currentDoc));navigator.clipboard.writeText(i).then(()=>{alert("MEI Score Copied!")}).catch(r=>{console.debug(r),alert("Copy failed :(")})}}}return n.\u0275fac=function(t){return new(t||n)(L(ic),L(va),L(gr),L(gL))},n.\u0275cmp=Cn({type:n,selectors:[["app-score-toolbar"]],decls:8,vars:0,consts:[[1,"toolbar-container"],["mat-stroked-button","",3,"click"],["mat-stroked-button",""],["download","","type","application/xml",3,"click"]],template:function(t,i){1&t&&(D(0,"div",0)(1,"button",1),We("click",function(){return i.goToInputEditor()}),C(2," Return to Music Input "),S(),D(3,"button",2)(4,"a",3),We("click",function(s){return i.saveFiles(s)}),C(5," Download MEI File(s) "),S()(),D(6,"button",1),We("click",function(){return i.copyToClipboard()}),C(7," Copy MEI Score to Clipboard "),S()())},directives:[Ih],styles:[".toolbar-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-top:.5em;padding-bottom:.5em}"]}),n})();var pm=Ve(960);const SX=["verovio"];function AX(n,e){if(1&n&&(D(0,"option",6),C(1),S()),2&n){const t=e.$implicit;ch("value",t[1]),Xe(1),su(t[0].toLowerCase())}}function xX(n,e){if(1&n){const t=Xs();D(0,"button",7),We("click",function(){return en(t),kt().setEditorialMode()}),C(1," Continue in Editorial Mode "),S()}}const gc=["c","d","e","f","g","a","b"];function Uh(n){n.hasAttribute("xml:id")&&n.setAttribute("xml:id","m-"+(0,jo.v4)());for(let e=0;e<n.children.length;e++)Uh(n.children[e])}let MX=(()=>{class n{constructor(t,i,r){this.stateService=t,this.staffService=i,this.doc=r,this.selectedId=null,this.corrToSicMap=new Map,this.barOptions=Object.entries(Qg),this.dissonanceLabels=!1}ngOnInit(){this.doc.parts=this.stateService.mei.generateXML(),this.doc._scoreSubject.subscribe(t=>{this.update(t)})}update(t){let i;if(this.container.nativeElement.innerHTML="",this.dissonanceLabels)try{let r=rl.meiToHumdrum(t);r=rl.dissonanceInfo(r);const s=this.getDissonantInfo(r);console.debug(s);const o=t.cloneNode(!0),a=o.createNSResolver(null==o.ownerDocument?o.documentElement:o.ownerDocument.documentElement);for(const[d,f]of Object.entries(s)){const p=o.evaluate("//*[@xml:id='"+d+"']",o,a,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;console.debug(p);const _=o.createElementNS(Ae,"verse");_.setAttribute("n","2"),["L","X","Y","Z"].includes(f.toUpperCase())?_.setAttribute("color","#E66200"):_.setAttribute("color","#0000CD");const y=o.createElementNS(Ae,"syl");y.textContent=f,_.appendChild(y),p.appendChild(_)}i=rl.meiToSVG(o,!this.stateService.editorialMode)}catch(r){console.error(r),i=rl.meiToSVG(t,!this.stateService.editorialMode)}else i=rl.meiToSVG(t,!this.stateService.editorialMode);this.container.nativeElement.appendChild(i),this.setSelected()}setEditorialMode(){if(confirm("Edits in editorial mode reflect cases where there is a problem with the manuscript. You cannot exit editorial mode and changes from editorial mode cannot be loaded back into the editor from MEI. A parts file that can be loaded will be downloaded before entering. Do you want to continue?")&&(this.stateService.editorialMode=!0,null!=this.stateService.mei)){const i=(new XMLSerializer).serializeToString(this.doc.parts),r=um.xml('<?xml version="1.0" encoding="UTF-8"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>\n<?xml-model href="https://music-encoding.org/schema/dev/mei-Mensural.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>\n'+i),s=new Blob([r],{type:"application/xml"}),o=document.createElement("a");o.setAttribute("href",URL.createObjectURL(s)),o.setAttribute("download",(this.stateService.mei.metadata.shortTitle.length>0?this.stateService.mei.metadata.shortTitle:"Untitled")+"_MENSURAL_PARTS.xml"),document.body.appendChild(o),o.click(),o.remove()}}setSelected(){if(null!==this.selectedId){Array.from(document.getElementsByClassName("selected")).forEach(t=>{t.classList.remove("selected"),t.setAttribute("fill","")});try{document.getElementById(this.selectedId).classList.add("selected"),document.getElementById(this.selectedId).setAttribute("fill","#d00")}catch(t){return console.debug(t),void(this.selectedId=null)}try{let t=this.selectedId;this.corrToSicMap.has(t)&&(t=this.corrToSicMap.get(t));const i=this.doc.parts.createNSResolver(null==this.doc.parts.ownerDocument?this.doc.parts.documentElement:this.doc.parts.ownerDocument.documentElement),r=()=>"http://www.music-encoding.org/ns/mei",s=this.doc.parts.evaluate("//*[@xml:id='"+t+"']",this.doc.parts,i,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;let o=this.doc.parts.evaluate("./preceding::mei:pb",s,r,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);const a=o.snapshotItem(o.snapshotLength-1);o=this.doc.parts.evaluate("./preceding::mei:sb",s,r,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);const c=o.snapshotItem(o.snapshotLength-1),d="#"===a.getAttribute("facs")[0]?a.getAttribute("facs").substring(1):a.getAttribute("facs"),f="#"===c.getAttribute("facs")[0]?c.getAttribute("facs").substring(1):c.getAttribute("facs");console.debug(f);const p=Array.from(this.doc.parts.getElementsByTagName("surface")).filter(I=>I.getAttribute("xml:id")===d).pop().querySelector("graphic"),_=Array.from(p.children).filter(I=>I.getAttribute("xml:id")===f).pop(),y=p.getAttribute("target"),w={ulx:_.getAttribute("ulx"),uly:_.getAttribute("uly"),lrx:_.getAttribute("lrx"),lry:_.getAttribute("lry")};console.debug(y),this.staffService.staffLocation=[y,w]}catch(t){console.debug(t)}}}ngAfterViewInit(){this.doc.score=this.runScoringUp(this.doc.parts)}handleClick(t){let i=t.target;for(;i;){if("g"===i.nodeName&&(i.classList.contains("note")||i.classList.contains("rest"))){this.selectedId=i.id,this.setSelected();break}i=i.parentElement}}handleKeyPress(t){if(null!==this.selectedId){const r=this.doc.parts.createNSResolver(null==this.doc.parts.ownerDocument?this.doc.parts.documentElement:this.doc.parts.ownerDocument.documentElement),s=this.doc.parts.evaluate("//*[@xml:id='"+this.selectedId+"']",this.doc.parts,r,XPathResult.FIRST_ORDERED_NODE_TYPE,null);if(!s.singleNodeValue)return;let o=s.singleNodeValue;if(this.stateService.editorialMode&&(o=this.ensureCorrElement(o,this.doc.parts)),"note"===o.tagName)switch(t.key){case".":let a=o.nextElementSibling;if(null!==a&&"dot"===a.tagName)o.nextSibling.remove(),o.hasAttribute("dots")&&o.setAttribute("dots","0");else{let p=this.doc.parts.createElementNS("http://www.music-encoding.org/ns/mei","dot");p.setAttribute("xml:id","m-"+(0,jo.v4)()),o.insertAdjacentElement("afterend",p)}break;case"ArrowUp":if(o.hasAttribute("pname")){let p=o.getAttribute("pname"),_=gc.indexOf(p);_+1<gc.length?o.setAttribute("pname",gc[_+1]):(o.setAttribute("pname",gc[0]),o.setAttribute("oct",(parseInt(o.getAttribute("oct"))+1).toString()))}break;case"ArrowDown":if(o.hasAttribute("pname")){let p=o.getAttribute("pname"),_=gc.indexOf(p);_-1>0?o.setAttribute("pname",gc[_-1]):(o.setAttribute("pname",gc[gc.length-1]),o.setAttribute("oct",(parseInt(o.getAttribute("oct"))-1).toString()))}break;case"1":o.setAttribute("dur","semibrevis");break;case"2":o.setAttribute("dur","minima");break;case"4":o.setAttribute("dur","semiminima");break;case"8":o.setAttribute("dur","fusa");break;case"6":o.setAttribute("dur","semifusa");break;case"7":o.setAttribute("dur","maxima");break;case"9":o.setAttribute("dur","longa");break;case"0":o.setAttribute("dur","brevis");break;case"#":o.setAttribute("accid","s");break;case"-":o.setAttribute("accid","f");break;case"n":o.setAttribute("accid","n");break;case"N":o.removeAttribute("accid");break;case"I":const c=o.cloneNode(!0);if(Uh(c),o.nextElementSibling&&"dot"===o.nextElementSibling.tagName){const p=o.nextElementSibling.cloneNode(!0);Uh(p),o.nextElementSibling.insertAdjacentElement("afterend",c),c.insertAdjacentElement("afterend",p)}else o.insertAdjacentElement("beforebegin",c);break;case"p":case"P":let d;o.querySelector("plica")?d=o.querySelector("plica"):(d=this.doc.parts.createElementNS(Ae,"plica"),o.appendChild(d)),"P"===t.key?"down"===d.getAttribute("dir")?d.remove():d.setAttribute("dir","down"):"up"===d.getAttribute("dir")?d.remove():d.setAttribute("dir","up");break;case"r":case"R":let f=this.doc.parts.createElementNS("http://www.music-encoding.org/ns/mei","rest");f.setAttribute("xml:id",o.getAttribute("xml:id")),f.setAttribute("dur",o.getAttribute("dur")),o.parentNode.replaceChild(f,o);break;case"Backspace":o.nextElementSibling&&"dot"===o.nextElementSibling.tagName&&o.nextElementSibling.remove(),o.remove();break;default:return}else if("rest"===o.tagName)switch(t.key){case"1":o.setAttribute("dur","semibrevis");break;case"2":o.setAttribute("dur","minima");break;case"4":o.setAttribute("dur","semiminima");break;case"8":o.setAttribute("dur","fusa");break;case"6":o.setAttribute("dur","semifusa");break;case"7":o.setAttribute("dur","maxima");break;case"9":o.setAttribute("dur","longa");break;case"0":o.setAttribute("dur","brevis");break;case"I":const a=o.cloneNode(!0);Uh(a),o.insertAdjacentElement("beforebegin",a);break;case"Backspace":o.remove();break;default:return}t.preventDefault(),this.doc.score=this.runScoringUp(this.doc.parts)}}runScoringUp(t){let i=null;try{const r=t.getElementsByTagName("staffDef")[0];let s;switch(s=pm.merge(t.cloneNode(!0)),r.getAttribute("notationtype")){case"mensural.white":i=pm.ArsNova.lining_up(s);break;case"mensural.black":switch(r.getAttribute("notationsubtype")){case"Ars_antiqua":i=pm.ArsAntiqua.lining_up(s);break;case"Ars_nova":i=pm.ArsNova.lining_up(s);break;default:console.warn("Only 'Ars antiqua' and 'Ars nova' are supported!")}break;default:console.warn("Only mensural notation types are supported.")}null!==i&&pm.PostProcessing.refine_score(i,this.stateService.scoreOptions.modernClefs,this.stateService.scoreOptions.barlines)}catch(r){console.error(r),alert("Error in scoring up tool! "+r),i=null}finally{return i}}ensureCorrElement(t,i){if(t.closest("corr"))return t;const r=i.createElementNS("http://www.music-encoding.org/ns/mei","choice"),s=i.createElementNS("http://www.music-encoding.org/ns/mei","corr"),o=i.createElementNS("http://www.music-encoding.org/ns/mei","sic"),a=t.nextElementSibling;t.insertAdjacentElement("beforebegin",r),r.appendChild(s),r.appendChild(o),o.appendChild(t);const c=t.cloneNode(!0);if(Uh(c),s.appendChild(c),this.corrToSicMap.set(c.getAttribute("xml:id"),t.getAttribute("xml:id")),null!==a&&"dot"===a.tagName){o.appendChild(a);const d=a.cloneNode(!0);Uh(d),s.appendChild(d)}return c}onRefinementChange(){this.doc.score=this.runScoringUp(this.doc.parts)}getDissonantInfo(t){let i=t.split(/\n/),r=-1;for(let y=0;y<i.length;y++)if(i[y].match(/^\*\*/)){r=y;break}if(r<0)return{};let s=i[r].split(/\t+/),o=-1,a=-1,c=[],d={};for(let y=0;y<s.length;y++)if("**xmlid"===s[y])o=y;else if("**cdata"===s[y]){if(o<0)continue;a=y,c.push(a),d[a]=o,o=-1,a=-1}let f=s.length,p={},_=[];for(let y=r+1;y<i.length;y++){if(i[y].match(/^\*/)||i[y].match(/^\!/)||i[y].match(/^=/)||i[y].match(/^\s*$/))continue;let w=i[y].split(/\t+/);if(w.length==f){if("*-"===w[0])break;for(let I=0;I<c.length;I++){let k=c[I];if("."===w[k])continue;let j=d[k],B=w[k],J=w[j];if("."===J){if(!B.match(/^s$/i)){console.log("ERROR: dissonance is not a sustain");continue}J=_[j]}p[J]=void 0===p[J]?B:p[J]+" "+B}for(let I=0;I<w.length;I++)"."!==w[I]&&(_[I]=w[I])}else console.log("WARNING: no spine manipulations allowed")}return p}}return n.\u0275fac=function(t){return new(t||n)(L(ic),L(pL),L(gL))},n.\u0275cmp=Cn({type:n,selectors:[["app-score-verovio-view"]],viewQuery:function(t,i){if(1&t&&qr(SX,5),2&t){let r;Ti(r=Ii())&&(i.container=r.first)}},hostBindings:function(t,i){1&t&&We("keydown",function(s){return i.handleKeyPress(s)},!1,wp)},decls:17,vars:5,consts:[["id","verovio",3,"click"],["verovio",""],[3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","change","ngModelChange"],["color","primary","class","primary-button","mat-stroked-button","",3,"click",4,"ngIf"],[3,"value"],["color","primary","mat-stroked-button","",1,"primary-button",3,"click"]],template:function(t,i){1&t&&(D(0,"div",0,1),We("click",function(s){return i.handleClick(s)}),S(),D(2,"div")(3,"label"),C(4," Bar by:\xa0 "),D(5,"select",2),We("change",function(){return i.onRefinementChange()})("ngModelChange",function(s){return i.stateService.scoreOptions.barlines=s}),Yn(6,AX,2,2,"option",3),S()(),C(7," \xa0 "),D(8,"label"),C(9," Switch to Modern Clefs "),D(10,"input",4),We("change",function(){return i.onRefinementChange()})("ngModelChange",function(s){return i.stateService.scoreOptions.modernClefs=s}),S()(),C(11," \xa0 "),D(12,"label"),C(13," Add Dissonance Labels "),D(14,"input",4),We("change",function(){return i.update(i.doc._score)})("ngModelChange",function(s){return i.dissonanceLabels=s}),S()()(),D(15,"div"),Yn(16,xX,2,0,"button",5),S()),2&t&&(Xe(5),Ye("ngModel",i.stateService.scoreOptions.barlines),Xe(1),Ye("ngForOf",i.barOptions),Xe(4),Ye("ngModel",i.stateService.scoreOptions.modernClefs),Xe(4),Ye("ngModel",i.dissonanceLabels),Xe(2),Ye("ngIf",!i.stateService.editorialMode))},directives:[pu,vg,Lb,pg,Dg,Sg,fD,hu,Ih],styles:["#verovio[_ngcontent-%COMP%]{overflow-x:scroll;margin-bottom:1em}"]}),n})(),TX=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Cn({type:n,selectors:[["app-score-editor-help"]],decls:140,vars:0,consts:[["href","https://verovio.humdrum.org","target","_blank"],["href","https://editor.verovio.org","target","_blank"]],template:function(t,i){1&t&&(D(0,"h2"),C(1,"About the Score Editor"),S(),D(2,"p"),C(3," The "),D(4,"strong"),C(5,"Score Editor"),S(),C(6," is for making simple edits, including to pitches and rhythms. If you made mistakes in your initial entry of the music on the previous screen (the "),D(7,"strong"),C(8,"Music Input"),S(),C(9," screen) the score will not align properly and you may need to make adjustments to the note durations or add dots in order to get the proper alignment.\n"),S(),At(10,"mat-divider"),D(11,"h2"),C(12,"Making Simple Edits"),S(),D(13,"p"),C(14," When you click on a pitch, the staff to which that pitch belongs will be highlighted with a dashed box in the manuscript image in the left of the screen. This is to help you check the accuracy of the edits you make.\n"),S(),D(15,"p"),C(16," You can make simple edits in the "),D(17,"strong"),C(18,"Score Editor"),S(),C(19," directly as follows. By clicking on a pitch to highlight it you can edit:\n"),S(),D(20,"ul")(21,"li")(22,"strong"),C(23,"Pitch: "),S(),C(24," Use up/down arrow keys to change pitch. "),S(),D(25,"li")(26,"strong"),C(27,"Rhythm: "),S(),C(28," Type a number key to alter its rhythm (1 semibreve, 2 minim, 4 semiminim, 8 fusa, 6 semifusa, 0 breve, 9 long, 7 maxima). Scoring-up will rerun after a rhythmic value changes. "),S(),D(29,"li")(30,"strong"),C(31,"Dots: "),S(),C(32," Typing a period will add or remove the dot from the highlighted pitch. Scoring-up will automatically rerun. "),S(),D(33,"li")(34,"strong"),C(35,"Accidentals: "),S(),C(36," To add a flat, press "),D(37,"code"),C(38,"-"),S(),C(39,". To add a sharp, press "),D(40,"code"),C(41,"#"),S(),C(42,". To add a natural, press "),D(43,"code"),C(44,"n"),S(),C(45,". To clear accidentals, press "),D(46,"code"),C(47,"N"),S(),C(48,". "),S(),D(49,"li")(50,"strong"),C(51,"Cloning and Deleting Elements: "),S(),C(52," While it is not possible to insert extensive new musical elements at the score editing phase, a simple way of adding elements can be to utilize the clone feature. Elements can be cloned by selecting one and pressing the "),D(53,"code"),C(54,"I"),S(),C(55," key. Elements can be deleted by pressing "),D(56,"code"),C(57,"Backspace"),S(),C(58,". "),S(),D(59,"li")(60,"strong"),C(61,"Text:"),S(),C(62," Unfortunately at this time you cannot make any edits to the underlaid text (lyrics) in the "),D(63,"strong"),C(64,"Score Editor"),S(),C(65,". Texts can be edited at the "),D(66,"strong"),C(67,"Music Input"),S(),C(68," screen. "),S()(),D(69,"p"),C(70,' You can also use the "Return to Music Input" button to return to the '),D(71,"strong"),C(72,"Music Input"),S(),C(73," screen at any time to make more significant edits, such as deleting entire staves and re-entering thme, but any changes made in the "),D(74,"strong"),C(75,"Score Editor"),S(),C(76," thus far will be lost!\n"),S(),At(77,"mat-divider"),D(78,"h2"),C(79,"Changing the Appearance of your Scores"),S(),D(80,"ul")(81,"li"),C(82," If you would like to add barlines, you can select to add barlines following the semibreve (prolation), breve (tempus), or long (modus) mensuration. If you intend to create to work with your MEI score file in Verovio to display on a web page or to save as a PDF file, it is recommended that you add barlines so that automatic system breaks can be generated. "),S(),D(83,"li"),C(84," You may also prefer to \u201cSwitch to Modern Clefs\u201d by checking this box. "),S()(),At(85,"mat-divider"),D(86,"h2"),C(87,"Moving to Editorial Mode"),S(),D(88,"p"),C(89," When making corrections in the "),D(90,"strong"),C(91,"Score Editor"),S(),C(92," it is assumed that you are correcting mistakes "),D(93,"em"),C(94,"you"),S(),C(95," made, and both the MEI Parts and MEI Score files will be updated with these changes. However, once you move to "),D(96,"strong"),C(97,"Editorial Mode"),S(),C(98,", the MEI Parts file will no longer be updated since this is a record of the music "),D(99,"em"),C(100,"exactly"),S(),C(101," as it was recorded in the original manuscript. Any further corrections made in "),D(102,"strong"),C(103,"Editorial Mode"),S(),C(104," will be encoded in the MEI Score file as "),D(105,"strong"),C(106,"editorial"),S(),C(107," corrections. For example, when a dot is added in "),D(108,"strong"),C(109,"Editorial Mode"),S(),C(110,":\n"),S(),D(111,"pre")(112,"code"),C(113,'\n    <choice>\n        <corr>\n            <note dur="semibrevis" oct="3" pname="a" dur.quality="minor"/>\n            <dot form="div"/>\n        </corr>\n        <sic>\n            <note dur="semibrevis" oct="3" pname="a"/>\n        </sic>\n    </choice>\n'),S()(),At(114,"mat-divider"),D(115,"p"),C(116," The purpose of the "),D(117,"strong"),C(118,"Score Editor"),S(),C(119," is to do enough editing to enable the correct alignment of the score and edit while viewing the manuscript. For more fine-grained editing, it is recommended to download the MEI file and open it in a tool that allows direct editing of the MEI file such as "),D(120,"a",0),C(121," the Verovio Humdrum Viewer"),S(),C(122," or "),D(123,"a",1),C(124,"the Verovio Editor"),S(),C(125,".\n"),S(),D(126,"p"),C(127," Once you click the button \u201cContinue in Editorial Mode\u201d you will receive a prompt that the parts-based MEI file will be downloaded locally.\n"),S(),At(128,"mat-divider"),D(129,"h2"),C(130,"Saving your Work"),S(),D(131,"p"),C(132," To download MEI files of your work, click the \u201cDownload MEI File(s)\u201d button. This action will download two files:\n"),S(),D(133,"ul")(134,"li"),C(135," a part-based MEI file that you can use to open in the MP Editor at a later stage to continue your music input or editing work "),S(),D(136,"li"),C(137," A score-based MEI that you can display on a web page or to save as a PDF file, using Verovio for example. "),S()(),D(138,"p"),C(139," You can also simply copy the coding of the score-based MEI from the score editor screen by clicking the \u201cCopy MEI Score to Clipboard\u201d button.\n"),S())},directives:[xy],styles:[""]}),n})();const IX=[{path:"input/:source/:identifier",component:VA},{path:"score/:source/:identifier",component:(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.stateService=r,this.source=this.route.snapshot.paramMap.get("source"),this.identifier=decodeURIComponent(this.route.snapshot.paramMap.get("identifier")),this.iiifManifest=LR(this.source,this.identifier),this.meiDoc=this.stateService.mei,null===this.meiDoc&&this.router.navigate(["/input",this.source,this.identifier])}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(L(gr),L(va),L(ic))},n.\u0275cmp=Cn({type:n,selectors:[["app-score-editor"]],decls:10,vars:1,consts:[["id","score-container"],[3,"iiifManifest"],["id","right"],["label","Score Editor"],["label","Score Editor Help"]],template:function(t,i){1&t&&(D(0,"div",0),At(1,"app-score-diva-view",1),D(2,"div",2)(3,"mat-tab-group")(4,"mat-tab",3),At(5,"app-score-toolbar")(6,"mat-divider")(7,"app-score-verovio-view"),S(),D(8,"mat-tab",4),At(9,"app-score-editor-help"),S()()()()),2&t&&(Xe(1),Ye("iiifManifest",i.iiifManifest))},directives:[EX,_R,eA,DX,xy,MX,TX],styles:["#score-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}app-score-diva-view[_ngcontent-%COMP%]{grid-column:1 / 2}app-score-verovio-view[_ngcontent-%COMP%]{display:block;width:100%}#right[_ngcontent-%COMP%]{grid-column:2 / 4;padding:1em;width:100%}"]}),n})()},{path:"",component:wX,pathMatch:"full"}];let OX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n,bootstrap:[aK]}),n.\u0275inj=Jt({providers:[],imports:[[Uz.forRoot(IX,{useHash:!0,relativeLinkResolution:"legacy"}),FI,wh,mu,tA,nA,iA,rA,TR,aW,CX]]}),n})();(function E3(){zT=!1})(),function FX(){return he(this,void 0,void 0,function*(){for(yield function jq(){return he(this,void 0,void 0,function*(){IA=yield function Bq(n){var e=Date.now(),t=Vq.Authenticate.init({flags:{apiKey:n,timeStamp:e}});return new Promise(function(i,r){t.ports.outgoing.subscribe(function(s){s&&i(s)})})}(TA)})}(),((n,e,t)=>{!function(n,e,t,i){new(t||(t=Promise))(function(s,o){function a(f){try{d(i.next(f))}catch(p){o(p)}}function c(f){try{d(i.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(f.value).then(a,c)}d((i=i.apply(n,e||[])).next())})}(void 0,void 0,void 0,function*(){if("serviceWorker"in navigator)try{yield navigator.serviceWorker.register(`/diamm-sw.js?key=7183d41de88f249120c0942e51ec9d3705781ab2&secret=${e}&domain=editor.measuringpolyphony.org`)}catch(i){console.error(`Service Worker registration failed with ${i}`)}})})(0,IA);!verovioReady;)console.debug("wait"),yield new Promise(n=>{setTimeout(n,250)});console.debug("done")})}().then(()=>{u4().bootstrapModule(OX).catch(n=>console.error(n))})},455:(Ft,et,Ve)=>{et.formatArgs=function m(K){if(K[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+K[0]+(this.useColors?"%c ":" ")+"+"+Ft.exports.humanize(this.diff),!this.useColors)return;const se="color: "+this.color;K.splice(1,0,se,"color: inherit");let H=0,Y=0;K[0].replace(/%[a-zA-Z%]/g,de=>{"%%"!==de&&(H++,"%c"===de&&(Y=H))}),K.splice(Y,0,se)},et.save=function F(K){try{K?et.storage.setItem("debug",K):et.storage.removeItem("debug")}catch(se){}},et.load=function P(){let K;try{K=et.storage.getItem("debug")}catch(se){}return!K&&"undefined"!=typeof process&&"env"in process&&(K=process.env.DEBUG),K},et.useColors=function Fe(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},et.storage=function te(){try{return localStorage}catch(K){}}(),et.destroy=(()=>{let K=!1;return()=>{K||(K=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),et.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],et.log=console.debug||console.log||(()=>{}),Ft.exports=Ve(283)(et);const{formatters:me}=Ft.exports;me.j=function(K){try{return JSON.stringify(K)}catch(se){return"[UnexpectedJSONParseError]: "+se.message}}},283:(Ft,et,Ve)=>{Ft.exports=function Fe(m){function P(he){let ve,V,N,oe=null;function M(...$){if(!M.enabled)return;const Z=M,be=Number(new Date);Z.diff=be-(ve||be),Z.prev=ve,Z.curr=be,ve=be,$[0]=P.coerce($[0]),"string"!=typeof $[0]&&$.unshift("%O");let ot=0;$[0]=$[0].replace(/%([a-zA-Z%])/g,(W,ee)=>{if("%%"===W)return"%";ot++;const q=P.formatters[ee];return"function"==typeof q&&(W=q.call(Z,$[ot]),$.splice(ot,1),ot--),W}),P.formatArgs.call(Z,$),(Z.log||P.log).apply(Z,$)}return M.namespace=he,M.useColors=P.useColors(),M.color=P.selectColor(he),M.extend=te,M.destroy=P.destroy,Object.defineProperty(M,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==oe?oe:(V!==P.namespaces&&(V=P.namespaces,N=P.enabled(he)),N),set:$=>{oe=$}}),"function"==typeof P.init&&P.init(M),M}function te(he,ve){const oe=P(this.namespace+(void 0===ve?":":ve)+he);return oe.log=this.log,oe}function H(he){return he.toString().substring(2,he.toString().length-2).replace(/\.\*\?$/,"*")}return P.debug=P,P.default=P,P.coerce=function Y(he){return he instanceof Error?he.stack||he.message:he},P.disable=function K(){const he=[...P.names.map(H),...P.skips.map(H).map(ve=>"-"+ve)].join(",");return P.enable(""),he},P.enable=function me(he){let ve;P.save(he),P.namespaces=he,P.names=[],P.skips=[];const oe=("string"==typeof he?he:"").split(/[\s,]+/),V=oe.length;for(ve=0;ve<V;ve++)!oe[ve]||("-"===(he=oe[ve].replace(/\*/g,".*?"))[0]?P.skips.push(new RegExp("^"+he.substr(1)+"$")):P.names.push(new RegExp("^"+he+"$")))},P.enabled=function se(he){if("*"===he[he.length-1])return!0;let ve,oe;for(ve=0,oe=P.skips.length;ve<oe;ve++)if(P.skips[ve].test(he))return!1;for(ve=0,oe=P.names.length;ve<oe;ve++)if(P.names[ve].test(he))return!0;return!1},P.humanize=Ve(366),P.destroy=function de(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(m).forEach(he=>{P[he]=m[he]}),P.names=[],P.skips=[],P.formatters={},P.selectColor=function F(he){let ve=0;for(let oe=0;oe<he.length;oe++)ve=(ve<<5)-ve+he.charCodeAt(oe),ve|=0;return P.colors[Math.abs(ve)%P.colors.length]},P.enable(P.load()),P}},726:function(Ft,et){var m;void 0!==(m=function(F){var he,ve,P=window,te=document,me="mousemove",K="mouseup",se="mousedown",H="EventListener",Y="add"+H,de="remove"+H,oe=[],V=function(N,M){for(N=0;N<oe.length;)(M=(M=oe[N++]).container||M)[de](se,M.md,0),P[de](K,M.mu,0),P[de](me,M.mm,0);for(oe=[].slice.call(te.getElementsByClassName("dragscroll")),N=0;N<oe.length;)!function($,Z,be,Se,ot,re){(re=$.container||$)[Y](se,re.md=function(W){(!$.hasAttribute("nochilddrag")||te.elementFromPoint(W.pageX,W.pageY)===re)&&(Se=1,Z=W.clientX,be=W.clientY,W.preventDefault())},0),P[Y](K,re.mu=function(){Se=0},0),P[Y](me,re.mm=function(W){Se&&((ot=$.scroller||$).scrollLeft-=he=-Z+(Z=W.clientX),ot.scrollTop-=ve=-be+(be=W.clientY),$===te.body&&((ot=te.documentElement).scrollLeft-=he,ot.scrollTop-=ve))},0)}(oe[N++])};"complete"===te.readyState?V():P[Y]("load",V,0),F.reset=V,window.resetDragscroll=V}.apply(et,[et]))&&(Ft.exports=m)},917:()=>{var Ft,et,Ve,Fe;Ft=window.requestAnimationFrame,et="ontouchend"in document,Ve=function(){for(var m=1;m<arguments.length;m++)for(var F in arguments[m])arguments[m].hasOwnProperty(F)&&(arguments[0][F]=arguments[m][F]);return arguments[0]},(Fe=function(m,F){return this.settings=Ve({},Fe.DEFAULTS,F),this.el=m,this.ACTIVE_CLASS="kinetic-active",this._initElements(),this.el._VanillaKinetic=this,this}).DEFAULTS={cursor:"move",decelerate:!0,triggerHardware:!1,threshold:0,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,invert:!1,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},Fe.prototype.start=function(m){this.settings=Ve(this.settings,m),this.velocity=m.velocity||this.velocity,this.velocityY=m.velocityY||this.velocityY,this.settings.decelerate=!1,this._move()},Fe.prototype.end=function(){this.settings.decelerate=!0},Fe.prototype.stop=function(){this.velocity=0,this.velocityY=0,this.settings.decelerate=!0,"function"==typeof this.settings.stopped&&this.settings.stopped.call(this)},Fe.prototype.detach=function(){this._detachListeners(),this.el.classList.remove(this.ACTIVE_CLASS),this.el.style.cursor=""},Fe.prototype.attach=function(){this.el.classList.contains(this.ACTIVE_CLASS)||(this._attachListeners(),this.el.classList.add(this.ACTIVE_CLASS),this.el.style.cursor=this.settings.cursor)},Fe.prototype._initElements=function(){this.el.classList.add(this.ACTIVE_CLASS),Ve(this,{xpos:null,prevXPos:!1,ypos:null,prevYPos:!1,mouseDown:!1,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null}),this.velocity=0,this.velocityY=0;var m=this;this.documentResetHandler=function(){m._resetMouse.apply(m)};var F=document.documentElement;if(F.addEventListener("mouseup",this.documentResetHandler,!1),F.addEventListener("click",this.documentResetHandler,!1),this._initEvents(),this.el.style.cursor=this.settings.cursor,this.settings.triggerHardware)for(var P=["","-ms-","-webkit-","-moz-"],te={transform:"translate3d(0,0,0)",perspective:"1000","backface-visibility":"hidden"},me=0;me<P.length;me++){var K=P[me];for(var se in te)te.hasOwnProperty(se)&&(this.el.style[K+se]=te[se])}},Fe.prototype._initEvents=function(){var m=this;this.settings.events={touchStart:function(F){var P;m._useTarget(F.target,F)&&(P=F.originalEvent.touches[0],m.threshold=m._threshold(F.target,F),m._start(P.clientX,P.clientY),F.stopPropagation())},touchMove:function(F){var P;m.mouseDown&&(m._inputmove((P=F.originalEvent.touches[0]).clientX,P.clientY),F.preventDefault&&F.preventDefault())},inputDown:function(F){m._useTarget(F.target,F)&&(m.threshold=m._threshold(F.target,F),m._start(F.clientX,F.clientY),m.elementFocused=F.target,"IMG"===F.target.nodeName&&F.preventDefault(),F.stopPropagation())},inputEnd:function(F){m._useTarget(F.target,F)&&(m._end(),m.elementFocused=null,F.preventDefault&&F.preventDefault())},inputMove:function(F){m.mouseDown&&(m._inputmove(F.clientX,F.clientY),F.preventDefault&&F.preventDefault())},scroll:function(F){"function"==typeof m.settings.moved&&m.settings.moved.call(m,m.settings),F.preventDefault&&F.preventDefault()},inputClick:function(F){if(Math.abs(m.velocity)>0||Math.abs(m.velocityY)>0)return F.preventDefault(),F.stopPropagation&&F.stopPropagation(),!1},dragStart:function(F){if(m._useTarget(F.target,F)&&m.elementFocused)return F.preventDefault&&F.preventDefault(),F.stopPropagation&&F.stopPropagation(),!1},selectStart:function(F){return"function"==typeof m.settings.selectStart?m.settings.selectStart.apply(m,arguments):m._useTarget(F.target,F)?(F.preventDefault&&F.preventDefault(),F.stopPropagation&&F.stopPropagation(),!1):void 0}},this._attachListeners()},Fe.prototype._inputmove=function(m,F){if((!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout))&&(this.lastMove=new Date,this.mouseDown&&(this.xpos||this.ypos))){var P=m-this.xpos,te=F-this.ypos;if(this.settings.invert&&(P*=-1,te*=-1),this.threshold>0){var me=Math.sqrt(P*P+te*te);if(this.threshold>me)return;this.threshold=0}this.elementFocused&&(this.elementFocused.blur(),this.elementFocused=null,this.el.focus()),this.settings.decelerate=!1,this.velocity=this.velocityY=0;var K=this.scrollLeft(),se=this.scrollTop();this.scrollLeft(this.settings.x?K-P:K),this.scrollTop(this.settings.y?se-te:se),this.prevXPos=this.xpos,this.prevYPos=this.ypos,this.xpos=m,this.ypos=F,this._calculateVelocities(),this._setMoveClasses(this.settings.movingClass),"function"==typeof this.settings.moved&&this.settings.moved.call(this,this.settings)}},Fe.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity),this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity),this.settings.invert&&(this.velocity*=-1,this.velocityY*=-1)},Fe.prototype._end=function(){this.xpos&&this.prevXPos&&!1===this.settings.decelerate&&(this.settings.decelerate=!0,this._calculateVelocities(),this.xpos=this.prevXPos=this.mouseDown=!1,this._move())},Fe.prototype._useTarget=function(m,F){return"function"!=typeof this.settings.filterTarget||!1!==this.settings.filterTarget.call(this,m,F)},Fe.prototype._threshold=function(m,F){return"function"==typeof this.settings.threshold?this.settings.threshold.call(this,m,F):this.settings.threshold},Fe.prototype._start=function(m,F){this.mouseDown=!0,this.velocity=this.prevXPos=0,this.velocityY=this.prevYPos=0,this.xpos=m,this.ypos=F},Fe.prototype._resetMouse=function(){this.xpos=!1,this.ypos=!1,this.mouseDown=!1},Fe.prototype._decelerateVelocity=function(m,F){return 0===Math.floor(Math.abs(m))?0:m*F},Fe.prototype._capVelocity=function(m,F){var P=m;return m>0?m>F&&(P=F):m<0-F&&(P=0-F),P},Fe.prototype._setMoveClasses=function(m){var F=this.settings,P=this.el;P.classList.remove(F.movingClass.up),P.classList.remove(F.movingClass.down),P.classList.remove(F.movingClass.left),P.classList.remove(F.movingClass.right),P.classList.remove(F.deceleratingClass.up),P.classList.remove(F.deceleratingClass.down),P.classList.remove(F.deceleratingClass.left),P.classList.remove(F.deceleratingClass.right),this.velocity>0&&P.classList.add(m.right),this.velocity<0&&P.classList.add(m.left),this.velocityY>0&&P.classList.add(m.down),this.velocityY<0&&P.classList.add(m.up)},Fe.prototype._move=function(){var m=this._getScroller(),F=this,P=this.settings;P.x&&m.scrollWidth>0?(this.scrollLeft(this.scrollLeft()+this.velocity),Math.abs(this.velocity)>0&&(this.velocity=P.decelerate?F._decelerateVelocity(this.velocity,P.slowdown):this.velocity)):this.velocity=0,P.y&&m.scrollHeight>0?(this.scrollTop(this.scrollTop()+this.velocityY),Math.abs(this.velocityY)>0&&(this.velocityY=P.decelerate?F._decelerateVelocity(this.velocityY,P.slowdown):this.velocityY)):this.velocityY=0,F._setMoveClasses(P.deceleratingClass),"function"==typeof P.moved&&P.moved.call(this,P),Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0?this.moving||(this.moving=!0,Ft(function(){F.moving=!1,F._move()})):F.stop()},Fe.prototype._getScroller=function(){return this.el},Fe.prototype.scrollLeft=function(m){var F=this._getScroller();if("number"!=typeof m)return F.scrollLeft;F.scrollLeft=m,this.settings.scrollLeft=m},Fe.prototype.scrollTop=function(m){var F=this._getScroller();if("number"!=typeof m)return F.scrollTop;F.scrollTop=m,this.settings.scrollTop=m},Fe.prototype._attachListeners=function(){var m=this.el,F=this.settings;et&&(m.addEventListener("touchstart",F.events.touchStart,!1),m.addEventListener("touchend",F.events.inputEnd,!1),m.addEventListener("touchmove",F.events.touchMove,!1)),m.addEventListener("mousedown",F.events.inputDown,!1),m.addEventListener("mouseup",F.events.inputEnd,!1),m.addEventListener("mousemove",F.events.inputMove,!1),m.addEventListener("click",F.events.inputClick,!1),m.addEventListener("scroll",F.events.scroll,!1),m.addEventListener("selectstart",F.events.selectStart,!1),m.addEventListener("dragstart",F.events.dragStart,!1)},Fe.prototype._detachListeners=function(){var m=this.el,F=this.settings;et&&(m.removeEventListener("touchstart",F.events.touchStart,!1),m.removeEventListener("touchend",F.events.inputEnd,!1),m.removeEventListener("touchmove",F.events.touchMove,!1)),m.removeEventListener("mousedown",F.events.inputDown,!1),m.removeEventListener("mouseup",F.events.inputEnd,!1),m.removeEventListener("mousemove",F.events.inputMove,!1),m.removeEventListener("click",F.events.inputClick,!1),m.removeEventListener("scroll",F.events.scroll,!1),m.removeEventListener("selectstart",F.events.selectStart,!1),m.removeEventListener("dragstart",F.events.dragStart,!1)},window.VanillaKinetic=Fe},489:function(Ft,et,Ve){var Fe;Ft=Ve.nmd(Ft),function(){var m,me="Expected a function",se="__lodash_hash_undefined__",Y="__lodash_placeholder__",Ke=1/0,Be=9007199254740991,Je=4294967295,at=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Gt="[object Arguments]",It="[object Array]",Ot="[object Boolean]",tt="[object Date]",Te="[object Error]",hn="[object Function]",jn="[object GeneratorFunction]",zn="[object Map]",Dt="[object Number]",gt="[object Object]",Gn="[object Promise]",ms="[object RegExp]",_s="[object Set]",gl="[object String]",wn="[object Symbol]",ml="[object WeakMap]",bc="[object ArrayBuffer]",Sa="[object DataView]",qt="[object Float32Array]",Hu="[object Float64Array]",zo="[object Int8Array]",mn="[object Int16Array]",Gh="[object Int32Array]",Wh="[object Uint8Array]",Uu="[object Uint8ClampedArray]",qh="[object Uint16Array]",Zh="[object Uint32Array]",$u=/\b__p \+= '';/g,ex=/\b(__p \+=) '' \+/g,c0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_m=/&(?:amp|lt|gt|quot|#39);/g,Kh=/[&<>"']/g,vm=RegExp(_m.source),Yh=RegExp(Kh.source),u0=/<%-([\s\S]+?)%>/g,d0=/<%([\s\S]+?)%>/g,zu=/<%=([\s\S]+?)%>/g,h0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f0=/^\w*$/,p0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qh=/[\\^$.*+?()[\]{}|]/g,Qi=RegExp(Qh.source),Aa=/^\s+/,tx=/\s/,yc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nx=/\{\n\/\* \[wrapped with (.+)\] \*/,wc=/,? & /,zi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,g0=/[()=,{}\[\]\/\s]/,m0=/\\(\\)?/g,ix=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vl=/\w*$/,Xh=/^[-+]0x[0-9a-f]+$/i,Cc=/^0b[01]+$/i,Jh=/^\[object .+?Constructor\]$/,_0=/^0o[0-7]+$/i,v0=/^(?:0|[1-9]\d*)$/,bm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gu=/($^)/,b0=/['\n\r\u2028\u2029\\]/g,ef="\\ud800-\\udfff",ym="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wm="\\u2700-\\u27bf",Fn="a-z\\xdf-\\xf6\\xf8-\\xff",_n="A-Z\\xc0-\\xd6\\xd8-\\xde",Nt="\\ufe0e\\ufe0f",rf="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ue="["+ef+"]",Wu="["+rf+"]",Ct="["+ym+"]",Ri="\\d+",D0="["+wm+"]",S0="["+Fn+"]",A0="[^"+ef+rf+Ri+wm+Fn+_n+"]",bl="\\ud83c[\\udffb-\\udfff]",x0="[^"+ef+"]",sf="(?:\\ud83c[\\udde6-\\uddff]){2}",Em="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+_n+"]",T0="(?:"+S0+"|"+A0+")",rx="(?:"+br+"|"+A0+")",I0="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Dm="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",O0="(?:"+Ct+"|"+bl+")?",Sm="["+Nt+"]?",P0=Sm+O0+"(?:\\u200d(?:"+[x0,sf,Em].join("|")+")"+Sm+O0+")*",ox="(?:"+[D0,sf,Em].join("|")+")"+P0,ax="(?:"+[x0+Ct+"?",Ct,sf,Em,Ue].join("|")+")",Ge=RegExp("['\u2019]","g"),lx=RegExp(Ct,"g"),Jt=RegExp(bl+"(?="+bl+")|"+ax+P0,"g"),af=RegExp([br+"?"+S0+"+"+I0+"(?="+[Wu,br,"$"].join("|")+")",rx+"+"+Dm+"(?="+[Wu,br+T0,"$"].join("|")+")",br+"?"+T0+"+"+I0,br+"+"+Dm,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ri,ox].join("|"),"g"),Am=RegExp("[\\u200d"+ef+ym+Nt+"]"),k0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,R0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xm=-1,Nn={};Nn[qt]=Nn[Hu]=Nn[zo]=Nn[mn]=Nn[Gh]=Nn[Wh]=Nn[Uu]=Nn[qh]=Nn[Zh]=!0,Nn[Gt]=Nn[It]=Nn[bc]=Nn[Ot]=Nn[Sa]=Nn[tt]=Nn[Te]=Nn[hn]=Nn[zn]=Nn[Dt]=Nn[gt]=Nn[ms]=Nn[_s]=Nn[gl]=Nn[ml]=!1;var Ln={};Ln[Gt]=Ln[It]=Ln[bc]=Ln[Sa]=Ln[Ot]=Ln[tt]=Ln[qt]=Ln[Hu]=Ln[zo]=Ln[mn]=Ln[Gh]=Ln[zn]=Ln[Dt]=Ln[gt]=Ln[ms]=Ln[_s]=Ln[gl]=Ln[wn]=Ln[Wh]=Ln[Uu]=Ln[qh]=Ln[Zh]=!0,Ln[Te]=Ln[hn]=Ln[ml]=!1;var lf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},N0=parseFloat,Go=parseInt,cf="object"==typeof global&&global&&global.Object===Object&&global,cx="object"==typeof self&&self&&self.Object===Object&&self,Xn=cf||cx||Function("return this")(),Xr=et&&!et.nodeType&&et,qu=Xr&&Ft&&!Ft.nodeType&&Ft,L0=qu&&qu.exports===Xr,Fr=L0&&cf.process,Jr=function(){try{return qu&&qu.require&&qu.require("util").types||Fr&&Fr.binding&&Fr.binding("util")}catch(ie){}}(),Tm=Jr&&Jr.isArrayBuffer,Im=Jr&&Jr.isDate,V0=Jr&&Jr.isMap,In=Jr&&Jr.isRegExp,B0=Jr&&Jr.isSet,j0=Jr&&Jr.isTypedArray;function Fi(U,ie,Q){switch(Q.length){case 0:return U.call(ie);case 1:return U.call(ie,Q[0]);case 2:return U.call(ie,Q[0],Q[1]);case 3:return U.call(ie,Q[0],Q[1],Q[2])}return U.apply(ie,Q)}function Hn(U,ie,Q,$e){for(var Pt=-1,En=null==U?0:U.length;++Pt<En;){var Vi=U[Pt];ie($e,Vi,Q(Vi),U)}return $e}function lr(U,ie){for(var Q=-1,$e=null==U?0:U.length;++Q<$e&&!1!==ie(U[Q],Q,U););return U}function uf(U,ie){for(var Q=null==U?0:U.length;Q--&&!1!==ie(U[Q],Q,U););return U}function Zu(U,ie){for(var Q=-1,$e=null==U?0:U.length;++Q<$e;)if(!ie(U[Q],Q,U))return!1;return!0}function mo(U,ie){for(var Q=-1,$e=null==U?0:U.length,Pt=0,En=[];++Q<$e;){var Vi=U[Q];ie(Vi,Q,U)&&(En[Pt++]=Vi)}return En}function es(U,ie){return!(null==U||!U.length)&&Si(U,ie,0)>-1}function xa(U,ie,Q){for(var $e=-1,Pt=null==U?0:U.length;++$e<Pt;)if(Q(ie,U[$e]))return!0;return!1}function Jn(U,ie){for(var Q=-1,$e=null==U?0:U.length,Pt=Array($e);++Q<$e;)Pt[Q]=ie(U[Q],Q,U);return Pt}function Cn(U,ie){for(var Q=-1,$e=ie.length,Pt=U.length;++Q<$e;)U[Pt+Q]=ie[Q];return U}function df(U,ie,Q,$e){var Pt=-1,En=null==U?0:U.length;for($e&&En&&(Q=U[++Pt]);++Pt<En;)Q=ie(Q,U[Pt],Pt,U);return Q}function Om(U,ie,Q,$e){var Pt=null==U?0:U.length;for($e&&Pt&&(Q=U[--Pt]);Pt--;)Q=ie(Q,U[Pt],Pt,U);return Q}function Ku(U,ie){for(var Q=-1,$e=null==U?0:U.length;++Q<$e;)if(ie(U[Q],Q,U))return!0;return!1}var Pm=yr("length");function hf(U,ie,Q){var $e;return Q(U,function(Pt,En,Vi){if(ie(Pt,En,Vi))return $e=En,!1}),$e}function Ne(U,ie,Q,$e){for(var Pt=U.length,En=Q+($e?1:-1);$e?En--:++En<Pt;)if(ie(U[En],En,U))return En;return-1}function Si(U,ie,Q){return ie==ie?function Cl(U,ie,Q){for(var $e=Q-1,Pt=U.length;++$e<Pt;)if(U[$e]===ie)return $e;return-1}(U,ie,Q):Ne(U,_o,Q)}function Gi(U,ie,Q,$e){for(var Pt=Q-1,En=U.length;++Pt<En;)if($e(U[Pt],ie))return Pt;return-1}function _o(U){return U!=U}function Wo(U,ie){var Q=null==U?0:U.length;return Q?wl(U,ie)/Q:NaN}function yr(U){return function(ie){return null==ie?m:ie[U]}}function yl(U){return function(ie){return null==U?m:U[ie]}}function Yu(U,ie,Q,$e,Pt){return Pt(U,function(En,Vi,Wn){Q=$e?($e=!1,En):ie(Q,En,Vi,Wn)}),Q}function wl(U,ie){for(var Q,$e=-1,Pt=U.length;++$e<Pt;){var En=ie(U[$e]);En!==m&&(Q=Q===m?En:Q+En)}return Q}function vo(U,ie){for(var Q=-1,$e=Array(U);++Q<U;)$e[Q]=ie(Q);return $e}function km(U){return U&&U.slice(0,Rm(U)+1).replace(Aa,"")}function ei(U){return function(ie){return U(ie)}}function Le(U,ie){return Jn(ie,function(Q){return U[Q]})}function Lt(U,ie){return U.has(ie)}function Kn(U,ie){for(var Q=-1,$e=U.length;++Q<$e&&Si(ie,U[Q],0)>-1;);return Q}function wr(U,ie){for(var Q=U.length;Q--&&Si(ie,U[Q],0)>-1;);return Q}function Ma(U,ie){for(var Q=U.length,$e=0;Q--;)U[Q]===ie&&++$e;return $e}var Ni=yl({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Ta=yl({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function li(U){return"\\"+lf[U]}function vs(U){return Am.test(U)}function qo(U){var ie=-1,Q=Array(U.size);return U.forEach(function($e,Pt){Q[++ie]=[Pt,$e]}),Q}function Xu(U,ie){return function(Q){return U(ie(Q))}}function Nr(U,ie){for(var Q=-1,$e=U.length,Pt=0,En=[];++Q<$e;){var Vi=U[Q];(Vi===ie||Vi===Y)&&(U[Q]=Y,En[Pt++]=Q)}return En}function Li(U){var ie=-1,Q=Array(U.size);return U.forEach(function($e){Q[++ie]=$e}),Q}function bn(U){return vs(U)?function ws(U){for(var ie=Jt.lastIndex=0;Jt.test(U);)++ie;return ie}(U):Pm(U)}function ys(U){return vs(U)?function ff(U){return U.match(Jt)||[]}(U):function vn(U){return U.split("")}(U)}function Rm(U){for(var ie=U.length;ie--&&tx.test(U.charAt(ie)););return ie}var js=yl({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Cr=function U(ie){var l,Q=(ie=null==ie?Xn:Cr.defaults(Xn.Object(),ie,Cr.pick(Xn,R0))).Array,$e=ie.Date,Pt=ie.Error,En=ie.Function,Vi=ie.Math,Wn=ie.Object,Fm=ie.RegExp,ux=ie.String,Cs=ie.TypeError,pf=Q.prototype,Ac=Wn.prototype,gf=ie["__core-js_shared__"],mf=En.prototype.toString,Vn=Ac.hasOwnProperty,hx=0,_f=(l=/[^.]+$/.exec(gf&&gf.keys&&gf.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",El=Ac.toString,fx=mf.call(Wn),px=Xn._,gx=Fm("^"+mf.call(Vn).replace(Qh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hs=L0?ie.Buffer:m,Zo=ie.Symbol,Ji=ie.Uint8Array,vf=Hs?Hs.allocUnsafe:m,td=Xu(Wn.getPrototypeOf,Wn),Nm=Wn.create,bf=Ac.propertyIsEnumerable,xc=pf.splice,Lm=Zo?Zo.isConcatSpreadable:m,Ia=Zo?Zo.iterator:m,Oa=Zo?Zo.toStringTag:m,cr=function(){try{var l=Ha(Wn,"defineProperty");return l({},"",{}),l}catch(u){}}(),yf=ie.clearTimeout!==Xn.clearTimeout&&ie.clearTimeout,U0=$e&&$e.now!==Xn.Date.now&&$e.now,wf=ie.setTimeout!==Xn.setTimeout&&ie.setTimeout,nd=Vi.ceil,id=Vi.floor,Mc=Wn.getOwnPropertySymbols,$0=Hs?Hs.isBuffer:m,rd=ie.isFinite,mx=pf.join,ci=Xu(Wn.keys,Wn),bi=Vi.max,er=Vi.min,yi=$e.now,z0=ie.parseInt,G0=Vi.random,sd=pf.reverse,ur=Ha(ie,"DataView"),Tc=Ha(ie,"Map"),Ic=Ha(ie,"Promise"),Es=Ha(ie,"Set"),Wi=Ha(ie,"WeakMap"),Dl=Ha(Wn,"create"),Sl=Wi&&new Wi,Al={},Ko=os(ur),Vm=os(Tc),Cf=os(Ic),xt=os(Es),Bm=os(Wi),Ef=Zo?Zo.prototype:m,Oc=Ef?Ef.valueOf:m,jm=Ef?Ef.toString:m;function E(l){if(qe(l)&&!Bt(l)&&!(l instanceof X)){if(l instanceof ts)return l;if(Vn.call(l,"__wrapped__"))return rp(l)}return new ts(l)}var Pa=function(){function l(){}return function(u){if(!ri(u))return{};if(Nm)return Nm(u);l.prototype=u;var h=new l;return l.prototype=m,h}}();function od(){}function ts(l,u){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=m}function X(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Je,this.__views__=[]}function Yo(l){var u=-1,h=null==l?0:l.length;for(this.clear();++u<h;){var g=l[u];this.set(g[0],g[1])}}function bo(l){var u=-1,h=null==l?0:l.length;for(this.clear();++u<h;){var g=l[u];this.set(g[0],g[1])}}function Er(l){var u=-1,h=null==l?0:l.length;for(this.clear();++u<h;){var g=l[u];this.set(g[0],g[1])}}function Co(l){var u=-1,h=null==l?0:l.length;for(this.__data__=new Er;++u<h;)this.add(l[u])}function Lr(l){var u=this.__data__=new bo(l);this.size=u.size}function xf(l,u){var h=Bt(l),g=!h&&ra(l),v=!h&&!g&&sa(l),x=!h&&!g&&!v&&Jc(l),T=h||g||v||x,R=T?vo(l.length,ux):[],G=R.length;for(var le in l)(u||Vn.call(l,le))&&(!T||!("length"==le||v&&("offset"==le||"parent"==le)||x&&("buffer"==le||"byteLength"==le||"byteOffset"==le)||xs(le,G)))&&R.push(le);return R}function Mf(l){var u=l.length;return u?l[Jo(0,u-1)]:m}function cd(l,u){return Ll(Dr(l),ka(u,0,l.length))}function Y0(l){return Ll(Dr(l))}function Tf(l,u,h){(h!==m&&!Ks(l[u],h)||h===m&&!(u in l))&&Eo(l,u,h)}function xi(l,u,h){var g=l[u];(!Vn.call(l,u)||!Ks(g,h)||h===m&&!(u in l))&&Eo(l,u,h)}function Ds(l,u){for(var h=l.length;h--;)if(Ks(l[h][0],u))return h;return-1}function ii(l,u,h,g){return Do(l,function(v,x,T){u(g,v,h(v),T)}),g}function qm(l,u){return l&&Gs(u,Bi(u),l)}function Eo(l,u,h){"__proto__"==u&&cr?cr(l,u,{configurable:!0,enumerable:!0,value:h,writable:!0}):l[u]=h}function If(l,u){for(var h=-1,g=u.length,v=Q(g),x=null==l;++h<g;)v[h]=x?m:tu(l,u[h]);return v}function ka(l,u,h){return l==l&&(h!==m&&(l=l<=h?l:h),u!==m&&(l=l>=u?l:u)),l}function ns(l,u,h,g,v,x){var T,R=1&u,G=2&u,le=4&u;if(h&&(T=v?h(l,g,v,x):h(l)),T!==m)return T;if(!ri(l))return l;var ue=Bt(l);if(ue){if(T=function dw(l){var u=l.length,h=new l.constructor(u);return u&&"string"==typeof l[0]&&Vn.call(l,"index")&&(h.index=l.index,h.input=l.input),h}(l),!R)return Dr(l,T)}else{var ge=tr(l),Re=ge==hn||ge==jn;if(sa(l))return u_(l,R);if(ge==gt||ge==Gt||Re&&!v){if(T=G||Re?{}:y_(l),!R)return G?function ow(l,u){return Gs(l,b_(l),u)}(l,function Q0(l,u){return l&&Gs(u,gi(u),l)}(T,l)):function sw(l,u){return Gs(l,Kf(l),u)}(l,qm(T,l))}else{if(!Ln[ge])return v?l:{};T=function hw(l,u,h){var g=l.constructor;switch(u){case bc:return d_(l);case Ot:case tt:return new g(+l);case Sa:return function wx(l,u){var h=u?d_(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.byteLength)}(l,h);case qt:case Hu:case zo:case mn:case Gh:case Wh:case Uu:case qh:case Zh:return bd(l,h);case zn:return new g;case Dt:case gl:return new g(l);case ms:return function h_(l){var u=new l.constructor(l.source,vl.exec(l));return u.lastIndex=l.lastIndex,u}(l);case _s:return new g;case wn:return function Br(l){return Oc?Wn(Oc.call(l)):{}}(l)}}(l,ge,R)}}x||(x=new Lr);var nt=x.get(l);if(nt)return nt;x.set(l,T),$d(l)?l.forEach(function(dt){T.add(ns(dt,u,h,dt,l,x))}):Xe(l)&&l.forEach(function(dt,Kt){T.set(Kt,ns(dt,u,h,Kt,l,x))});var $t=ue?m:(le?G?Wf:Ed:G?gi:Bi)(l);return lr($t||l,function(dt,Kt){$t&&(dt=l[Kt=dt]),xi(T,Kt,ns(dt,u,h,Kt,l,x))}),T}function kc(l,u,h){var g=h.length;if(null==l)return!g;for(l=Wn(l);g--;){var v=h[g],T=l[v];if(T===m&&!(v in l)||!(0,u[v])(T))return!1}return!0}function Rc(l,u,h){if("function"!=typeof l)throw new Cs(me);return To(function(){l.apply(m,h)},u)}function Ra(l,u,h,g){var v=-1,x=es,T=!0,R=l.length,G=[],le=u.length;if(!R)return G;h&&(u=Jn(u,ei(h))),g?(x=xa,T=!1):u.length>=200&&(x=Lt,T=!1,u=new Co(u));e:for(;++v<R;){var ue=l[v],ge=null==h?ue:h(ue);if(ue=g||0!==ue?ue:0,T&&ge==ge){for(var Re=le;Re--;)if(u[Re]===ge)continue e;G.push(ue)}else x(u,ge,g)||G.push(ue)}return G}E.templateSettings={escape:u0,evaluate:d0,interpolate:zu,variable:"",imports:{_:E}},(E.prototype=od.prototype).constructor=E,(ts.prototype=Pa(od.prototype)).constructor=ts,(X.prototype=Pa(od.prototype)).constructor=X,Yo.prototype.clear=function Pc(){this.__data__=Dl?Dl(null):{},this.size=0},Yo.prototype.delete=function Us(l){var u=this.has(l)&&delete this.__data__[l];return this.size-=u?1:0,u},Yo.prototype.get=function Df(l){var u=this.__data__;if(Dl){var h=u[l];return h===se?m:h}return Vn.call(u,l)?u[l]:m},Yo.prototype.has=function Sf(l){var u=this.__data__;return Dl?u[l]!==m:Vn.call(u,l)},Yo.prototype.set=function _x(l,u){var h=this.__data__;return this.size+=this.has(l)?0:1,h[l]=Dl&&u===m?se:u,this},bo.prototype.clear=function vx(){this.__data__=[],this.size=0},bo.prototype.delete=function ad(l){var u=this.__data__,h=Ds(u,l);return!(h<0||(h==u.length-1?u.pop():xc.call(u,h,1),--this.size,0))},bo.prototype.get=function dr(l){var u=this.__data__,h=Ds(u,l);return h<0?m:u[h][1]},bo.prototype.has=function yo(l){return Ds(this.__data__,l)>-1},bo.prototype.set=function Hm(l,u){var h=this.__data__,g=Ds(h,l);return g<0?(++this.size,h.push([l,u])):h[g][1]=u,this},Er.prototype.clear=function wo(){this.size=0,this.__data__={hash:new Yo,map:new(Tc||bo),string:new Yo}},Er.prototype.delete=function W0(l){var u=Zf(this,l).delete(l);return this.size-=u?1:0,u},Er.prototype.get=function Um(l){return Zf(this,l).get(l)},Er.prototype.has=function q0(l){return Zf(this,l).has(l)},Er.prototype.set=function Z0(l,u){var h=Zf(this,l),g=h.size;return h.set(l,u),this.size+=h.size==g?0:1,this},Co.prototype.add=Co.prototype.push=function Af(l){return this.__data__.set(l,se),this},Co.prototype.has=function $m(l){return this.__data__.has(l)},Lr.prototype.clear=function K0(){this.__data__=new bo,this.size=0},Lr.prototype.delete=function zm(l){var u=this.__data__,h=u.delete(l);return this.size=u.size,h},Lr.prototype.get=function ld(l){return this.__data__.get(l)},Lr.prototype.has=function Gm(l){return this.__data__.has(l)},Lr.prototype.set=function Wm(l,u){var h=this.__data__;if(h instanceof bo){var g=h.__data__;if(!Tc||g.length<199)return g.push([l,u]),this.size=++h.size,this;h=this.__data__=new Er(g)}return h.set(l,u),this.size=h.size,this};var Do=Hc($s),Zm=Hc(Qm,!0);function Qo(l,u){var h=!0;return Do(l,function(g,v,x){return h=!!u(g,v,x)}),h}function Xo(l,u,h){for(var g=-1,v=l.length;++g<v;){var x=l[g],T=u(x);if(null!=T&&(R===m?T==T&&!xr(T):h(T,R)))var R=T,G=x}return G}function Km(l,u){var h=[];return Do(l,function(g,v,x){u(g,v,x)&&h.push(g)}),h}function fi(l,u,h,g,v){var x=-1,T=l.length;for(h||(h=hr),v||(v=[]);++x<T;){var R=l[x];u>0&&h(R)?u>1?fi(R,u-1,h,g,v):Cn(v,R):g||(v[v.length]=R)}return v}var Fc=aw(),Ym=aw(!0);function $s(l,u){return l&&Fc(l,u,Bi)}function Qm(l,u){return l&&Ym(l,u,Bi)}function Of(l,u){return mo(u,function(h){return Ys(l[h])})}function zs(l,u){for(var h=0,g=(u=As(u,l)).length;null!=l&&h<g;)l=l[Io(u[h++])];return h&&h==g?l:m}function Pf(l,u,h){var g=u(l);return Bt(l)?g:Cn(g,h(l))}function qi(l){return null==l?l===m?"[object Undefined]":"[object Null]":Oa&&Oa in Wn(l)?function Ex(l){var u=Vn.call(l,Oa),h=l[Oa];try{l[Oa]=m;var g=!0}catch(x){}var v=El.call(l);return g&&(u?l[Oa]=h:delete l[Oa]),v}(l):function gw(l){return El.call(l)}(l)}function xl(l,u){return l>u}function Xm(l,u){return null!=l&&Vn.call(l,u)}function Jm(l,u){return null!=l&&u in Wn(l)}function kf(l,u,h){for(var g=h?xa:es,v=l[0].length,x=l.length,T=x,R=Q(x),G=1/0,le=[];T--;){var ue=l[T];T&&u&&(ue=Jn(ue,ei(u))),G=er(ue.length,G),R[T]=!h&&(u||v>=120&&ue.length>=120)?new Co(T&&ue):m}ue=l[0];var ge=-1,Re=R[0];e:for(;++ge<v&&le.length<G;){var nt=ue[ge],mt=u?u(nt):nt;if(nt=h||0!==nt?nt:0,!(Re?Lt(Re,mt):g(le,mt,h))){for(T=x;--T;){var $t=R[T];if(!($t?Lt($t,mt):g(l[T],mt,h)))continue e}Re&&Re.push(mt),le.push(nt)}}return le}function Fa(l,u,h){var g=null==(l=Ad(l,u=As(u,l)))?l:l[Io(jr(u))];return null==g?m:Fi(g,l,h)}function Nc(l){return qe(l)&&qi(l)==Gt}function Il(l,u,h,g,v){return l===u||(null==l||null==u||!qe(l)&&!qe(u)?l!=l&&u!=u:function J0(l,u,h,g,v,x){var T=Bt(l),R=Bt(u),G=T?It:tr(l),le=R?It:tr(u),ue=(G=G==Gt?gt:G)==gt,ge=(le=le==Gt?gt:le)==gt,Re=G==le;if(Re&&sa(l)){if(!sa(u))return!1;T=!0,ue=!1}if(Re&&!ue)return x||(x=new Lr),T||Jc(l)?__(l,u,h,g,v,x):function v_(l,u,h,g,v,x,T){switch(h){case Sa:if(l.byteLength!=u.byteLength||l.byteOffset!=u.byteOffset)return!1;l=l.buffer,u=u.buffer;case bc:return!(l.byteLength!=u.byteLength||!x(new Ji(l),new Ji(u)));case Ot:case tt:case Dt:return Ks(+l,+u);case Te:return l.name==u.name&&l.message==u.message;case ms:case gl:return l==u+"";case zn:var R=qo;case _s:if(R||(R=Li),l.size!=u.size&&!(1&g))return!1;var le=T.get(l);if(le)return le==u;g|=2,T.set(l,u);var ue=__(R(l),R(u),g,v,x,T);return T.delete(l),ue;case wn:if(Oc)return Oc.call(l)==Oc.call(u)}return!1}(l,u,G,h,g,v,x);if(!(1&h)){var nt=ue&&Vn.call(l,"__wrapped__"),mt=ge&&Vn.call(u,"__wrapped__");if(nt||mt){var $t=nt?l.value():l,dt=mt?u.value():u;return x||(x=new Lr),v($t,dt,h,g,x)}}return!!Re&&(x||(x=new Lr),function Gf(l,u,h,g,v,x){var T=1&h,R=Ed(l),G=R.length;if(G!=Ed(u).length&&!T)return!1;for(var ge=G;ge--;){var Re=R[ge];if(!(T?Re in u:Vn.call(u,Re)))return!1}var nt=x.get(l),mt=x.get(u);if(nt&&mt)return nt==u&&mt==l;var $t=!0;x.set(l,u),x.set(u,l);for(var dt=T;++ge<G;){var Kt=l[Re=R[ge]],Yt=u[Re];if(g)var $r=T?g(Yt,Kt,Re,u,l,x):g(Kt,Yt,Re,l,u,x);if(!($r===m?Kt===Yt||v(Kt,Yt,h,g,x):$r)){$t=!1;break}dt||(dt="constructor"==Re)}if($t&&!dt){var fr=l.constructor,cs=u.constructor;fr!=cs&&"constructor"in l&&"constructor"in u&&!("function"==typeof fr&&fr instanceof fr&&"function"==typeof cs&&cs instanceof cs)&&($t=!1)}return x.delete(l),x.delete(u),$t}(l,u,h,g,v,x))}(l,u,h,g,Il,v))}function Na(l,u,h,g){var v=h.length,x=v,T=!g;if(null==l)return!x;for(l=Wn(l);v--;){var R=h[v];if(T&&R[2]?R[1]!==l[R[0]]:!(R[0]in l))return!1}for(;++v<x;){var G=(R=h[v])[0],le=l[G],ue=R[1];if(T&&R[2]){if(le===m&&!(G in l))return!1}else{var ge=new Lr;if(g)var Re=g(le,ue,G,l,u,ge);if(!(Re===m?Il(ue,le,3,g,ge):Re))return!1}}return!0}function dd(l){return!(!ri(l)||function Yf(l){return!!_f&&_f in l}(l))&&(Ys(l)?gx:Jh).test(os(l))}function t_(l){return"function"==typeof l?l:null==l?Mr:"object"==typeof l?Bt(l)?r_(l[0],l[1]):i_(l):zp(l)}function pd(l){if(!Wc(l))return ci(l);var u=[];for(var h in Wn(l))Vn.call(l,h)&&"constructor"!=h&&u.push(h);return u}function gd(l,u){return l<u}function Ff(l,u){var h=-1,g=Ar(l)?Q(l.length):[];return Do(l,function(v,x,T){g[++h]=u(v,x,T)}),g}function i_(l){var u=Dd(l);return 1==u.length&&u[0][2]?C_(u[0][0],u[0][1]):function(h){return h===l||Na(h,l,u)}}function r_(l,u){return Sd(l)&&Qf(u)?C_(Io(l),u):function(h){var g=tu(h,l);return g===m&&g===u?Wd(h,l):Il(u,g,3)}}function La(l,u,h,g,v){l!==u&&Fc(u,function(x,T){if(v||(v=new Lr),ri(x))!function Lc(l,u,h,g,v,x,T){var R=Jf(l,h),G=Jf(u,h),le=T.get(G);if(le)Tf(l,h,le);else{var ue=x?x(R,G,h+"",l,u,T):m,ge=ue===m;if(ge){var Re=Bt(G),nt=!Re&&sa(G),mt=!Re&&!nt&&Jc(G);ue=G,Re||nt||mt?Bt(R)?ue=R:ui(R)?ue=Dr(R):nt?(ge=!1,ue=u_(G,!0)):mt?(ge=!1,ue=bd(G,!0)):ue=[]:Hr(G)||ra(G)?(ue=R,ra(R)?ue=xp(R):(!ri(R)||Ys(R))&&(ue=y_(G))):ge=!1}ge&&(T.set(G,ue),v(ue,G,g,x,T),T.delete(G)),Tf(l,h,ue)}}(l,u,T,h,La,g,v);else{var R=g?g(Jf(l,T),x,T+"",l,u,v):m;R===m&&(R=x),Tf(l,T,R)}},gi)}function s_(l,u){var h=l.length;if(h)return xs(u+=u<0?h:0,h)?l[u]:m}function Nf(l,u,h){u=u.length?Jn(u,function(x){return Bt(x)?function(T){return zs(T,1===x.length?x[0]:x)}:x}):[Mr];var g=-1;return u=Jn(u,ei(ut())),function Ec(U,ie){var Q=U.length;for(U.sort(ie);Q--;)U[Q]=U[Q].value;return U}(Ff(l,function(x,T,R){return{criteria:Jn(u,function(le){return le(x)}),index:++g,value:x}}),function(x,T){return function Cx(l,u,h){for(var g=-1,v=l.criteria,x=u.criteria,T=v.length,R=h.length;++g<T;){var G=ja(v[g],x[g]);if(G)return g>=R?G:G*("desc"==h[g]?-1:1)}return l.index-u.index}(x,T,h)})}function Va(l,u,h){for(var g=-1,v=u.length,x={};++g<v;){var T=u[g],R=zs(l,T);h(R,T)&&md(x,As(T,l),R)}return x}function Vc(l,u,h,g){var v=g?Gi:Si,x=-1,T=u.length,R=l;for(l===u&&(u=Dr(u)),h&&(R=Jn(l,ei(h)));++x<T;)for(var G=0,le=u[x],ue=h?h(le):le;(G=v(R,ue,G,g))>-1;)R!==l&&xc.call(R,G,1),xc.call(l,G,1);return l}function Ol(l,u){for(var h=l?u.length:0,g=h-1;h--;){var v=u[h];if(h==g||v!==x){var x=v;xs(v)?xc.call(l,v,1):pi(l,v)}}return l}function Jo(l,u){return l+id(G0()*(u-l+1))}function ea(l,u){var h="";if(!l||u<1||u>Be)return h;do{u%2&&(h+=l),(u=id(u/2))&&(l+=l)}while(u);return h}function Ut(l,u){return xd(S_(l,u,Mr),l+"")}function Lf(l){return Mf(aa(l))}function kl(l,u){var h=aa(l);return Ll(h,ka(u,0,h.length))}function md(l,u,h,g){if(!ri(l))return l;for(var v=-1,x=(u=As(u,l)).length,T=x-1,R=l;null!=R&&++v<x;){var G=Io(u[v]),le=h;if("__proto__"===G||"constructor"===G||"prototype"===G)return l;if(v!=T){var ue=R[G];(le=g?g(ue,G,R):m)===m&&(le=ri(ue)?ue:xs(u[v+1])?[]:{})}xi(R,G,le),R=R[G]}return l}var a_=Sl?function(l,u){return Sl.set(l,u),l}:Mr,ke=cr?function(l,u){return cr(l,"toString",{configurable:!0,enumerable:!1,value:Vp(u),writable:!0})}:Mr;function tw(l){return Ll(aa(l))}function Ss(l,u,h){var g=-1,v=l.length;u<0&&(u=-u>v?0:v+u),(h=h>v?v:h)<0&&(h+=v),v=u>h?0:h-u>>>0,u>>>=0;for(var x=Q(v);++g<v;)x[g]=l[g+u];return x}function yx(l,u){var h;return Do(l,function(g,v,x){return!(h=u(g,v,x))}),!!h}function Vf(l,u,h){var g=0,v=null==l?g:l.length;if("number"==typeof u&&u==u&&v<=2147483647){for(;g<v;){var x=g+v>>>1,T=l[x];null!==T&&!xr(T)&&(h?T<=u:T<u)?g=x+1:v=x}return v}return l_(l,u,Mr,h)}function l_(l,u,h,g){var v=0,x=null==l?0:l.length;if(0===x)return 0;for(var T=(u=h(u))!=u,R=null===u,G=xr(u),le=u===m;v<x;){var ue=id((v+x)/2),ge=h(l[ue]),Re=ge!==m,nt=null===ge,mt=ge==ge,$t=xr(ge);if(T)var dt=g||mt;else dt=le?mt&&(g||Re):R?mt&&Re&&(g||!nt):G?mt&&Re&&!nt&&(g||!$t):!nt&&!$t&&(g?ge<=u:ge<u);dt?v=ue+1:x=ue}return er(x,4294967294)}function nw(l,u){for(var h=-1,g=l.length,v=0,x=[];++h<g;){var T=l[h],R=u?u(T):T;if(!h||!Ks(R,G)){var G=R;x[v++]=0===T?0:T}}return x}function iw(l){return"number"==typeof l?l:xr(l)?NaN:+l}function Zi(l){if("string"==typeof l)return l;if(Bt(l))return Jn(l,Zi)+"";if(xr(l))return jm?jm.call(l):"";var u=l+"";return"0"==u&&1/l==-Ke?"-0":u}function Ba(l,u,h){var g=-1,v=es,x=l.length,T=!0,R=[],G=R;if(h)T=!1,v=xa;else if(x>=200){var le=u?null:cw(l);if(le)return Li(le);T=!1,v=Lt,G=new Co}else G=u?[]:R;e:for(;++g<x;){var ue=l[g],ge=u?u(ue):ue;if(ue=h||0!==ue?ue:0,T&&ge==ge){for(var Re=G.length;Re--;)if(G[Re]===ge)continue e;u&&G.push(ge),R.push(ue)}else v(G,ge,h)||(G!==R&&G.push(ge),R.push(ue))}return R}function pi(l,u){return null==(l=Ad(l,u=As(u,l)))||delete l[Io(jr(u))]}function _d(l,u,h,g){return md(l,u,h(zs(l,u)),g)}function ta(l,u,h,g){for(var v=l.length,x=g?v:-1;(g?x--:++x<v)&&u(l[x],x,l););return h?Ss(l,g?0:x,g?x+1:v):Ss(l,g?x+1:0,g?v:x)}function rw(l,u){var h=l;return h instanceof X&&(h=h.value()),df(u,function(g,v){return v.func.apply(v.thisArg,Cn([g],v.args))},h)}function Bf(l,u,h){var g=l.length;if(g<2)return g?Ba(l[0]):[];for(var v=-1,x=Q(g);++v<g;)for(var T=l[v],R=-1;++R<g;)R!=v&&(x[v]=Ra(x[v]||T,l[R],u,h));return Ba(fi(x,1),u,h)}function Vr(l,u,h){for(var g=-1,v=l.length,x=u.length,T={};++g<v;)h(T,l[g],g<x?u[g]:m);return T}function is(l){return ui(l)?l:[]}function vd(l){return"function"==typeof l?l:Mr}function As(l,u){return Bt(l)?l:Sd(l,u)?[l]:np(Dn(l))}var Bc=Ut;function So(l,u,h){var g=l.length;return h=h===m?g:h,!u&&h>=g?l:Ss(l,u,h)}var c_=yf||function(l){return Xn.clearTimeout(l)};function u_(l,u){if(u)return l.slice();var h=l.length,g=vf?vf(h):new l.constructor(h);return l.copy(g),g}function d_(l){var u=new l.constructor(l.byteLength);return new Ji(u).set(new Ji(l)),u}function bd(l,u){var h=u?d_(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.length)}function ja(l,u){if(l!==u){var h=l!==m,g=null===l,v=l==l,x=xr(l),T=u!==m,R=null===u,G=u==u,le=xr(u);if(!R&&!le&&!x&&l>u||x&&T&&G&&!R&&!le||g&&T&&G||!h&&G||!v)return 1;if(!g&&!x&&!le&&l<u||le&&h&&v&&!g&&!x||R&&h&&v||!T&&v||!G)return-1}return 0}function jf(l,u,h,g){for(var v=-1,x=l.length,T=h.length,R=-1,G=u.length,le=bi(x-T,0),ue=Q(G+le),ge=!g;++R<G;)ue[R]=u[R];for(;++v<T;)(ge||v<x)&&(ue[h[v]]=l[v]);for(;le--;)ue[R++]=l[v++];return ue}function f_(l,u,h,g){for(var v=-1,x=l.length,T=-1,R=h.length,G=-1,le=u.length,ue=bi(x-R,0),ge=Q(ue+le),Re=!g;++v<ue;)ge[v]=l[v];for(var nt=v;++G<le;)ge[nt+G]=u[G];for(;++T<R;)(Re||v<x)&&(ge[nt+h[T]]=l[v++]);return ge}function Dr(l,u){var h=-1,g=l.length;for(u||(u=Q(g));++h<g;)u[h]=l[h];return u}function Gs(l,u,h,g){var v=!h;h||(h={});for(var x=-1,T=u.length;++x<T;){var R=u[x],G=g?g(h[R],l[R],R,h,l):m;G===m&&(G=l[R]),v?Eo(h,R,G):xi(h,R,G)}return h}function jc(l,u){return function(h,g){var v=Bt(h)?Hn:ii,x=u?u():{};return v(h,l,ut(g,2),x)}}function na(l){return Ut(function(u,h){var g=-1,v=h.length,x=v>1?h[v-1]:m,T=v>2?h[2]:m;for(x=l.length>3&&"function"==typeof x?(v--,x):m,T&&nr(h[0],h[1],T)&&(x=v<3?m:x,v=1),u=Wn(u);++g<v;){var R=h[g];R&&l(u,R,g,x)}return u})}function Hc(l,u){return function(h,g){if(null==h)return h;if(!Ar(h))return l(h,g);for(var v=h.length,x=u?v:-1,T=Wn(h);(u?x--:++x<v)&&!1!==g(T[x],x,T););return h}}function aw(l){return function(u,h,g){for(var v=-1,x=Wn(u),T=g(u),R=T.length;R--;){var G=T[l?R:++v];if(!1===h(x[G],G,x))break}return u}}function yd(l){return function(u){var h=vs(u=Dn(u))?ys(u):m,g=h?h[0]:u.charAt(0),v=h?So(h,1).join(""):u.slice(1);return g[l]()+v}}function Ao(l){return function(u){return df(Zd(Np(u).replace(Ge,"")),l,"")}}function $c(l){return function(){var u=arguments;switch(u.length){case 0:return new l;case 1:return new l(u[0]);case 2:return new l(u[0],u[1]);case 3:return new l(u[0],u[1],u[2]);case 4:return new l(u[0],u[1],u[2],u[3]);case 5:return new l(u[0],u[1],u[2],u[3],u[4]);case 6:return new l(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new l(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var h=Pa(l.prototype),g=l.apply(h,u);return ri(g)?g:h}}function p_(l){return function(u,h,g){var v=Wn(u);if(!Ar(u)){var x=ut(h,3);u=Bi(u),h=function(R){return x(v[R],R,v)}}var T=l(u,h,g);return T>-1?v[x?u[T]:T]:m}}function Hf(l){return ss(function(u){var h=u.length,g=h,v=ts.prototype.thru;for(l&&u.reverse();g--;){var x=u[g];if("function"!=typeof x)throw new Cs(me);if(v&&!T&&"wrapper"==Mo(x))var T=new ts([],!0)}for(g=T?g:h;++g<h;){var R=Mo(x=u[g]),G="wrapper"==R?qf(x):m;T=G&&Ua(G[0])&&424==G[1]&&!G[4].length&&1==G[9]?T[Mo(G[0])].apply(T,G[3]):1==x.length&&Ua(x)?T[R]():T.thru(x)}return function(){var le=arguments,ue=le[0];if(T&&1==le.length&&Bt(ue))return T.plant(ue).value();for(var ge=0,Re=h?u[ge].apply(this,le):ue;++ge<h;)Re=u[ge].call(this,Re);return Re}})}function wd(l,u,h,g,v,x,T,R,G,le){var ue=128&u,ge=1&u,Re=2&u,nt=24&u,mt=512&u,$t=Re?m:$c(l);return function dt(){for(var Kt=arguments.length,Yt=Q(Kt),$r=Kt;$r--;)Yt[$r]=arguments[$r];if(nt)var fr=Ws(dt),cs=Ma(Yt,fr);if(g&&(Yt=jf(Yt,g,v,nt)),x&&(Yt=f_(Yt,x,T,nt)),Kt-=cs,nt&&Kt<le){var Ci=Nr(Yt,fr);return Nl(l,u,wd,dt.placeholder,h,Yt,Ci,R,G,le-Kt)}var zr=ge?h:this,Po=Re?zr[l]:l;return Kt=Yt.length,R?Yt=Xf(Yt,R):mt&&Kt>1&&Yt.reverse(),ue&&G<Kt&&(Yt.length=G),this&&this!==Xn&&this instanceof dt&&(Po=$t||$c(Po)),Po.apply(zr,Yt)}}function Rl(l,u){return function(h,g){return function Tl(l,u,h,g){return $s(l,function(v,x,T){u(g,h(v),x,T)}),g}(h,l,u(g),{})}}function zc(l,u){return function(h,g){var v;if(h===m&&g===m)return u;if(h!==m&&(v=h),g!==m){if(v===m)return g;"string"==typeof h||"string"==typeof g?(h=Zi(h),g=Zi(g)):(h=iw(h),g=iw(g)),v=l(h,g)}return v}}function Uf(l){return ss(function(u){return u=Jn(u,ei(ut())),Ut(function(h){var g=this;return l(u,function(v){return Fi(v,g,h)})})})}function ne(l,u){var h=(u=u===m?" ":Zi(u)).length;if(h<2)return h?ea(u,l):u;var g=ea(u,nd(l/bn(u)));return vs(u)?So(ys(g),0,l).join(""):g.slice(0,l)}function Cd(l){return function(u,h,g){return g&&"number"!=typeof g&&nr(u,h,g)&&(h=g=m),u=Oo(u),h===m?(h=u,u=0):h=Oo(h),function Pl(l,u,h,g){for(var v=-1,x=bi(nd((u-l)/(h||1)),0),T=Q(x);x--;)T[g?x:++v]=l,l+=h;return T}(u,h,g=g===m?u<h?1:-1:Oo(g),l)}}function Fl(l){return function(u,h){return"string"==typeof u&&"string"==typeof h||(u=as(u),h=as(h)),l(u,h)}}function Nl(l,u,h,g,v,x,T,R,G,le){var ue=8&u;u|=ue?32:64,4&(u&=~(ue?64:32))||(u&=-4);var $t=[l,u,v,ue?x:m,ue?T:m,ue?m:x,ue?m:T,R,G,le],dt=h.apply(m,$t);return Ua(l)&&ep(dt,$t),dt.placeholder=g,tp(dt,l,u)}function $f(l){var u=Vi[l];return function(h,g){if(h=as(h),(g=null==g?0:er(Ht(g),292))&&rd(h)){var v=(Dn(h)+"e").split("e");return+((v=(Dn(u(v[0]+"e"+(+v[1]+g)))+"e").split("e"))[0]+"e"+(+v[1]-g))}return u(h)}}var cw=Es&&1/Li(new Es([,-0]))[1]==Ke?function(l){return new Es(l)}:Tv;function m_(l){return function(u){var h=tr(u);return h==zn?qo(u):h==_s?function Sc(U){var ie=-1,Q=Array(U.size);return U.forEach(function($e){Q[++ie]=[$e,$e]}),Q}(u):function Xi(U,ie){return Jn(ie,function(Q){return[Q,U[Q]]})}(u,l(u))}}function rs(l,u,h,g,v,x,T,R){var G=2&u;if(!G&&"function"!=typeof l)throw new Cs(me);var le=g?g.length:0;if(le||(u&=-97,g=v=m),T=T===m?T:bi(Ht(T),0),R=R===m?R:Ht(R),le-=v?v.length:0,64&u){var ue=g,ge=v;g=v=m}var Re=G?m:qf(l),nt=[l,u,h,g,v,ue,ge,x,T,R];if(Re&&function pw(l,u){var h=l[1],g=u[1],v=h|g;if(!(v<131||(128==g&&8==h||128==g&&256==h&&l[7].length<=u[8]||384==g&&u[7].length<=u[8]&&8==h)))return l;1&g&&(l[2]=u[2],v|=1&h?0:4);var R=u[3];if(R){var G=l[3];l[3]=G?jf(G,R,u[4]):R,l[4]=G?Nr(l[3],Y):u[4]}(R=u[5])&&(l[5]=(G=l[5])?f_(G,R,u[6]):R,l[6]=G?Nr(l[5],Y):u[6]),(R=u[7])&&(l[7]=R),128&g&&(l[8]=null==l[8]?u[8]:er(l[8],u[8])),null==l[9]&&(l[9]=u[9]),l[0]=u[0],l[1]=v}(nt,Re),l=nt[0],u=nt[1],h=nt[2],g=nt[3],v=nt[4],!(R=nt[9]=nt[9]===m?G?0:l.length:bi(nt[9]-le,0))&&24&u&&(u&=-25),u&&1!=u)mt=8==u||16==u?function lw(l,u,h){var g=$c(l);return function v(){for(var x=arguments.length,T=Q(x),R=x,G=Ws(v);R--;)T[R]=arguments[R];var le=x<3&&T[0]!==G&&T[x-1]!==G?[]:Nr(T,G);return(x-=le.length)<h?Nl(l,u,wd,v.placeholder,m,T,le,m,m,h-x):Fi(this&&this!==Xn&&this instanceof v?g:l,this,T)}}(l,u,R):32!=u&&33!=u||v.length?wd.apply(m,nt):function g_(l,u,h,g){var v=1&u,x=$c(l);return function T(){for(var R=-1,G=arguments.length,le=-1,ue=g.length,ge=Q(ue+G),Re=this&&this!==Xn&&this instanceof T?x:l;++le<ue;)ge[le]=g[le];for(;G--;)ge[le++]=arguments[++R];return Fi(Re,v?h:this,ge)}}(l,u,h,g);else var mt=function Uc(l,u,h){var g=1&u,v=$c(l);return function x(){return(this&&this!==Xn&&this instanceof x?v:l).apply(g?h:this,arguments)}}(l,u,h);return tp((Re?a_:ep)(mt,nt),l,u)}function xo(l,u,h,g){return l===m||Ks(l,Ac[h])&&!Vn.call(g,h)?u:l}function zf(l,u,h,g,v,x){return ri(l)&&ri(u)&&(x.set(u,l),La(l,u,m,zf,x),x.delete(u)),l}function Gc(l){return Hr(l)?m:l}function __(l,u,h,g,v,x){var T=1&h,R=l.length,G=u.length;if(R!=G&&!(T&&G>R))return!1;var le=x.get(l),ue=x.get(u);if(le&&ue)return le==u&&ue==l;var ge=-1,Re=!0,nt=2&h?new Co:m;for(x.set(l,u),x.set(u,l);++ge<R;){var mt=l[ge],$t=u[ge];if(g)var dt=T?g($t,mt,ge,u,l,x):g(mt,$t,ge,l,u,x);if(dt!==m){if(dt)continue;Re=!1;break}if(nt){if(!Ku(u,function(Kt,Yt){if(!Lt(nt,Yt)&&(mt===Kt||v(mt,Kt,h,g,x)))return nt.push(Yt)})){Re=!1;break}}else if(mt!==$t&&!v(mt,$t,h,g,x)){Re=!1;break}}return x.delete(l),x.delete(u),Re}function ss(l){return xd(S_(l,m,T_),l+"")}function Ed(l){return Pf(l,Bi,Kf)}function Wf(l){return Pf(l,gi,b_)}var qf=Sl?function(l){return Sl.get(l)}:Tv;function Mo(l){for(var u=l.name+"",h=Al[u],g=Vn.call(Al,u)?h.length:0;g--;){var v=h[g],x=v.func;if(null==x||x==l)return v.name}return u}function Ws(l){return(Vn.call(E,"placeholder")?E:l).placeholder}function ut(){var l=E.iteratee||jp;return l=l===jp?t_:l,arguments.length?l(arguments[0],arguments[1]):l}function Zf(l,u){var h=l.__data__;return function ir(l){var u=typeof l;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==l:null===l}(u)?h["string"==typeof u?"string":"hash"]:h.map}function Dd(l){for(var u=Bi(l),h=u.length;h--;){var g=u[h],v=l[g];u[h]=[g,v,Qf(v)]}return u}function Ha(l,u){var h=function Dc(U,ie){return null==U?m:U[ie]}(l,u);return dd(h)?h:m}var Kf=Mc?function(l){return null==l?[]:(l=Wn(l),mo(Mc(l),function(u){return bf.call(l,u)}))}:Yd,b_=Mc?function(l){for(var u=[];l;)Cn(u,Kf(l)),l=td(l);return u}:Yd,tr=qi;function Sr(l,u,h){for(var g=-1,v=(u=As(u,l)).length,x=!1;++g<v;){var T=Io(u[g]);if(!(x=null!=l&&h(l,T)))break;l=l[T]}return x||++g!=v?x:!!(v=null==l?0:l.length)&&jd(v)&&xs(T,v)&&(Bt(l)||ra(l))}function y_(l){return"function"!=typeof l.constructor||Wc(l)?{}:Pa(td(l))}function hr(l){return Bt(l)||ra(l)||!!(Lm&&l&&l[Lm])}function xs(l,u){var h=typeof l;return!!(u=null==u?Be:u)&&("number"==h||"symbol"!=h&&v0.test(l))&&l>-1&&l%1==0&&l<u}function nr(l,u,h){if(!ri(h))return!1;var g=typeof u;return!!("number"==g?Ar(h)&&xs(u,h.length):"string"==g&&u in h)&&Ks(h[u],l)}function Sd(l,u){if(Bt(l))return!1;var h=typeof l;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=l&&!xr(l))||f0.test(l)||!h0.test(l)||null!=u&&l in Wn(u)}function Ua(l){var u=Mo(l),h=E[u];if("function"!=typeof h||!(u in X.prototype))return!1;if(l===h)return!0;var g=qf(h);return!!g&&l===g[0]}(ur&&tr(new ur(new ArrayBuffer(1)))!=Sa||Tc&&tr(new Tc)!=zn||Ic&&tr(Ic.resolve())!=Gn||Es&&tr(new Es)!=_s||Wi&&tr(new Wi)!=ml)&&(tr=function(l){var u=qi(l),h=u==gt?l.constructor:m,g=h?os(h):"";if(g)switch(g){case Ko:return Sa;case Vm:return zn;case Cf:return Gn;case xt:return _s;case Bm:return ml}return u});var fw=gf?Ys:Is;function Wc(l){var u=l&&l.constructor;return l===("function"==typeof u&&u.prototype||Ac)}function Qf(l){return l==l&&!ri(l)}function C_(l,u){return function(h){return null!=h&&h[l]===u&&(u!==m||l in Wn(h))}}function S_(l,u,h){return u=bi(u===m?l.length-1:u,0),function(){for(var g=arguments,v=-1,x=bi(g.length-u,0),T=Q(x);++v<x;)T[v]=g[u+v];v=-1;for(var R=Q(u+1);++v<u;)R[v]=g[v];return R[u]=h(T),Fi(l,this,R)}}function Ad(l,u){return u.length<2?l:zs(l,Ss(u,0,-1))}function Xf(l,u){for(var h=l.length,g=er(u.length,h),v=Dr(l);g--;){var x=u[g];l[g]=xs(x,h)?v[x]:m}return l}function Jf(l,u){if(("constructor"!==u||"function"!=typeof l[u])&&"__proto__"!=u)return l[u]}var ep=Md(a_),To=wf||function(l,u){return Xn.setTimeout(l,u)},xd=Md(ke);function tp(l,u,h){var g=u+"";return xd(l,function w_(l,u){var h=u.length;if(!h)return l;var g=h-1;return u[g]=(h>1?"& ":"")+u[g],u=u.join(h>2?", ":" "),l.replace(yc,"{\n/* [wrapped with "+u+"] */\n")}(g,function ip(l,u){return lr(at,function(h){var g="_."+h[0];u&h[1]&&!es(l,g)&&l.push(g)}),l.sort()}(function Dx(l){var u=l.match(nx);return u?u[1].split(wc):[]}(g),h)))}function Md(l){var u=0,h=0;return function(){var g=yi(),v=16-(g-h);if(h=g,v>0){if(++u>=800)return arguments[0]}else u=0;return l.apply(m,arguments)}}function Ll(l,u){var h=-1,g=l.length,v=g-1;for(u=u===m?g:u;++h<u;){var x=Jo(h,v),T=l[x];l[x]=l[h],l[h]=T}return l.length=u,l}var np=function E_(l){var u=Bd(l,function(g){return 500===h.size&&h.clear(),g}),h=u.cache;return u}(function(l){var u=[];return 46===l.charCodeAt(0)&&u.push(""),l.replace(p0,function(h,g,v,x){u.push(v?x.replace(m0,"$1"):g||h)}),u});function Io(l){if("string"==typeof l||xr(l))return l;var u=l+"";return"0"==u&&1/l==-Ke?"-0":u}function os(l){if(null!=l){try{return mf.call(l)}catch(u){}try{return l+""}catch(u){}}return""}function rp(l){if(l instanceof X)return l.clone();var u=new ts(l.__wrapped__,l.__chain__);return u.__actions__=Dr(l.__actions__),u.__index__=l.__index__,u.__values__=l.__values__,u}var vw=Ut(function(l,u){return ui(l)?Ra(l,fi(u,1,ui,!0)):[]}),bw=Ut(function(l,u){var h=jr(u);return ui(h)&&(h=m),ui(l)?Ra(l,fi(u,1,ui,!0),ut(h,2)):[]}),yw=Ut(function(l,u){var h=jr(u);return ui(h)&&(h=m),ui(l)?Ra(l,fi(u,1,ui,!0),m,h):[]});function Td(l,u,h){var g=null==l?0:l.length;if(!g)return-1;var v=null==h?0:Ht(h);return v<0&&(v=bi(g+v,0)),Ne(l,ut(u,3),v)}function M_(l,u,h){var g=null==l?0:l.length;if(!g)return-1;var v=g-1;return h!==m&&(v=Ht(h),v=h<0?bi(g+v,0):er(v,g-1)),Ne(l,ut(u,3),v,!0)}function T_(l){return null!=l&&l.length?fi(l,1):[]}function ap(l){return l&&l.length?l[0]:m}var Id=Ut(function(l){var u=Jn(l,is);return u.length&&u[0]===l[0]?kf(u):[]}),Dw=Ut(function(l){var u=jr(l),h=Jn(l,is);return u===jr(h)?u=m:h.pop(),h.length&&h[0]===l[0]?kf(h,ut(u,2)):[]}),k_=Ut(function(l){var u=jr(l),h=Jn(l,is);return(u="function"==typeof u?u:m)&&h.pop(),h.length&&h[0]===l[0]?kf(h,m,u):[]});function jr(l){var u=null==l?0:l.length;return u?l[u-1]:m}var Od=Ut(qc);function qc(l,u){return l&&l.length&&u&&u.length?Vc(l,u):l}var up=ss(function(l,u){var h=null==l?0:l.length,g=If(l,u);return Ol(l,Jn(u,function(v){return xs(v,h)?+v:v}).sort(ja)),g});function za(l){return null==l?l:sd.call(l)}var pp=Ut(function(l){return Ba(fi(l,1,ui,!0))}),B_=Ut(function(l){var u=jr(l);return ui(u)&&(u=m),Ba(fi(l,1,ui,!0),ut(u,2))}),j_=Ut(function(l){var u=jr(l);return u="function"==typeof u?u:m,Ba(fi(l,1,ui,!0),m,u)});function gp(l){if(!l||!l.length)return[];var u=0;return l=mo(l,function(h){if(ui(h))return u=bi(h.length,u),!0}),vo(u,function(h){return Jn(l,yr(h))})}function $_(l,u){if(!l||!l.length)return[];var h=gp(l);return null==u?h:Jn(h,function(g){return Fi(u,m,g)})}var Pw=Ut(function(l,u){return ui(l)?Ra(l,u):[]}),kw=Ut(function(l){return Bf(mo(l,ui))}),ia=Ut(function(l){var u=jr(l);return ui(u)&&(u=m),Bf(mo(l,ui),ut(u,2))}),Zc=Ut(function(l){var u=jr(l);return u="function"==typeof u?u:m,Bf(mo(l,ui),m,u)}),Rw=Ut(gp),Mx=Ut(function(l){var u=l.length,h=u>1?l[u-1]:m;return h="function"==typeof h?(l.pop(),h):m,$_(l,h)});function Fw(l){var u=E(l);return u.__chain__=!0,u}function Kc(l,u){return u(l)}var Nw=ss(function(l){var u=l.length,h=u?l[0]:0,g=this.__wrapped__,v=function(x){return If(x,l)};return!(u>1||this.__actions__.length)&&g instanceof X&&xs(h)?((g=g.slice(h,+h+(u?1:0))).__actions__.push({func:Kc,args:[v],thisArg:m}),new ts(g,this.__chain__).thru(function(x){return u&&!x.length&&x.push(m),x})):this.thru(v)}),qs=jc(function(l,u,h){Vn.call(l,h)?++l[h]:Eo(l,h,1)}),W_=p_(Td),q_=p_(M_);function Fd(l,u){return(Bt(l)?lr:Do)(l,ut(u,3))}function Nd(l,u){return(Bt(l)?uf:Zm)(l,ut(u,3))}var mp=jc(function(l,u,h){Vn.call(l,h)?l[h].push(u):Eo(l,h,[u])}),Fx=Ut(function(l,u,h){var g=-1,v="function"==typeof u,x=Ar(l)?Q(l.length):[];return Do(l,function(T){x[++g]=v?Fi(u,T,h):Fa(T,u,h)}),x}),Z_=jc(function(l,u,h){Eo(l,h,u)});function Ld(l,u){return(Bt(l)?Jn:Ff)(l,ut(u,3))}var Uw=jc(function(l,u,h){l[h?0:1].push(u)},function(){return[[],[]]}),qw=Ut(function(l,u){if(null==l)return[];var h=u.length;return h>1&&nr(l,u[0],u[1])?u=[]:h>2&&nr(u[0],u[1],u[2])&&(u=[u[0]]),Nf(l,fi(u,1),[])}),Vl=U0||function(){return Xn.Date.now()};function Q_(l,u,h){return u=h?m:u,rs(l,128,m,m,m,m,u=l&&null==u?l.length:u)}function X_(l,u){var h;if("function"!=typeof u)throw new Cs(me);return l=Ht(l),function(){return--l>0&&(h=u.apply(this,arguments)),l<=1&&(u=m),h}}var vp=Ut(function(l,u,h){var g=1;if(h.length){var v=Nr(h,Ws(vp));g|=32}return rs(l,g,u,h,v)}),J_=Ut(function(l,u,h){var g=3;if(h.length){var v=Nr(h,Ws(J_));g|=32}return rs(u,g,l,h,v)});function Kw(l,u,h){var g,v,x,T,R,G,le=0,ue=!1,ge=!1,Re=!0;if("function"!=typeof l)throw new Cs(me);function nt(Ci){var zr=g,Po=v;return g=v=m,le=Ci,T=l.apply(Po,zr)}function mt(Ci){return le=Ci,R=To(Kt,u),ue?nt(Ci):T}function dt(Ci){var zr=Ci-G;return G===m||zr>=u||zr<0||ge&&Ci-le>=x}function Kt(){var Ci=Vl();if(dt(Ci))return Yt(Ci);R=To(Kt,function $t(Ci){var Kp=u-(Ci-G);return ge?er(Kp,x-(Ci-le)):Kp}(Ci))}function Yt(Ci){return R=m,Re&&g?nt(Ci):(g=v=m,T)}function cs(){var Ci=Vl(),zr=dt(Ci);if(g=arguments,v=this,G=Ci,zr){if(R===m)return mt(G);if(ge)return c_(R),R=To(Kt,u),nt(G)}return R===m&&(R=To(Kt,u)),T}return u=as(u)||0,ri(h)&&(ue=!!h.leading,x=(ge="maxWait"in h)?bi(as(h.maxWait)||0,u):x,Re="trailing"in h?!!h.trailing:Re),cs.cancel=function $r(){R!==m&&c_(R),le=0,g=G=v=R=m},cs.flush=function fr(){return R===m?T:Yt(Vl())},cs}var Qc=Ut(function(l,u){return Rc(l,1,u)}),bp=Ut(function(l,u,h){return Rc(l,as(u)||0,h)});function Bd(l,u){if("function"!=typeof l||null!=u&&"function"!=typeof u)throw new Cs(me);var h=function(){var g=arguments,v=u?u.apply(this,g):g[0],x=h.cache;if(x.has(v))return x.get(v);var T=l.apply(this,g);return h.cache=x.set(v,T)||x,T};return h.cache=new(Bd.Cache||Er),h}function Bl(l){if("function"!=typeof l)throw new Cs(me);return function(){var u=arguments;switch(u.length){case 0:return!l.call(this);case 1:return!l.call(this,u[0]);case 2:return!l.call(this,u[0],u[1]);case 3:return!l.call(this,u[0],u[1],u[2])}return!l.apply(this,u)}}Bd.Cache=Er;var Xw=Bc(function(l,u){var h=(u=1==u.length&&Bt(u[0])?Jn(u[0],ei(ut())):Jn(fi(u,1),ei(ut()))).length;return Ut(function(g){for(var v=-1,x=er(g.length,h);++v<x;)g[v]=u[v].call(this,g[v]);return Fi(l,this,g)})}),Wa=Ut(function(l,u){var h=Nr(u,Ws(Wa));return rs(l,32,m,u,h)}),tv=Ut(function(l,u){var h=Nr(u,Ws(tv));return rs(l,64,m,u,h)}),Jw=ss(function(l,u){return rs(l,256,m,m,m,u)});function Ks(l,u){return l===u||l!=l&&u!=u}var nv=Fl(xl),Lx=Fl(function(l,u){return l>=u}),ra=Nc(function(){return arguments}())?Nc:function(l){return qe(l)&&Vn.call(l,"callee")&&!bf.call(l,"callee")},Bt=Q.isArray,iv=Tm?ei(Tm):function bx(l){return qe(l)&&qi(l)==bc};function Ar(l){return null!=l&&jd(l.length)&&!Ys(l)}function ui(l){return qe(l)&&Ar(l)}var sa=$0||Is,Ms=Im?ei(Im):function e_(l){return qe(l)&&qi(l)==tt};function Cp(l){if(!qe(l))return!1;var u=qi(l);return u==Te||"[object DOMException]"==u||"string"==typeof l.message&&"string"==typeof l.name&&!Hr(l)}function Ys(l){if(!ri(l))return!1;var u=qi(l);return u==hn||u==jn||"[object AsyncFunction]"==u||"[object Proxy]"==u}function sv(l){return"number"==typeof l&&l==Ht(l)}function jd(l){return"number"==typeof l&&l>-1&&l%1==0&&l<=Be}function ri(l){var u=typeof l;return null!=l&&("object"==u||"function"==u)}function qe(l){return null!=l&&"object"==typeof l}var Xe=V0?ei(V0):function ew(l){return qe(l)&&tr(l)==zn};function Ud(l){return"number"==typeof l||qe(l)&&qi(l)==Dt}function Hr(l){if(!qe(l)||qi(l)!=gt)return!1;var u=td(l);if(null===u)return!0;var h=Vn.call(u,"constructor")&&u.constructor;return"function"==typeof h&&h instanceof h&&mf.call(h)==fx}var Xc=In?ei(In):function Rf(l){return qe(l)&&qi(l)==ms},$d=B0?ei(B0):function hd(l){return qe(l)&&tr(l)==_s};function Ep(l){return"string"==typeof l||!Bt(l)&&qe(l)&&qi(l)==gl}function xr(l){return"symbol"==typeof l||qe(l)&&qi(l)==wn}var Jc=j0?ei(j0):function fd(l){return qe(l)&&jd(l.length)&&!!Nn[qi(l)]},Sp=Fl(gd),Ap=Fl(function(l,u){return l<=u});function hC(l){if(!l)return[];if(Ar(l))return Ep(l)?ys(l):Dr(l);if(Ia&&l[Ia])return function Qu(U){for(var ie,Q=[];!(ie=U.next()).done;)Q.push(ie.value);return Q}(l[Ia]());var u=tr(l);return(u==zn?qo:u==_s?Li:aa)(l)}function Oo(l){return l?(l=as(l))===Ke||l===-Ke?17976931348623157e292*(l<0?-1:1):l==l?l:0:0===l?l:0}function Ht(l){var u=Oo(l),h=u%1;return u==u?h?u-h:u:0}function uv(l){return l?ka(Ht(l),0,Je):0}function as(l){if("number"==typeof l)return l;if(xr(l))return NaN;if(ri(l)){var u="function"==typeof l.valueOf?l.valueOf():l;l=ri(u)?u+"":u}if("string"!=typeof l)return 0===l?l:+l;l=km(l);var h=Cc.test(l);return h||_0.test(l)?Go(l.slice(2),h?2:8):Xh.test(l)?NaN:+l}function xp(l){return Gs(l,gi(l))}function Dn(l){return null==l?"":Zi(l)}var Bx=na(function(l,u){if(Wc(u)||Ar(u))Gs(u,Bi(u),l);else for(var h in u)Vn.call(u,h)&&xi(l,h,u[h])}),Mp=na(function(l,u){Gs(u,gi(u),l)}),eu=na(function(l,u,h,g){Gs(u,gi(u),l,g)}),fC=na(function(l,u,h,g){Gs(u,Bi(u),l,g)}),Tp=ss(If),Hx=Ut(function(l,u){l=Wn(l);var h=-1,g=u.length,v=g>2?u[2]:m;for(v&&nr(u[0],u[1],v)&&(g=1);++h<g;)for(var x=u[h],T=gi(x),R=-1,G=T.length;++R<G;){var le=T[R],ue=l[le];(ue===m||Ks(ue,Ac[le])&&!Vn.call(l,le))&&(l[le]=x[le])}return l}),Ux=Ut(function(l){return l.push(m,zf),Fi(fv,m,l)});function tu(l,u,h){var g=null==l?m:zs(l,u);return g===m?h:g}function Wd(l,u){return null!=l&&Sr(l,u,Jm)}var Ip=Rl(function(l,u,h){null!=u&&"function"!=typeof u.toString&&(u=El.call(u)),l[u]=h},Vp(Mr)),dv=Rl(function(l,u,h){null!=u&&"function"!=typeof u.toString&&(u=El.call(u)),Vn.call(l,u)?l[u].push(h):l[u]=[h]},ut),Op=Ut(Fa);function Bi(l){return Ar(l)?xf(l):pd(l)}function gi(l){return Ar(l)?xf(l,!0):function n_(l){if(!ri(l))return function D_(l){var u=[];if(null!=l)for(var h in Wn(l))u.push(h);return u}(l);var u=Wc(l),h=[];for(var g in l)"constructor"==g&&(u||!Vn.call(l,g))||h.push(g);return h}(l)}var Pp=na(function(l,u,h){La(l,u,h)}),fv=na(function(l,u,h,g){La(l,u,h,g)}),pv=ss(function(l,u){var h={};if(null==l)return h;var g=!1;u=Jn(u,function(x){return x=As(x,l),g||(g=x.length>1),x}),Gs(l,Wf(l),h),g&&(h=ns(h,7,Gc));for(var v=u.length;v--;)pi(h,u[v]);return h}),_C=ss(function(l,u){return null==l?{}:function o_(l,u){return Va(l,u,function(h,g){return Wd(l,g)})}(l,u)});function Hl(l,u){if(null==l)return{};var h=Jn(Wf(l),function(g){return[g]});return u=ut(u),Va(l,h,function(g,v){return u(g,v[0])})}var zl=m_(Bi),qa=m_(gi);function aa(l){return null==l?[]:Le(l,Bi(l))}var Yx=Ao(function(l,u,h){return u=u.toLowerCase(),l+(h?Fp(u):u)});function Fp(l){return ls(Dn(l).toLowerCase())}function Np(l){return(l=Dn(l))&&l.replace(bm,Ni).replace(lx,"")}var CC=Ao(function(l,u,h){return l+(h?"-":"")+u.toLowerCase()}),Ur=Ao(function(l,u,h){return l+(h?" ":"")+u.toLowerCase()}),EC=yd("toLowerCase"),Lp=Ao(function(l,u,h){return l+(h?"_":"")+u.toLowerCase()}),AC=Ao(function(l,u,h){return l+(h?" ":"")+ls(u)}),PC=Ao(function(l,u,h){return l+(h?" ":"")+u.toUpperCase()}),ls=yd("toUpperCase");function Zd(l,u,h){return l=Dn(l),(u=h?m:u)===m?function Vt(U){return k0.test(U)}(l)?function Ju(U){return U.match(af)||[]}(l):function H0(U){return U.match(zi)||[]}(l):l.match(u)||[]}var Av=Ut(function(l,u){try{return Fi(l,m,u)}catch(h){return Cp(h)?h:new Pt(h)}}),kC=ss(function(l,u){return lr(u,function(h){h=Io(h),Eo(l,h,vp(l[h],l))}),l});function Vp(l){return function(){return l}}var FC=Hf(),Bp=Hf(!0);function Mr(l){return l}function jp(l){return t_("function"==typeof l?l:ns(l,1))}var NC=Ut(function(l,u){return function(h){return Fa(h,l,u)}}),Up=Ut(function(l,u){return function(h){return Fa(l,h,u)}});function nu(l,u,h){var g=Bi(u),v=Of(u,g);null==h&&(!ri(u)||!v.length&&g.length)&&(h=u,u=l,l=this,v=Of(u,Bi(u)));var x=!(ri(h)&&"chain"in h&&!h.chain),T=Ys(l);return lr(v,function(R){var G=u[R];l[R]=G,T&&(l.prototype[R]=function(){var le=this.__chain__;if(x||le){var ue=l(this.__wrapped__),ge=ue.__actions__=Dr(this.__actions__);return ge.push({func:G,args:arguments,thisArg:l}),ue.__chain__=le,ue}return G.apply(l,Cn([this.value()],arguments))})}),l}function Tv(){}var $p=Uf(Jn),n1=Uf(Zu),LC=Uf(Ku);function zp(l){return Sd(l)?yr(Io(l)):function Mi(l){return function(u){return zs(u,l)}}(l)}var Ov=Cd(),Pv=Cd(!0);function Yd(){return[]}function Is(){return!1}var Wp=zc(function(l,u){return l+u},0),iu=$f("ceil"),jC=zc(function(l,u){return l/u},1),qp=$f("floor"),$C=zc(function(l,u){return l*u},1),Lv=$f("round"),Gl=zc(function(l,u){return l-u},0);return E.after=function Y_(l,u){if("function"!=typeof u)throw new Cs(me);return l=Ht(l),function(){if(--l<1)return u.apply(this,arguments)}},E.ary=Q_,E.assign=Bx,E.assignIn=Mp,E.assignInWith=eu,E.assignWith=fC,E.at=Tp,E.before=X_,E.bind=vp,E.bindAll=kC,E.bindKey=J_,E.castArray=function yp(){if(!arguments.length)return[];var l=arguments[0];return Bt(l)?l:[l]},E.chain=Fw,E.chunk=function mw(l,u,h){u=(h?nr(l,u,h):u===m)?1:bi(Ht(u),0);var g=null==l?0:l.length;if(!g||u<1)return[];for(var v=0,x=0,T=Q(nd(g/u));v<g;)T[x++]=Ss(l,v,v+=u);return T},E.compact=function sp(l){for(var u=-1,h=null==l?0:l.length,g=0,v=[];++u<h;){var x=l[u];x&&(v[g++]=x)}return v},E.concat=function _w(){var l=arguments.length;if(!l)return[];for(var u=Q(l-1),h=arguments[0],g=l;g--;)u[g-1]=arguments[g];return Cn(Bt(h)?Dr(h):[h],fi(u,1))},E.cond=function e1(l){var u=null==l?0:l.length,h=ut();return l=u?Jn(l,function(g){if("function"!=typeof g[1])throw new Cs(me);return[h(g[0]),g[1]]}):[],Ut(function(g){for(var v=-1;++v<u;){var x=l[v];if(Fi(x[0],this,g))return Fi(x[1],this,g)}})},E.conforms=function xv(l){return function ud(l){var u=Bi(l);return function(h){return kc(h,l,u)}}(ns(l,1))},E.constant=Vp,E.countBy=qs,E.create=function jx(l,u){var h=Pa(l);return null==u?h:qm(h,u)},E.curry=function ev(l,u,h){var g=rs(l,8,m,m,m,m,m,u=h?m:u);return g.placeholder=ev.placeholder,g},E.curryRight=function Zw(l,u,h){var g=rs(l,16,m,m,m,m,m,u=h?m:u);return g.placeholder=Zw.placeholder,g},E.debounce=Kw,E.defaults=Hx,E.defaultsDeep=Ux,E.defer=Qc,E.delay=bp,E.difference=vw,E.differenceBy=bw,E.differenceWith=yw,E.drop=function ww(l,u,h){var g=null==l?0:l.length;return g?Ss(l,(u=h||u===m?1:Ht(u))<0?0:u,g):[]},E.dropRight=function Cw(l,u,h){var g=null==l?0:l.length;return g?Ss(l,0,(u=g-(u=h||u===m?1:Ht(u)))<0?0:u):[]},E.dropRightWhile=function A_(l,u){return l&&l.length?ta(l,ut(u,3),!0,!0):[]},E.dropWhile=function op(l,u){return l&&l.length?ta(l,ut(u,3),!0):[]},E.fill=function x_(l,u,h,g){var v=null==l?0:l.length;return v?(h&&"number"!=typeof h&&nr(l,u,h)&&(h=0,g=v),function X0(l,u,h,g){var v=l.length;for((h=Ht(h))<0&&(h=-h>v?0:v+h),(g=g===m||g>v?v:Ht(g))<0&&(g+=v),g=h>g?0:uv(g);h<g;)l[h++]=u;return l}(l,u,h,g)):[]},E.filter=function G_(l,u){return(Bt(l)?mo:Km)(l,ut(u,3))},E.flatMap=function Ox(l,u){return fi(Ld(l,u),1)},E.flatMapDeep=function Px(l,u){return fi(Ld(l,u),Ke)},E.flatMapDepth=function kx(l,u,h){return h=h===m?1:Ht(h),fi(Ld(l,u),h)},E.flatten=T_,E.flattenDeep=function I_(l){return null!=l&&l.length?fi(l,Ke):[]},E.flattenDepth=function O_(l,u){return null!=l&&l.length?fi(l,u=u===m?1:Ht(u)):[]},E.flip=function Yw(l){return rs(l,512)},E.flow=FC,E.flowRight=Bp,E.fromPairs=function $a(l){for(var u=-1,h=null==l?0:l.length,g={};++u<h;){var v=l[u];g[v[0]]=v[1]}return g},E.functions=function Kx(l){return null==l?[]:Of(l,Bi(l))},E.functionsIn=function oa(l){return null==l?[]:Of(l,gi(l))},E.groupBy=mp,E.initial=function Ew(l){return null!=l&&l.length?Ss(l,0,-1):[]},E.intersection=Id,E.intersectionBy=Dw,E.intersectionWith=k_,E.invert=Ip,E.invertBy=dv,E.invokeMap=Fx,E.iteratee=jp,E.keyBy=Z_,E.keys=Bi,E.keysIn=gi,E.map=Ld,E.mapKeys=function hv(l,u){var h={};return u=ut(u,3),$s(l,function(g,v,x){Eo(h,u(g,v,x),g)}),h},E.mapValues=function gC(l,u){var h={};return u=ut(u,3),$s(l,function(g,v,x){Eo(h,v,u(g,v,x))}),h},E.matches=function Kd(l){return i_(ns(l,1))},E.matchesProperty=function Hp(l,u){return r_(l,ns(u,1))},E.memoize=Bd,E.merge=Pp,E.mergeWith=fv,E.method=NC,E.methodOf=Up,E.mixin=nu,E.negate=Bl,E.nthArg=function t1(l){return l=Ht(l),Ut(function(u){return s_(u,l)})},E.omit=pv,E.omitBy=function mC(l,u){return Hl(l,Bl(ut(u)))},E.once=function Qw(l){return X_(2,l)},E.orderBy=function Hw(l,u,h,g){return null==l?[]:(Bt(u)||(u=null==u?[]:[u]),Bt(h=g?m:h)||(h=null==h?[]:[h]),Nf(l,u,h))},E.over=$p,E.overArgs=Xw,E.overEvery=n1,E.overSome=LC,E.partial=Wa,E.partialRight=tv,E.partition=Uw,E.pick=_C,E.pickBy=Hl,E.property=zp,E.propertyOf=function Iv(l){return function(u){return null==l?m:zs(l,u)}},E.pull=Od,E.pullAll=qc,E.pullAllBy=function N_(l,u,h){return l&&l.length&&u&&u.length?Vc(l,u,ut(h,2)):l},E.pullAllWith=function cp(l,u,h){return l&&l.length&&u&&u.length?Vc(l,u,m,h):l},E.pullAt=up,E.range=Ov,E.rangeRight=Pv,E.rearg=Jw,E.reject=function Vd(l,u){return(Bt(l)?mo:Km)(l,Bl(ut(u,3)))},E.remove=function dp(l,u){var h=[];if(!l||!l.length)return h;var g=-1,v=[],x=l.length;for(u=ut(u,3);++g<x;){var T=l[g];u(T,g,l)&&(h.push(T),v.push(g))}return Ol(l,v),h},E.rest=function eC(l,u){if("function"!=typeof l)throw new Cs(me);return Ut(l,u=u===m?u:Ht(u))},E.reverse=za,E.sampleSize=function _p(l,u,h){return u=(h?nr(l,u,h):u===m)?1:Ht(u),(Bt(l)?cd:kl)(l,u)},E.set=function kp(l,u,h){return null==l?l:md(l,u,h)},E.setWith=function $l(l,u,h,g){return g="function"==typeof g?g:m,null==l?l:md(l,u,h,g)},E.shuffle=function Gw(l){return(Bt(l)?Y0:tw)(l)},E.slice=function Sw(l,u,h){var g=null==l?0:l.length;return g?(h&&"number"!=typeof h&&nr(l,u,h)?(u=0,h=g):(u=null==u?0:Ht(u),h=h===m?g:Ht(h)),Ss(l,u,h)):[]},E.sortBy=qw,E.sortedUniq=function fp(l){return l&&l.length?nw(l):[]},E.sortedUniqBy=function Ga(l,u){return l&&l.length?nw(l,ut(u,2)):[]},E.split=function wv(l,u,h){return h&&"number"!=typeof h&&nr(l,u,h)&&(u=h=m),(h=h===m?Je:h>>>0)?(l=Dn(l))&&("string"==typeof u||null!=u&&!Xc(u))&&!(u=Zi(u))&&vs(l)?So(ys(l),0,h):l.split(u,h):[]},E.spread=function tC(l,u){if("function"!=typeof l)throw new Cs(me);return u=null==u?0:bi(Ht(u),0),Ut(function(h){var g=h[u],v=So(h,0,u);return g&&Cn(v,g),Fi(l,this,v)})},E.tail=function Mw(l){var u=null==l?0:l.length;return u?Ss(l,1,u):[]},E.take=function Tw(l,u,h){return l&&l.length?Ss(l,0,(u=h||u===m?1:Ht(u))<0?0:u):[]},E.takeRight=function Sx(l,u,h){var g=null==l?0:l.length;return g?Ss(l,(u=g-(u=h||u===m?1:Ht(u)))<0?0:u,g):[]},E.takeRightWhile=function Iw(l,u){return l&&l.length?ta(l,ut(u,3),!1,!0):[]},E.takeWhile=function kd(l,u){return l&&l.length?ta(l,ut(u,3)):[]},E.tap=function Tx(l,u){return u(l),l},E.throttle=function nC(l,u,h){var g=!0,v=!0;if("function"!=typeof l)throw new Cs(me);return ri(h)&&(g="leading"in h?!!h.leading:g,v="trailing"in h?!!h.trailing:v),Kw(l,u,{leading:g,maxWait:u,trailing:v})},E.thru=Kc,E.toArray=hC,E.toPairs=zl,E.toPairsIn=qa,E.toPath=function Gp(l){return Bt(l)?Jn(l,Io):xr(l)?[l]:Dr(np(Dn(l)))},E.toPlainObject=xp,E.transform=function vC(l,u,h){var g=Bt(l),v=g||sa(l)||Jc(l);if(u=ut(u,4),null==h){var x=l&&l.constructor;h=v?g?new x:[]:ri(l)&&Ys(x)?Pa(td(l)):{}}return(v?lr:$s)(l,function(T,R,G){return u(h,T,R,G)}),h},E.unary=function iC(l){return Q_(l,1)},E.union=pp,E.unionBy=B_,E.unionWith=j_,E.uniq=function H_(l){return l&&l.length?Ba(l):[]},E.uniqBy=function U_(l,u){return l&&l.length?Ba(l,ut(u,2)):[]},E.uniqWith=function Ow(l,u){return u="function"==typeof u?u:m,l&&l.length?Ba(l,m,u):[]},E.unset=function gv(l,u){return null==l||pi(l,u)},E.unzip=gp,E.unzipWith=$_,E.update=function mv(l,u,h){return null==l?l:_d(l,u,vd(h))},E.updateWith=function Rp(l,u,h,g){return g="function"==typeof g?g:m,null==l?l:_d(l,u,vd(h),g)},E.values=aa,E.valuesIn=function _v(l){return null==l?[]:Le(l,gi(l))},E.without=Pw,E.words=Zd,E.wrap=function rC(l,u){return Wa(vd(u),l)},E.xor=kw,E.xorBy=ia,E.xorWith=Zc,E.zip=Rw,E.zipObject=function Ax(l,u){return Vr(l||[],u||[],xi)},E.zipObjectDeep=function xx(l,u){return Vr(l||[],u||[],md)},E.zipWith=Mx,E.entries=zl,E.entriesIn=qa,E.extend=Mp,E.extendWith=eu,nu(E,E),E.add=Wp,E.attempt=Av,E.camelCase=Yx,E.capitalize=Fp,E.ceil=iu,E.clamp=function qd(l,u,h){return h===m&&(h=u,u=m),h!==m&&(h=(h=as(h))==h?h:0),u!==m&&(u=(u=as(u))==u?u:0),ka(as(l),u,h)},E.clone=function wp(l){return ns(l,4)},E.cloneDeep=function jl(l){return ns(l,5)},E.cloneDeepWith=function Zs(l,u){return ns(l,5,u="function"==typeof u?u:m)},E.cloneWith=function sC(l,u){return ns(l,4,u="function"==typeof u?u:m)},E.conformsTo=function Nx(l,u){return null==u||kc(l,u,Bi(u))},E.deburr=Np,E.defaultTo=function RC(l,u){return null==l||l!=l?u:l},E.divide=jC,E.endsWith=function yC(l,u,h){l=Dn(l),u=Zi(u);var g=l.length,v=h=h===m?g:ka(Ht(h),0,g);return(h-=u.length)>=0&&l.slice(h,v)==u},E.eq=Ks,E.escape=function bv(l){return(l=Dn(l))&&Yh.test(l)?l.replace(Kh,Ta):l},E.escapeRegExp=function wC(l){return(l=Dn(l))&&Qi.test(l)?l.replace(Qh,"\\$&"):l},E.every=function Yc(l,u,h){var g=Bt(l)?Zu:Qo;return h&&nr(l,u,h)&&(u=m),g(l,ut(u,3))},E.find=W_,E.findIndex=Td,E.findKey=function $x(l,u){return hf(l,ut(u,3),$s)},E.findLast=q_,E.findLastIndex=M_,E.findLastKey=function zx(l,u){return hf(l,ut(u,3),Qm)},E.floor=qp,E.forEach=Fd,E.forEachRight=Nd,E.forIn=function Gx(l,u){return null==l?l:Fc(l,ut(u,3),gi)},E.forInRight=function Wx(l,u){return null==l?l:Ym(l,ut(u,3),gi)},E.forOwn=function qx(l,u){return l&&$s(l,ut(u,3))},E.forOwnRight=function Zx(l,u){return l&&Qm(l,ut(u,3))},E.get=tu,E.gt=nv,E.gte=Lx,E.has=function pC(l,u){return null!=l&&Sr(l,u,Xm)},E.hasIn=Wd,E.head=ap,E.identity=Mr,E.includes=function Rx(l,u,h,g){l=Ar(l)?l:aa(l),h=h&&!g?Ht(h):0;var v=l.length;return h<0&&(h=bi(v+h,0)),Ep(l)?h<=v&&l.indexOf(u,h)>-1:!!v&&Si(l,u,h)>-1},E.indexOf=function P_(l,u,h){var g=null==l?0:l.length;if(!g)return-1;var v=null==h?0:Ht(h);return v<0&&(v=bi(g+v,0)),Si(l,u,v)},E.inRange=function bC(l,u,h){return u=Oo(u),h===m?(h=u,u=0):h=Oo(h),function Ml(l,u,h){return l>=er(u,h)&&l<bi(u,h)}(l=as(l),u,h)},E.invoke=Op,E.isArguments=ra,E.isArray=Bt,E.isArrayBuffer=iv,E.isArrayLike=Ar,E.isArrayLikeObject=ui,E.isBoolean=function oC(l){return!0===l||!1===l||qe(l)&&qi(l)==Ot},E.isBuffer=sa,E.isDate=Ms,E.isElement=function aC(l){return qe(l)&&1===l.nodeType&&!Hr(l)},E.isEmpty=function rv(l){if(null==l)return!0;if(Ar(l)&&(Bt(l)||"string"==typeof l||"function"==typeof l.splice||sa(l)||Jc(l)||ra(l)))return!l.length;var u=tr(l);if(u==zn||u==_s)return!l.size;if(Wc(l))return!pd(l).length;for(var h in l)if(Vn.call(l,h))return!1;return!0},E.isEqual=function lC(l,u){return Il(l,u)},E.isEqualWith=function cC(l,u,h){var g=(h="function"==typeof h?h:m)?h(l,u):m;return g===m?Il(l,u,m,h):!!g},E.isError=Cp,E.isFinite=function uC(l){return"number"==typeof l&&rd(l)},E.isFunction=Ys,E.isInteger=sv,E.isLength=jd,E.isMap=Xe,E.isMatch=function ov(l,u){return l===u||Na(l,u,Dd(u))},E.isMatchWith=function av(l,u,h){return h="function"==typeof h?h:m,Na(l,u,Dd(u),h)},E.isNaN=function Hd(l){return Ud(l)&&l!=+l},E.isNative=function Ts(l){if(fw(l))throw new Pt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return dd(l)},E.isNil=function dC(l){return null==l},E.isNull=function lv(l){return null===l},E.isNumber=Ud,E.isObject=ri,E.isObjectLike=qe,E.isPlainObject=Hr,E.isRegExp=Xc,E.isSafeInteger=function cv(l){return sv(l)&&l>=-Be&&l<=Be},E.isSet=$d,E.isString=Ep,E.isSymbol=xr,E.isTypedArray=Jc,E.isUndefined=function zd(l){return l===m},E.isWeakMap=function Gd(l){return qe(l)&&tr(l)==ml},E.isWeakSet=function Dp(l){return qe(l)&&"[object WeakSet]"==qi(l)},E.join=function R_(l,u){return null==l?"":mx.call(l,u)},E.kebabCase=CC,E.last=jr,E.lastIndexOf=function lp(l,u,h){var g=null==l?0:l.length;if(!g)return-1;var v=g;return h!==m&&(v=(v=Ht(h))<0?bi(g+v,0):er(v,g-1)),u==u?function bs(U,ie,Q){for(var $e=Q+1;$e--;)if(U[$e]===ie)return $e;return $e}(l,u,v):Ne(l,_o,v,!0)},E.lowerCase=Ur,E.lowerFirst=EC,E.lt=Sp,E.lte=Ap,E.max=function Rv(l){return l&&l.length?Xo(l,Mr,xl):m},E.maxBy=function Fv(l,u){return l&&l.length?Xo(l,ut(u,2),xl):m},E.mean=function Nv(l){return Wo(l,Mr)},E.meanBy=function HC(l,u){return Wo(l,ut(u,2))},E.min=function Zp(l){return l&&l.length?Xo(l,Mr,gd):m},E.minBy=function UC(l,u){return l&&l.length?Xo(l,ut(u,2),gd):m},E.stubArray=Yd,E.stubFalse=Is,E.stubObject=function Qd(){return{}},E.stubString=function VC(){return""},E.stubTrue=function BC(){return!0},E.multiply=$C,E.nth=function F_(l,u){return l&&l.length?s_(l,Ht(u)):m},E.noConflict=function Mv(){return Xn._===this&&(Xn._=px),this},E.noop=Tv,E.now=Vl,E.pad=function DC(l,u,h){l=Dn(l);var g=(u=Ht(u))?bn(l):0;if(!u||g>=u)return l;var v=(u-g)/2;return ne(id(v),h)+l+ne(nd(v),h)},E.padEnd=function Qx(l,u,h){l=Dn(l);var g=(u=Ht(u))?bn(l):0;return u&&g<u?l+ne(u-g,h):l},E.padStart=function Xx(l,u,h){l=Dn(l);var g=(u=Ht(u))?bn(l):0;return u&&g<u?ne(u-g,h)+l:l},E.parseInt=function yv(l,u,h){return h||null==u?u=0:u&&(u=+u),z0(Dn(l).replace(Aa,""),u||0)},E.random=function vv(l,u,h){if(h&&"boolean"!=typeof h&&nr(l,u,h)&&(u=h=m),h===m&&("boolean"==typeof u?(h=u,u=m):"boolean"==typeof l&&(h=l,l=m)),l===m&&u===m?(l=0,u=1):(l=Oo(l),u===m?(u=l,l=0):u=Oo(u)),l>u){var g=l;l=u,u=g}if(h||l%1||u%1){var v=G0();return er(l+v*(u-l+N0("1e-"+((v+"").length-1))),u)}return Jo(l,u)},E.reduce=function $w(l,u,h){var g=Bt(l)?df:Yu,v=arguments.length<3;return g(l,ut(u,4),h,v,Do)},E.reduceRight=function K_(l,u,h){var g=Bt(l)?Om:Yu,v=arguments.length<3;return g(l,ut(u,4),h,v,Zm)},E.repeat=function Jx(l,u,h){return u=(h?nr(l,u,h):u===m)?1:Ht(u),ea(Dn(l),u)},E.replace=function SC(){var l=arguments,u=Dn(l[0]);return l.length<3?u:u.replace(l[1],l[2])},E.result=function Ul(l,u,h){var g=-1,v=(u=As(u,l)).length;for(v||(v=1,l=m);++g<v;){var x=null==l?m:l[Io(u[g])];x===m&&(g=v,x=h),l=Ys(x)?x.call(l):x}return l},E.round=Lv,E.runInContext=U,E.sample=function zw(l){return(Bt(l)?Mf:Lf)(l)},E.size=function wi(l){if(null==l)return 0;if(Ar(l))return Ep(l)?bn(l):l.length;var u=tr(l);return u==zn||u==_s?l.size:pd(l).length},E.snakeCase=Lp,E.some=function Ww(l,u,h){var g=Bt(l)?Ku:yx;return h&&nr(l,u,h)&&(u=m),g(l,ut(u,3))},E.sortedIndex=function L_(l,u){return Vf(l,u)},E.sortedIndexBy=function Aw(l,u,h){return l_(l,u,ut(h,2))},E.sortedIndexOf=function xw(l,u){var h=null==l?0:l.length;if(h){var g=Vf(l,u);if(g<h&&Ks(l[g],u))return g}return-1},E.sortedLastIndex=function V_(l,u){return Vf(l,u,!0)},E.sortedLastIndexBy=function hp(l,u,h){return l_(l,u,ut(h,2),!0)},E.sortedLastIndexOf=function Pd(l,u){if(null!=l&&l.length){var g=Vf(l,u,!0)-1;if(Ks(l[g],u))return g}return-1},E.startCase=AC,E.startsWith=function xC(l,u,h){return l=Dn(l),h=null==h?0:ka(Ht(h),0,l.length),u=Zi(u),l.slice(h,h+u.length)==u},E.subtract=Gl,E.sum=function Vv(l){return l&&l.length?wl(l,Mr):0},E.sumBy=function zC(l,u){return l&&l.length?wl(l,ut(u,2)):0},E.template=function MC(l,u,h){var g=E.templateSettings;h&&nr(l,u,h)&&(u=m),l=Dn(l),u=eu({},u,g,xo);var R,G,v=eu({},u.imports,g.imports,xo),x=Bi(v),T=Le(v,x),le=0,ue=u.interpolate||Gu,ge="__p += '",Re=Fm((u.escape||Gu).source+"|"+ue.source+"|"+(ue===zu?ix:Gu).source+"|"+(u.evaluate||Gu).source+"|$","g"),nt="//# sourceURL="+(Vn.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xm+"]")+"\n";l.replace(Re,function(dt,Kt,Yt,$r,fr,cs){return Yt||(Yt=$r),ge+=l.slice(le,cs).replace(b0,li),Kt&&(R=!0,ge+="' +\n__e("+Kt+") +\n'"),fr&&(G=!0,ge+="';\n"+fr+";\n__p += '"),Yt&&(ge+="' +\n((__t = ("+Yt+")) == null ? '' : __t) +\n'"),le=cs+dt.length,dt}),ge+="';\n";var mt=Vn.call(u,"variable")&&u.variable;if(mt){if(g0.test(mt))throw new Pt("Invalid `variable` option passed into `_.template`")}else ge="with (obj) {\n"+ge+"\n}\n";ge=(G?ge.replace($u,""):ge).replace(ex,"$1").replace(c0,"$1;"),ge="function("+(mt||"obj")+") {\n"+(mt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(R?", __e = _.escape":"")+(G?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+ge+"return __p\n}";var $t=Av(function(){return En(x,nt+"return "+ge).apply(m,T)});if($t.source=ge,Cp($t))throw $t;return $t},E.times=function r1(l,u){if((l=Ht(l))<1||l>Be)return[];var h=Je,g=er(l,Je);u=ut(u),l-=Je;for(var v=vo(g,u);++h<l;)u(h);return v},E.toFinite=Oo,E.toInteger=Ht,E.toLength=uv,E.toLower=function Cv(l){return Dn(l).toLowerCase()},E.toNumber=as,E.toSafeInteger=function Vx(l){return l?ka(Ht(l),-Be,Be):0===l?l:0},E.toString=Dn,E.toUpper=function TC(l){return Dn(l).toUpperCase()},E.trim=function Ev(l,u,h){if((l=Dn(l))&&(h||u===m))return km(l);if(!l||!(u=Zi(u)))return l;var g=ys(l),v=ys(u);return So(g,Kn(g,v),wr(g,v)+1).join("")},E.trimEnd=function IC(l,u,h){if((l=Dn(l))&&(h||u===m))return l.slice(0,Rm(l)+1);if(!l||!(u=Zi(u)))return l;var g=ys(l);return So(g,0,wr(g,ys(u))+1).join("")},E.trimStart=function OC(l,u,h){if((l=Dn(l))&&(h||u===m))return l.replace(Aa,"");if(!l||!(u=Zi(u)))return l;var g=ys(l);return So(g,Kn(g,ys(u))).join("")},E.truncate=function Dv(l,u){var h=30,g="...";if(ri(u)){var v="separator"in u?u.separator:v;h="length"in u?Ht(u.length):h,g="omission"in u?Zi(u.omission):g}var x=(l=Dn(l)).length;if(vs(l)){var T=ys(l);x=T.length}if(h>=x)return l;var R=h-bn(g);if(R<1)return g;var G=T?So(T,0,R).join(""):l.slice(0,R);if(v===m)return G+g;if(T&&(R+=G.length-R),Xc(v)){if(l.slice(R).search(v)){var le,ue=G;for(v.global||(v=Fm(v.source,Dn(vl.exec(v))+"g")),v.lastIndex=0;le=v.exec(ue);)var ge=le.index;G=G.slice(0,ge===m?R:ge)}}else if(l.indexOf(Zi(v),R)!=R){var Re=G.lastIndexOf(v);Re>-1&&(G=G.slice(0,Re))}return G+g},E.unescape=function Sv(l){return(l=Dn(l))&&vm.test(l)?l.replace(_m,js):l},E.uniqueId=function kv(l){var u=++hx;return Dn(l)+u},E.upperCase=PC,E.upperFirst=ls,E.each=Fd,E.eachRight=Nd,E.first=ap,nu(E,function(){var l={};return $s(E,function(u,h){Vn.call(E.prototype,h)||(l[h]=u)}),l}(),{chain:!1}),E.VERSION="4.17.21",lr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){E[l].placeholder=E}),lr(["drop","take"],function(l,u){X.prototype[l]=function(h){h=h===m?1:bi(Ht(h),0);var g=this.__filtered__&&!u?new X(this):this.clone();return g.__filtered__?g.__takeCount__=er(h,g.__takeCount__):g.__views__.push({size:er(h,Je),type:l+(g.__dir__<0?"Right":"")}),g},X.prototype[l+"Right"]=function(h){return this.reverse()[l](h).reverse()}}),lr(["filter","map","takeWhile"],function(l,u){var h=u+1,g=1==h||3==h;X.prototype[l]=function(v){var x=this.clone();return x.__iteratees__.push({iteratee:ut(v,3),type:h}),x.__filtered__=x.__filtered__||g,x}}),lr(["head","last"],function(l,u){var h="take"+(u?"Right":"");X.prototype[l]=function(){return this[h](1).value()[0]}}),lr(["initial","tail"],function(l,u){var h="drop"+(u?"":"Right");X.prototype[l]=function(){return this.__filtered__?new X(this):this[h](1)}}),X.prototype.compact=function(){return this.filter(Mr)},X.prototype.find=function(l){return this.filter(l).head()},X.prototype.findLast=function(l){return this.reverse().find(l)},X.prototype.invokeMap=Ut(function(l,u){return"function"==typeof l?new X(this):this.map(function(h){return Fa(h,l,u)})}),X.prototype.reject=function(l){return this.filter(Bl(ut(l)))},X.prototype.slice=function(l,u){l=Ht(l);var h=this;return h.__filtered__&&(l>0||u<0)?new X(h):(l<0?h=h.takeRight(-l):l&&(h=h.drop(l)),u!==m&&(h=(u=Ht(u))<0?h.dropRight(-u):h.take(u-l)),h)},X.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},X.prototype.toArray=function(){return this.take(Je)},$s(X.prototype,function(l,u){var h=/^(?:filter|find|map|reject)|While$/.test(u),g=/^(?:head|last)$/.test(u),v=E[g?"take"+("last"==u?"Right":""):u],x=g||/^find/.test(u);!v||(E.prototype[u]=function(){var T=this.__wrapped__,R=g?[1]:arguments,G=T instanceof X,le=R[0],ue=G||Bt(T),ge=function(Kt){var Yt=v.apply(E,Cn([Kt],R));return g&&Re?Yt[0]:Yt};ue&&h&&"function"==typeof le&&1!=le.length&&(G=ue=!1);var Re=this.__chain__,nt=!!this.__actions__.length,mt=x&&!Re,$t=G&&!nt;if(!x&&ue){T=$t?T:new X(this);var dt=l.apply(T,R);return dt.__actions__.push({func:Kc,args:[ge],thisArg:m}),new ts(dt,Re)}return mt&&$t?l.apply(this,R):(dt=this.thru(ge),mt?g?dt.value()[0]:dt.value():dt)})}),lr(["pop","push","shift","sort","splice","unshift"],function(l){var u=pf[l],h=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",g=/^(?:pop|shift)$/.test(l);E.prototype[l]=function(){var v=arguments;if(g&&!this.__chain__){var x=this.value();return u.apply(Bt(x)?x:[],v)}return this[h](function(T){return u.apply(Bt(T)?T:[],v)})}}),$s(X.prototype,function(l,u){var h=E[u];if(h){var g=h.name+"";Vn.call(Al,g)||(Al[g]=[]),Al[g].push({name:u,func:h})}}),Al[wd(m,2).name]=[{name:"wrapper",func:m}],X.prototype.clone=function ln(){var l=new X(this.__wrapped__);return l.__actions__=Dr(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Dr(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Dr(this.__views__),l},X.prototype.reverse=function en(){if(this.__filtered__){var l=new X(this);l.__dir__=-1,l.__filtered__=!0}else(l=this.clone()).__dir__*=-1;return l},X.prototype.value=function Ai(){var l=this.__wrapped__.value(),u=this.__dir__,h=Bt(l),g=u<0,v=h?l.length:0,x=function uw(l,u,h){for(var g=-1,v=h.length;++g<v;){var x=h[g],T=x.size;switch(x.type){case"drop":l+=T;break;case"dropRight":u-=T;break;case"take":u=er(u,l+T);break;case"takeRight":l=bi(l,u-T)}}return{start:l,end:u}}(0,v,this.__views__),T=x.start,R=x.end,G=R-T,le=g?R:T-1,ue=this.__iteratees__,ge=ue.length,Re=0,nt=er(G,this.__takeCount__);if(!h||!g&&v==G&&nt==G)return rw(l,this.__actions__);var mt=[];e:for(;G--&&Re<nt;){for(var $t=-1,dt=l[le+=u];++$t<ge;){var Kt=ue[$t],$r=Kt.type,fr=(0,Kt.iteratee)(dt);if(2==$r)dt=fr;else if(!fr){if(1==$r)continue e;break e}}mt[Re++]=dt}return mt},E.prototype.at=Nw,E.prototype.chain=function Lw(){return Fw(this)},E.prototype.commit=function Vw(){return new ts(this.value(),this.__chain__)},E.prototype.next=function Bw(){this.__values__===m&&(this.__values__=hC(this.value()));var l=this.__index__>=this.__values__.length;return{done:l,value:l?m:this.__values__[this.__index__++]}},E.prototype.plant=function jw(l){for(var u,h=this;h instanceof od;){var g=rp(h);g.__index__=0,g.__values__=m,u?v.__wrapped__=g:u=g;var v=g;h=h.__wrapped__}return v.__wrapped__=l,u},E.prototype.reverse=function Rd(){var l=this.__wrapped__;if(l instanceof X){var u=l;return this.__actions__.length&&(u=new X(this)),(u=u.reverse()).__actions__.push({func:Kc,args:[za],thisArg:m}),new ts(u,this.__chain__)}return this.thru(za)},E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=function z_(){return rw(this.__wrapped__,this.__actions__)},E.prototype.first=E.prototype.head,Ia&&(E.prototype[Ia]=function Ix(){return this}),E}();Xn._=Cr,(Fe=function(){return Cr}.call(et,Ve,et,Ft))!==m&&(Ft.exports=Fe)}.call(this)},366:Ft=>{var et=1e3,Ve=6e4,Fe=60*Ve,m=24*Fe;function se(H,Y,de,he){var ve=Y>=1.5*de;return Math.round(H/de)+" "+he+(ve?"s":"")}Ft.exports=function(H,Y){Y=Y||{};var de=typeof H;if("string"===de&&H.length>0)return function te(H){if(!((H=String(H)).length>100)){var Y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(H);if(Y){var de=parseFloat(Y[1]);switch((Y[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*de;case"weeks":case"week":case"w":return 6048e5*de;case"days":case"day":case"d":return de*m;case"hours":case"hour":case"hrs":case"hr":case"h":return de*Fe;case"minutes":case"minute":case"mins":case"min":case"m":return de*Ve;case"seconds":case"second":case"secs":case"sec":case"s":return de*et;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return de;default:return}}}}(H);if("number"===de&&isFinite(H))return Y.long?function K(H){var Y=Math.abs(H);return Y>=m?se(H,Y,m,"day"):Y>=Fe?se(H,Y,Fe,"hour"):Y>=Ve?se(H,Y,Ve,"minute"):Y>=et?se(H,Y,et,"second"):H+" ms"}(H):function me(H){var Y=Math.abs(H);return Y>=m?Math.round(H/m)+"d":Y>=Fe?Math.round(H/Fe)+"h":Y>=Ve?Math.round(H/Ve)+"m":Y>=et?Math.round(H/et)+"s":H+"ms"}(H);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(H))}},422:(Ft,et,Ve)=>{const Fe=Ve(928);function m(N){for(var M=N.previousElementSibling;"note"!=M.tagName&&"rest"!=M.tagName;)M=M.previousElementSibling;return M}function P(N){var M=N.nextElementSibling;return null!=M&&"dot"==M.tagName}function me(N,M,$,Z,be){var Se=function te(N){var M;for(var $ of N)if(P($)){M=$;break}return M}(N);if(null==Se)return!1;var ot=N.slice(0,N.indexOf(Se)+1);console.log("Part 1 - preceding the dot:");var ee=!1;if(1==se(ot,M,$)/Z&&(2==be||3==be)){var q=Se.getAttribute("dur"),z=function F(N){for(var M=N.nextElementSibling;"note"!=M.tagName&&"rest"!=M.tagName;)M=M.nextElementSibling;return M}(Se).getAttribute("dur");("semibrevis"!=q||"semibrevis"!=z)&&(ee=!0,console.log("\nDot of Imperfection"))}return ee}function K(N){return N.hasAttribute("num")&&N.hasAttribute("numbase")}function se(N,M,$){var Z,be,Se,ot,re;for(be of(Z=0,console.log("@dur\t\tCounter (Sb)\tAccumulator (Sb)"),N)){Se=be.getAttribute("dur");try{ot=M.indexOf(Se)}catch(ee){console.log("MISTAKE\nNote/Rest element not considered: "+be+", with a duration @dur = "+Se)}re=$[ot],be.hasAttribute("num")&&be.hasAttribute("numbase")&&(re=new Fe([be.getAttribute("numbase"),be.getAttribute("num")]).mul(re)),Z+=re,console.log(Se+Array(10-Se.length).join(" ")+"\t"+re+"\t\t"+Z)}return Z}function H(N,M,$,Z,be,Se,ot,re){var W=[];for(var ee of M)"dot"!=ee.tagName&&"Group_Begin"!=ee.tagName&&"Group_End"!=ee.tagName&&W.push(ee);var q=se(W,Se,ot);console.log("TOTAL (Sb): "+q);var z=q/be;console.log("TOTAL (B):  "+z),console.log(),3==re&&function Y(N,M,$,Z,be,Se,ot,re,W,ee){var z;switch(N%3){case 1:null==M||"note"!=M.tagName||M.getAttribute("dur")!=ot||K(M)||P(M)?null==Z||"note"!=Z.tagName||Z.getAttribute("dur")!=ot||K(Z)||P(Z)?(console.log("MISTAKE 1 - Impossible to do Imperfection a.p.p. and also Imperfection a.p.a."),console.log(M),console.log(Z),console.log("\n")):(console.log("Alternative Case:  Imperfection a.p.a.\n"),Z.setAttribute("dur.quality","imperfecta"),Z.setAttribute("num","3"),Z.setAttribute("numbase","2"),null!=be&&be.getAttribute("dur")==ot&&(console.log("WARNING 1! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+Z+" and is followed by the perfect note "+be+"\n"))):(console.log("Default Case:\tImperfection a.p.p.\n"),M.setAttribute("dur.quality","imperfecta"),M.setAttribute("num","3"),M.setAttribute("numbase","2"));break;case 2:for(z=$[$.length-1];z.hasAttribute("colored");)z=m(z);2==N?"note"!=z.tagName||z.getAttribute("dur")!=Se||K(z)?null==M||"note"!=M.tagName||M.getAttribute("dur")!=ot||K(M)||P(M)||null==Z||"note"!=Z.tagName||Z.getAttribute("dur")!=ot||K(Z)||P(Z)?(console.log("MISTAKE 2 - Alteration is impossible - Imperfections a.p.p. and a.p.a. are also impossible"),console.log(M),console.log(Z),console.log("\n")):(console.log("Alternative Case:  Imperfection a.p.p. & Imperfection a.p.a.\n"),M.setAttribute("dur.quality","imperfecta"),M.setAttribute("num","3"),M.setAttribute("numbase","2"),Z.setAttribute("dur.quality","imperfecta"),Z.setAttribute("num","3"),Z.setAttribute("numbase","2"),null!=be&&be.getAttribute("dur")==ot&&(console.log("WARNING 2! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+Z+" and is followed by the perfect note "+be),console.log("\n"))):me($,re,W,ee,N)?(console.log("Alternative Case:  Imperfection a.p.p. & Imperfection a.p.a.\n"),M.setAttribute("dur.quality","imperfecta"),M.setAttribute("num","3"),M.setAttribute("numbase","2"),Z.setAttribute("dur.quality","imperfecta"),Z.setAttribute("num","3"),Z.setAttribute("numbase","2"),null!=be&&be.getAttribute("dur")==ot&&(console.log("WARNING 2! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+Z+" and is followed by the perfect note "+be),console.log("\n"))):(console.log("Default Case:\tAlteration\n"),z.setAttribute("dur.quality","altera"),z.setAttribute("num","1"),z.setAttribute("numbase","2")):(console.log(z),null==M||"note"!=M.tagName||M.getAttribute("dur")!=ot||K(M)||P(M)||null==Z||"note"!=Z.tagName||Z.getAttribute("dur")!=ot||K(Z)||P(Z)?"note"!=z.tagName||z.getAttribute("dur")!=Se||K(z)?(console.log("MISTAKE 3n + 2 - Imperfections a.p.p. and a.p.a. are impossible - Alteration is also impossible"),console.log(M),console.log(Z),console.log("\n")):(console.log("Alternative Case:  Alteration\n"),z.setAttribute("dur.quality","altera"),z.setAttribute("num","1"),z.setAttribute("numbase","2")):null!=be&&be.getAttribute("dur")==ot?"note"!=z.tagName||z.getAttribute("dur")!=Se||K(z)?(console.log("Default Case:\tImperfection a.p.p. & Imperfection a.p.a.\n"),M.setAttribute("dur.quality","imperfecta"),M.setAttribute("num","3"),M.setAttribute("numbase","2"),Z.setAttribute("dur.quality","imperfecta"),Z.setAttribute("num","3"),Z.setAttribute("numbase","2"),console.log("WARNING 3n + 2! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+Z+" and is followed by the perfect note "+be),console.log("\n")):(console.log("Alternative Case:  Alteration\n"),z.setAttribute("dur.quality","altera"),z.setAttribute("num","1"),z.setAttribute("numbase","2")):(console.log("Default Case:\tImperfection a.p.p. & Imperfection a.p.a.\n"),M.setAttribute("dur.quality","imperfecta"),M.setAttribute("num","3"),M.setAttribute("numbase","2"),Z.setAttribute("dur.quality","imperfecta"),Z.setAttribute("num","3"),Z.setAttribute("numbase","2")));break;case 0:if(0==N)console.log("Default Case:\tNo modifications\n");else if(3==N){for(z=$[$.length-1];z.hasAttribute("colored");)z=m(z);me($,re,W,ee,N)?(console.log("Alternative Case:\tImperfection a.p.p. & Alteration\n"),M.setAttribute("dur.quality","imperfecta"),M.setAttribute("num","3"),M.setAttribute("numbase","2"),z.setAttribute("dur.quality","altera"),z.setAttribute("num","1"),z.setAttribute("numbase","2")):console.log("Default Case:\tNo modifications\n")}else{for(z=$[$.length-1];z.hasAttribute("colored");)z=m(z);null==M||"note"!=M.tagName||M.getAttribute("dur")!=ot||K(M)||P(M)||"note"!=z.tagName||z.getAttribute("dur")!=Se||K(z)?console.log("Alternative Case:  No modifications\n"):(console.log("Default Case:\tImperfection a.p.p. & Alteration\n"),M.setAttribute("dur.quality","imperfecta"),M.setAttribute("num","3"),M.setAttribute("numbase","2"),z.setAttribute("dur.quality","altera"),z.setAttribute("num","1"),z.setAttribute("numbase","2"))}}}(z,N,W,$,Z,"brevis","longa",Se,ot,be)}function de(N,M){2==M?function he(N){var M;switch(N.length){case 1:console.log("MISTAKE: 1 semibreve standing alone (this is not proper of Ars antiqua)");break;case 2:break;default:for(M of N)M.setAttribute("num",N.length),M.setAttribute("numbase","2")}}(N):3==M&&function ve(N){var M,$,Z;switch(N.length){case 1:console.log("MISTAKE: 1 semibreve standing alone (this is not proper of Ars antiqua)");break;case 2:Z=N[1],($=N[0]).hasAttribute("stem.dir")&&"down"==$.getAttribute("stem.dir")?($.setAttribute("dur.quality","maior"),$.setAttribute("num","1"),$.setAttribute("numbase","2"),Z.setAttribute("dur.quality","minor")):($.setAttribute("dur.quality","minor"),Z.setAttribute("dur.quality","maior"),Z.setAttribute("num","1"),Z.setAttribute("numbase","2"));break;case 3:for(M of N)M.setAttribute("dur.quality","minor");break;default:for(M of N)M.setAttribute("num",N.length),M.setAttribute("numbase","3")}}(N)}et.lining_up=N=>{for(var M=N.getElementsByTagName("staff"),$=N.getElementsByTagName("staffDef"),Z=0;Z<$.length;Z++){console.log("\nVoice # "+(Z+1)+" results:\n");var be=$[Z].getElementsByTagName("mensur")[0],Se=M[Z],ot=be.getAttribute("tempus"),re=be.getAttribute("modusminor");null==ot&&(ot=3);var W=["semibrevis","brevis","longa"],ee=[1,1*ot,re*ot];console.log(W),console.log(ee),console.log();var q=Se.getElementsByTagName("layer")[0].children,z=[];for(var we of q){var xe=we.tagName;if("note"==xe||"rest"==xe)z.push(we);else if("dot"==xe)z.push(we),we.setAttribute("form","div");else if("ligature"==xe){for(var Me of(z.push(N.createElementNS("http://www.music-encoding.org/ns/mei","Group_Begin")),we.children))if("note"==Me.tagName||"rest"==Me.tagName)z.push(Me);else if("choice"==Me.tagName){var ye=Me.getElementsByTagName("corr")[0];for(var ae of ye.children)"note"==ae.tagName||"rest"==ae.tagName?z.push(ae):(console.log("This child of corr (within the choice tag in a ligature) is not a note/rest:"),console.log(ae),console.log("It is a "+ae.tagName))}else console.log("This child of ligature is not a note/rest/choice:"),console.log(Me),console.log("It is a "+Me.tagName);z.push(N.createElementNS("http://www.music-encoding.org/ns/mei","Group_End"))}else if("choice"==xe)for(var Me of(ye=we.getElementsByTagName("corr")[0]).children)"note"==Me.tagName||"rest"==Me.tagName?z.push(Me):"dot"==Me.tagName?(z.push(Me),Me.setAttribute("form","div")):(console.log("This child of corr is not a note/rest/dot:"),console.log(Me),console.log("It is a "+Me.tagName));else console.log("Unexpected tagnme : "+xe+"\n(not a note, rest, dot, ligature, or choice)\n")}var rt,Je,it,wt,at,Gt,Ke=[],Be=[];for(var Pe of z)"dot"==Pe.tagName||"Group_Begin"==Pe.tagName||"Group_End"==Pe.tagName||"brevis"==Pe.getAttribute("dur")?Ke.push(z.indexOf(Pe)):("longa"==Pe.getAttribute("dur")||"maxima"==Pe.getAttribute("dur"))&&(Ke.push(z.indexOf(Pe)),Be.push(z.indexOf(Pe)));!Ke.includes(0)&&0!=Ke.length&&de(at=z.slice(0,Je=Ke[0]),ot);for(var It=0;It<Ke.length-1;It++)de(at=z.slice((rt=Ke[It])+1,Je=Ke[It+1]),ot);if(0==Be.length){it=null,wt=null,at=z.slice(0,z.length);var Rn=null,Ot=null,tt="";for(var st of at)tt+="0 null"==(Te=st.getAttribute("pname")+st.getAttribute("oct")+" "+st.getAttribute("dur"))?st.tagName+", ":Te+", ";console.log("Delimited Sequence of Breves: "+Rn+", "+tt+Ot),H(it,at,wt,Gt,ot,W,ee,re)}else{if(!Be.includes(0)){it=null,wt=z[Je=Be[0]];try{Gt=z[Je+1]}catch(Xt){Gt=null}for(var st of(at=z.slice(0,Je),Rn=null,Ot=wt.getAttribute("pname")+wt.getAttribute("oct")+" "+wt.getAttribute("dur"),tt="",at))tt+="0 null"==(Te=st.getAttribute("pname")+st.getAttribute("oct")+" "+st.getAttribute("dur"))?st.tagName+", ":Te+", ";console.log("Delimited Sequence of Breves: "+Rn+", "+tt+Ot),H(it,at,wt,Gt,ot,W,ee,re)}for(It=0;It<Be.length-1;It++){it=z[rt=Be[It]],wt=z[Je=Be[It+1]];try{Gt=z[Je+1]}catch(gt){Gt=null}for(var st of(at=z.slice(rt+1,Je),Rn=it.getAttribute("pname")+it.getAttribute("oct")+" "+it.getAttribute("dur"),Ot=wt.getAttribute("pname")+wt.getAttribute("oct")+" "+wt.getAttribute("dur"),tt="",at))tt+="0 null"==(Te=st.getAttribute("pname")+st.getAttribute("oct")+" "+st.getAttribute("dur"))?st.tagName+", ":Te+", ";console.log("Delimited Sequence of Breves: "+Rn+", "+tt+Ot),H(it,at,wt,Gt,ot,W,ee,re)}var hn=z.length-1;if(!Be.includes(hn)){for(var st of(it=z[rt=Be[Be.length-1]],wt=null,Gt=null,at=z.slice(rt+1,hn+1),Rn=it.getAttribute("pname")+it.getAttribute("oct")+" "+it.getAttribute("dur"),Ot=null,tt="",at)){var Te;tt+="0 null"==(Te=st.getAttribute("pname")+st.getAttribute("oct")+" "+st.getAttribute("dur"))?st.tagName+", ":Te+", "}console.log("Delimited Sequence of Breves: "+Rn+", "+tt+Ot),H(it,at,wt,Gt,ot,W,ee,re)}}}return function oe(N){const M=Array.from(N.getElementsByTagName("note"));for(var $ of M)"maxima"==$.getAttribute("dur")&&($.setAttribute("dur","longa"),$.setAttribute("dur.quality","duplex"),$.setAttribute("num","1"),$.setAttribute("numbase","2"))}(N),N}},30:(Ft,et,Ve)=>{const Fe=Ve(928);function m(re){return re.nextElementSibling}function F(re){for(var W=re.previousElementSibling;"note"!=W.tagName&&"rest"!=W.tagName;)W=W.previousElementSibling;return W}function P(re){var W=m(re);return null!=W&&"dot"==W.tagName}function te(re){var W=-1,ee=-1;for(var q of re)if(W+=1,null!=q&&P(q)){ee=W;break}return ee}function me(re,W,ee){var q,z,we,xe,Me;for(z of(q=0,console.log("@dur\t\tCounter (m)\tAccumulator (m)"),re)){we=z.getAttribute("dur");try{xe=W.indexOf(we)}catch(ae){console.log("MISTAKE\nNote/Rest element not considered: "+z+", with a duration @dur = "+we)}Me=ee[xe],z.hasAttribute("num")&&z.hasAttribute("numbase")&&(Me=new Fe([z.getAttribute("numbase"),z.getAttribute("num")]).mul(Me)),q+=Me,console.log(we+Array(10-we.length).join(" ")+"\t"+Me+"\t\t"+q)}return q}function K(re,W,ee,q,z=null,we=null,xe=null,Me=null){var ye,ae,Ke,Be,Pe;for(ae of(ye=0,console.log("@dur\t\tCounter (m)\tAccumulator (m)"),re)){Ke=ae.getAttribute("dur");try{Be=W.indexOf(Ke)}catch(it){console.log("MISTAKE\nNote/Rest element not considered: "+ae+", with a duration @dur = "+Ke)}P(ae)?(Pe=q[Be],(4==Be&&2==z||5==Be&&2==we||6==Be&&2==xe||7==Be&&2==Me||Be<4)&&(m(ae).setAttribute("form","aug"),ae.setAttribute("num","2"),ae.setAttribute("numbase","3"),ae.setAttribute("dur.quality","perfecta"))):(Pe=ee[Be],ae.hasAttribute("num")&&ae.hasAttribute("numbase")&&(Pe=new Fe([ae.getAttribute("numbase"),ae.getAttribute("num")]).mul(Pe))),ye+=Pe,console.log(Ke+Array(10-Ke.length).join(" ")+"\t"+Pe+"\t\t"+ye)}return ye}function se(re){return re.hasAttribute("num")&&re.hasAttribute("numbase")}function H(re,W,ee,q,z,we,xe){var ye;switch(re%3){case 1:null==W||"note"!=W.tagName||W.getAttribute("dur")!=xe||se(W)||P(W)?null==q||"note"!=q.tagName||q.getAttribute("dur")!=xe||se(q)||P(q)?(console.log("MISTAKE 1 - Impossible to do Imperfection a.p.p. and also Imperfection a.p.a."),console.log(W),console.log(q),console.log("\n")):(console.log("Alternative Case:  Imperfection a.p.a.\n"),q.setAttribute("dur.quality","imperfecta"),q.setAttribute("num","3"),q.setAttribute("numbase","2"),null!=z&&z.getAttribute("dur")==xe&&(console.log("WARNING 1! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+q+" and is followed by the perfect note "+z+"\n"))):(console.log("Default Case:\tImperfection a.p.p.\n"),W.setAttribute("dur.quality","imperfecta"),W.setAttribute("num","3"),W.setAttribute("numbase","2"));break;case 2:for(ye=ee[ee.length-1];ye.hasAttribute("colored");)ye=F(ye);2==re?"note"!=ye.tagName||ye.getAttribute("dur")!=we||se(ye)?null==W||"note"!=W.tagName||W.getAttribute("dur")!=xe||se(W)||P(W)||null==q||"note"!=q.tagName||q.getAttribute("dur")!=xe||se(q)||P(q)?(console.log("MISTAKE 2 - Alteration is impossible - Imperfections a.p.p. and a.p.a. are also impossible"),console.log(W),console.log(q),console.log("\n")):(console.log("Alternative Case:  Imperfection a.p.p. & Imperfection a.p.a.\n"),W.setAttribute("dur.quality","imperfecta"),W.setAttribute("num","3"),W.setAttribute("numbase","2"),q.setAttribute("dur.quality","imperfecta"),q.setAttribute("num","3"),q.setAttribute("numbase","2"),null!=z&&z.getAttribute("dur")==xe&&(console.log("WARNING 2! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+q+" and is followed by the perfect note "+z),console.log("\n"))):(console.log("Default Case:\tAlteration\n"),ye.setAttribute("dur.quality","altera"),ye.setAttribute("num","1"),ye.setAttribute("numbase","2")):(console.log(ye),null==W||"note"!=W.tagName||W.getAttribute("dur")!=xe||se(W)||P(W)||null==q||"note"!=q.tagName||q.getAttribute("dur")!=xe||se(q)||P(q)?"note"!=ye.tagName||ye.getAttribute("dur")!=we||se(ye)?(console.log("MISTAKE 3n + 2 - Imperfections a.p.p. and a.p.a. are impossible - Alteration is also impossible"),console.log(W),console.log(q),console.log("\n")):(console.log("Alternative Case:  Alteration\n"),ye.setAttribute("dur.quality","altera"),ye.setAttribute("num","1"),ye.setAttribute("numbase","2")):null!=z&&z.getAttribute("dur")==xe?"note"!=ye.tagName||ye.getAttribute("dur")!=we||se(ye)?(console.log("Default Case:\tImperfection a.p.p. & Imperfection a.p.a.\n"),W.setAttribute("dur.quality","imperfecta"),W.setAttribute("num","3"),W.setAttribute("numbase","2"),q.setAttribute("dur.quality","imperfecta"),q.setAttribute("num","3"),q.setAttribute("numbase","2"),console.log("WARNING 3n + 2! An imperfection a.p.a. is required, but this imperfect note is followed by a perfect note, this contradicts the fundamental rule: 'A note is perfect before another one of the same kind'."),console.log("The imperfected note is "+q+" and is followed by the perfect note "+z),console.log("\n")):(console.log("Alternative Case:  Alteration\n"),ye.setAttribute("dur.quality","altera"),ye.setAttribute("num","1"),ye.setAttribute("numbase","2")):(console.log("Default Case:\tImperfection a.p.p. & Imperfection a.p.a.\n"),W.setAttribute("dur.quality","imperfecta"),W.setAttribute("num","3"),W.setAttribute("numbase","2"),q.setAttribute("dur.quality","imperfecta"),q.setAttribute("num","3"),q.setAttribute("numbase","2")));break;case 0:if(re<=3)console.log("Default Case:\tNo modifications\n");else{for(ye=ee[ee.length-1];ye.hasAttribute("colored");)ye=F(ye);null==W||"note"!=W.tagName||W.getAttribute("dur")!=xe||se(W)||P(W)||"note"!=ye.tagName||ye.getAttribute("dur")!=we||se(ye)?console.log("Alternative Case:  No modifications\n"):(console.log("Default Case:\tImperfection a.p.p. & Alteration\n"),W.setAttribute("dur.quality","imperfecta"),W.setAttribute("num","3"),W.setAttribute("numbase","2"),ye.setAttribute("dur.quality","altera"),ye.setAttribute("num","1"),ye.setAttribute("numbase","2"))}}}function ve(re,W,ee,q,z,we,xe,Me){3==z&&function Y(re,W,ee,q,z,we,xe){var Ke,Be,Pe,rt,Je,it,wt,at,Gt,Me=!0,ye=[re].concat(W),ae=te(ye);console.log("1st dotted note index:",ae),-1==ae?Ke=me(W,z,we):0==ae?((Be=m(re)).setAttribute("form","perf"),Ke=K(W,z,we,xe)):(Be=m(Pe=ye[ae])).hasAttribute("form")&&"aug"==Be.getAttribute("form")?Ke=K(W,z,we,xe):(rt=ye.slice(1,ae+1),Je=ye.slice(ae+1,ye.length),it=me(rt,z,we),at=Pe.getAttribute("dur"),Gt=we[z.indexOf(at)],wt=K(Je,z,we,xe),1==it?wt==Math.floor(wt)?(Me=!1,Be.setAttribute("form","div"),Ke=it+wt,H(it,re,rt,null,null,"minima","semibrevis"),H(wt,null,Je,ee,q,"minima","semibrevis")):(Be.setAttribute("form","aug"),Pe.setAttribute("dur.quality","perfecta"),Pe.setAttribute("num","2"),Pe.setAttribute("numbase","3"),Ke=it+.5*Gt+wt):Be.hasAttribute("form")&&"perf"==Be.getAttribute("form")?Ke=K(W,z,we,xe):(Be.setAttribute("form","aug"),Pe.setAttribute("dur.quality","perfecta"),Pe.setAttribute("num","2"),Pe.setAttribute("numbase","3"),Ke=it+.5*Gt+wt)),Me&&(Ke==Math.floor(Ke)||(console.log("BAD! Not an integer number of Minimas!"),console.log([re].concat(W).concat(ee)),console.log("Minimas: "+Ke)),H(Ke,re,W,ee,q,"minima","semibrevis"))}(re,W,ee,q,we,xe,Me)}function oe(re,W,ee,q,z,we,xe,Me,ye){3==we&&function de(re,W,ee,q,z,we,xe,Me){var Be,Pe,rt,Je,it,wt,at,Gt,It,Rn,Ot,tt,ye=!0,ae=[re].concat(W),Ke=te(ae);console.log("1st dotted note index:",Ke),-1==Ke?(rt=(Pe=me(W,we,xe))/z,console.log("No-dot\n")):0==Ke?((Je=m(re)).setAttribute("form","perf"),console.log("Dot of perfection\n"),rt=(Pe=K(W,we,xe,Me,z))/z):(console.log("Dot in the middle of the sequence"),(Je=m(Ot=ae[Ke])).hasAttribute("form")?"aug"==Je.getAttribute("form")?(console.log("- I already knew about this AUG dot"),rt=(Pe=K(W,we,xe,Me,z))/z):"div"==Je.getAttribute("form")&&(console.log("- I already knew about this DIV dot"),rt=(Pe=me(W,we,xe))/z):(console.log("- Is this dot new? Lets divide the sequence in two and find out if it is a div/aug dot"),it=ae.slice(1,Ke+1),wt=ae.slice(Ke+1,ae.length),It=(at=me(it,we,xe))/z,Be=Ot.getAttribute("dur"),tt=xe[we.indexOf(Be)],Rn=(Gt=K(wt,we,xe,Me,z))/z,1==It?(console.log("-- Potential dot of div/aug"),Rn==Math.floor(Rn)?(console.log("--- Definitely a dot of division"),ye=!1,Je.setAttribute("form","div"),Pe=at+Gt,H(It,re,it,null,null,"semibrevis","brevis"),H(Rn,null,wt,ee,q,"semibrevis","brevis")):(console.log("--- Definitely a dot of augmentation"),Je.setAttribute("form","aug"),Ot.setAttribute("dur.quality","perfecta"),Ot.setAttribute("num","2"),Ot.setAttribute("numbase","3"),Pe=at+.5*tt+Gt)):(console.log("-- Cannot be a dot of division (could be perf/aug)"),Je.hasAttribute("form")&&"perf"==Je.getAttribute("form")?(console.log("--- Definitely a dot of perfection"),Pe=K(W,we,xe,Me,z)):(console.log("--- Definitely a dot of augmentation"),Je.setAttribute("form","aug"),Ot.setAttribute("dur.quality","perfecta"),Ot.setAttribute("num","2"),Ot.setAttribute("numbase","3"),Pe=at+.5*tt+Gt)),rt=Pe/z)),ye&&(Pe%z==0||(console.log("BAD! THE DIVISION IS NOT AN INTEGER NUMBER - not an integer number of Semibreves!"),console.log([re].concat(W).concat(ee)),console.log("Semibreves: "+Pe/z)),H(rt,re,W,ee,q,"semibrevis","brevis"))}(re,W,ee,q,z,xe,Me,ye)}function V(re,W,ee,q,z,we,xe,Me,ye,ae){if(3==xe)!function he(re,W,ee,q,z,we,xe,Me,ye){var Pe,rt,Je,it,wt,at,Gt,It,Rn,Ot,tt,st,ae=!0,Ke=[re].concat(W),Be=te(Ke);console.log("1st dotted note index:",Be),-1==Be?(Je=(rt=me(W,xe,Me))/(we*z),console.log("No-dot\n")):0==Be?((it=m(re)).setAttribute("form","perf"),console.log("Dot of perfection\n"),Je=(rt=K(W,xe,Me,ye,z,we))/(we*z)):(console.log("Dot in the middle of the sequence"),(it=m(tt=Ke[Be])).hasAttribute("form")?"aug"==it.getAttribute("form")?(console.log("- I already knew about this AUG dot"),Je=(rt=K(W,xe,Me,ye,z,we))/(we*z)):"div"==it.getAttribute("form")&&(console.log("- I already knew about this DIV dot"),Je=(rt=me(W,xe,Me))/(we*z)):(console.log("- Is this dot new? Lets divide the sequence in two and find out if it is a div/aug dot"),wt=Ke.slice(1,Be+1),at=Ke.slice(Be+1,Ke.length),Rn=(Gt=me(wt,xe,Me))/(we*z),Pe=(tt=wt[wt.length-1]).getAttribute("dur"),st=Me[xe.indexOf(Pe)],Ot=(It=K(at,xe,Me,ye,z,we))/(we*z),1==Rn?(console.log("-- Potential dot of div/aug"),Ot==Math.floor(Ot)?(console.log("--- Definitely a dot of division"),ae=!1,it.setAttribute("form","div"),rt=Gt+It,H(Rn,re,wt,null,null,"brevis","longa"),H(Ot,null,at,ee,q,"brevis","longa")):(console.log("--- Definitely a dot of augmentation"),it.setAttribute("form","aug"),tt.setAttribute("dur.quality","perfecta"),tt.setAttribute("num","2"),tt.setAttribute("numbase","3"),rt=Gt+.5*st+It)):(console.log("-- Cannot be a dot of division (could be perf/aug)"),it.hasAttribute("form")&&"perf"==it.getAttribute("form")?(console.log("--- Definitely a dot of perfection"),rt=K(W,xe,Me,ye,z,we)):(console.log("--- Definitely a dot of augmentation"),it.setAttribute("form","aug"),tt.setAttribute("dur.quality","perfecta"),tt.setAttribute("num","2"),tt.setAttribute("numbase","3"),rt=Gt+.5*st+It)),Je=rt/(we*z))),console.log("TOTAL (m): "+rt),console.log("TOTAL (Sb): "+rt/z),console.log("TOTAL (B):  "+Je),console.log(),ae&&(rt%(we*z)==0||(console.log("BAD! THE DIVISION IS NOT AN INTEGER NUMBER - not an integer number of Breves!"),console.log([re].concat(W).concat(ee)),console.log("Breves: "+rt/(we*z))),H(Je,re,W,ee,q,"brevis","longa"))}(re,W,ee,q,z,we,Me,ye,ae);else{var Ke=me(W,Me,ye);console.log("TOTAL (m): "+Ke);var Be=Ke/z;console.log("TOTAL (Sb): "+Be),console.log("TOTAL (B):  "+Be/we),console.log()}}function Se(re,W,ee,q,z,we){var xe=["semifusa","fusa","semiminima","minima","semibrevis","brevis","longa","maxima"],Me=[.125,.25,.5,1,1*re,W*re,ee*W*re,q*ee*W*re],ye=[.1875,.375,.75,1.5,3,3*re,3*W*re,3*ee*W*re];console.log(xe),console.log(Me),console.log();var ae=[];for(var Ke of z){var Be=Ke.tagName;if("note"==Be||"rest"==Be)ae.push(Ke);else if("ligature"==Be)for(var Pe of Ke.children)if("note"==Pe.tagName||"rest"==Pe.tagName)ae.push(Pe);else if("choice"==Pe.tagName){var rt=Pe.getElementsByTagName("corr")[0];for(var Je of rt.children)"note"==Je.tagName||"rest"==Je.tagName?ae.push(Je):(console.log("This child of corr (within the choice tag in a ligature) is not a note/rest:"),console.log(Je),console.log("It is a "+Je.tagName))}else console.log("This child of ligature is not a note/rest/choice:"),console.log(Pe),console.log("It is a "+Pe.tagName);else if("choice"==Be)for(var Pe of(rt=Ke.getElementsByTagName("corr")[0]).children)"note"==Pe.tagName||"rest"==Pe.tagName?ae.push(Pe):(console.log("This child of corr is not a note/rest:"),console.log(Pe),console.log("It is a "+Pe.tagName));else console.log("Unexpected tagnme : "+Be+"\n(not a note, rest, ligature, or choice)\n")}!function $(re,W,ee,q,z){var we=function M(re){var W=[],ee=[];for(var q of re)if(q.hasAttribute("colored")){W.push(q);var z=q.getAttribute("dur");ee.includes(z)||(ee.push(z),console.log(z))}return[W,ee]}(re),xe=we[0],ye=function N(re,W,ee,q,z){return 3==re&&z.includes("maxima")?"Max":3==W&&(z.includes("longa")||z.includes("maxima"))?"L":3==ee&&(z.includes("brevis")||z.includes("longa")||z.includes("maxima"))?"B":3==q&&(z.includes("semibrevis")||z.includes("brevis")||z.includes("longa")||z.includes("maxima"))?"Sb":null}(W,ee,q,z,we[1]);if(console.log("Coloration level: "+ye),"Max"==ye)for(var ae of xe)"maxima"==ae.getAttribute("dur")&&(ae.setAttribute("num","3"),ae.setAttribute("numbase","2"));else if("L"==ye)for(var ae of xe)("longa"==ae.getAttribute("dur")||"maxima"==ae.getAttribute("dur"))&&(ae.setAttribute("num","3"),ae.setAttribute("numbase","2"));else if("B"==ye)for(var ae of xe)("brevis"==ae.getAttribute("dur")||"longa"==ae.getAttribute("dur")||"maxima"==ae.getAttribute("dur"))&&(ae.setAttribute("num","3"),ae.setAttribute("numbase","2"));else if("Sb"==ye)for(var ae of xe)("semibrevis"==ae.getAttribute("dur")||"brevis"==ae.getAttribute("dur")||"longa"==ae.getAttribute("dur")||"maxima"==ae.getAttribute("dur"))&&(ae.setAttribute("num","3"),ae.setAttribute("numbase","2"));else for(var ae of xe)ae.setAttribute("num","3"),ae.setAttribute("numbase","2")}(ae,q,ee,W,re);var Ot,tt,st,Te,hn,jn,it=[],wt=[],at=[],Gt=[];for(var It of ae){var Rn=It.getAttribute("dur");("semibrevis"==Rn||It.hasAttribute("colored"))&&it.push(ae.indexOf(It)),("brevis"==Rn||It.hasAttribute("colored"))&&(it.push(ae.indexOf(It)),wt.push(ae.indexOf(It))),("longa"==Rn||It.hasAttribute("colored"))&&(it.push(ae.indexOf(It)),wt.push(ae.indexOf(It)),at.push(ae.indexOf(It))),("maxima"==Rn||It.hasAttribute("colored"))&&(it.push(ae.indexOf(It)),wt.push(ae.indexOf(It)),at.push(ae.indexOf(It)),Gt.push(ae.indexOf(It)))}if(console.log("\nSEMIBREVE GEQ"),console.log(it+"\n"),!it.includes(0)&&0!=it.length){st=null,Te=ae[tt=it[0]];try{jn=ae[tt+1]}catch(_s){jn=null}hn=ae.slice(0,tt);var zn=null,Dt=Te.getAttribute("pname")+Te.getAttribute("oct")+" "+Te.getAttribute("dur"),Xt="";for(var gt of hn)Xt+="0 null"==(Gn=gt.getAttribute("pname")+gt.getAttribute("oct")+" "+gt.getAttribute("dur"))?gt.tagName+", ":Gn+", ";console.log("Delimited Sequence of Minims: "+zn+", "+Xt+Dt),ve(st,hn,Te,jn,re,xe,Me,ye)}for(var vi=0;vi<it.length-1;vi++){st=ae[Ot=it[vi]],Te=ae[tt=it[vi+1]];try{jn=ae[tt+1]}catch(vc){jn=null}for(var gt of(hn=ae.slice(Ot+1,tt),zn=st.getAttribute("pname")+st.getAttribute("oct")+" "+st.getAttribute("dur"),Dt=Te.getAttribute("pname")+Te.getAttribute("oct")+" "+Te.getAttribute("dur"),Xt="",hn))Xt+="0 null"==(Gn=gt.getAttribute("pname")+gt.getAttribute("oct")+" "+gt.getAttribute("dur"))?gt.tagName+", ":Gn+", ";console.log("Delimited Sequence of Minims: "+zn+", "+Xt+Dt),ve(st,hn,Te,jn,re,xe,Me,ye)}if(console.log("\nBREVE GEQ"),console.log(wt+"\n"),!wt.includes(0)&&0!=wt.length){st=null,Te=ae[tt=wt[0]];try{jn=ae[tt+1]}catch(vc){jn=null}for(var gt of(hn=ae.slice(0,tt),zn=null,Dt=Te.getAttribute("pname")+Te.getAttribute("oct")+" "+Te.getAttribute("dur"),Xt="",hn))Xt+="0 null"==(Gn=gt.getAttribute("pname")+gt.getAttribute("oct")+" "+gt.getAttribute("dur"))?gt.tagName+", ":Gn+", ";console.log("Delimited Sequence of Semibreves: "+zn+", "+Xt+Dt),oe(st,hn,Te,jn,re,W,xe,Me,ye)}for(vi=0;vi<wt.length-1;vi++){st=ae[Ot=wt[vi]],Te=ae[tt=wt[vi+1]];try{jn=ae[tt+1]}catch(ml){jn=null}for(var gt of(hn=ae.slice(Ot+1,tt),zn=st.getAttribute("pname")+st.getAttribute("oct")+" "+st.getAttribute("dur"),Dt=Te.getAttribute("pname")+Te.getAttribute("oct")+" "+Te.getAttribute("dur"),Xt="",hn))Xt+="0 null"==(Gn=gt.getAttribute("pname")+gt.getAttribute("oct")+" "+gt.getAttribute("dur"))?gt.tagName+", ":Gn+", ";console.log("Delimited Sequence of Semibreves: "+zn+", "+Xt+Dt),oe(st,hn,Te,jn,re,W,xe,Me,ye)}if(console.log("\nLONGA GEQ"),console.log(at+"\n"),0==at.length){for(var gt of(st=null,Te=null,zn=null,Dt=null,Xt="",hn=ae.slice(0,ae.length)))Xt+="0 null"==(Gn=gt.getAttribute("pname")+gt.getAttribute("oct")+" "+gt.getAttribute("dur"))?gt.tagName+", ":Gn+", ";console.log("Delimited Sequence of Breves: "+zn+", "+Xt+Dt),V(st,hn,Te,jn,re,W,ee,xe,Me,ye)}else{if(!at.includes(0)){st=null,Te=ae[tt=at[0]];try{jn=ae[tt+1]}catch(vc){jn=null}for(var gt of(hn=ae.slice(0,tt),zn=null,Dt=Te.getAttribute("pname")+Te.getAttribute("oct")+" "+Te.getAttribute("dur"),Xt="",hn))Xt+="0 null"==(Gn=gt.getAttribute("pname")+gt.getAttribute("oct")+" "+gt.getAttribute("dur"))?gt.tagName+", ":Gn+", ";console.log("Delimited Sequence of Breves: "+zn+", "+Xt+Dt),V(st,hn,Te,jn,re,W,ee,xe,Me,ye)}for(vi=0;vi<at.length-1;vi++){st=ae[Ot=at[vi]],Te=ae[tt=at[vi+1]];try{jn=ae[tt+1]}catch(ml){jn=null}for(var gt of(hn=ae.slice(Ot+1,tt),zn=st.getAttribute("pname")+st.getAttribute("oct")+" "+st.getAttribute("dur"),Dt=Te.getAttribute("pname")+Te.getAttribute("oct")+" "+Te.getAttribute("dur"),Xt="",hn))Xt+="0 null"==(Gn=gt.getAttribute("pname")+gt.getAttribute("oct")+" "+gt.getAttribute("dur"))?gt.tagName+", ":Gn+", ";console.log("Delimited Sequence of Breves: "+zn+", "+Xt+Dt),V(st,hn,Te,jn,re,W,ee,xe,Me,ye)}var ms=ae.length-1;if(!at.includes(ms)){for(var gt of(st=ae[Ot=at[at.length-1]],Te=null,jn=null,hn=ae.slice(Ot+1,ms+1),zn=st.getAttribute("pname")+st.getAttribute("oct")+" "+st.getAttribute("dur"),Dt=null,Xt="",hn)){var Gn;Xt+="0 null"==(Gn=gt.getAttribute("pname")+gt.getAttribute("oct")+" "+gt.getAttribute("dur"))?gt.tagName+", ":Gn+", "}console.log("Delimited Sequence of Breves: "+zn+", "+Xt+Dt),V(st,hn,Te,jn,re,W,ee,xe,Me,ye)}}!function be(re,W,ee,q,z){for(var we=["maxima","longa","brevis","semibrevis"],xe=[re,W,ee,q],Me=[],ye=0,ae=1*xe[0];ae%2==0;){Me.push(we[ye]),ye+=1;try{ae+=1*xe[ye]}catch(Je){break}}var Ke,Be,Pe,rt;if(0!=Me.length)if(Ke=z.getElementsByTagName("dot"),4==Me.length)for(Be of Ke)Be.setAttribute("form","aug"),(Pe=F(Be)).setAttribute("dur.quality","perfecta"),Pe.setAttribute("num","2"),Pe.setAttribute("numbase","3");else for(Be of Ke)rt=(Pe=F(Be)).getAttribute("dur"),Me.includes(rt)&&(Be.setAttribute("form","aug"),Pe.setAttribute("dur.quality","perfecta"),Pe.setAttribute("num","2"),Pe.setAttribute("numbase","3"))}(q,ee,W,re,we)}et.lining_up=re=>{for(var W=re.getElementsByTagName("staff"),ee=re.getElementsByTagName("staffDef"),q=0;q<ee.length;q++){console.log("\nVoice # "+(q+1)+" results:\n");var z=ee[q].getElementsByTagName("mensur")[0],we=z.getAttribute("prolatio"),xe=z.getAttribute("tempus"),Me=z.getAttribute("modusminor"),ye=z.getAttribute("modusmaior"),ae=W[q],Ke=Array.from(ae.getElementsByTagName("layer")[0].children);const it=Array.from(ae.getElementsByTagName("mensur"));if(0==it.length)Se(we,xe,Me,ye,Ke,ae);else{var Be,Pe;for(var Je of(Be=0,it))Pe=Ke.indexOf(Je),Se(we,xe,Me,ye,Ke.slice(Be,Pe),ae),Be=Pe+1,we=Je.getAttribute("prolatio"),xe=Je.getAttribute("tempus"),Me=Je.getAttribute("modusminor"),ye=Je.getAttribute("modusmaior");Se(we,xe,Me,ye,Ke.slice(Be),ae)}}return function Z(re){const W=re.getElementsByTagName("dot");for(var ee of W)ee.hasAttribute("form")&&"perf"==ee.getAttribute("form")&&ee.setAttribute("form","div")}(re),re}},382:(Ft,et)=>{function Fe(me,K){const se=Array.from(me.getElementsByTagName("clef")),H=se[0];for(var Y of H.getAttributeNames())if("xml:id"!=Y){var de=H.getAttribute(Y);K.setAttribute("clef."+Y,de)}var he=H.parentElement;he.removeChild(H);for(var ve=1;ve<se.length;ve++){var oe=se[ve],V=se[ve-1];oe.getAttribute("line")==V.getAttribute("line")&&oe.getAttribute("shape")==V.getAttribute("shape")&&(he=oe.parentElement).removeChild(oe)}}et.merge=me=>{const K=me.documentElement,se=K.getElementsByTagName("mdiv")[0],H=me.createElementNS("http://www.music-encoding.org/ns/mei","score");se.appendChild(H);const Y=me.createElementNS("http://www.music-encoding.org/ns/mei","scoreDef");Y.setAttribute("midi.bpm","600"),H.appendChild(Y);const de=me.createElementNS("http://www.music-encoding.org/ns/mei","staffGrp");de.setAttribute("symbol","bracket"),Y.appendChild(de);const he=K.getElementsByTagName("staffDef"),ve=Array.from(he);for(var oe of ve){de.appendChild(oe);var V=me.createElementNS("http://www.music-encoding.org/ns/mei","label");V.textContent=oe.getAttribute("label"),oe.insertBefore(V,oe.children[0]),oe.removeAttribute("label")}const N=me.createElementNS("http://www.music-encoding.org/ns/mei","section");H.appendChild(N);const M=K.getElementsByTagName("staff"),$=Array.from(M);for(var Z of $)N.appendChild(Z);se.removeChild(K.getElementsByTagName("parts")[0]),function Ve(me){const K=Array.from(me.getElementsByTagName("pb")),se=Array.from(me.getElementsByTagName("sb"));for(var Y of K)Y.parentElement.removeChild(Y);for(var de of se)de.parentElement.removeChild(de)}(me);for(var be=0;be<$.length;be++)oe=ve[be],(Z=$[be]).setAttribute("n",be+1+""),oe.setAttribute("n",be+1+""),Fe(Z,oe);return 0!=me.getElementsByTagName("dir").length&&function P(me){const K=me.getElementsByTagName("dir")[0],se=K.parentElement,H=se.getElementsByTagName("layer")[0];var Y=K.getAttribute("plist").split(" "),de=Y[0],he=Y[1],ve=K.getAttribute("n"),oe=function m(me,K,se){for(var H=me.createNSResolver(null==me.ownerDocument?me.documentElement:me.ownerDocument.documentElement),Y=me.evaluate("//*[@xml:id='"+K+"']",me,H,window.XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,de=Array.from([Y]),he=Y.nextSibling;he.getAttribute("xml:id")!=se;)"clef"!=he.tagName&&de.push(he),he=he.nextSibling;return de.push(he),de}(me,de.slice(1),he.slice(1));(function F(me,K,se){var H,Y,de,he,ve,oe,V,N=K[K.length-1];try{H=N.nextSibling,Y=!1}catch(M){Y=!0}if(Y)for(de=0;de<se;de++)for(he of K)for(V of(ve=he.cloneNode(!0),oe=he.getAttribute("xml:id"),ve.setAttribute("copyof","#"+oe),ve.setAttribute("xml:id",oe+"_"+(de+1)),me.appendChild(ve),ve.querySelectorAll("*")))oe=V.getAttribute("xml:id"),V.setAttribute("copyof","#"+oe),V.setAttribute("xml:id",oe+"_"+(de+1));else for(de=0;de<se;de++)for(he of K)for(V of(ve=he.cloneNode(!0),oe=he.getAttribute("xml:id"),ve.setAttribute("copyof","#"+oe),ve.setAttribute("xml:id",oe+"_"+(de+1)),me.insertBefore(ve,H),ve.querySelectorAll("*")))oe=V.getAttribute("xml:id"),V.setAttribute("copyof","#"+oe),V.setAttribute("xml:id",oe+"_"+(de+1))})(H,oe,ve),se.removeChild(K)}(me),me}},960:(Ft,et,Ve)=>{const Fe=Ve(382),m=Ve(422),F=Ve(30),P=Ve(653);Ft.exports={merge:Fe.merge,ArsAntiqua:m,ArsNova:F,refineScore:P.refine_score,PostProcessing:P}},653:(Ft,et)=>{function m(K,se){var H=se.nextElementSibling,Y=se.parentElement;null==H?"corr"==Y.tagName?m(K,Y.parentElement):Y.appendChild(K):"dot"==H.tagName?m(K,H):Y.insertBefore(K,H)}et.refine_score=(K,se,H)=>{if("None"===(se&&function Ve(K){const se=Array.from(K.getElementsByTagName("staffDef"));for(var H of se)switch(H.getAttribute("clef.shape")+H.getAttribute("clef.line")){case"C1":case"C2":H.setAttribute("clef.shape","G"),H.setAttribute("clef.line","2");break;case"C3":case"C4":case"C5":case"F1":case"F2":case"F3":H.setAttribute("clef.shape","G"),H.setAttribute("clef.line","2"),H.setAttribute("clef.dis","8"),H.setAttribute("clef.dis.place","below");break;case"F4":case"F5":H.setAttribute("clef.shape","F"),H.setAttribute("clef.line","4")}const V=Array.from(K.getElementsByTagName("clef"));for(var N of V)N.parentElement.removeChild(N)}(K),H));else{for(var Y of(function Fe(K){for(var se=K.getElementsByTagName("staff"),H=K.getElementsByTagName("staffDef"),Y=0;Y<H.length;Y++){var de=H[Y].getElementsByTagName("mensur")[0],he=se[Y],ve=de.getAttribute("modusminor"),oe=de.getAttribute("tempus"),V=de.getAttribute("prolatio");null==oe&&(oe=3),null==V&&(V=3);var M,N=Array.from(he.getElementsByTagName("note")).concat(Array.from(he.getElementsByTagName("rest")));for(var $ of N){switch($.getAttribute("dur")){case"longa":if(M=ve*oe*V,$.hasAttribute("dur.quality"))switch($.getAttribute("dur.quality")){case"perfecta":M=3*oe*V;break;case"imperfecta":M=2*oe*V;break;case"duplex":M*=2}else $.hasAttribute("num")&&$.hasAttribute("numbase")&&(M=M*$.getAttribute("numbase")/$.getAttribute("num"));break;case"brevis":if(M=oe*V,$.hasAttribute("dur.quality"))switch($.getAttribute("dur.quality")){case"perfecta":M=3*V;break;case"imperfecta":M=2*V;break;case"altera":M*=2}else $.hasAttribute("num")&&$.hasAttribute("numbase")&&(M=M*$.getAttribute("numbase")/$.getAttribute("num"));break;case"semibrevis":if(M=V,$.hasAttribute("dur.quality"))switch($.getAttribute("dur.quality")){case"minor":M=V;break;case"perfecta":M=3;break;case"imperfecta":M=2;break;case"maior":case"altera":M*=2}else $.hasAttribute("num")&&$.hasAttribute("numbase")&&(M=M*$.getAttribute("numbase")/$.getAttribute("num"));break;case"minima":if(M=1,$.hasAttribute("dur.quality"))switch($.getAttribute("dur.quality")){case"perfecta":M=1.5;break;case"imperfecta":M=1;break;case"altera":M*=2}else $.hasAttribute("num")&&$.hasAttribute("numbase")&&(M=M*$.getAttribute("numbase")/$.getAttribute("num"));break;case"semiminima":if(M=.5,$.hasAttribute("dur.quality"))switch($.getAttribute("dur.quality")){case"perfecta":M=.75;break;case"imperfecta":M=.5}else $.hasAttribute("num")&&$.hasAttribute("numbase")&&(M=M*$.getAttribute("numbase")/$.getAttribute("num"));break;case"fusa":if(M=.25,$.hasAttribute("dur.quality"))switch($.getAttribute("dur.quality")){case"perfecta":M=.375;break;case"imperfecta":M=.25}else $.hasAttribute("num")&&$.hasAttribute("numbase")&&(M=M*$.getAttribute("numbase")/$.getAttribute("num"));break;case"semifusa":M=.125,$.hasAttribute("dur.quality")?"imperfecta"===$.getAttribute("dur.quality")&&(M=.125):$.hasAttribute("num")&&$.hasAttribute("numbase")&&(M=M*$.getAttribute("numbase")/$.getAttribute("num"))}$.setAttribute("sb_value",""+M/V)}}}(K),function F(K,se){for(var Y,de,he,ve=K.getElementsByTagName("staff"),oe=K.getElementsByTagName("staffDef"),V=0;V<oe.length;V++){var N=oe[V].getElementsByTagName("mensur")[0],$=ve[V].children[0],Z=Array.from([]);for(var be of $.children)switch(be.tagName){case"note":case"rest":Z.push(be);break;case"ligature":for(Y of be.children)switch(Y.tagName){case"note":case"rest":Z.push(Y);break;case"choice":for(he of Y.getElementsByTagName("corr")[0].children)switch(he.tagName){case"note":case"rest":Z.push(he)}}break;case"choice":for(de of be.getElementsByTagName("corr")[0].children)switch(de.tagName){case"note":case"rest":Z.push(de)}}var Se,ot=N.getAttribute("modusminor"),re=N.getAttribute("tempus"),W=N.getAttribute("prolatio");switch(null==re&&(re=3),null==W&&(W=3),se){case"semibrevis":Se=1;break;case"brevis":Se=re;break;case"longa":Se=ot*re}console.log("\nVoice # "+(V+1)+": bar-length = "+Se+" Sb");var ee=0;for(var q of Z)if(ee+=parseFloat(q.getAttribute("sb_value")),console.log(q.tagName+" "+q.getAttribute("dur")+" "+q.getAttribute("sb_value")),console.log(ee),Math.abs(ee/Se-Math.round(ee/Se))<1e-5){var z=K.createElementNS("http://www.music-encoding.org/ns/mei","barLine");z.setAttribute("form","dashed"),m(z,q),console.log("---- barline ----")}}}(K,H),K.getElementsByTagName("note")))Y.removeAttribute("sb_value");for(var de of K.getElementsByTagName("rest"))de.removeAttribute("sb_value")}return K},et.replace_ligatures_by_brackets=K=>{const se=K.getElementsByTagName("section")[0],H=Array.from(K.getElementsByTagName("ligature"));for(var Y of H){var de=Y.parentElement,he=Array.from(Y.children);for(var ve of he)de.insertBefore(ve,Y);var oe=K.createElementNS("http://www.music-encoding.org/ns/mei","bracketSpan");oe.setAttribute("xml:id",Y.getAttribute("xml:id"));var V=he[0];"choice"==V.tagName&&(V=V.getElementsByTagName("corr")[0].children[0]);var N=he[he.length-1];if("choice"==N.tagName){var M=N.getElementsByTagName("corr")[0].children;N=M[M.length-1]}oe.setAttribute("startid","#"+V.getAttribute("xml:id")),oe.setAttribute("endid","#"+N.getAttribute("xml:id")),oe.setAttribute("func","ligature"),oe.setAttribute("lform","solid"),de.removeChild(Y),se.appendChild(oe)}},et.remove_num_and_numbase=K=>{const se=K.getElementsByTagName("note");for(var H of se)H.hasAttribute("dur.quality")&&(H.removeAttribute("num"),H.removeAttribute("numbase"))}},444:(Ft,et,Ve)=>{var Fe=Ve(542),m=Ve(926),F=m;F.v1=Fe,F.v4=m,Ft.exports=F},805:Ft=>{for(var et=[],Ve=0;Ve<256;++Ve)et[Ve]=(Ve+256).toString(16).substr(1);Ft.exports=function Fe(m,F){var P=F||0;return[et[m[P++]],et[m[P++]],et[m[P++]],et[m[P++]],"-",et[m[P++]],et[m[P++]],"-",et[m[P++]],et[m[P++]],"-",et[m[P++]],et[m[P++]],"-",et[m[P++]],et[m[P++]],et[m[P++]],et[m[P++]],et[m[P++]],et[m[P++]]].join("")}},142:Ft=>{var et="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(et){var Ve=new Uint8Array(16);Ft.exports=function(){return et(Ve),Ve}}else{var Fe=new Array(16);Ft.exports=function(){for(var P,F=0;F<16;F++)0==(3&F)&&(P=4294967296*Math.random()),Fe[F]=P>>>((3&F)<<3)&255;return Fe}}},542:(Ft,et,Ve)=>{var F,P,Fe=Ve(142),m=Ve(805),te=0,me=0;Ft.exports=function K(se,H,Y){var de=H&&Y||0,he=H||[],ve=(se=se||{}).node||F,oe=void 0!==se.clockseq?se.clockseq:P;if(null==ve||null==oe){var V=Fe();null==ve&&(ve=F=[1|V[0],V[1],V[2],V[3],V[4],V[5]]),null==oe&&(oe=P=16383&(V[6]<<8|V[7]))}var N=void 0!==se.msecs?se.msecs:(new Date).getTime(),M=void 0!==se.nsecs?se.nsecs:me+1,$=N-te+(M-me)/1e4;if($<0&&void 0===se.clockseq&&(oe=oe+1&16383),($<0||N>te)&&void 0===se.nsecs&&(M=0),M>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");te=N,me=M,P=oe;var Z=(1e4*(268435455&(N+=122192928e5))+M)%4294967296;he[de++]=Z>>>24&255,he[de++]=Z>>>16&255,he[de++]=Z>>>8&255,he[de++]=255&Z;var be=N/4294967296*1e4&268435455;he[de++]=be>>>8&255,he[de++]=255&be,he[de++]=be>>>24&15|16,he[de++]=be>>>16&255,he[de++]=oe>>>8|128,he[de++]=255&oe;for(var Se=0;Se<6;++Se)he[de+Se]=ve[Se];return H||m(he)}},926:(Ft,et,Ve)=>{var Fe=Ve(142),m=Ve(805);Ft.exports=function F(P,te,me){var K=te&&me||0;"string"==typeof P&&(te="binary"===P?new Array(16):null,P=null);var se=(P=P||{}).random||(P.rng||Fe)();if(se[6]=15&se[6]|64,se[8]=63&se[8]|128,te)for(var H=0;H<16;++H)te[K+H]=se[H];return te||m(se)}},203:Ft=>{function et(F){var P="    ";if(isNaN(parseInt(F)))P=F;else switch(F){case 1:P=" ";break;case 2:P="  ";break;case 3:P="   ";break;case 4:P="    ";break;case 5:P="     ";break;case 6:P="      ";break;case 7:P="       ";break;case 8:P="        ";break;case 9:P="         ";break;case 10:P="          ";break;case 11:P="           ";break;case 12:P="            "}for(var te=["\n"],me=0;me<100;me++)te.push(te[me]+P);return te}function Ve(){this.step="    ",this.shift=et(this.step)}function Fe(F,P){return P-(F.replace(/\(/g,"").length-F.replace(/\)/g,"").length)}function m(F,P){return F.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+P+P+"AND ").replace(/ BETWEEN /gi,"~::~"+P+"BETWEEN ").replace(/ CASE /gi,"~::~"+P+"CASE ").replace(/ ELSE /gi,"~::~"+P+"ELSE ").replace(/ END /gi,"~::~"+P+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+P+"ON ").replace(/ OR /gi,"~::~"+P+P+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+P+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+P).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+P+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}Ve.prototype.xml=function(F,P){var te=F.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),me=te.length,K=!1,se=0,H="",Y=0,de=P?et(P):this.shift;for(Y=0;Y<me;Y++)te[Y].search(/<!/)>-1?(H+=de[se]+te[Y],K=!0,(te[Y].search(/-->/)>-1||te[Y].search(/\]>/)>-1||te[Y].search(/!DOCTYPE/)>-1)&&(K=!1)):te[Y].search(/-->/)>-1||te[Y].search(/\]>/)>-1?(H+=te[Y],K=!1):/^<\w/.exec(te[Y-1])&&/^<\/\w/.exec(te[Y])&&/^<[\w:\-\.\,]+/.exec(te[Y-1])==/^<\/[\w:\-\.\,]+/.exec(te[Y])[0].replace("/","")?(H+=te[Y],K||se--):te[Y].search(/<\w/)>-1&&-1==te[Y].search(/<\//)&&-1==te[Y].search(/\/>/)?H=H+=K?te[Y]:de[se++]+te[Y]:te[Y].search(/<\w/)>-1&&te[Y].search(/<\//)>-1?H=H+=K?te[Y]:de[se]+te[Y]:te[Y].search(/<\//)>-1?H=H+=K?te[Y]:de[--se]+te[Y]:te[Y].search(/\/>/)>-1?H=H+=K?te[Y]:de[se]+te[Y]:te[Y].search(/<\?/)>-1||te[Y].search(/xmlns\:/)>-1||te[Y].search(/xmlns\=/)>-1?H+=de[se]+te[Y]:H+=te[Y];return"\n"==H[0]?H.slice(1):H},Ve.prototype.json=function(F,te){return te=te||this.step,"undefined"==typeof JSON?F:"string"==typeof F?JSON.stringify(JSON.parse(F),null,te):"object"==typeof F?JSON.stringify(F,null,te):F},Ve.prototype.css=function(F,P){var te=F.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),me=te.length,K=0,se="",H=0,Y=P?et(P):this.shift;for(H=0;H<me;H++)/\{/.exec(te[H])?se+=Y[K++]+te[H]:/\}/.exec(te[H])?se+=Y[--K]+te[H]:(/\*\\/.exec(te[H]),se+=Y[K]+te[H]);return se.replace(/^\n{1,}/,"")},Ve.prototype.sql=function(F,P){var te=F.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),me=te.length,K=[],se=0,H=this.step,he=0,ve="",oe=0,V=P?et(P):this.shift;for(oe=0;oe<me;oe++)K=K.concat(oe%2?te[oe]:m(te[oe],H));for(me=K.length,oe=0;oe<me;oe++)he=Fe(K[oe],he),/\s{0,}\s{0,}SELECT\s{0,}/.exec(K[oe])&&(K[oe]=K[oe].replace(/\,/g,",\n"+H+H)),/\s{0,}\s{0,}SET\s{0,}/.exec(K[oe])&&(K[oe]=K[oe].replace(/\,/g,",\n"+H+H)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(K[oe])?ve+=V[++se]+K[oe]:/\'/.exec(K[oe])?(he<1&&se&&se--,ve+=K[oe]):(ve+=V[se]+K[oe],he<1&&se&&se--);return ve.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},Ve.prototype.xmlmin=function(F,P){return(P?F:F.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},Ve.prototype.jsonmin=function(F){return"undefined"==typeof JSON?F:JSON.stringify(JSON.parse(F),null,0)},Ve.prototype.cssmin=function(F,P){return(P?F:F.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},Ve.prototype.sqlmin=function(F){return F.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},Ft.exports=new Ve},928:function(Ft,et){!function(Ve){"use strict";var m={s:1,n:0,d:1};function F(V,N){if(isNaN(V=parseInt(V,10)))throw ve();return V*N}function P(V,N){if(0===N)throw he();var M=Object.create(de.prototype);M.s=V<0?-1:1;var $=Y(V=V<0?-V:V,N);return M.n=V/$,M.d=N/$,M}function te(V){for(var N={},M=V,$=2,Z=4;Z<=M;){for(;M%$==0;)M/=$,N[$]=(N[$]||0)+1;Z+=1+2*$++}return M!==V?M>1&&(N[M]=(N[M]||0)+1):N[V]=(N[V]||0)+1,N}var me=function(V,N){var Me,M=0,$=1,Z=1,be=0,Se=0,ot=0,re=1,W=1,ee=0,q=1,z=1,we=1,xe=1e7;if(null!=V)if(void 0!==N){if(Z=(M=V)*($=N),M%1!=0||$%1!=0)throw oe()}else switch(typeof V){case"object":if("d"in V&&"n"in V)M=V.n,$=V.d,"s"in V&&(M*=V.s);else{if(!(0 in V))throw ve();M=V[0],1 in V&&($=V[1])}Z=M*$;break;case"number":if(V<0&&(Z=V,V=-V),V%1==0)M=V;else if(V>0){for(V>=1&&(V/=W=Math.pow(10,Math.floor(1+Math.log(V)/Math.LN10)));q<=xe&&we<=xe;){if(V===(Me=(ee+z)/(q+we))){q+we<=xe?(M=ee+z,$=q+we):we>q?(M=z,$=we):(M=ee,$=q);break}V>Me?(ee+=z,q+=we):(z+=ee,we+=q),q>xe?(M=z,$=we):(M=ee,$=q)}M*=W}else(isNaN(V)||isNaN(N))&&($=M=NaN);break;case"string":if(null===(q=V.match(/\d+|./g)))throw ve();if("-"===q[ee]?(Z=-1,ee++):"+"===q[ee]&&ee++,q.length===ee+1?Se=F(q[ee++],Z):"."===q[ee+1]||"."===q[ee]?("."!==q[ee]&&(be=F(q[ee++],Z)),(1+ ++ee===q.length||"("===q[ee+1]&&")"===q[ee+3]||"'"===q[ee+1]&&"'"===q[ee+3])&&(Se=F(q[ee],Z),re=Math.pow(10,q[ee].length),ee++),("("===q[ee]&&")"===q[ee+2]||"'"===q[ee]&&"'"===q[ee+2])&&(ot=F(q[ee+1],Z),W=Math.pow(10,q[ee+1].length)-1,ee+=3)):"/"===q[ee+1]||":"===q[ee+1]?(Se=F(q[ee],Z),re=F(q[ee+2],1),ee+=3):"/"===q[ee+3]&&" "===q[ee+1]&&(be=F(q[ee],Z),Se=F(q[ee+2],Z),re=F(q[ee+4],1),ee+=5),q.length<=ee){Z=M=ot+($=re*W)*be+W*Se;break}default:throw ve()}if(0===$)throw he();m.s=Z<0?-1:1,m.n=Math.abs(M),m.d=Math.abs($)};function Y(V,N){if(!V)return N;if(!N)return V;for(;;){if(!(V%=N))return N;if(!(N%=V))return V}}function de(V,N){if(me(V,N),!(this instanceof de))return P(m.s*m.n,m.d);V=Y(m.d,m.n),this.s=m.s,this.n=m.n/V,this.d=m.d/V}var he=function(){return new Error("Division by Zero")},ve=function(){return new Error("Invalid argument")},oe=function(){return new Error("Parameters must be integer")};de.prototype={s:1,n:0,d:1,abs:function(){return P(this.n,this.d)},neg:function(){return P(-this.s*this.n,this.d)},add:function(V,N){return me(V,N),P(this.s*this.n*m.d+m.s*this.d*m.n,this.d*m.d)},sub:function(V,N){return me(V,N),P(this.s*this.n*m.d-m.s*this.d*m.n,this.d*m.d)},mul:function(V,N){return me(V,N),P(this.s*m.s*this.n*m.n,this.d*m.d)},div:function(V,N){return me(V,N),P(this.s*m.s*this.n*m.d,this.d*m.n)},clone:function(){return P(this.s*this.n,this.d)},mod:function(V,N){if(isNaN(this.n)||isNaN(this.d))return new de(NaN);if(void 0===V)return P(this.s*this.n%this.d,1);if(me(V,N),0===m.n&&0===this.d)throw he();return P(this.s*(m.d*this.n)%(m.n*this.d),m.d*this.d)},gcd:function(V,N){return me(V,N),P(Y(m.n,this.n)*Y(m.d,this.d),m.d*this.d)},lcm:function(V,N){return me(V,N),0===m.n&&0===this.n?P(0,1):P(m.n*this.n,Y(m.n,this.n)*Y(m.d,this.d))},ceil:function(V){return V=Math.pow(10,V||0),isNaN(this.n)||isNaN(this.d)?new de(NaN):P(Math.ceil(V*this.s*this.n/this.d),V)},floor:function(V){return V=Math.pow(10,V||0),isNaN(this.n)||isNaN(this.d)?new de(NaN):P(Math.floor(V*this.s*this.n/this.d),V)},round:function(V){return V=Math.pow(10,V||0),isNaN(this.n)||isNaN(this.d)?new de(NaN):P(Math.round(V*this.s*this.n/this.d),V)},roundTo:function(V,N){return me(V,N),P(this.s*Math.round(this.n*m.d/(this.d*m.n))*m.n,m.d)},inverse:function(){return P(this.s*this.d,this.n)},pow:function(V,N){if(me(V,N),1===m.d)return m.s<0?P(Math.pow(this.s*this.d,m.n),Math.pow(this.n,m.n)):P(Math.pow(this.s*this.n,m.n),Math.pow(this.d,m.n));if(this.s<0)return null;var M=te(this.n),$=te(this.d),Z=1,be=1;for(var Se in M)if("1"!==Se){if("0"===Se){Z=0;break}if(M[Se]*=m.n,M[Se]%m.d!=0)return null;M[Se]/=m.d,Z*=Math.pow(Se,M[Se])}for(var Se in $)if("1"!==Se){if($[Se]*=m.n,$[Se]%m.d!=0)return null;$[Se]/=m.d,be*=Math.pow(Se,$[Se])}return m.s<0?P(be,Z):P(Z,be)},equals:function(V,N){return me(V,N),this.s*this.n*m.d==m.s*m.n*this.d},compare:function(V,N){me(V,N);var M=this.s*this.n*m.d-m.s*m.n*this.d;return(0<M)-(M<0)},simplify:function(V){if(isNaN(this.n)||isNaN(this.d))return this;V=V||.001;for(var N=this.abs(),M=N.toContinued(),$=1;$<M.length;$++){for(var Z=P(M[$-1],1),be=$-2;be>=0;be--)Z=Z.inverse().add(M[be]);if(Math.abs(Z.sub(N).valueOf())<V)return Z.mul(this.s)}return this},divisible:function(V,N){return me(V,N),!(!(m.n*this.d)||this.n*m.d%(m.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(V){var N,M="",$=this.n,Z=this.d;return this.s<0&&(M+="-"),1===Z?M+=$:(V&&(N=Math.floor($/Z))>0&&(M+=N,M+=" ",$%=Z),M+=$,M+="/",M+=Z),M},toLatex:function(V){var N,M="",$=this.n,Z=this.d;return this.s<0&&(M+="-"),1===Z?M+=$:(V&&(N=Math.floor($/Z))>0&&(M+=N,$%=Z),M+="\\frac{",M+=$,M+="}{",M+=Z,M+="}"),M},toContinued:function(){var V,N=this.n,M=this.d,$=[];if(isNaN(N)||isNaN(M))return $;do{$.push(Math.floor(N/M)),V=N%M,N=M,M=V}while(1!==N);return $},toString:function(V){var N=this.n,M=this.d;if(isNaN(N)||isNaN(M))return"NaN";V=V||15;var $=function se(V,N){for(;N%2==0;N/=2);for(;N%5==0;N/=5);if(1===N)return 0;for(var M=10%N,$=1;1!==M;$++)if(M=10*M%N,$>2e3)return 0;return $}(0,M),Z=function H(V,N,M){for(var $=1,Z=function K(V,N,M){for(var $=1;N>0;V=V*V%M,N>>=1)1&N&&($=$*V%M);return $}(10,M,N),be=0;be<300;be++){if($===Z)return be;$=10*$%N,Z=10*Z%N}return 0}(0,M,$),be=this.s<0?"-":"";if(be+=N/M|0,N%=M,(N*=10)&&(be+="."),$){for(var Se=Z;Se--;)be+=N/M|0,N%=M,N*=10;for(be+="(",Se=$;Se--;)be+=N/M|0,N%=M,N*=10;be+=")"}else for(Se=V;N&&Se--;)be+=N/M|0,N%=M,N*=10;return be}},Object.defineProperty(et,"__esModule",{value:!0}),et.default=de,Ft.exports=de}()}},Ft=>{Ft(Ft.s=63)}]);